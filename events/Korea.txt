add_namespace = korea

### China Demands Our Withdrawal from the Korean Peninsula
country_event = {
	id = korea.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event korea.1" }

	title = korea.1.t
	desc = korea.1.d
	picture = GFX_CHI_generic

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = korea.1.a #This demand is ludicrous!
		add_political_power = 25
		ai_chance = {
			factor = 40
		}
		log = "[GetDateText]: [This.GetName]: korea.1.a executed"
	}
	
	option = {
		name = korea.1.b #It is better for us to concede...
		diplomatic_relation = {
			country = KOR
			relation = guarantee
			active = no
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 20
				USA = {
					set_temp_variable = { temp_idx = -1 }
					any_of = {
						array = influence_array
						value = v
						index = i
						if = {
							limit = { var:v = { tag = CHI } }
							set_temp_variable = { temp_idx = i }
							always = yes
						}
						else = { always = no }
					}
					check_variable = { temp_idx > -1 }
					check_variable = { influence_array_calc^temp_idx > 0.25 }
				}
			}
			modifier = {
				factor = 2
				USA = {
					set_temp_variable = { temp_idx = -1 }
					any_of = {
						array = influence_array
						value = v
						index = i
						if = {
							limit = { var:v = { tag = CHI } }
							set_temp_variable = { temp_idx = i }
							always = yes
						}
						else = { always = no }
					}
					check_variable = { temp_idx > -1 }
					check_variable = { influence_array_calc^temp_idx > 0.4 }
				}
			}
		}
		log = "[GetDateText]: [This.GetName]: korea.1.b executed"
	}
}

### China is encouraging us to start economic reforms
country_event = {
	id = korea.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event korea.2" }

	title = korea.2.t
	desc = korea.2.d
	picture = GFX_united_states_dollar

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = korea.2.a #Now is not the time for reform.
		CHI = {
			add_opinion_modifier = {
				target = NKO
				modifier = diplomatic_distance
			}
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				has_country_leader = {
					name = "Kim Jong-Un"
					ruling_only = yes
				}
			}
			modifier = {
				factor = 2
				communism > 0.9
			}
		}
		log = "[GetDateText]: [This.GetName]: korea.2.a executed"
	}
	
	option = {
		name = korea.2.b #Initiate minor reforms.
		swap_ideas = {
			remove_idea = Planned_Economy
			add_idea = Socialist_Market_Economy_planned_2
		}
		add_stability = -0.02
		every_country = { news_event = { id = korea.3 } }
		ai_chance = {
			factor = 60
			modifier = {
				factor = 2
				NKO = {
					set_temp_variable = { temp_idx = -1 }
					any_of = {
						array = influence_array
						value = v
						index = i
						if = {
							limit = { var:v = { tag = KOR } }
							set_temp_variable = { temp_idx = i }
							always = yes
						}
						else = { always = no }
					}
					check_variable = { temp_idx > -1 }
					check_variable = { influence_array_calc^temp_idx > 0.25 }
				}
			}
			modifier = {
				factor = 2
				communism < 0.8
			}
		}
		log = "[GetDateText]: [This.GetName]: korea.2.b executed"
	}
	
	option = {
		name = korea.2.c #Initiate moderate reforms.
		swap_ideas = {
			remove_idea = Planned_Economy
			add_idea = Socialist_Market_Economy
		}
		add_stability = -0.05
		every_country = { news_event = { id = korea.3 } }
		ai_chance = {
			factor = 40
			modifier = {
				factor = 3
				NKO = {
					set_temp_variable = { temp_idx = -1 }
					any_of = {
						array = influence_array
						value = v
						index = i
						if = {
							limit = { var:v = { tag = KOR } }
							set_temp_variable = { temp_idx = i }
							always = yes
						}
						else = { always = no }
					}
					check_variable = { temp_idx > -1 }
					check_variable = { influence_array_calc^temp_idx > 0.4 }
				}
			}
			modifier = {
				factor = 2
				communism < 0.6
			}
		}
		log = "[GetDateText]: [This.GetName]: korea.2.c executed"
	}
	
	option = {
		name = korea.2.e #Initiate major reforms.
		swap_ideas = {
			remove_idea = Planned_Economy
			add_idea = Socialist_Market_Economy_free_2
		}
		add_stability = -0.1
		every_country = { news_event = { id = korea.3 } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 4
				NKO = {
					set_temp_variable = { temp_idx = -1 }
					any_of = {
						array = influence_array
						value = v
						index = i
						if = {
							limit = { var:v = { tag = KOR } }
							set_temp_variable = { temp_idx = i }
							always = yes
						}
						else = { always = no }
					}
					check_variable = { temp_idx > -1 }
					check_variable = { influence_array_calc^temp_idx > 0.5 }
				}
			}
			modifier = {
				factor = 2
				communism < 0.4
			}
		}
		log = "[GetDateText]: [This.GetName]: korea.2.e executed"
	}
}

### [NKO.GetLeader] has announced fresh economic reforms
news_event = {
	id = korea.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event korea.3" }

	title = korea.3.t
	desc = korea.3.d
	picture = GFX_trade_agreement

	is_triggered_only = yes

	option = {
		name = korea.3.a #Encouraging news!
		log = "[GetDateText]: [This.GetName]: korea.3.a executed"
	}
}