add_namespace = Yemen
add_namespace = YEM_snakes
add_namespace = YEM_AQY
add_namespace = YEM_HOU
add_namespace = YEM_funds
add_namespace = YEM_pearl
add_namespace = YEM_jeddah
add_namespace = YEM_jeddah_news
add_namespace = YEM_party_leaders
add_namespace = YEM_natural_disasters
add_namespace = YEM_socotri_crisis
add_namespace = YEM_aqy_events
add_namespace = YEM_hou_flavor

### Yemeni civil war cleanup events ###

#Give the winner YEM cosmetic tag
country_event = {
	id = Yemen.0
	hidden = yes
	trigger = {
		has_start_date > 2016.1.1
		OR = {
			AND = {
				tag = HOU
				NOT = {
					country_exists = YEM
					country_exists = AQY
				}
				has_war = no
			}
			AND = {
				tag = YEM
				NOT = {
					country_exists = HOU
					country_exists = AQY
				}
				has_war = no
			}
			AND = {
				tag = AQY
				NOT = {
					country_exists = HOU
					country_exists = YEM
				}
				has_war = no
			}
		}
		NOT = { has_global_flag = Yemen_Civil_War_Over }
	}

	immediate = {
		#Civil war is over
		set_global_flag = Yemen_Civil_War_Over
		#Clear core status
		194 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		195 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		196 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		197 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		198 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		199 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		200 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		952 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		951 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		#Make the winner Yemen
		if = {
			limit = {
				OR = {
					tag = HOU
					tag = AQY
				}
			}
			set_cosmetic_tag = YEM
			set_country_flag = dynamic_flag
			set_country_flag = dynamic_rebel_flag
			remove_ideas = Non_State_Actor
		}
		if = {
			limit = {
				tag = AQY
			}
			add_ideas = intervention_neo_imperialism
		}
		add_state_core = 194
		add_state_core = 195
		add_state_core = 196
		add_state_core = 197
		add_state_core = 198
		add_state_core = 199
		add_state_core = 200
		add_state_core = 951
		add_state_core = 952
		set_capital = { state = 195 }
		subtract_from_variable = { threat_level = 30 }
		clamp_threat = yes
	}

	mean_time_to_happen = {
		days = 2
	}
}

#Al-Qaeda in Yemen is beaten. Force a peace deal as not to drag the war on forever
country_event = {
	id = Yemen.1

	hidden = yes

	trigger = {
		country_exists = AQY
		AQY = {
			has_capitulated = yes
			is_in_faction = yes
		}
		NOT = { has_global_flag = Yemen_Civil_War_Over } 	#No special rules if Al-Qaeda has already won Yemeni civil war
	}

	immediate = {
		remove_from_faction = AQY
	}

	mean_time_to_happen = {
		days = 2
	}
}

#Recreate Yemen in case it has been annexed
country_event = {
	id = Yemen.2

	hidden = yes

	trigger = {
		NOT = {
			country_exists = YEM
			country_exists = AQY
			country_exists = HOU
		}
		NOT = { 195 = { is_core_of = YEM } }
	}

	immediate = {
		#Clear core status
		194 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		195 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		196 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		197 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		198 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		199 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		200 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		952 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		951 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		YEM = {
			add_state_core = 194
			add_state_core = 195
			add_state_core = 196
			add_state_core = 197
			add_state_core = 198
			add_state_core = 199
			add_state_core = 200
			add_state_core = 951
			add_state_core = 952
			set_capital = { state = 195 }
		}
	}

	mean_time_to_happen = {
		days = 2
	}
}

### Yemeni Post Civil War Events ###

# General Civil War Ending Event
news_event = {
	id = Yemen.4
	title = Yemen.4.t
	picture = GFX_news_Yem_CivilWar_End
	desc = {
		text = Yemen.4.d
		trigger = {
			country_exists = YEM
			NOT = { country_exists = AQY }
			NOT = { country_exists = HOU }
		}
	}

	desc = {
		text = Yemen.4.d2
		trigger = {
			country_exists = HOU
			NOT = { country_exists = AQY }
			NOT = { country_exists = YEM }
		}
	}

	desc = {
		text = Yemen.4.d3
		trigger = {
			country_exists = AQY
			NOT = { country_exists = YEM }
			NOT = { country_exists = HOU }
		}
	}

	major = yes
	is_triggered_only = yes

	#Option if Houthis wins
	option = {
		name = Yemen.4.a
		log = "[GetDateText]: [This.GetName]: Yemen.4.a executed"
		trigger = { tag = HOU }
	}

	#Option if Yemen wins
	option = {
		name = Yemen.4.b
		log = "[GetDateText]: [This.GetName]: Yemen.4.b executed"
		trigger = { tag = YEM }
	}

	#Option if Ansar al-Sharia wins
	option = {
		name = Yemen.4.c
		log = "[GetDateText]: [This.GetName]: Yemen.4.c executed"
		trigger = { tag = AQY }
	}

	#Option for the rest of the world
	option = {
		name = Yemen.4.e
		log = "[GetDateText]: [This.GetName]: Yemen.4.e executed"
		trigger = {
			NOT = {
				TAG = YEM
				TAG = HOU
				TAG = AQY
				tag = SAU
				tag = UAE
				tag = BHR
				tag = KUW
				tag = EGY
				tag = JOR
				tag = MOR
				tag = SEN
				tag = SUD

			}
		}
	}

	#Option for Saudi Coalition
	option = {
		name = Yemen.4.f
		log = "[GetDateText]: [This.GetName]: Yemen.4.f executed"
		trigger = {
		or = {
			tag = SAU
			tag = UAE
			tag = BHR
			tag = KUW
			tag = EGY
			tag = JOR
			tag = MOR
			tag = SEN
			tag = SUD
			}
		}
		remove_ideas = restoring_hope
	}
}

# Trigger News Event
country_event = {
	id = Yemen.5

	hidden = yes
	fire_only_once = yes

	trigger = {
		# or means Any of the following must be true
		or = {
		  #If Houthis wins
		  and = {
			HOU = { has_global_flag = Yemen_Civil_War_Over }
			 country_exists = HOU
			 NOT = {
				country_exists = YEM
				country_exists = AQY
			 }
		  }
		 #If Yemen wins
		  and = {
			YEM = { has_global_flag = Yemen_Civil_War_Over }
			 country_exists = YEM
			 NOT = {
				country_exists = HOU
				country_exists = AQY
			 }
		  }
		 #If AQY Wins
		  and = {
			AQY = { has_global_flag = Yemen_Civil_War_Over }
			 country_exists = AQY
			 NOT = {
				country_exists = HOU
				country_exists = YEM
			 }
		  }
		}
	}

	immediate = {
		news_event = { id = Yemen.4 }
	}
}

#Yemen Fires Missile decision
country_event = {
	id = Yemen.6
	title = Yemen.6.t
	desc = Yemen.6.d

	fire_only_once = yes

	trigger = {
		has_war_with = YEM
		tag = HOU
	}
	mean_time_to_happen = {
		days = 300
	}

	option = {
		name = Yemen.6.a
		log = "[GetDateText]: [This.GetName]: Yemen.6.a executed"
		add_political_power = 100
		news_event = { id = Yemen.7 }
	}
	option = {
		name = Yemen.6.b
		log = "[GetDateText]: [This.GetName]: Yemen.6.b executed"
	}
}

#Yemen Fires Missile news event
news_event = {
	id = Yemen.7
	title = Yemen.7.t
	desc = Yemen.7.d
	picture = GFX_news_SAU_YEM_Missile

	major = yes
	is_triggered_only = yes

	option = {
		name = Yemen.7.a
		log = "[GetDateText]: [This.GetName]: Yemen.7.a executed"
	}
}
#Economic events (ahmed74kk)
country_event = {
	id = Yemen.8
	title = Yemen.8.t
	desc = Yemen.8.d
	is_triggered_only = yes
	picture = GFX_paris_convention
	option = {
		name = Yemen.8.a
		log = "[GetDateText]: [This.GetName]: Yemen.8.a executed"
		ai_chance = {
			base = 1
			modifier = {
				factor = 0.2
				has_opinion = {
					target = EGY
					value > 10
				}
			}
		}
		set_temp_variable = { int_investment_change = 7.5 }
		modify_international_investment_effect = yes
		YEM = {
			one_random_industrial_complex = yes
			set_temp_variable = { treasury_change = 7.5 }
			modify_treasury_effect = yes
			set_temp_variable = { percent_change = 5 }
			set_temp_variable = { tag_index = USA }
			set_temp_variable = { influence_target = YEM }
			country_event = {
				id = Yemen.10
				days = 1
			}
		}
	}
	option = {
		name = Yemen.8.b
		log = "[GetDateText]: [This.GetName]: Yemen.8.b executed"
		ai_chance = {
			base = 1
			modifier = {
				factor = 0.2
				has_opinion = {
					target = YEM
					value < 10
				}
			}
		}
		hidden_effect = {
			YEM = {
				country_event = {
					id = Yemen.9
					days = 1
				}
			}
		}
	}
}
country_event = {
	id = Yemen.9
	title = Yemen.9.t
	desc = Yemen.9.d
	is_triggered_only = yes
	picture = GFX_paris_convention
	option = {
		name = Yemen.9.a
		log = "[GetDateText]: [This.GetName]: Yemen.9.a executed"
		ai_chance = { base = 1 }
	}
}

country_event = {
	id = Yemen.10
	title = Yemen.10.t
	desc = Yemen.10.d
	is_triggered_only = yes
	picture = GFX_paris_convention
	option = {
		name = Yemen.10.a
		log = "[GetDateText]: [This.GetName]: Yemen.10.a executed"
		custom_effect_tooltip = us_inv_one_tt
		ai_chance = { base = 1 }
	}
}

country_event = {
	id = Yemen.11
	title = Yemen.11.t
	desc = Yemen.11.d
	is_triggered_only = yes
	picture = GFX_paris_convention
	option = {
		name = Yemen.11.a
		log = "[GetDateText]: [This.GetName]: Yemen.11.a executed"
		custom_effect_tooltip = wmo_praises_us_tt
		hidden_effect = {
			set_temp_variable = { treasury_change = 10 }
			modify_treasury_effect = yes

		}
		ai_chance = { base = 1 }
	}
}
country_event = {
	id = Yemen.12
	title = Yemen.12.t
	desc = Yemen.12.d
	is_triggered_only = yes
	picture = GFX_paris_convention
	option = {
		name = Yemen.12.a
		log = "[GetDateText]: [This.GetName]: Yemen.12.a executed"
		custom_effect_tooltip = found_aqui_tt
		hidden_effect = {
			set_temp_variable = { treasury_change = 8 }
			modify_treasury_effect = yes

		}
		ai_chance = { base = 1 }
	}
}
country_event = {
	id = Yemen.13
	title = Yemen.13.t
	desc = Yemen.13.d
	is_triggered_only = yes
	picture = GFX_paris_convention
	option = {
		name = Yemen.13.a
		log = "[GetDateText]: [This.GetName]: Yemen.13.a executed"
		custom_effect_tooltip = notfound_aqui_tt
		hidden_effect = {
			add_stability = -0.01
		}
		ai_chance = { base = 1 }
	}
}
#Snakes
country_event = { #To Yemen (Saudi pressing claim)
	id = YEM_snakes.01
	title = YEM_snakes.01.t
	desc = YEM_snakes.01.d
	picture = null
	
	is_triggered_only = yes
	
	option = { #Purge, -2x pp,-2x stability, -time, -corruption
		name = YEM_snakes.01.a
		log = "[GetDateText]: [This.GetName]: YEM_snakes.01.a executed"
		add_political_power = -150
		add_stability = -0.05
		add_days_mission_timeout = {
			mission = YEM_dancing_on_the_heads_of_snakes_1
			days = -90
		}
		random_list = {
			50 = {
				modifier = {
					factor = 1.05
					has_idea = police_2
				}
				modifier = {
					factor = 1.1
					has_idea = police_3
				}
				modifier = {
					factor = 1.15
					has_idea = police_4
				}
				modifier = {
					factor = 1.2
					has_idea = police_5
				}
				if = {
					limit = {
						ROOT = {
							OR = {
								has_idea = paralyzing_corruption
								has_idea = crippling_corruption
								has_idea = rampant_corruption
								has_idea = unrestrained_corruption
								has_idea = systematic_corruption
								has_idea = widespread_corruption
								has_idea = medium_corruption
								has_idea = modest_corruption
								has_idea = slight_corruption
							}
							NOT = {
								has_idea = negligible_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = paralyzing_corruption
							}
							swap_ideas = {
								remove_idea = paralyzing_corruption
								add_idea = crippling_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = crippling_corruption
							}
							swap_ideas = {
								remove_idea = crippling_corruption
								add_idea = rampant_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = rampant_corruption
							}
							swap_ideas = {
								remove_idea = rampant_corruption
								add_idea = unrestrained_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = unrestrained_corruption
							}
							swap_ideas = {
								remove_idea = unrestrained_corruption
								add_idea = systematic_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = systematic_corruption
							}
							swap_ideas = {
								remove_idea = systematic_corruption
								add_idea = widespread_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = widespread_corruption
							}
							swap_ideas = {
								remove_idea = widespread_corruption
								add_idea = medium_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = medium_corruption
							}
							swap_ideas = {
								remove_idea = medium_corruption
								add_idea = modest_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = modest_corruption
							}
							swap_ideas = {
								remove_idea = modest_corruption
								add_idea = slight_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = slight_corruption
							}
							swap_ideas = {
								remove_idea = slight_corruption
								add_idea = negligible_corruption
							}
						}
					}
				}
			}
			50 = {
			}
		}
	}
	option = { #Replace, -1x pp,-1x stability, +time, %corruption
		name = YEM_snakes.01.b
		log = "[GetDateText]: [This.GetName]: YEM_snakes.01.b executed"
		add_political_power = -75
		add_stability = -0.025
		add_days_mission_timeout = {
			mission = YEM_dancing_on_the_heads_of_snakes_1
			days = 90
		}
		random_list = {
			10 = {
				modifier = {
					factor = 1.2
					has_idea = police_1
				}
				modifier = {
					factor = 1.15
					has_idea = police_2
				}
				modifier = {
					factor = 1.1
					has_idea = police_3
				}
				modifier = {
					factor = 1.05
					has_idea = police_4
				}
				if = {
					limit = {
						ROOT = {
							OR = {
								has_idea = crippling_corruption
								has_idea = rampant_corruption
								has_idea = unrestrained_corruption
								has_idea = systematic_corruption
								has_idea = widespread_corruption
								has_idea = medium_corruption
								has_idea = modest_corruption
								has_idea = slight_corruption
								has_idea = negligible_corruption
							}
							NOT = {
								has_idea = paralyzing_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = crippling_corruption
							}
							swap_ideas = {
								remove_idea = crippling_corruption
								add_idea = paralyzing_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = rampant_corruption
							}
							swap_ideas = {
								remove_idea = rampant_corruption
								add_idea = crippling_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = unrestrained_corruption
							}
							swap_ideas = {
								remove_idea = unrestrained_corruption
								add_idea = rampant_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = systematic_corruption
							}
							swap_ideas = {
								remove_idea = systematic_corruption
								add_idea = unrestrained_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = widespread_corruption
							}
							swap_ideas = {
								remove_idea = widespread_corruption
								add_idea = systematic_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = medium_corruption
							}
							swap_ideas = {
								remove_idea = medium_corruption
								add_idea = widespread_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = modest_corruption
							}
							swap_ideas = {
								remove_idea = modest_corruption
								add_idea = medium_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = slight_corruption
							}
							swap_ideas = {
								remove_idea = slight_corruption
								add_idea = modest_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = negligible_corruption
							}
							swap_ideas = {
								remove_idea = negligible_corruption
								add_idea = slight_corruption
							}
						}
					}
				}
			}
			90 = {
			}
		}
	}
	option = { #Bribe, -moni,+1x stability, +time, 2x%corruption
		name = YEM_snakes.01.c
		log = "[GetDateText]: [This.GetName]: YEM_snakes.01.c executed"
		add_stability = 0.025
		add_days_mission_timeout = {
			mission = YEM_dancing_on_the_heads_of_snakes_1
			days = 90
		}
		set_temp_variable = { treasury_change = gdp_total } 
		multiply_temp_variable = { treasury_change = 0.05 } 
		modify_treasury_effect = yes
		random_list = {
			30 = {
				modifier = {
					factor = 1.2
					has_idea = police_1
				}
				modifier = {
					factor = 1.15
					has_idea = police_2
				}
				modifier = {
					factor = 1.1
					has_idea = police_3
				}
				modifier = {
					factor = 1.05
					has_idea = police_4
				}
				if = {
					limit = {
						ROOT = {
							OR = {
								has_idea = crippling_corruption
								has_idea = rampant_corruption
								has_idea = unrestrained_corruption
								has_idea = systematic_corruption
								has_idea = widespread_corruption
								has_idea = medium_corruption
								has_idea = modest_corruption
								has_idea = slight_corruption
								has_idea = negligible_corruption
							}
							NOT = {
								has_idea = paralyzing_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = crippling_corruption
							}
							swap_ideas = {
								remove_idea = crippling_corruption
								add_idea = paralyzing_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = rampant_corruption
							}
							swap_ideas = {
								remove_idea = rampant_corruption
								add_idea = crippling_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = unrestrained_corruption
							}
							swap_ideas = {
								remove_idea = unrestrained_corruption
								add_idea = rampant_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = systematic_corruption
							}
							swap_ideas = {
								remove_idea = systematic_corruption
								add_idea = unrestrained_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = widespread_corruption
							}
							swap_ideas = {
								remove_idea = widespread_corruption
								add_idea = systematic_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = medium_corruption
							}
							swap_ideas = {
								remove_idea = medium_corruption
								add_idea = widespread_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = modest_corruption
							}
							swap_ideas = {
								remove_idea = modest_corruption
								add_idea = medium_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = slight_corruption
							}
							swap_ideas = {
								remove_idea = slight_corruption
								add_idea = modest_corruption
							}
						}
					}
					ROOT = {
						if = {
							limit = {
								has_idea = negligible_corruption
							}
							swap_ideas = {
								remove_idea = negligible_corruption
								add_idea = slight_corruption
							}
						}
					}
				}
			}
			70 = {
			}
		}
	}
}
#Treaty of Jeddah
country_event = { #To Saudis
	id = YEM_jeddah.01
	title = YEM_jeddah.01.t
	desc = YEM_jeddah.01.d
	picture = null
	
	is_triggered_only = yes
	
	option = { #Border Agreement (Historical)
	name = YEM_jeddah.01.a
	log = "[GetDateText]: [This.GetName]: YEM_jeddah.01.a executed"
		ai_chance = {
			factor = 100
		}
		YEM = {
			country_event = {
				id = YEM_jeddah.02
				hours = 6
			}
		}
	}
	option = { #Press Claim (Refusal)
		name = YEM_jeddah.01.b
		log = "[GetDateText]: [This.GetName]: YEM_jeddah.01.b executed"
		ai_chance = {
			factor = 0
		}
		YEM = {
			country_event = {
				id = YEM_jeddah.03
				hours = 6
			}
		}
	}
}
country_event = { #To Yemen
	id = YEM_jeddah.02
	title = YEM_jeddah.02.t
	desc = YEM_jeddah.02.d
	picture = null
	
	is_triggered_only = yes
	
	option = { #Agree
		name = YEM_jeddah.02.a
		log = "[GetDateText]: [This.GetName]: YEM_jeddah.02.a executed"
		ai_chance = {
			factor = 100
		}
		YEM = {
			remove_state_claim = 178
			remove_state_claim = 1081
			remove_ideas = {
				YEM_undemarcated_border
			}
		}
		SAU = {
			remove_state_claim = 951
			remove_state_claim = 1104
			remove_state_claim = 1105
		}
		hidden_effect = {
			if = {
				limit = {	
					any_country = {
						is_major = yes
					}
					news_event = {
						id = YEM_jeddah_news.01
						days = 1
					}
				}
			}	
			YEM = {
				set_country_flag = YEM_jeddah_01
				complete_national_focus = YEM_Treaty_of_Jeddah
				news_event = {
					id = YEM_jeddah_news.01
					days = 1
				}
			}
			SAU = {
				news_event = {
					id = YEM_jeddah_news.01
					days = 1
				}
			}
		}
	}
	option = { #Back out
		name = YEM_jeddah.02.b
		log = "[GetDateText]: [This.GetName]: YEM_jeddah.02.b executed"
	}
}
country_event = { #To Yemen (Saudi pressing claim)
	id = YEM_jeddah.03
	title = YEM_jeddah.03.t
	desc = YEM_jeddah.03.d
	picture = null
	
	is_triggered_only = yes
	
	option = { #Agree (loses sa'da, ramlat dahm, and hadhramaut desert, also loses border spirit)
		name = YEM_jeddah.03.a
		log = "[GetDateText]: [This.GetName]: YEM_jeddah.03.a executed"
		YEM = {
			remove_state_claim = 178
			remove_state_claim = 1081
			remove_ideas = {
				YEM_undemarcated_border
			}
			set_country_flag = YEM_jeddah_02
		}
		951 = {
			transfer_state_to = SAU
		}
		1104 = {
			transfer_state_to = SAU
		}
		1105 = {
			transfer_state_to = SAU
		}
	}
	option = { #Decline (may lead to war)
		name = YEM_jeddah.03.b
		log = "[GetDateText]: [This.GetName]: YEM_jeddah.03.b executed"
	}
	option = { #Press own claim (may lead to war)
		name = YEM_jeddah.03.c
		log = "[GetDateText]: [This.GetName]: YEM_jeddah.03.c executed"
	}
}
news_event = {
	id = YEM_jeddah_news.01
	title = YEM_jeddah_news.01.t
	desc = YEM_jeddah_news.01.d
	picture = null
	
	fire_only_once = yes
}
news_event = {
	id = YEM_jeddah_news.02
	title = YEM_jeddah_news.02.t
	desc = YEM_jeddah_news.02.d
	picture = null
	
	fire_only_once = yes
}

#Houthi events (not flavor)
country_event = { #18 June 2004 Houthi protest: can be fired via focus or mission timeout
	id = YEM_HOU.01
	title = YEM_HOU.01.t
	desc = YEM_HOU.01.d
	picture = null
	
	is_triggered_only = yes
	
	option = { #Arrest the followers and charge Hussein al-Houthi ##Historical and will trigger civil war
		name = YEM_HOU.01.a
		log = "[GetDateText]: [This.GetName]: YEM_HOU.01.a executed"
		ROOT = {
			country_event = {
				id = YEM_HOU.02
				days = 2
			}
		}
	}
	option = { #Let them protest #Can lead to peacefully becoming Houthis or eliminate them
		name = YEM_HOU.01.b
		log = "[GetDateText]: [This.GetName]: YEM_HOU.01.b executed"
	}
}

country_event = {
	id = YEM_HOU.02
	title = YEM_HOU.02.t
	desc = YEM_HOU.02.d
	picture = null
	
	is_triggered_only = yes
	
	option = { #Civil war, stays as Yemen
		name = YEM_HOU.02.a
		log = "[GetDateText]: [This.GetName]: YEM_HOU.02.a executed"
	}	
	option = { #Civil war, becomes Houthis
		name = YEM_HOU.02.b
		log = "[GetDateText]: [This.GetName]: YEM_HOU.02.b executed"
	}
}


#Yemeni Funds
country_event = { 
	id = YEM_funds.01
	title = YEM_funds.01.t
	desc = YEM_funds.01.d
	picture = null
	
	is_triggered_only = yes
	
	option = { #North
		name = YEM_funds.01.a
		log = "[GetDateText]: [This.GetName]: YEM_funds.01.a executed"
		set_country_flag = YEM_north_primacy
		195 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.02
					state_production_speed_buildings_factor = 0.04
				}
			}
		}
		197 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.02
					state_production_speed_buildings_factor = 0.04
				}
			}
		}
		951 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.02
					state_production_speed_buildings_factor = 0.04
				}
			}
		}
		952 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.02
					state_production_speed_buildings_factor = 0.04
				}
			}
		}
		1077 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.02
					state_production_speed_buildings_factor = 0.04
				}
			}
		}
	}
	option = { #South
		name = YEM_funds.01.b
		log = "[GetDateText]: [This.GetName]: YEM_funds.01.b executed"
		set_country_flag = YEM_south_primacy
		196 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.05
					state_production_speed_buildings_factor = 0.1
				}
			}
		}
		198 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.05
					state_production_speed_buildings_factor = 0.1
				}
			}
		}
	}
	option = { #East
		name = YEM_funds.01.c
		log = "[GetDateText]: [This.GetName]: YEM_funds.01.c executed"
		set_country_flag = YEM_east_primacy
		194 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.03
					state_production_speed_buildings_factor = 0.06
				}
			}
		}
		199 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.03
					state_production_speed_buildings_factor = 0.06
				}
			}
		}
		200 = {
			add_state_modifier = {
				modifier = {
					local_resources_factor = 0.03
					state_production_speed_buildings_factor = 0.06
				}
			}
		}
	}
}
country_event = { 
	id = YEM_funds.02
	title = YEM_funds.02.t
	desc = YEM_funds.02.d
	picture = null
	
	is_triggered_only = yes

	option = { #Railways
		name = YEM_funds.02.a
		log = "[GetDateText]: [This.GetName]: YEM_funds.02.a executed"
		if = {
			limit = {
				has_country_flag = YEM_north_primacy
			}
			random_list = {
				30 = {
					build_railway = {
						level = 2
						path = { 10840 9150 }
						start_state = 195
						target_state = 197
						start_province = 10840
						target_province = 9150
					}
					197 = {
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = supply_node
							level = 1
							instant_build = yes
							province = 9150
						}
					}					
					set_temp_variable = { treasury_change = -3.54 }
					modify_treasury_effect = yes
				}
				30 = {
					build_railway = {
						level = 2
						path = { 10840 9147 10752 }
						start_state = 195
						target_state = 197
						start_province = 10840
						target_province = 10752
					}
					add_victory_points = {
						province = 9147
						value = 1
					}
					197 = {
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = supply_node
							level = 1
							instant_build = yes
							province = 10752
						}
					}
					set_temp_variable = { treasury_change = -3.56 }
					modify_treasury_effect = yes
				}
				30 = {
					build_railway = {
						level = 2
						path = { 10840 9199 9217 }
						start_state = 195
						target_state = 951
						start_province = 10840
						target_province = 9217
					}
					951 = {
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = supply_node
							level = 1
							instant_build = yes
							province = 9217
						}
					}
					set_temp_variable = { treasury_change = -3.56 }
					modify_treasury_effect = yes
				}
			}
		}
		if = {
			limit = {
				NOT = { 
					OR = {
						has_country_flag = YEM_north_primacy
						has_country_flag = YEM_south_primacy
						has_country_flag = YEM_east_primacy
					}
				}
			}
			random_list = {
				40 = {
					build_railway = {
						level = 1
						path = { 10840 9150 }
						start_state = 195
						target_state = 197
						start_province = 10840
						target_province = 9150
					}
					197 = {
						add_building_construction = {
							type = supply_node
							level = 1
							instant_build = yes
							province = 9150
						}
					}
					set_temp_variable = { treasury_change = -2.52 }
					modify_treasury_effect = yes
				}
				40 = {
					build_railway = {
						level = 1
						path = { 10840 9147 9138 }
						start_state = 195
						target_state = 197
						start_province = 10840
						target_province = 10752
					}
					197 = {
						add_building_construction = {
							type = supply_node
							level = 1
							instant_build = yes
							province = 9138
						}
					}
					add_victory_points = {
						province = 9147
						value = 1
					}
					set_temp_variable = { treasury_change = -2.53 }
					modify_treasury_effect = yes
				}
				10 = {
					build_railway = {
						level = 1
						path = { 9138 14475 14474 9139 9144 9154 }
						start_state = 198
						target_state = 199
						start_province = 9138
						target_province = 9154
					}
					set_temp_variable = { treasury_change = -0.06 }
					modify_treasury_effect = yes
				}
				10 = {
					build_railway = {
						level = 1
						path = { 9154 9178 9181 9201 }
						start_state = 199
						target_state = 194
						start_province = 9154
						target_province = 9201
					}
					set_temp_variable = { treasury_change = -0.04 }
					modify_treasury_effect = yes
				}
			}
		}
		if = {
			limit = {
				OR = { 
					has_country_flag = YEM_south_primacy
					has_country_flag = YEM_east_primacy
				}
				NOT = {
					has_country_flag = YEM_north_primacy
				}
			}
			build_railway = {
				level = 1
				path = { 10840 9150 }
				start_state = 195
				target_state = 197
				start_province = 10840
				target_province = 9150
			}
			197 = {
				add_extra_state_shared_building_slots = 1
			}
			set_temp_variable = { treasury_change = -1.02 }
			modify_treasury_effect = yes
		}
	}	
	option = { #Roadways
		name = YEM_funds.02.b
		log = "[GetDateText]: [This.GetName]: YEM_funds.02.b executed"
		if = {
			limit = {
				has_country_flag = YEM_north_primacy
			}
			random_list = {
				30 = {
					195 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}			
					197 = {
						add_building_construction = {
							type = infrastructure
							level = 2
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -12.5 }
					modify_treasury_effect = yes
				}
				30 = {
					195 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}			
					951 = {
						add_building_construction = {
							type = infrastructure
							level = 2
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -12.5 }
					modify_treasury_effect = yes
				}
				30 = {
					195 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}			
					952 = {
						add_building_construction = {
							type = infrastructure
							level = 2
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -12.5 }
					modify_treasury_effect = yes
				}
			}
		}
		if = {
			limit = {
				NOT = { 
					OR = {
						has_country_flag = YEM_north_primacy
						has_country_flag = YEM_south_primacy
						has_country_flag = YEM_east_primacy
					}
				}
			}
			random_list = {
				25 = {
					195 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}			
					197 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -9 }
					modify_treasury_effect = yes
				}
				25 = {
					195 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}			
					951 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -9 }
					modify_treasury_effect = yes
				}
				25 = {
					195 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}			
					952 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -9 }
					modify_treasury_effect = yes
				}
				25 = {
					195 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}			
					198 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -9 }
					modify_treasury_effect = yes
				}
			}
		}
		if = {
			limit = {
				OR = { 
					has_country_flag = YEM_south_primacy
					has_country_flag = YEM_east_primacy
				}
				NOT = {
					has_country_flag = YEM_north_primacy
				}
			}
			195 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_list = {
				25 = {			
					197 = {
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -3.6 }
					modify_treasury_effect = yes
				}
				25 = {			
					951 = {
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -3.6 }
					modify_treasury_effect = yes
				}
				25 = {			
					951 = {
						add_extra_state_shared_building_slots = 1
					}					
					set_temp_variable = { treasury_change = -3.6 }
					modify_treasury_effect = yes
				}
				25 = {							
					set_temp_variable = { treasury_change = -3.5 }
					modify_treasury_effect = yes
				}
			}
		}
	}		
}	
country_event = { 
	id = YEM_funds.03
	title = YEM_funds.03.t
	desc = YEM_funds.03.d
	picture = null
	
	is_triggered_only = yes

	option = { #Construct
		name = YEM_funds.03.a
		log = "[GetDateText]: [This.GetName]: YEM_funds.03.a executed"
		if = {
			limit = {
				has_country_flag = YEM_east_primacy
			}
			add_victory_points = {
				province = 9198
				value = 1
			}
			build_railway = {
				level = 1
				path = { 9154 9218 9176 9198 }
				start_state = 199
				target_state = 199
				start_province = 9154
				target_province = 9198
			}
			199 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = supply_node
					level = 1
					instant_build = yes
					province = 9198
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}					
			set_temp_variable = { treasury_change = -7.04 }
			modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = { 
					OR = {
						has_country_flag = YEM_north_primacy
						has_country_flag = YEM_south_primacy
						has_country_flag = YEM_east_primacy
					}
				}
			}
			add_victory_points = {
				province = 9198
				value = 1
			}
			build_railway = {
				level = 1
				path = { 9154 9218 9176 9198 }
				start_state = 199
				target_state = 199
				start_province = 9154
				target_province = 9198
			}
			199 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = supply_node
					level = 1
					instant_build = yes
					province = 9198
				}
			}					
			set_temp_variable = { treasury_change = -3.54 }
			modify_treasury_effect = yes
		}
		if = {
			limit = {
				OR = { 
					has_country_flag = YEM_south_primacy
					has_country_flag = YEM_north_primacy
				}
				NOT = {
					has_country_flag = YEM_east_primacy
				}
			}
			build_railway = {
				level = 1
				path = { 9154 9218 9176 9198 }
				start_state = 199
				target_state = 199
				start_province = 9154
				target_province = 9198
			}
			199 = {
				add_building_construction = {
					type = supply_node
					level = 1
					instant_build = yes
					province = 9198
				}
			}
			set_temp_variable = { treasury_change = -2.54 }
			modify_treasury_effect = yes
		}
	}	
	option = { #No
		name = YEM_funds.03.b
		log = "[GetDateText]: [This.GetName]: YEM_funds.03.b executed"
	}		
}	
country_event = { 
	id = YEM_funds.04
	title = YEM_funds.04.t
	desc = YEM_funds.04.d
	picture = null
	
	is_triggered_only = yes

	option = { #Large
		name = YEM_funds.04.a
		log = "[GetDateText]: [This.GetName]: YEM_funds.04.a executed"
		set_temp_variable = { treasury_change = -5 }
		modify_treasury_effect = yes
		random_list = {
			50 = {
				modifier = {
					factor = 1.2
					has_country_flag = YEM_east_primacy
				}
				194 = {
					add_resource = {
						type = oil
						amount = 5
					}
				}
			}
			30 = {
				modifier = {
					factor = 1.2
					has_country_flag = YEM_east_primacy
				}
				194 = {
					add_resource = {
						type = oil
						amount = 3
					}
				}
			}
			20 = {
				194 = {
					add_resource = {
						type = oil
						amount = 1
					}
				}
			}		
		}
	}
	option = { #Medium
		name = YEM_funds.04.b
		log = "[GetDateText]: [This.GetName]: YEM_funds.04.b executed"
		set_temp_variable = { treasury_change = -3 }
		modify_treasury_effect = yes
		random_list = {
			30 = {
				modifier = {
					factor = 1.2
					has_country_flag = YEM_east_primacy
				}
				194 = {
					add_resource = {
						type = oil
						amount = 3
					}
				}
			}
			30 = {
				modifier = {
					factor = 1.2
					has_country_flag = YEM_east_primacy
				}
				194 = {
					add_resource = {
						type = oil
						amount = 2
					}
				}
			}
			30 = {
				194 = {
					add_resource = {
						type = oil
						amount = 1
					}
				}
			}		
		}
	}
	option = { #Small
		name = YEM_funds.04.c
		log = "[GetDateText]: [This.GetName]: YEM_funds.04.c executed"
		set_temp_variable = { treasury_change = -2 }
		modify_treasury_effect = yes
		random_list = {
			30 = {
				modifier = {
					factor = 1.2
					has_country_flag = YEM_east_primacy
				}
				194 = {
					add_resource = {
						type = oil
						amount = 2
					}
				}
			}
			30 = {
				modifier = {
					factor = 1.2
					has_country_flag = YEM_east_primacy
				}
				194 = {
					add_resource = {
						type = oil
						amount = 1
					}
				}
			}
			30 = {
			}
		}
	}	
	option = { #No
		name = YEM_funds.04.d
		log = "[GetDateText]: [This.GetName]: YEM_funds.04.d executed"
	}		
}
country_event = { 
	id = YEM_funds.05
	title = YEM_funds.05.t
	desc = YEM_funds.05.d
	picture = null
	
	is_triggered_only = yes

	option = { #Mils
		name = YEM_funds.05.a
		log = "[GetDateText]: [This.GetName]: YEM_funds.05.a executed"
		if = {
			limit = {
				any_owned_state = {
					is_core_of  = YEM
					is_owned_and_controlled_by = YEM
					free_building_slots = {
						building = arms_factory
						size > 2
						include_locked = yes
					}
				}
			}
			random_owned_state = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						is_core_of  = YEM
						is_owned_and_controlled_by = YEM
						free_building_slots = {
							building = arms_factory
							size > 2
							include_locked = yes
						}
					}
				}
			}
		add_offsite_building = { type = arms_factory level = 3 }
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
	}
	option = { #Civs
		name = YEM_funds.05.b
		log = "[GetDateText]: [This.GetName]: YEM_funds.05.b executed"
		if = {
			limit = {
				any_owned_state = {
					is_core_of  = YEM
					is_owned_and_controlled_by = YEM
					free_building_slots = {
						building = industrial_complex
						size > 2
						include_locked = yes
					}
				}
			}
			random_owned_state = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						is_core_of  = YEM
						is_owned_and_controlled_by = YEM
						free_building_slots = {
							building = industrial_complex
							size > 2
							include_locked = yes
						}
					}
				}
			}
		add_offsite_building = { type = industrial_complex level = 3 }
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
	}
	option = { #Docs
		name = YEM_funds.05.c
		log = "[GetDateText]: [This.GetName]: YEM_funds.05.c executed"
		if = {
			limit = {
				any_owned_state = {
					is_core_of  = YEM
					is_owned_and_controlled_by = YEM
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
			}
			random_owned_state = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						is_core_of  = YEM
						is_owned_and_controlled_by = YEM
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
				}
			}
		add_offsite_building = { type = dockyard level = 3 }
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
	}		
}
country_event = { #North south connection
	id = YEM_funds.06
	title = YEM_funds.06.t
	desc = YEM_funds.06.d
	picture = null
	
	is_triggered_only = yes

	option = { #Connect cities
		name = YEM_funds.06.a
		log = "[GetDateText]: [This.GetName]: YEM_funds.06.a executed"
		add_victory_points = {
			province = 9147
			value = 1
		}
		build_railway = {
			level = 1
			path = { 10840 14574 14577 14581 9147 14571 10752 10570 14475 9138 }
			start_state = 195
			target_state = 198
			start_province = 10840
			target_province = 9138
		}
		set_temp_variable = { treasury_change = -0.20 }
		modify_treasury_effect = yes
		if = {
			limit = {
				NOT = {
					1103 = {
						infrastructure > 4
					}
				}
			}	
			1103 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { treasury_change = -3.50 }
			modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					197 = {
						infrastructure > 4
					}
				}
			}	
			197 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { treasury_change = -3.50 }
			modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					198 = {
						infrastructure > 4
					}
				}
			}	
			198 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { treasury_change = -3.50 }
			modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					198 = {
						any_province_building_level = {
							province = {
								id = 445
							}
							building = naval_base
							level > 9
						}
					}
				}
			}
			set_temp_variable = { treasury_change = -0.50 }
			modify_treasury_effect = yes
		}
	}	
	option = { #Avoid cities
		name = YEM_funds.06.b
		log = "[GetDateText]: [This.GetName]: YEM_funds.06.b executed"
		build_railway = {
			level = 1
			path = { 10840 14574 14577 14581 14558 14475 9138 }
			start_state = 195
			target_state = 198
			start_province = 10840
			target_province = 9138
		}
		set_temp_variable = { treasury_change = -0.14 }
		modify_treasury_effect = yes
		if = {
			limit = {
				NOT = {
					1103 = {
						infrastructure > 4
					}
				}
			}	
			1103 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { treasury_change = -3.50 }
			modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					198 = {
						infrastructure > 4
					}
				}
			}	
			198 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { treasury_change = -3.50 }
			modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					198 = {
						any_province_building_level = {
							province = {
								id = 445
							}
							building = naval_base
							level > 9
						}
					}
				}
			}
			set_temp_variable = { treasury_change = -0.50 }
			modify_treasury_effect = yes
		}
	}		
	option = { #Avoid mountains
		name = YEM_funds.06.c
		log = "[GetDateText]: [This.GetName]: YEM_funds.06.c executed"
		build_railway = {
			level = 1
			path = { 10840 14575 9162 14476 14555 14554 9138 }
			start_state = 195
			target_state = 198
			start_province = 10840
			target_province = 9138
		}
		set_temp_variable = { treasury_change = -0.07 }
		modify_treasury_effect = yes
		if = {
			limit = {
				NOT = {
					198 = {
						infrastructure > 4
					}
				}
			}	
			198 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { treasury_change = -3.50 }
			modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					198 = {
						any_province_building_level = {
							province = {
								id = 445
							}
							building = naval_base
							level > 9
						}
					}
				}
			}
			set_temp_variable = { treasury_change = -0.50 }
			modify_treasury_effect = yes
		}
	}
	option = { #No
		name = YEM_funds.06.d
		log = "[GetDateText]: [This.GetName]: YEM_funds.06.d executed"
	}
}	
#Pearl of the Gulf
country_event = { 
	id = YEM_pearl.01
	title = YEM_pearl.01.t
	desc = YEM_pearl.01.d
	picture = null
	
	is_triggered_only = yes

	option = { #Mils
		name = YEM_pearl.01.a
		log = "[GetDateText]: [This.GetName]: YEM_pearl.01.a executed"
		if = {
			limit = {
				any_owned_state = {
					is_core_of  = YEM
					is_owned_and_controlled_by = YEM
					free_building_slots = {
						building = arms_factory
						size > 2
						include_locked = yes
					}
				}
			}
			random_owned_state = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						is_core_of  = YEM
						is_owned_and_controlled_by = YEM
						free_building_slots = {
							building = arms_factory
							size > 2
							include_locked = yes
						}
					}
				}
			}
		add_offsite_building = { type = arms_factory level = 3 }
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
	}
	option = { #Civs
		name = YEM_pearl.01.b
		log = "[GetDateText]: [This.GetName]: YEM_pearl.01.b executed"
		if = {
			limit = {
				any_owned_state = {
					is_core_of  = YEM
					is_owned_and_controlled_by = YEM
					free_building_slots = {
						building = industrial_complex
						size > 2
						include_locked = yes
					}
				}
			}
			random_owned_state = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						is_core_of  = YEM
						is_owned_and_controlled_by = YEM
						free_building_slots = {
							building = industrial_complex
							size > 2
							include_locked = yes
						}
					}
				}
			}
		add_offsite_building = { type = industrial_complex level = 3 }
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
	}
	option = { #Docs
		name = YEM_pearl.01.c
		log = "[GetDateText]: [This.GetName]: YEM_pearl.01.c executed"
		if = {
			limit = {
				any_owned_state = {
					is_core_of  = YEM
					is_owned_and_controlled_by = YEM
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
			}
			random_owned_state = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						is_core_of  = YEM
						is_owned_and_controlled_by = YEM
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
				}
			}
		add_offsite_building = { type = dockyard level = 3 }
		set_temp_variable = { treasury_change = -22.5 }
		modify_treasury_effect = yes
		}
	}		
}

#Al-Qaeda Timer
country_event = { #Focus Event
	id = YEM_AQY.01
	title = YEM_AQY.01.t
	desc = YEM_AQY.01.d
	picture = null
	
	is_triggered_only = yes
	
	option = {
		name = YEM_AQY.01.a
		log = "[GetDateText]: [This.GetName]: Yemen.7.a executed"
		unlock_decision_category_tooltip = YEM_al_qaeda_fight
	}
}
#Al Qaeda events
#Terrorist attacks
country_event = { #terrorist attack in Aden
	id = YEM_AQY.1
	title = YEM_AQY.1.t
	desc = YEM_AQY.1.d
	picture = null
	
	is_triggered_only = yes
	
}

country_event = { #Becomes Al-Qaeda, houthi uprising
	id = YEM_AQY.2
	title = YEM_AQY.2.t
	desc = YEM_AQY.2.d
	picture = null
	
	is_triggered_only = yes

	option = {
		name = YEM_AQY.1.a
		log = "[GetDateText]: [This.GetName]: YEM_AQY.1.a executed"
				hidden_effect = {
					if = {
						limit = {
							194 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							194 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							194 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}
					if = {
						limit = {
							195 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							195 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							195 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}
					if = {
						limit = {
							196 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							196 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							196 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}	
					if = {
						limit = {
							197 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							197 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							197 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}	
					if = {
						limit = {
							198 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							198 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							198 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}
					if = {
						limit = {
							199 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							199 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							199 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}
					if = {
						limit = {
							951 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							951 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							951 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}
					if = {
						limit = {
							952 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							952 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							952 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}	
					if = {
						limit = {
							1103 = {
								check_variable = { var = AQY_presence value = 4 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 300
						}							
					}
					if = {
						limit = {
							1103 = {
								check_variable = { var = AQY_presence value = 3 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 200
						}					
					}
					if = {
						limit = {
							1103 = {
								check_variable = { var = AQY_presence value = 2 compare = equals }
							}
						}
						add_equipment_to_stockpile = {
							type = infantry_weapons
							amount = 100
						}						
					}
					AQY = { change_tag_from = YEM }
					load_focus_tree = aq_yemen_focus
					set_temp_variable = { rul_party_temp = 11 }
					change_ruling_party_effect = yes
					set_politics = {
						ruling_party = fascism
						elections_allowed = no
					}
				}	
		hidden_effect = {
			if = {
				limit = {
					951 = {
						is_owned_and_controlled_by = ROOT
					}
				}
				951 = { add_core_of = HOU }
			}
			if = {
				limit = {
					1104 = {
						is_owned_and_controlled_by = ROOT
					}
				}
				1104 = { add_core_of = HOU }
			}
			if = {
				limit = {
					951 = {
						is_owned_and_controlled_by = ROOT
						is_core_of = HOU
					}
					1104 = {
						is_owned_and_controlled_by = ROOT
						is_core_of = HOU
					}
				}
				release = HOU
			}
			if = {
				limit = {
					951 = {
						is_owned_and_controlled_by = ROOT
						is_core_of = HOU
					}
					NOT = {
						1104 = {
							OR = {
								is_owned_and_controlled_by = ROOT
								is_core_of = HOU
							}
						}
					}
				}
				951 = {
					release = HOU
				}
			}
		}
	}
}

#Party Leaders (Deaths, exile, etc.)

country_event = { #Death of Abrahim bin Ali al-Wazir (has liberals in power)
	id = YEM_party_leaders.1
	title = YEM_party_leaders.1.t
	desc = YEM_party_leaders.1.d
	picture = null
	
	fire_only_once = yes

	trigger = {
		tag = YEM
		has_country_leader = {
			character = YEM_abrahim_al_wazir
			ruling_only = yes
		}
		has_country_leader_ideology = liberalism
		date > 2014.1.2
	}
	
	option = {
		name = YEM_party_leaders.1.a
		log = "[GetDateText]: [This.GetName]:  YEM_party_leaders.1.a executed"
		retire_character = YEM_abrahim_al_wazir
		set_country_flag = YEM_abrahim_al_wazir_dead
		promote_character = YEM_abdul_rahman_alrubai
	}
}

country_event = { #Death of Abrahim bin Ali al-Wazir (no liberals in power)
	id = YEM_party_leaders.2
	
	hidden = yes
	fire_only_once = yes

	trigger = {
		tag = YEM
		NOT = {
			has_country_leader = {
				character = YEM_abrahim_al_wazir
				ruling_only = yes
			}
			has_country_leader_ideology = liberalism
		}
		date > 2014.1.2
	}
	
	option = {
		name = YEM_party_leaders.2.a
		log = "[GetDateText]: [This.GetName]: YEM_party_leaders.2.a executed"
		retire_character = YEM_abrahim_al_wazir
		set_country_flag = YEM_abrahim_al_wazir_dead
	}
}

country_event = { #Death of Muhammad Abdul Rahman Al-Rubai (has liberals in power)
	id = YEM_party_leaders.3
	title = YEM_party_leaders.3.t
	desc = YEM_party_leaders.3.d
	picture = null
	
	fire_only_once = yes

	trigger = {
		tag = YEM
		has_country_leader = {
			character = YEM_abdul_rahman_alrubai
			ruling_only = yes
		}
		has_country_leader_ideology = liberalism
		date > 2019.6.8
	}
	
	option = {
		name = YEM_party_leaders.3.a
		log = "[GetDateText]: [This.GetName]:  YEM_party_leaders.3.a executed"
		retire_character = YEM_abdul_rahman_alrubai
		set_country_flag = YEM_abdul_rahman_alrubai_dead
		promote_character =  YEM_abdul_razaz_amin
	}
}

country_event = { #Death of Muhammad Abdul Rahman Al-Rubai (no liberals in power)
	id = YEM_party_leaders.4
	
	hidden = yes
	fire_only_once = yes

	trigger = {
		tag = YEM
		NOT = {
			has_country_leader = {
				character = YEM_abdul_rahman_alrubai
				ruling_only = yes
			}
			has_country_leader_ideology = liberalism
		}
		date > 2019.6.8
	}
	
	option = {
		name = YEM_party_leaders.4.a
		log = "[GetDateText]: [This.GetName]: YEM_party_leaders.4.a executed"
		retire_character = YEM_abdul_rahman_alrubai
		set_country_flag = YEM_abdul_rahman_alrubai_dead
	}
}

country_event = { #December 4th 1999 Socotra Flood, relief came around february-march 2000, mostly by the UAE
	id = YEM_natural_disasters.1
	title = YEM_natural_disasters.1.t
	desc = YEM_natural_disasters.1.d
	picture = GFX_YEM_socotra_2000
	
	fire_only_once = yes

	trigger = {
		tag = YEM
		200 = {
			is_owned_and_controlled_by = YEM
		}
		date < 2000.1.5
	}
	
	option = {
		name = YEM_natural_disasters.1.a
		log = "[GetDateText]: [This.GetName]: YEM_natural_disasters.1.a executed"
		200 = {
			set_state_flag = YEM_slow_aid
			damage_building = {
				type = infrastructure
				damage = 1
			}
			damage_building = {
				type = naval_base
				damage = 1
			}
		}
		hidden_effect = {
			if = {
				limit = {
					UAE = {
						check_variable = { treasury > 0 }
					}
				}
				UAE = {
					country_event = {
						id = YEM_natural_disasters.2
						days = 30
					}
				}
			}
		}
	}
	option = {
		name = YEM_natural_disasters.1.b
		log = "[GetDateText]: [This.GetName]: YEM_natural_disasters.1.b executed"
		200 = {
			set_state_flag = YEM_slow_aid
			damage_building = {
				type = infrastructure
				damage = 1
			}
			damage_building = {
				type = naval_base
				damage = 1
			}
		}
		set_temp_variable = { percent_change = 1 }
		change_domestic_influence_percentage = yes
		YEM = {
			set_country_flag = YEM_soc_1
		}
	}
}

country_event = { #December 4th 1999 Socotra Flood, relief came around february-march 2000, mostly by the UAE
	id = YEM_natural_disasters.2
	title = YEM_natural_disasters.2.t
	desc = YEM_natural_disasters.2.d
	picture = GFX_YEM_socotra_2000
	
	is_triggered_only = yes
	
	option = {
		name = YEM_natural_disasters.2.a
		log = "[GetDateText]: [This.GetName]: YEM_natural_disasters.2.a executed"
		200 = {
			clr_state_flag = YEM_slow_aid
			set_state_flag = YEM_UAE_aid
			add_dynamic_modifier = {
				modifier = YEM_UAE_RCS
				days = 365
			}
		}
		set_temp_variable  = { treasury_change = -0.02 }
		modify_treasury_effect = yes
		YEM = {
			set_temp_variable = { percent_change = 3 }
			set_temp_variable = { tag_index = UAE }
			change_influence_percentage = yes
			add_opinion_modifier = {
				target = UAE
				modifier = gave_aid
			}
		}
	}
	option = {
		name = YEM_natural_disasters.2.b
		log = "[GetDateText]: [This.GetName]: YEM_natural_disasters.2.b executed"
		YEM = {
			add_opinion_modifier = {
				target = UAE
				modifier = refused_aid
			}
		}
	}
}

country_event = { #December 26th Indian Ocean Tsunami (Pretty much destroyed Al Ghaydah, shredded socotra, also affected Aden
	id = YEM_natural_disasters.3
	title = YEM_natural_disasters.3.t
	desc = YEM_natural_disasters.3.d
	picture = null
	
	fire_only_once = yes

	trigger = {
		tag = YEM
		date > 2004.12.26
	}
	
	option = {
		name = YEM_natural_disasters.3.a
		log = "[GetDateText]: [This.GetName]: YEM_natural_disasters.3.a executed"
		200 = {
			damage_building = {
				type = infrastructure
				damage = 3
			}
			damage_building = {
				type = naval_base
				damage = 5
			}
			damage_building = {
				type = air_base
				damage = 1
			}
			damage_building = {
				type = arms_factory
				damage = 3
			}
			damage_building = {
				type = industrial_complex
				damage = 3
			}
			damage_building = {
				type = dockyard
				damage = 3
			}
		}
		194 = {
			damage_building = {
				type = infrastructure
				damage = 2
			}
			damage_building = {
				type = naval_base
				damage = 3
			}
			damage_building = {
				type = air_base
				damage = 2
			}
			add_victory_points = {
				province = 9201
				value = -1
			}
			damage_building = {
				type = arms_factory
				damage = 1
			}
			damage_building = {
				type = industrial_complex
				damage = 1
			}
			damage_building = {
				type = dockyard
				damage = 3
			}
		}
		198 = {
			damage_building = {
				type = infrastructure
				damage = 1
			}
		}
		196 = {
			damage_building = {
				type = infrastructure
				damage = 1
			}
		}
		199 = {
			damage_building = {
				type = infrastructure
				damage = 1
			}
		}
		set_temp_variable  = { treasury_change = -0.5 }
		modify_treasury_effect = yes
	}
}

#Socotri Crisis
country_event = { #Event if socotra has not been repaired by 2001
	id = YEM_socotri_crisis.1
	title = YEM_socotri_crisis.1.t
	desc = YEM_socotri_crisis.1.d
	picture = null
	
	is_triggered_only = yes
	
	option = { #slightly angry soqotrans
		name = YEM_socotri_crisis.1.a
		log = "[GetDateText]: [This.GetName]: YEM_socotri_crisis.1.a executed"
		200 = {
			clr_state_flag = YEM_slow_aid
			set_state_flag = YEM_angr_1
		}
		set_temp_variable  = { treasury_change = -0.04 }
		modify_treasury_effect = yes
	}
	option = { #mid angry soqotrans
		name = YEM_socotri_crisis.1.b
		log = "[GetDateText]: [This.GetName]: YEM_socotri_crisis.1.b executed"
		200 = {
			clr_state_flag = YEM_slow_aid
			set_state_flag = YEM_angr_2
		}
	}
}


#State Events#
state_event = { #USS Cole Bombing
	id = YEM_aqy_events.1
	title = YEM_aqy_events.1.t
	desc = YEM_aqy_events.1.d
	picture = GFX_uss_cole_bombing
	
	fire_only_once = yes
	
	trigger = {
		NOT = { 
			has_start_date > 2016.1.1 
			date > 2000.10.13
		}
		date < 2000.10.11
	}
	
	option = { #slightly angry soqotrans
		name = YEM_aqy_events.1.a
		log = "[GetDateText]: [This.GetName]: YEM_aqy_events.1.a executed"
			if = {
				limit = {
					198 = {
						check_variable = { var = AQY_presence value = 4 compare = less_than }
						NOT = {
							check_variable = { var = AQY_presence value = 4 compare = equals }
						}
					}
				}
			198 = {
				add_to_variable = {
					var = AQY_presence
					value = 1
					tooltip = increase_AQY_presence_tt
				}
			}
		}
	}
}