# Author(s): Kalkalash
#Special projects related to artiller/ATGMs/AA
sp_automatic_twin_barrel_mortar_turret = {
	specialization = specialization_land

	project_tags = sp_tag_armored_vehicles

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			has_tech = nsb_artillery_0
		}
	}

	available = {
		FROM = {
			has_tech = nsb_artillery_2
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	project_output = {
		enable_equipment_modules = {
			twin_mortar_barrel_conversion_small
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_artillery_tech_1
		sp_land_generic_reward_artillery_tech_2
		sp_land_generic_reward_artillery_tech_3
		sp_land_generic_reward_artillery_bonus_1
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_automatic_twin_barrel_mortar_turret_reward_improved_mortars = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_automatic_twin_barrel_mortar_turret_reward_improved_mortars

				iteration_output = {
					sub_unit_bonus = {
						Militia_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						Mot_Militia_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						L_Inf_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						Mot_Inf_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						L_Air_Inf_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						Mot_Air_Inf_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						L_Marine_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						L_Marine_Cdo_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						Mot_Marine_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						L_Air_assault_Bat = {
							defense = 0.03
							breakthrough = 0.03
						}
						Special_Forces = {
							defense = 0.03
							breakthrough = 0.03
						}
					}
				}
			}
		}
	}

}

sp_multipurpose_warhead = {
	specialization = specialization_land
	icon = GFX_sp_multipurpose_warhead
	project_tags = sp_tag_infantry_equipment

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			OR = {
				has_tech = Heavy_Anti_tank_2
				has_tech = nsb_Anti_Air_2
			}
		}
	}

	available = {
		FROM = {
			OR = {
				has_tech = Heavy_Anti_tank_3
				has_tech = nsb_Anti_Air_3
			}
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	project_output = {
		sub_unit_bonus = {
			Militia_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Mot_Militia_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			L_Inf_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Mot_Inf_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Mech_Inf_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Arm_Inf_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			L_Air_Inf_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Mot_Air_Inf_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Mech_Air_Inf_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Arm_Air_Inf_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			L_Marine_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			L_Marine_Cdo_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Mot_Marine_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Mech_Marine_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Arm_Marine_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			L_Air_assault_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Arm_Air_assault_Bat = {
				air_attack = 0.025
				hard_attack = 0.025
			}
			Special_Forces = {
				air_attack = 0.025
				hard_attack = 0.025
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_artillery_tech_1
		sp_land_generic_reward_artillery_tech_2
		sp_land_generic_reward_artillery_tech_3
		sp_land_generic_reward_artillery_bonus_1
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_multipurpose_warhead_reward_improved_warhead = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_multipurpose_warhead_reward_improved_warhead_at

				iteration_output = {
					equipment_bonus = {
						L_AT_Equipment = {
							hard_attack = 0.025
						}
						H_AT_Equipment = {
							hard_attack = 0.025
						}
					}
				}
			}
			option = {
				token = sp_multipurpose_warhead_reward_improved_warhead_aa

				iteration_output = {
					equipment_bonus = {
						AA_Equipment = {
							air_attack = 0.025
						}
						medium_tank_aa_chassis = {
							air_attack = 0.025
						}
					}
				}
			}
		}
	}

}

sp_emp_warhead = {
	specialization = specialization_land
	icon = GFX_sp_emp_warheads
	project_tags = sp_tag_infantry_equipment

	ai_will_do = {
		base = 1
	}

	visible = {
		FROM = {
			OR = {
				has_tech = Heavy_Anti_tank_2
				has_tech = nsb_Anti_Air_2
			}
		}
	}

	available = {
		FROM = {
			OR = {
				has_tech = Heavy_Anti_tank_3
				has_tech = nsb_Anti_Air_3
			}
		}
	}

	breakthrough_cost = {
		specialization_land = 1
	}

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	project_output = {
		equipment_bonus = {
			L_AT_Equipment = {
				ap_attack = 0.05
			}
			H_AT_Equipment = {
				ap_attack = 0.05
			}
			AA_Equipment = {
				air_attack = 0.05
			}
			medium_tank_aa_chassis = {
				air_attack = 0.05
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_artillery_tech_1
		sp_land_generic_reward_artillery_tech_2
		sp_land_generic_reward_artillery_tech_3
		sp_land_generic_reward_artillery_bonus_1
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_emp_warhead_reward_improved_warhead = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_emp_warhead_reward_improved_warhead_at

				iteration_output = {
					equipment_bonus = {
						L_AT_Equipment = {
							ap_attack = 0.025
						}
						H_AT_Equipment = {
							ap_attack = 0.025
						}
					}
				}
			}
			option = {
				token = sp_emp_warhead_reward_improved_warhead_aa

				iteration_output = {
					equipment_bonus = {
						AA_Equipment = {
							air_attack = 0.025
						}
						medium_tank_aa_chassis = {
							air_attack = 0.025
						}
					}
				}
			}
		}
	}

}