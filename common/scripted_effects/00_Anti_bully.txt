#	Example:
# 
#	example_effect = {
#		add_political_power = 66
#		add_popularity = {
#			ideology = fascism
#			popularity = 0.33
#		}
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#

#Used only to intialize AB system
AB_init = {
	
	if = { 
		limit = {
			this = {
				has_defensive_war_with = event_target:AB_ATT
				has_country_flag = AB_deffender
			}
		}
		
		capital_scope = {
			add_claim_by = event_target:AB_ATT
		}
		
	}
}

#Used to check if AB System is Active and
#attacker is still at war
AB_war_test = {

	if = { #checks if deffender still in war
		limit = {
			event_target:AB_DEFF = {
				has_defensive_war_with = event_target:AB_ATT
				has_country_flag = AB_deffender
				capital_scope = {
					is_claimed_by = event_target:AB_ATT
				}
			}
			event_target:AB_ATT = {
				has_offensive_war_with = event_target:AB_DEFF
				has_country_flag = AB_attacker
			}
		}
		event_target:AB_ATT = {
			set_country_flag = AB_test_true
		}

	}
	
	
	if = { #if not in war start returning national unity
		limit = {
			event_target:AB_ATT = {
				not = { has_country_flag = test }
			}
		}
		#return national unity funcation
		#clr AB_test_true
	}
	
}

#Calculates & lower national unity
Anti_bully_l_nu = {
	
	#Checks to make sure still at war and AB active if false everything below is ignored
	AB_war_test = yes 
	
	#Anti Bully loose National Unity #1
	if = {
		limit = {
			not = {
				has_country_flag = AB_War1_NU1
				has_country_flag = AB_War1_NU2
				has_country_flag = AB_War1_NU3
				has_country_flag = AB_War1_NU4
				has_country_flag = AB_War1_NU5
				has_country_flag = AB_war1_pause
				
			}
			has_country_flag = AB_test_true
		}
		event_target:AB_ATT = {
			set_country_flag = AB_War1_NU1
			set_country_flag = AB_war1_pause
			clr_country_flag = AB_test_true
			
			
			add_country_leader_trait = AB_1_NU1
			
			country_event = { days = 3 id = anti_bully.3 } #Generic event loose National Unity
			
		}
	}
	
	#Anti Bully loose National Unity #2
	if = {
		limit = {
			not = {
				has_country_flag = AB_War1_NU2
				has_country_flag = AB_War1_NU3
				has_country_flag = AB_War1_NU4
				has_country_flag = AB_War1_NU5
				has_country_flag = AB_war1_pause
				
			}
			has_country_flag = AB_test_true
			has_country_flag = AB_War1_NU1
		}
		set_country_flag = AB_War1_NU2
		set_country_flag = AB_war1_pause
		clr_country_flag = AB_War1_NU1
		clr_country_flag = AB_test_true
		
		
		remove_country_leader_trait = AB_1_NU1
		add_country_leader_trait = AB_1_NU2
		
		country_event = { days = 3 id = anti_bully.3 } #Generic event loose National Unity
		
		
		
	}
	#Anti Bully loose National Unity #3
	if = {
		limit = {
			not = {
				has_country_flag = AB_War1_NU1
				has_country_flag = AB_War1_NU3
				has_country_flag = AB_War1_NU4
				has_country_flag = AB_War1_NU5
				has_country_flag = AB_war1_pause
				
			}
			has_country_flag = AB_test_true
			has_country_flag = AB_War1_NU2
			
		}
		event_target:AB_ATT = {
			set_country_flag = AB_War1_NU3
			set_country_flag = AB_war1_pause
			clr_country_flag = AB_War1_NU2
			clr_country_flag = AB_test_true
			
			remove_country_leader_trait = AB_1_NU2
			add_country_leader_trait = AB_1_NU3
			
			country_event = { days = 3 id = anti_bully.3 } #Generic event loose National Unity
			
			
		}
	}
	#Anti Bully loose National Unity #4
	if = {
		limit = {
			not = {
				has_country_flag = AB_War1_NU1
				has_country_flag = AB_War1_NU2
				has_country_flag = AB_War1_NU4
				has_country_flag = AB_War1_NU5
				has_country_flag = AB_war1_pause
				
			}
			has_country_flag = AB_test_true
			has_country_flag = AB_War1_NU3
			
		}
		event_target:AB_ATT = {
			set_country_flag = AB_War1_NU4
			set_country_flag = AB_war1_pause
			clr_country_flag = AB_War1_NU3
			clr_country_flag = AB_test_true
			
			remove_country_leader_trait = AB_1_NU3
			add_country_leader_trait = AB_1_NU4
			
			country_event = { days = 3 id = anti_bully.3 } #Generic event loose National Unity
			
			
		}
	}
	#Anti Bully loose National Unity #5
	if = {
		limit = {
			not = {
				has_country_flag = AB_War1_NU1
				has_country_flag = AB_War1_NU2
				has_country_flag = AB_War1_NU3
				has_country_flag = AB_War1_NU5
				has_country_flag = AB_war1_pause
				
			}
			has_country_flag = AB_test_true
			has_country_flag = AB_War1_NU4
			
		}
		event_target:AB_ATT = {
			set_country_flag = AB_War1_NU5
			set_country_flag = AB_war1_pause
			clr_country_flag = AB_War1_NU4
			clr_country_flag = AB_test_true
			
			remove_country_leader_trait = AB_1_NU4
			add_country_leader_trait = AB_1_NU5
			
			country_event = { days = 3 id = anti_bully.3 } #Generic event loose National Unity
			
			
		}
	}
	
	
}

# AB_white_peace = {

# }