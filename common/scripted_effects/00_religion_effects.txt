create_religious_pie_chart = {
	clear_array = religious_pie_chart
	resize_array = { array = religious_pie_chart value = 1 size = 100 }

	for_each_loop = {
		array = country_average_religious_value
		value = v
		index = i

		if = {
			limit = { check_variable = { i = 0 } }
			set_temp_variable = { current_value = v }
			multiply_temp_variable = { current_value = 100 }
			round_temp_variable = current_value

			set_variable = { ROOT.last_index = current_value }
		}
		else = {
			set_temp_variable = { current_value = v }
			multiply_temp_variable = { current_value = 100 }
			round_temp_variable = current_value

			add_to_temp_variable = { current_value = ROOT.last_index }

			for_loop_effect = {
				start = ROOT.last_index
				end = current_value
				set_temp_variable = { religious_index = i }
				add_to_temp_variable = { religious_index = 1 }
				set_variable = { religious_pie_chart^v = religious_index }
				add_to_variable = { ROOT.last_index = 1 }
			}
		}
	}

	clear_variable = ROOT.last_index
}

temp_array_creation = {
	add_to_array = { country_average_religious_value = 0.25 }
	add_to_array = { country_average_religious_value = 0.25 }
	add_to_array = { country_average_religious_value = 0.25 }
	add_to_array = { country_average_religious_value = 0.25 }
}