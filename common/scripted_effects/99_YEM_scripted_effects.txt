#written by PokemonUnited26, aka Mari

#Al Qaeda in Yemen
	#Counter Terrorism is used in each state to determine the severity, size, and frequency of Al Qaeda and Al Qaeda attacks
	#Al Qaeda size, strength, and severity are determined by government response and focuses, and determines the severity of the state and country modifiers and strength of Al Qaeda during uprisings
	update_alqaeda_strength = {
		set_variable = { alqaeda_strength = aden_strength }
		#add_to_variable = { alqaeda_strength = shabwa_strength }
		#if = {
		#	limit = {
		#		952 = {
		#			has_dynamic_modifier = YEM_alqaeda_in_marib
		#		}
		#	}
		#	add_to_variable = { alqaeda_strength = marib_strength }
		#}
		#if = {
		#	limit = {
		#		199 = {
		#			has_dynamic_modifier = YEM_alqaeda_in_hadramawt
		#		}
		#	}
		#	add_to_variable = { alqaeda_strength = hadramawt_strength }
		#}
		#divide_variable = { alqaeda_strength = 4 }
		set_variable = { alqaeda_strength_stab_var = alqaeda_strength }
		multiply_variable = { alqaeda_strength_stab_var = -0.1 }
		#set_variable = { mafia_strength_construction_var = alqaeda_strength }
		#multiply_variable = { mafia_strength_construction_var = -0.5 }
		#set_variable = { mafia_strength_pp_var = alqaeda_strength }
		#multiply_variable = { mafia_strength_pp_var = -0.5 }
		#set_variable = { mafia_strength_lega_drift_var = alqaeda_strength }
		#multiply_variable = { mafia_strength_lega_drift_var = 0.1 }
		#set_variable = { mafia_strength_ai_factor_var = 1 }
		#subtract_from_variable = { mafia_strength_ai_factor_var = alqaeda_strength }
		#multiply_variable = { mafia_strength_ai_factor_var = mafia_strength_ai_factor_var }
	}
	#Aden
	#Aden Terrorist events
		if = {
			limit = {
				198 = {
					has_dynamic_modifier = {  modifier = YEM_alqaeda_in_aden_-2 }
				}
			}
			subtract_from_variable = { aden_strength = 0.04 }
		}
		if = {
			limit = {
				198 = {
					has_dynamic_modifier = {  modifier = YEM_alqaeda_in_aden_-1 }
				}
			}
			subtract_from_variable = { aden_strength = 0.02 }
		}
		if = {
			limit = {
				198 = {
					has_dynamic_modifier = {  modifier = YEM_alqaeda_in_aden }
				}
			}
			random_list = {
				70 = {
				}
				30 = {
					YEM = {
						country_event = YEM_AQY.1
					}
				}
			}
		}
		if = {
			limit = {
				198 = {
					has_dynamic_modifier = {  modifier = YEM_alqaeda_in_aden_1 }
				}
			}
			add_to_variable = { aden_strength = 0.02 }
		}
		if = {
			limit = {
				198 = {
					has_dynamic_modifier = {  modifier = YEM_alqaeda_in_aden_2 }
				}
			}
			add_to_variable = { aden_strength = 0.04 }
		}
		
#Yemeni Crisis Influence
#Total Variable
# init_influence:
# The init influence acts as a reset to get an influence array prepared for additions
init_influence = {
	clear_array = influence_array_val
	clear_array = influence_array
}

# Startup Influence:
# The function is triggered only in the history. It sorts the starting influence arrays.
# Everything else is fired in the on_startup.
startup_influence = {
	sort_influence = yes
}

Sadah_math_variables = {
	log = "[GetDateText]: [ROOT.GetName]: Running Effect: Sadah_math_variables"
	
	#Sadah Variable
	set_variable = { var = sadah_influence_total max = 100 }
	set_variable = { var = sadah_influence_total min = 0 }

	set_variable = { yem_sadah_influence = sadah_influence_total }
	divide_variable = { yem_sadah_influence = 4 }
	set_variable = { sau_sadah_influence = sadah_influence_total }
	divide_variable = { sau_sadah_influence = 4 }
	set_variable = { uae_sadah_influence = sadah_influence_total }
	divide_variable = { uae_sadah_influence = 4 }
	set_variable = { per_sadah_influence = sadah_influence_total }
	divide_variable = { per_sadah_influence = 4 }
}