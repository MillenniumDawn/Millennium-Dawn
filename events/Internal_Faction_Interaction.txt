# Internal Faction Interactive events
add_namespace = internal_faction_events
add_namespace = labour_unions_events

#####################
### Labour Unions ###
#####################

#Demand for increased wages
country_event = {

	id = labour_unions_events.0
	title = labour_unions_events.0.t
	desc = labour_unions_events.0.d
	#picture = SOMEPIC
	
	trigger = {
		has_idea = labour_unions
		NOT = { has_country_flag = enthusiastic_labour_unions }
	}
	
	is_triggered_only = yes
	
	option = {
		name = labour_unions_events.0.a
		log = "[GetDateText]: [This.GetName]: labour_unions_events.0.a executed"			#Increase wages
		relative_change_pos_6 = yes
		newline = yes
		add_timed_idea = { idea = internal_faction_decreased_investments days = 360 }
		visually_display_opinion_rise_labour_unions = yes
		set_country_flag = current_labour_unions
		increase_internal_faction_opinion = yes
		if = { limit = { has_idea = small_medium_business_owners }
			visually_display_opinion_fall_small_medium_business_owners = yes
			set_country_flag = current_small_medium_business_owners
			decrease_internal_faction_opinion = yes
		}
		if = { limit = { has_idea = industrial_conglomerates }
			visually_display_opinion_fall_industrial_conglomerates = yes
			set_country_flag = current_industrial_conglomerates
			decrease_internal_faction_opinion = yes
		}	
	}
	option = {
		name = labour_unions_events.0.b
		log = "[GetDateText]: [This.GetName]: labour_unions_events.0.b executed"			#Negotiate a slight increase
		add_political_power = -100
		add_timed_idea = { idea = internal_faction_decreased_investments days = 120 }
	}
	option = {
		name = labour_unions_events.0.c
		log = "[GetDateText]: [This.GetName]: labour_unions_events.0.c executed"			#Deny the request
		relative_change_neg_6 = yes
		newline = yes
		if = { limit = { NOT = { has_government = communism } }
			add_popularity = { ideology = communism popularity = 0.05 }
			else = {
				add_popularity = { ideology = communism popularity = -0.05 }
			}
		}
		visually_display_opinion_fall_labour_unions = yes
		set_country_flag = current_labour_unions
		decrease_internal_faction_opinion = yes
	}
	option = {
		name = labour_unions_events.0.dd
		log = "[GetDateText]: [This.GetName]: labour_unions_events.0.dd executed"		#Decrease them instead
		trigger = {
			OR = {
				has_idea = depression 
				has_idea = recession 
			}
		}
		relative_change_neg_12 = yes
		newline = yes
		if = { limit = { has_idea = recession }
			swap_ideas = { remove_idea = recession add_idea = stagnation  }
		}
		if = { limit = { has_idea = depression }
			swap_ideas = { remove_idea = depression add_idea = recession }
		}
		set_country_flag = current_labour_unions
		decrease_internal_faction_opinion = yes
		if = { limit = { has_idea = small_medium_business_owners }
			visually_display_opinion_rise_small_medium_business_owners = yes
			set_country_flag = current_small_medium_business_owners
			increase_internal_faction_opinion = yes
		}
		if = { limit = { has_idea = industrial_conglomerates }
			visually_display_opinion_rise_industrial_conglomerates = yes
			set_country_flag = current_industrial_conglomerates
			increase_internal_faction_opinion = yes
		}
	}
}
# Internal Faction Interactive events
add_namespace = internal_faction_events
add_namespace = farmers_events

#####################
### Farmers ###
#####################

#Peasant farmers resist Neoclassical doctrines of agrarian change.  

	country_event = {
	id = farmers_events.0
	title = farmers_events.0.t
	desc = farmers_events.0.d
	#picture = WIP
	
	trigger = {
		has_idea = farmers
		NOT = { has_country_flag = positive_farmers }
	}
	
	is_triggered_only = yes
	
	option = {
		name = farmers_events.0.a
		log = "[GetDateText]: [This.GetName]: farmers_events.0.a executed" #Implement bottom up dev policies
		relative_change_pos_6 = yes
		newline = yes
		add_timed_idea = { idea = internal_faction_decreased_investments days = 360 }
		visually_display_opinion_rise_farmers = yes
		set_country_flag = current_farmers
		increase_internal_faction_opinion = yes
		if = { limit = { has_idea = international_bankers }
			visually_display_opinion_fall_international_bankers = yes
			set_country_flag = current_international_bankers
			decrease_internal_faction_opinion = yes
		}
	}
	option = {
		name = farmers_events.0.b
		log = "[GetDateText]: [This.GetName]: farmers_events.0.b executed" #Only implment Pro-Poor growth
		add_political_power = -100
		add_timed_idea = { idea = internal_faction_decreased_investments days = 120 }
	}
	option = {
		name = farmers_events.0.c
		log = "[GetDateText]: [This.GetName]: farmers_events.0.c executed"			#Status quo 
		relative_change_neg_6 = yes
		newline = yes
		if = { limit = { NOT = { has_government = communism } }
			add_popularity = { ideology = communism popularity = 0.05 }
			else = {
				add_popularity = { ideology = communism popularity = -0.05 }
			}
		}
		visually_display_opinion_fall_farmers = yes
		set_country_flag = current_farmers
		decrease_internal_faction_opinion = yes
	}
	option = {
		name = farmers_events.0.dd
		log = "[GetDateText]: [This.GetName]: farmers_events.0.dd executed"	#Furthur Neoclassical Doctrines
		trigger = {
			OR = {
				has_idea = depression 
				has_idea = recession 
			}
		}
		relative_change_neg_12 = yes
		newline = yes
		if = { limit = { has_idea = recession }
			swap_ideas = { remove_idea = recession add_idea = stagnation  }
		}
		if = { limit = { has_idea = depression }
			swap_ideas = { remove_idea = depression add_idea = recession }
		}
		set_country_flag = current_farmers
		decrease_internal_faction_opinion = yes
		if = { limit = { has_idea = international_bankers }
			visually_display_opinion_rise_international_bankers = yes
			set_country_flag = current_international_bankers
			increase_internal_faction_opinion = yes
		}
	}
}
############################################################################
########################Internal faction changes - WIP
############################################################################

add_namespace = internal_faction_events 

country_event = {
	id = internal_faction_events.0 #inc priviliges - what to do
	title = internal_faction_events.0.t
	desc = internal_faction_events.0.d
	#picture = WIP
	
	trigger = {
	}

	is_triggered_only = yes

	option = {
		name = internal_faction_events.0.a #await the just changes
		log = "[GetDateText]: [This.GetName]: internal_faction_events .0.a executed" 
		add_political_power = 100
	}
	option = {
		name = internal_faction_events.0.b #talk about their bravery
		log = "[GetDateText]: [This.GetName]: internal_faction_events.0.b executed" 
		add_political_power = 50
	}
	option = {
		name = internal_faction_events.0.c #spend money bribing the people
		log = "[GetDateText]: [This.GetName]: internal_faction_events.0.c executed"			
		add_political_power = -50 
	}
	option = {
		name = internal_faction_events.0.dd #trickery and mischefery will work
		log = "[GetDateText]: [This.GetName]: internal_faction_events.0.dd executed"
		add_political_power = -100
		country_event = internal_faction_events.1
	}
}

country_event = {
	id = internal_faction_events.1 #mischef plan
	title = internal_faction_events.1.t
	desc = internal_faction_events.1.d
	#picture = WIP
	
	trigger = {
	}

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 20
	}

	option = {
		name = internal_faction_events.1.a #Apporve the plan
		log = "[GetDateText]: [This.GetName]: internal_faction_events.1.a executed"
		add_political_power = 20
		custom_tooltip = GIFI_trickery_tt
		hidden_effect = {
			subtract_from_variable = { treasury = 3 }
			random_list = {
				55 = {country_event = internal_faction_events.2 } #win
				45 = {country_event = internal_faction_events.3 } #fail
			}
		}
	}
	option = {
		name = internal_faction_events.1.b #We cannot risk this
		log = "[GetDateText]: [This.GetName]: internal_faction_events .1.b executed"
		country_event = internal_faction_events.0
	}
}

country_event = {
	id = internal_faction_events.2 #mischef plan: step 2
	title = internal_faction_events.2.t
	desc = internal_faction_events.2.d
	#picture = WIP
	
	trigger = {
	}

	is_triggered_only = yes
	mean_time_to_happen = {
		days = 90
	}
	option = {
		name = internal_faction_events.2.a #Apporve the plan
		log = "[GetDateText]: [This.GetName]: internal_faction_events.2.a executed"
		add_political_power = 20
		custom_tooltip = GIFI_trickery2_tt
		hidden_effect = {
			subtract_from_variable = { treasury = 3 }
			random_list = {
				87 = {
					country_event = internal_faction_events.4 
					} #win
				13 = {
					country_event = internal_faction_events.3 
					} #lose
			}
		}
	}
}

country_event = {
	id = internal_faction_events.3 #FAILURE
	title = internal_faction_events.3.t
	desc = internal_faction_events.3.d
	#picture = WIP
	
	trigger = {
	}

	is_triggered_only = yes
	mean_time_to_happen = {
		days = 15
	}
	option = {
		name = internal_faction_events.3.a #the risk we feared is here
		log = "[GetDateText]: [This.GetName]: internal_faction_events.3.a executed"
		add_political_power = -50
		subtract_from_variable = { treasury = 5 }
		add_timed_idea = { 
			idea = GIFI_mischevous_failure 
			days = 180
		}
	}
}

country_event = {
	id = internal_faction_events.4 #Mischef plan : step three
	title = internal_faction_events.4.t
	desc = internal_faction_events.4.d
	#picture = WIP
	
	trigger = {
	}

	is_triggered_only = yes
	mean_time_to_happen = {
		days = 40
	}
	option = {
		name = internal_faction_events.4.a #apporve
		log = "[GetDateText]: [This.GetName]: internal_faction_events.4.a executed"
		add_political_power = 20
		custom_tooltip = GIFI_trickery3_tt
		hidden_effect = {
			subtract_from_variable = { treasury = 4 }
			random_list = {
				30 = {
					country_event = internal_faction_events.5
					} #win
				70 = {
					country_event = internal_faction_events.3 
					} #lose
			}
		}
	}
}

country_event = {
	id = internal_faction_events.5 #SUCCESS
	title = internal_faction_events.5.t
	desc = internal_faction_events.5.d
	#picture = WIP
	
	trigger = {
	}

	is_triggered_only = yes
	mean_time_to_happen = {
		days = 60
	}
	option = {
		name = internal_faction_events.5.a #as planned
		log = "[GetDateText]: [This.GetName]: internal_faction_events.5.a executed"
		add_political_power = 50
		hidden_effect = {
			#country_event = 
		}
	}
}
