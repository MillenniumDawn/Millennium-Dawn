00_missile_decisions = {

### old testing ###	#
    missile_test_1 = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {

		}
		visible = {
			has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_1"
			meta_effect = {
				text = {	
					set_variable = { var_intercept_capacity_boost = 0 }
					set_variable = { var_intercept_capacity_midcourse = 0 }
					set_variable = { var_intercept_capacity_terminal = 0 }
					### boost phase defense ###
					every_controlled_state = {
						limit = {
							anti_air_building > 0
							distance_to = {
								value < 10 #[SAM_range]
								target = var_launch_point_ID
							}
						}							
						ROOT = {									
							set_temp_variable = { temp1 = 0 }	
							add_to_temp_variable = { temp1 = PREV.building_level@anti_air_building }
							multiply_temp_variable = { temp1 = var_SAM_launcher_tech }
							add_to_variable = { var_intercept_capacity_boost = temp1 }
						}									
					}
					SAM_range = "[?var_SAM_range]"
					ABM_range = "[?var_ABM_range]"
				}
			}		
		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_target = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_target"
	
		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_launch_point = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			sea_launch_point_38 = yes
		}
		visible = {
			has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_launch_point"
			38 = {
				set_state_flag = missile_launch_point
			}
		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_strike = {
    	icon = GFX_decision_generic_ignite_civil_war
		state_target = yes
		target_trigger = {
			FROM = {
				has_state_flag = missile_launch_point
			}

			
		}
		available = {
			642 = {				
				distance_to = {
					value < 3000
					target = FROM
				}	
			}
		}
		visible = {
			has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_strike"

		}
		ai_will_do = {
			factor = 0

		}
	}

	set_landbased_missile_defense_vars = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			###has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision set_landbased_missile_defense_vars"
			set_landbased_missile_defense_vars = yes
			### test effects ###
			#set_missile_trajectory_test_vars = yes
			#set_variable = { var_intercept_capacity_boost = 0 }
			#set_variable = { var_intercept_capacity_midcourse = 0 }
			#set_variable = { var_intercept_capacity_terminal = 0 }
			### boost phase defense ###
			#meta_effect = {
			#	text = {
			#		every_state = {
			#			limit = {
			#				is_controlled_by = ROOT
			#				anti_air_building > 0
			#				[launch_point_ID] = {
			#					distance_to = {
			#						value < [SAM_range]
			#						target = PREV
			#					}
			#				}	
			#			}							
			#			ROOT = {									
			#				set_temp_variable = { temp1 = 0 }	
			#				add_to_temp_variable = { temp1 = PREV.building_level@anti_air_building }
			#				multiply_temp_variable = { temp1 = var_SAM_launcher_tech }
			#				add_to_variable = { var_intercept_capacity_boost = temp1 }
			#			}									
			#		}
			#	}
			#	launch_point_ID = "[?var_launch_point_ID.GetID]"
			#	SAM_range = "[?var_SAM_range]"
			#}			
		}
		ai_will_do = {
			factor = 0

		}
	}

	set_seabased_missile_defense_vars = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			###has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision set_seabased_missile_defense_vars"
			set_seabased_missile_defense_vars = yes
			
		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_set_state_ID = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			#meta_trigger = {
				#text = {
				#	38 = {				
				#		distance_to = {					
				#			value < 1000
				#			target = 42
				#		}	
				#	}
				#}
				#SAM_range = "[?var_SAM_range]"
			#}		
		}
		visible = {
			##has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_set_state_ID"
			### test effects ###
			set_variable = { var_intercept_capacity_boost = 0 }
			set_variable = { var_intercept_capacity_midcourse = 0 }
			set_variable = { var_intercept_capacity_terminal = 0 }

			set_variable = { var_SAM_range = 1000 }
			set_variable = { var_ABM_range = 3000 }
			set_variable = { var_SAM_launcher_tech = 1 }
			set_variable = { var_ABM_launcher_tech = 1 }
			set_variable = { var_ship_SAM_launcher_tech = 1 }
			set_variable = { var_ship_ABM_launcher_tech = 1 }

			811 = {
				ROOT = {
					set_variable = { var_launch_point_ID = PREV.id }
				}	
			}
			764 = {
				ROOT = {
					set_variable = { var_target_point_ID = PREV.id }
				}	
			}		
		}
		ai_will_do = {
			factor = 0

		}
	}	

	missile_test_set_missile_defense_vars = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_set_vars"
			set_variable = { var_SAM_range = 10 }
			set_variable = { var_ABM_range = 10 }			
			set_variable = { var_SAM_launcher_tech = 1 }
			set_variable = { var_ABM_launcher_tech = 1 }
			
			set_missile_defense_vars = yes
			
			#meta_effect = {
			#	text = {	
			#		add_to_variable = { var_intercept_capacity_boost = [stateID].building_level@anti_air_building }
			#	}
			#	stateID = "[?var_launch_point_ID|0]"	
			#}

			### test effects ###

		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_phases = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_phases"
			### boost phase vs defense ###
			boost_phase_defense = yes
			### midcourse phase vs defense ###
			midcourse_phase_defense = yes
			### terminal phase vs defense ###
			terminal_phase_defense = yes	
		}
		ai_will_do = {
			factor = 0

		}
	}

### end of testing ###

missile_launch_point = {
	icon = GFX_decision_generic_ignite_civil_war
	state_target = yes
	target_trigger = {
		FROM = {
			has_state_flag = missile_launch_point
		}
	}	
	available = {
		OR = {
			meta_trigger = {
				text = {
					sea_launch_point_[LPID] = yes
				}
				LPID = "[FROM.GetID]"
			}
			FROM = {
				is_controlled_by = ROOT
				missile_silo > 0
			}
		}			
	}
	visible = {
		
	}


	complete_effect = {
		log = "[GetDateText]: [Root.GetName]: Decision missile_test_launch_point"
		#FROM = {
		#	set_state_flag = missile_launch_point
		#}
	}
	ai_will_do = {
		factor = 0

	}
}



}
