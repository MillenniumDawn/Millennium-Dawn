## Contents
# set_leader = yes
# update_set_politics = yes
# set_correct_ideology_trait = yes
# remove_set_ideology_flag = yes
# set_failsafe_values = yes #for general politics
# set_failsafe_change_leader = yes #only for on_action



#Main Function
set_leader = {

	#will set correct outlook to place the newly generated leader in
	hidden_effect = {
		kill_country_leader = yes
	}
	update_set_politics = yes
	#script per country
	if = { limit = { TAG = ALB } set_leader_ALB = yes }
	else_if = { limit = { TAG = AUS } set_leader_AUS = yes }
	else_if = { limit = { TAG = BEL } set_leader_BEL = yes }
	else_if = { limit = { TAG = BLR } set_leader_BLR = yes }
	else_if = { limit = { TAG = BOS } set_leader_BOS = yes }
	else_if = { limit = { TAG = BUL } set_leader_BUL = yes }
	else_if = { limit = { TAG = CAT } set_leader_CAT = yes }
	else_if = { limit = { TAG = CRE } set_leader_CRE = yes }
	else_if = { limit = { TAG = CRO } set_leader_CRO = yes }
	else_if = { limit = { TAG = CYP } set_leader_CYP = yes }
	else_if = { limit = { TAG = CZE } set_leader_CZE = yes }
	else_if = { limit = { TAG = DEN } set_leader_DEN = yes }
	else_if = { limit = { TAG = ENG } set_leader_ENG = yes }
	else_if = { limit = { TAG = EST } set_leader_EST = yes }
	else_if = { limit = { TAG = FIN } set_leader_FIN = yes }
	else_if = { limit = { TAG = FRA } set_leader_FRA = yes }
	else_if = { limit = { TAG = FYR } set_leader_FYR = yes }
	else_if = { limit = { TAG = GER } set_leader_GER = yes }
	else_if = { limit = { TAG = GRE } set_leader_GRE = yes }
	else_if = { limit = { TAG = HOL } set_leader_HOL = yes }
	else_if = { limit = { TAG = HUN } set_leader_HUN = yes }
	else_if = { limit = { TAG = ICE } set_leader_ICE = yes }
	else_if = { limit = { TAG = IRE } set_leader_IRE = yes }
	else_if = { limit = { TAG = ITA } set_leader_ITA = yes }
	else_if = { limit = { TAG = KOS } set_leader_KOS = yes }
	else_if = { limit = { TAG = LAT } set_leader_LAT = yes }
	else_if = { limit = { TAG = LIT } set_leader_LIT = yes }
	else_if = { limit = { TAG = LUX } set_leader_LUX = yes }
	else_if = { limit = { TAG = MLT } set_leader_MLT = yes }
	else_if = { limit = { TAG = MLV } set_leader_MLV = yes }
	else_if = { limit = { TAG = MNT } set_leader_MNT = yes }
	else_if = { limit = { TAG = NCY } set_leader_NCY = yes }
	else_if = { limit = { TAG = NOR } set_leader_NOR = yes }
	else_if = { limit = { TAG = POL } set_leader_POL = yes }
	else_if = { limit = { TAG = POR } set_leader_POR = yes }
	else_if = { limit = { TAG = ROM } set_leader_ROM = yes }
	else_if = { limit = { TAG = SER } set_leader_SER = yes }
	else_if = { limit = { TAG = SLO } set_leader_SLO = yes }
	else_if = { limit = { TAG = SLV } set_leader_SLV = yes }
	else_if = { limit = { TAG = SOV } set_leader_SOV = yes }
	else_if = { limit = { TAG = SPR } set_leader_SPR = yes }
	else_if = { limit = { TAG = SWE } set_leader_SWE = yes }
	else_if = { limit = { TAG = SWI } set_leader_SWI = yes }
	else_if = { limit = { TAG = TUR } set_leader_TUR = yes }
	else_if = { limit = { TAG = UKR } set_leader_UKR = yes }
	else_if = { limit = { TAG = CHE } set_leader_CHE = yes }
	else_if = { limit = { TAG = AFG } set_leader_AFG = yes }
	else_if = { limit = { TAG = ARM } set_leader_ARM = yes }
	else_if = { limit = { TAG = AZE } set_leader_AZE = yes }
	else_if = { limit = { TAG = BHR } set_leader_BHR = yes }
	else_if = { limit = { TAG = GEO } set_leader_GEO = yes }
	else_if = { limit = { TAG = IRQ } set_leader_IRQ = yes }
	else_if = { limit = { TAG = ISR } set_leader_ISR = yes }
	else_if = { limit = { TAG = JAP } set_leader_JAP = yes }
	else_if = { limit = { TAG = JOR } set_leader_JOR = yes }
	else_if = { limit = { TAG = KAZ } set_leader_KAZ = yes }
	else_if = { limit = { TAG = KUW } set_leader_KUW = yes }
	else_if = { limit = { TAG = KYR } set_leader_KYR = yes }
	else_if = { limit = { TAG = LEB } set_leader_LEB = yes }
	else_if = { limit = { TAG = NKR } set_leader_NKR = yes }
	else_if = { limit = { TAG = OMA } set_leader_OMA = yes }
	else_if = { limit = { TAG = PAK } set_leader_PAK = yes }
	else_if = { limit = { TAG = PAL } set_leader_PAL = yes }
	else_if = { limit = { TAG = PER } set_leader_PER = yes }
	else_if = { limit = { TAG = QAT } set_leader_QAT = yes }
	else_if = { limit = { TAG = SAU } set_leader_SAU = yes }
	else_if = { limit = { TAG = SYR } set_leader_SYR = yes }
	else_if = { limit = { TAG = TAJ } set_leader_TAJ = yes }
	else_if = { limit = { TAG = TRK } set_leader_TRK = yes }
	else_if = { limit = { TAG = UAE } set_leader_UAE = yes }
	else_if = { limit = { TAG = UZB } set_leader_UZB = yes }
	else_if = { limit = { TAG = YEM } set_leader_YEM = yes }
	else_if = { limit = { TAG = BAN } set_leader_BAN = yes }
	else_if = { limit = { TAG = BHU } set_leader_BHU = yes }
	else_if = { limit = { TAG = BRM } set_leader_BRM = yes }
	else_if = { limit = { TAG = BRU } set_leader_BRU = yes }
	else_if = { limit = { TAG = CBD } set_leader_CBD = yes }
	else_if = { limit = { TAG = CHI } set_leader_CHI = yes }
	else_if = { limit = { TAG = HKG } set_leader_HKG = yes }
	else_if = { limit = { TAG = IND } set_leader_IND = yes }
	else_if = { limit = { TAG = KOR } set_leader_KOR = yes }
	else_if = { limit = { TAG = LAO } set_leader_LAO = yes }
	else_if = { limit = { TAG = MAY } set_leader_MAY = yes }
	else_if = { limit = { TAG = MLD } set_leader_MLD = yes }
	else_if = { limit = { TAG = MON } set_leader_MON = yes }
	else_if = { limit = { TAG = NEP } set_leader_NEP = yes }
	else_if = { limit = { TAG = NKO } set_leader_NKO = yes }
	else_if = { limit = { TAG = PHI } set_leader_PHI = yes }
	else_if = { limit = { TAG = RAJ } set_leader_RAJ = yes }
	else_if = { limit = { TAG = SIA } set_leader_SIA = yes }
	else_if = { limit = { TAG = SIN } set_leader_SIN = yes }
	else_if = { limit = { TAG = SRI } set_leader_SRI = yes }
	else_if = { limit = { TAG = TAI } set_leader_TAI = yes }
	else_if = { limit = { TAG = TIM } set_leader_TIM = yes }
	else_if = { limit = { TAG = VIE } set_leader_VIE = yes }
	else_if = { limit = { TAG = AST } set_leader_AST = yes }
	else_if = { limit = { TAG = FIJ } set_leader_FIJ = yes }
	else_if = { limit = { TAG = MIC } set_leader_MIC = yes }
	else_if = { limit = { TAG = NZL } set_leader_NZL = yes }
	else_if = { limit = { TAG = PAP } set_leader_PAP = yes }
	else_if = { limit = { TAG = PLY } set_leader_PLY = yes }
	else_if = { limit = { TAG = SOL } set_leader_SOL = yes }
	else_if = { limit = { TAG = CAN } set_leader_CAN = yes }
	else_if = { limit = { TAG = MEX } set_leader_MEX = yes }
	else_if = { limit = { TAG = USA } set_leader_USA = yes }
	else_if = { limit = { TAG = CSA } set_leader_CSA = yes }
	else_if = { limit = { TAG = BAH } set_leader_BAH = yes }
	else_if = { limit = { TAG = BAR } set_leader_BAR = yes }
	else_if = { limit = { TAG = BLZ } set_leader_BLZ = yes }
	else_if = { limit = { TAG = CUB } set_leader_CUB = yes }
	else_if = { limit = { TAG = DMI } set_leader_DMI = yes }
	else_if = { limit = { TAG = DOM } set_leader_DOM = yes }
	else_if = { limit = { TAG = GRA } set_leader_GRA = yes }
	else_if = { limit = { TAG = HAI } set_leader_HAI = yes }
	else_if = { limit = { TAG = JAM } set_leader_JAM = yes }
	else_if = { limit = { TAG = STK } set_leader_STK = yes }
	else_if = { limit = { TAG = STL } set_leader_STL = yes }
	else_if = { limit = { TAG = STV } set_leader_STV = yes }
	else_if = { limit = { TAG = TRI } set_leader_TRI = yes }
	else_if = { limit = { TAG = ARG } set_leader_ARG = yes }
	else_if = { limit = { TAG = BOL } set_leader_BOL = yes }
	else_if = { limit = { TAG = BRA } set_leader_BRA = yes }
	else_if = { limit = { TAG = CHL } set_leader_CHL = yes }
	else_if = { limit = { TAG = COL } set_leader_COL = yes }
	else_if = { limit = { TAG = COS } set_leader_COS = yes }
	else_if = { limit = { TAG = ECU } set_leader_ECU = yes }
	else_if = { limit = { TAG = ELS } set_leader_ELS = yes }
	else_if = { limit = { TAG = GUA } set_leader_GUA = yes }
	else_if = { limit = { TAG = GUY } set_leader_GUY = yes }
	else_if = { limit = { TAG = HON } set_leader_HON = yes }
	else_if = { limit = { TAG = NIC } set_leader_NIC = yes }
	else_if = { limit = { TAG = PAN } set_leader_PAN = yes }
	else_if = { limit = { TAG = PAR } set_leader_PAR = yes }
	else_if = { limit = { TAG = PRU } set_leader_PRU = yes }
	else_if = { limit = { TAG = SUR } set_leader_SUR = yes }
	else_if = { limit = { TAG = URG } set_leader_URG = yes }
	else_if = { limit = { TAG = VEN } set_leader_VEN = yes }
	else_if = { limit = { TAG = AGL } set_leader_AGL = yes }
	else_if = { limit = { TAG = ALG } set_leader_ALG = yes }
	else_if = { limit = { TAG = BEN } set_leader_BEN = yes }
	else_if = { limit = { TAG = BFA } set_leader_BFA = yes }
	else_if = { limit = { TAG = BOT } set_leader_BOT = yes }
	else_if = { limit = { TAG = BUR } set_leader_BUR = yes }
	else_if = { limit = { TAG = CAM } set_leader_CAM = yes }
	else_if = { limit = { TAG = CAR } set_leader_CAR = yes }
	else_if = { limit = { TAG = CDI } set_leader_CDI = yes }
	else_if = { limit = { TAG = CHA } set_leader_CHA = yes }
	else_if = { limit = { TAG = CNG } set_leader_CNG = yes }
	else_if = { limit = { TAG = COM } set_leader_COM = yes }
	else_if = { limit = { TAG = DJI } set_leader_DJI = yes }
	else_if = { limit = { TAG = DRC } set_leader_DRC = yes }
	else_if = { limit = { TAG = EGU } set_leader_EGU = yes }
	else_if = { limit = { TAG = EGY } set_leader_EGY = yes }
	else_if = { limit = { TAG = ERI } set_leader_ERI = yes }
	else_if = { limit = { TAG = ETH } set_leader_ETH = yes }
	else_if = { limit = { TAG = GAB } set_leader_GAB = yes }
	else_if = { limit = { TAG = GAH } set_leader_GAH = yes }
	else_if = { limit = { TAG = GAM } set_leader_GAM = yes }
	else_if = { limit = { TAG = GUB } set_leader_GUB = yes }
	else_if = { limit = { TAG = GUI } set_leader_GUI = yes }
	else_if = { limit = { TAG = KEN } set_leader_KEN = yes }
	else_if = { limit = { TAG = LBA } set_leader_LBA = yes }
	else_if = { limit = { TAG = LES } set_leader_LES = yes }
	else_if = { limit = { TAG = LIB } set_leader_LIB = yes }
	else_if = { limit = { TAG = MAD } set_leader_MAD = yes }
	else_if = { limit = { TAG = MAL } set_leader_MAL = yes }
	else_if = { limit = { TAG = MAU } set_leader_MAU = yes }
	else_if = { limit = { TAG = MLW } set_leader_MLW = yes }
	else_if = { limit = { TAG = MOR } set_leader_MOR = yes }
	else_if = { limit = { TAG = MOZ } set_leader_MOZ = yes }
	else_if = { limit = { TAG = MRT } set_leader_MRT = yes }
	else_if = { limit = { TAG = NAM } set_leader_NAM = yes }
	else_if = { limit = { TAG = NGR } set_leader_NGR = yes }
	else_if = { limit = { TAG = NIG } set_leader_NIG = yes }
	else_if = { limit = { TAG = RWA } set_leader_RWA = yes }
	else_if = { limit = { TAG = SAF } set_leader_SAF = yes }
	else_if = { limit = { TAG = SAO } set_leader_SAO = yes }
	else_if = { limit = { TAG = SEN } set_leader_SEN = yes }
	else_if = { limit = { TAG = SEY } set_leader_SEY = yes }
	else_if = { limit = { TAG = SHA } set_leader_SHA = yes }
	else_if = { limit = { TAG = SIE } set_leader_SIE = yes }
	else_if = { limit = { TAG = SML } set_leader_SML = yes }
	else_if = { limit = { TAG = SOM } set_leader_SOM = yes }
	else_if = { limit = { TAG = SSU } set_leader_SSU = yes }
	else_if = { limit = { TAG = SUD } set_leader_SUD = yes }
	else_if = { limit = { TAG = SWA } set_leader_SWA = yes }
	else_if = { limit = { TAG = TNZ } set_leader_TNZ = yes }
	else_if = { limit = { TAG = TOG } set_leader_TOG = yes }
	else_if = { limit = { TAG = TUN } set_leader_TUN = yes }
	else_if = { limit = { TAG = UGA } set_leader_UGA = yes }
	else_if = { limit = { TAG = VER } set_leader_VER = yes }
	else_if = { limit = { TAG = ZAM } set_leader_ZAM = yes }
	else_if = { limit = { TAG = ZIM } set_leader_ZIM = yes }
	else_if = { limit = { TAG = ABK } set_leader_ABK = yes }
	else_if = { limit = { TAG = AFR } set_leader_AFR = yes }
	else_if = { limit = { TAG = AGF } set_leader_AGF = yes }
	else_if = { limit = { TAG = AQY } set_leader_AQY = yes }
	else_if = { limit = { TAG = BAL } set_leader_BAL = yes }
	else_if = { limit = { TAG = DAR } set_leader_DAR = yes }
	else_if = { limit = { TAG = FSA } set_leader_FSA = yes }
	else_if = { limit = { TAG = GNA } set_leader_GNA = yes }
	else_if = { limit = { TAG = GNC } set_leader_GNC = yes }
	else_if = { limit = { TAG = HAM } set_leader_HAM = yes }
	else_if = { limit = { TAG = HEZ } set_leader_HEZ = yes }
	else_if = { limit = { TAG = HOR } set_leader_HOR = yes }
	else_if = { limit = { TAG = HOU } set_leader_HOU = yes }
	else_if = { limit = { TAG = ISI } set_leader_ISI = yes }
	else_if = { limit = { TAG = JUB } set_leader_JUB = yes }
	else_if = { limit = { TAG = KUR } set_leader_KUR = yes }
	else_if = { limit = { TAG = LUR } set_leader_LUR = yes }
	else_if = { limit = { TAG = LOG } set_leader_LOG = yes }
	else_if = { limit = { TAG = MLC } set_leader_MLC = yes }
	else_if = { limit = { TAG = NOV } set_leader_NOV = yes }
	else_if = { limit = { TAG = NUS } set_leader_NUS = yes }
	else_if = { limit = { TAG = PKK } set_leader_PKK = yes }
	else_if = { limit = { TAG = PMR } set_leader_PMR = yes }
	else_if = { limit = { TAG = PUN } set_leader_PUN = yes }
	else_if = { limit = { TAG = RCD } set_leader_RCD = yes }
	else_if = { limit = { TAG = ROJ } set_leader_ROJ = yes }
	else_if = { limit = { TAG = SHB } set_leader_SHB = yes }
	else_if = { limit = { TAG = SEL } set_leader_SEL = yes }
	else_if = { limit = { TAG = SNA } set_leader_SNA = yes }
	else_if = { limit = { TAG = SOO } set_leader_SOO = yes }
	else_if = { limit = { TAG = SRF } set_leader_SRF = yes }
	else_if = { limit = { TAG = SWS } set_leader_SWS = yes }
	else_if = { limit = { TAG = TAL } set_leader_TAL = yes }
	else_if = { limit = { TAG = TTP } set_leader_TTP = yes }
	else_if = { limit = { TAG = TUA } set_leader_TUA = yes }
	else_if = { limit = { TAG = UNI } set_leader_UNI = yes }
	else_if = { limit = { TAG = QUE } set_leader_QUE = yes }
	# We need to remove the current leader for the game to use random generation.
	#It's OK if no leader was created in script!

	hidden_effect = {
		#Will set sub-ideology trait if it wasn't given when creating the leader
		set_correct_ideology_trait = yes

		#Removes country flag used for setting the correct leader
		remove_set_ideology_flag = yes
	}
}


update_set_politics = {
	#western
	if = { 
		limit = {
			OR = {
				has_country_flag = set_conservatism
				has_country_flag = set_liberalism
				has_country_flag = set_socialism
				has_country_flag = set_Western_Autocracy
			}
		}
		set_politics = { ruling_party = democratic }
	}
	#Emerging
	if = { 
		limit = {
			OR = {
				has_country_flag = set_Communist-State
				has_country_flag = set_Conservative
				has_country_flag = set_Autocracy
				has_country_flag = set_Vilayat_e_Faqih
				has_country_flag = set_Mod_Vilayat_e_Faqih
				has_country_flag = set_anarchist_communism
			}
		}
		set_politics = { ruling_party = communism }
	}
	#Non-Aligned
	if = { 
		limit = {
			OR = {
				has_country_flag = set_Neutral_conservatism
				has_country_flag = set_oligarchism
				has_country_flag = set_neutral_Social
				has_country_flag = set_Neutral_Libertarian
				has_country_flag = set_Neutral_Autocracy
				has_country_flag = set_Neutral_Communism
				has_country_flag = set_Neutral_Muslim_Brotherhood
				has_country_flag = set_Neutral_green
			}
		}
		set_politics = { ruling_party = neutrality }
	}
	#Salafist
	if = { 
		limit = {
			OR = {
				has_country_flag = set_Kingdom
				has_country_flag = set_Caliphate
			}
		}
		set_politics = { ruling_party = fascism }
	}
	#Nationalist
	if = { 
		limit = {
			OR = {
				has_country_flag = set_Nat_Autocracy
				has_country_flag = set_Nat_Fascism
				has_country_flag = set_Nat_Populism
				has_country_flag = set_Monarchist
			}
		}
		set_politics = { ruling_party = nationalist }
	}
}

set_correct_ideology_trait = {
	if = {
		limit = {
			has_country_flag = set_conservatism
			NOT = { has_country_leader_with_trait = western_conservatism }
		}
		add_country_leader_trait = western_conservatism
	}
	else_if = {
		limit = {
			has_country_flag = set_liberalism
			NOT = { has_country_leader_with_trait = western_liberalism }
		}
		add_country_leader_trait = western_liberalism
	}
	else_if = {
		limit = {
			has_country_flag = set_socialism
			NOT = { has_country_leader_with_trait = western_socialism }
		}
		add_country_leader_trait = western_socialism
	}
	else_if = {
		limit = {
			has_country_flag = set_Western_Autocracy
			NOT = { has_country_leader_with_trait = western_Western_Autocracy }
		}
		add_country_leader_trait = western_Western_Autocracy
	}
	else_if = {
		limit = {
			has_country_flag = set_Communist-State
			NOT = { has_country_leader_with_trait = emerging_Communist-State }
		}
		add_country_leader_trait = emerging_Communist-State
	}
	else_if = {
		limit = {
			has_country_flag = set_Conservative
			NOT = { has_country_leader_with_trait = emerging_Conservative }
		}
		add_country_leader_trait = emerging_Conservative
	}
	else_if = {
		limit = {
			has_country_flag = set_Autocracy
			NOT = { has_country_leader_with_trait = emerging_Autocracy }
		}
		add_country_leader_trait = emerging_Autocracy
	}
	else_if = {
		limit = {
			has_country_flag = set_Vilayat_e_Faqih
			NOT = { has_country_leader_with_trait = emerging_Vilayat_e_Faqih }
		}
		add_country_leader_trait = emerging_Vilayat_e_Faqih
	}
	else_if = {
		limit = {
			has_country_flag = set_Mod_Vilayat_e_Faqih
			NOT = { has_country_leader_with_trait = emerging_Mod_Vilayat_e_Faqih }
		}
		add_country_leader_trait = emerging_Mod_Vilayat_e_Faqih
	}
	else_if = {
		limit = {
			has_country_flag = set_anarchist_communism
			NOT = { has_country_leader_with_trait = emerging_anarchist_communism }
		}
		add_country_leader_trait = emerging_anarchist_communism
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_conservatism
			NOT = { has_country_leader_with_trait = neutrality_Neutral_conservatism }
		}
		add_country_leader_trait = neutrality_Neutral_conservatism
	}
	else_if = {
		limit = {
			has_country_flag = set_oligarchism
			NOT = { has_country_leader_with_trait = neutrality_oligarchism }
		}
		add_country_leader_trait = neutrality_oligarchism
	}
	else_if = {
		limit = {
			has_country_flag = set_neutral_Social
			NOT = { has_country_leader_with_trait = neutrality_neutral_Social }
		}
		add_country_leader_trait = neutrality_neutral_Social
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_Libertarian
			NOT = { has_country_leader_with_trait = neutrality_Neutral_Libertarian }
		}
		add_country_leader_trait = neutrality_Neutral_Libertarian
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_Autocracy
			NOT = { has_country_leader_with_trait = neutrality_Neutral_Autocracy }
		}
		add_country_leader_trait = neutrality_Neutral_Autocracy
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_Communism
			NOT = { has_country_leader_with_trait = neutrality_Neutral_Communism }
		}
		add_country_leader_trait = neutrality_Neutral_Communism
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_Muslim_Brotherhood
			NOT = { has_country_leader_with_trait = neutrality_Neutral_Muslim_Brotherhood }
		}
		add_country_leader_trait = neutrality_Neutral_Muslim_Brotherhood
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_green
			NOT = { has_country_leader_with_trait = neutrality_Neutral_green }
		}
		add_country_leader_trait = neutrality_Neutral_green
	}
	else_if = {
		limit = {
			has_country_flag = set_Kingdom
			NOT = { has_country_leader_with_trait = salafist_Kingdom }
		}
		add_country_leader_trait = salafist_Kingdom
	}
	else_if = {
		limit = {
			has_country_flag = set_Caliphate
			NOT = { has_country_leader_with_trait = salafist_Caliphate }
		}
		add_country_leader_trait = salafist_Caliphate
	}
	else_if = {
		limit = {
			has_country_flag = set_Nat_Autocracy
			NOT = { has_country_leader_with_trait = nationalist_Nat_Autocracy }
		}
		add_country_leader_trait = nationalist_Nat_Autocracy
	}
	else_if = {
		limit = {
			has_country_flag = set_Nat_Fascism
			NOT = { has_country_leader_with_trait = nationalist_Nat_Fascism }
		}
		add_country_leader_trait = nationalist_Nat_Fascism
	}
	else_if = {
		limit = {
			has_country_flag = set_Nat_Populism
			NOT = { has_country_leader_with_trait = nationalist_Nat_Populism }
		}
		add_country_leader_trait = nationalist_Nat_Populism
	}
	else_if = {
		limit = {
			has_country_flag = set_Monarchist
			NOT = { has_country_leader_with_trait = nationalist_Monarchist }
		}
		add_country_leader_trait = nationalist_Monarchist
	}
}

remove_set_ideology_flag = {
	if = {
		limit = { has_country_flag = set_conservatism }
		clr_country_flag = set_conservatism
	}
	if = {
		limit = { has_country_flag = set_liberalism }
		clr_country_flag = set_liberalism
	}
	if = {
		limit = { has_country_flag = set_socialism }
		clr_country_flag = set_socialism
	}
	if = {
		limit = { has_country_flag = set_Western_Autocracy }
		clr_country_flag = set_Western_Autocracy
	}
	if = {
		limit = { has_country_flag = set_Communist-State }
		clr_country_flag = set_Communist-State
	}
	if = {
		limit = { has_country_flag = set_Conservative }
		clr_country_flag = set_Conservative
	}
	if = {
		limit = { has_country_flag = set_Autocracy }
		clr_country_flag = set_Autocracy
	}
	if = {
		limit = { has_country_flag = set_Vilayat_e_Faqih }
		clr_country_flag = set_Vilayat_e_Faqih
	}
	if = {
		limit = { has_country_flag = set_Mod_Vilayat_e_Faqih }
		clr_country_flag = set_Mod_Vilayat_e_Faqih
	}
	if = {
		limit = { has_country_flag = set_anarchist_communism }
		clr_country_flag = set_anarchist_communism
	}
	if = {
		limit = { has_country_flag = set_Kingdom }
		clr_country_flag = set_Kingdom
	}
	if = {
		limit = { has_country_flag = set_Caliphate }
		clr_country_flag = set_Caliphate
	}
	if = {
		limit = { has_country_flag = set_Neutral_conservatism }
		clr_country_flag = set_Neutral_conservatism
	}
	if = {
		limit = { has_country_flag = set_oligarchism }
		clr_country_flag = set_oligarchism
	}
	if = {
		limit = { has_country_flag = set_neutral_Social }
		clr_country_flag = set_neutral_Social
	}
	if = {
		limit = { has_country_flag = set_Neutral_Libertarian }
		clr_country_flag = set_Neutral_Libertarian
	}
	if = {
		limit = { has_country_flag = set_Neutral_Autocracy }
		clr_country_flag = set_Neutral_Autocracy
	}
	if = {
		limit = { has_country_flag = set_Neutral_Communism }
		clr_country_flag = set_Neutral_Communism
	}
	if = {
		limit = { has_country_flag = set_Neutral_green }
		clr_country_flag = set_Neutral_green
	}
	if = {
		limit = { has_country_flag = set_Neutral_Muslim_Brotherhood }
		clr_country_flag = set_Neutral_Muslim_Brotherhood
	}
	if = {
		limit = { has_country_flag = set_Nat_Autocracy }
		clr_country_flag = set_Nat_Autocracy
	}
	if = {
		limit = { has_country_flag = set_Nat_Fascism }
		clr_country_flag = set_Nat_Fascism
	}
	if = {
		limit = { has_country_flag = set_Nat_Populism }
		clr_country_flag = set_Nat_Populism
	}
	if = {
		limit = { has_country_flag = set_Monarchist }
		clr_country_flag = set_Monarchist
	}
}

set_failsafe_values = {
	#Western
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = conservatism_pop
					has_variable = liberalism_pop
					has_variable = socialism_pop
					has_variable = Western_Autocracy_pop
				}
			}
		}
		if = { limit = { has_elections = yes }
			random_list = {
				2 = {
					set_variable = { socialism_pop = 0.3 }
					set_variable = { conservatism_pop = 0.1 }
					set_variable = { liberalism_pop = 0.1 }
				
				}
				2 = {
					set_variable = { conservatism_pop = 0.3 }
					set_variable = { socialism_pop = 0.1 }
					set_variable = { liberalism_pop = 0.1 }
				}
			}
			else = {
				random_list = {
					2 = {
						set_variable = { Western_Autocracy_pop = 0.3 }
						set_variable = { conservatism_pop = 0.1 }
						set_variable = { socialism_pop = 0.1 }
					}
					2 = {
						set_variable = { Western_Autocracy_pop = 0.5 }
						set_variable = { liberalism_pop = 0.1 }
						set_variable = { socialism_pop = 0.1 }
					}
				}
			}
		}
	}
	#Emerging
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = Communist-State_pop
					has_variable = Conservative_pop
					has_variable = Autocracy_pop
					has_variable = Vilayat_e_Faqih_pop
					has_variable = Mod_Vilayat_e_Faqih_pop
					has_variable = anarchist_communism_pop
				}
			}
		}
		if = { limit = { has_elections = yes }
		
			if = { limit = { has_idea = shia }
				random_list = {
					2 = {
						set_variable = { Vilayat_e_Faqih_pop = 0.5 } #iranian revolution is spreading
						set_variable = { Mod_Vilayat_e_Faqih_pop = 0.2 }
						set_variable = { anarchist_communism_pop = 0.1 }
					
					}
					1 = {
						set_variable = { Vilayat_e_Faqih_pop = 0.4 } #iranian revolution is spreading
						set_variable = { Mod_Vilayat_e_Faqih_pop = 0.3 }
						set_variable = { anarchist_communism_pop = 0.2 }
					}
				}
			}
			if = { limit = { has_idea = western_country }
				set_variable = { anarchist_communism_pop = 0.5 } #left-wing radicalism can rise
				set_variable = { Communist-State_pop = 0.01 } #communism is dead
			}
			else_if = { limit = { OR = { Russian_Proficient = yes is_asian_nation = yes } } #soviet block and asia
				random_list = {
					2 = {
						set_variable = { Conservative_pop = 0.3 } #reactionary
						set_variable = { Communist-State_pop = 0.1 } #communism can be a potent force still here
					}
					2 = {
						set_variable = { Conservative_pop = 0.1 } #reactionary
						set_variable = { Communist-State_pop = 0.2 } #communism can be a potent force still here
					}
				}
			}
			else_if = { limit = { OR = { is_Central_America = yes is_caribbean_nation = yes is_South_America = yes } }
				set_variable = { anarchist_communism_pop = 0.5 } #revolutionary socialism is major force
				set_variable = { Communist-State_pop = 0.1 } #more hard core castroism is muted
			}
			else_if = { limit = { always = yes }
				set_variable = { anarchist_communism_pop = 0.5 } #generic left-radical movement
			}
		}
		else_if = { limit = { has_elections = no }
		
			if = { limit = { has_idea = shia }
				set_variable = { Vilayat_e_Faqih_pop = 0.5 } #iranian revolution is spreading
			}
			if = { limit = { has_idea = western_country }
				set_variable = { Communist-State_pop = 0.5 } #communism is only viable western emerging autocratic force
				set_variable = { anarchist_communism_pop = 0.1 } #revolutionary socialism is supporting role
			}
			else_if = { limit = { OR = { Russian_Proficient = yes is_asian_nation = yes } } #soviet block and asia
				random_list = {
					2 = {
						set_variable = { Autocracy_pop = 0.3 } #reactionary autocrat
						set_variable = { Communist-State_pop = 0.1 } #communism can be a potent force still here
					}
					2 = {
						set_variable = { Autocracy_pop = 0.1 } #reactionary autocrat
						set_variable = { Communist-State_pop = 0.3 } #communism can be a potent force still here
					}
				}
			}
			else_if = { limit = { OR = { is_Central_America = yes is_caribbean_nation = yes is_South_America = yes } }
				set_variable = { Communist-State_pop = 0.5 } #communism! viva Che!
			}
			else_if = { limit = { always = yes }
				set_variable = { Autocracy_pop = 0.5 } #generic autocracy
			}
		}
	}
	#Non-aligned
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = Neutral_conservatism_pop
					has_variable = oligarchism_pop
					has_variable = neutral_Social_pop
					has_variable = Neutral_Libertarian_pop
					has_variable = Neutral_Autocracy_pop
					has_variable = Neutral_Communism_pop
					has_variable = Neutral_green_pop
					has_variable = Neutral_Muslim_Brotherhood_pop
				}
			}
		}
		if = { limit = { has_elections = yes }
		
			if = { limit = { Is_Possible_Muslim_Brotherhood = yes }
				set_variable = { Neutral_Muslim_Brotherhood_pop = 0.5 } #Islamism!
			}
			else_if = { limit = { has_idea = western_country }
				random_list = {
					2 = {
						set_variable = { Neutral_Libertarian_pop = 0.3 } #libertarian
						set_variable = { Neutral_green_pop = 0.1 } #Green party
					}
					2 = {
						set_variable = { Neutral_green_pop = 0.3 } #Green party
						set_variable = { Neutral_Libertarian_pop = 0.1 } #libertarian
						set_variable = { neutral_Social_pop = 0.02 }
					}
					2 = {
						set_variable = { Neutral_green_pop = 0.2 } #Green party
						set_variable = { Neutral_Libertarian_pop = 0.1 } #libertarian
						set_variable = { neutral_Social_pop = 0.15 }
					}
				}
			}
			else_if = { limit = { OR = { Russian_Proficient = yes } } #soviet block
				random_list = {
					2 = {
						set_variable = { oligarchism_pop = 0.3 }
						set_variable = { Neutral_Communism_pop = 0.1 } #communism can be a potent force still here
					}
					2 = {
						set_variable = { oligarchism_pop = 0.1 } #reactionary
						set_variable = { Neutral_Communism_pop = 0.2 } #communism can be a potent force still here
					}
				}
			}
			else_if = { limit = { OR = { is_Central_America = yes is_caribbean_nation = yes is_South_America = yes } }
				set_variable = { Neutral_conservatism_pop = 0.5 }
				set_variable = { Neutral_green_pop = 0.1 }
			}
			else_if = { limit = { always = yes }
				set_variable = { Neutral_conservatism_pop = 0.5 }
			}
		}
		else_if = { limit = { has_elections = no }
			
			if = { limit = { Is_Possible_Muslim_Brotherhood = yes }
				set_variable = { Neutral_Muslim_Brotherhood_pop = 0.5 } #Islamism!
			}
			if = { limit = { has_idea = western_country }
				set_variable = { Neutral_Autocracy_pop = 0.5 }
			}
			else_if = { limit = { OR = { Russian_Proficient = yes is_asian_nation = yes } } #soviet block and asia
				set_variable = { Neutral_Communism_pop = 0.5 }
			}
			else_if = { limit = { OR = { is_asian_nation = yes } } #asia
				random_list = {
					2 = {
						set_variable = { Neutral_Autocracy_pop = 0.3 }
					}
					2 = {
						set_variable = { Neutral_Communism_pop = 0.3 }
					}
				}
			}
			else_if = { limit = { OR = { is_Central_America = yes is_caribbean_nation = yes is_South_America = yes } }
				set_variable = { Neutral_Autocracy_pop = 0.5 }
			}
			else_if = { limit = { always = yes }
				set_variable = { Neutral_Autocracy_pop = 0.5 }
			}
		}
	}
	#Salafism
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = Kingdom_pop
					has_variable = Caliphate_pop
				}
			}
		}
		set_variable = { Caliphate_pop = 0.5 }
	}
	#Nationalist
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = Nat_Autocracy_pop
					has_variable = Nat_Fascism_pop
					has_variable = Nat_Populism_pop
					has_variable = Monarchist_pop
				}
			}
		}
		if = { limit = { has_elections = yes }
			set_variable = { Nat_Populism_pop = 0.5 }
		}
		else_if = { limit = { has_elections = no }
			
			if = { limit = { OR = { has_idea = western_country Russian_Proficient = yes } } #soviet block
				set_variable = { Nat_Fascism_pop = 0.5 }
			}
			else_if = { limit = { OR = { is_asian_nation = yes } } #asia
				random_list = {
					5 = {
						set_variable = { Nat_Autocracy_pop = 0.3 }
					}
					1 = {
						set_variable = { Monarchist_pop = 0.3 }
					}
				}
			}
			else_if = { limit = { always = yes }
				set_variable = { Nat_Autocracy_pop = 0.5 }
			}
		}
	}
}

## Failsafe set change ideology if none specified ##
#intended for on_action

set_failsafe_change_leader = {
	if = {
		limit = { 
			NOT = {
				OR = {
					has_country_flag = set_conservatism
					has_country_flag = set_liberalism
					has_country_flag = set_socialism
					has_country_flag = set_Western_Autocracy
					has_country_flag = set_Communist-State
					has_country_flag = set_Conservative
					has_country_flag = set_Autocracy
					has_country_flag = set_Vilayat_e_Faqih
					has_country_flag = set_Mod_Vilayat_e_Faqih
					has_country_flag = set_anarchist_communism
					has_country_flag = set_Kingdom
					has_country_flag = set_Caliphate
					has_country_flag = set_Neutral_conservatism
					has_country_flag = set_oligarchism
					has_country_flag = set_neutral_Social
					has_country_flag = set_Neutral_Libertarian
					has_country_flag = set_Neutral_Autocracy
					has_country_flag = set_Neutral_Communism
					has_country_flag = set_Neutral_green
					has_country_flag = set_Neutral_Muslim_Brotherhood
					has_country_flag = set_Nat_Autocracy
					has_country_flag = set_Nat_Fascism
					has_country_flag = set_Nat_Populism
					has_country_flag = set_Monarchist
				}
			}
		}
		set_temp_variable = { prevmax_temp = 0 }
		if = { limit = { has_government = democratic }
			if = {
				limit = {
					has_variable = conservatism_pop
					check_variable = { conservatism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = conservatism_pop }
			}
			if = {
				limit = {
					has_variable = liberalism_pop
					check_variable = { liberalism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = liberalism_pop }
			}
			if = {
				limit = {
					has_variable = socialism_pop
					check_variable = { socialism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = socialism_pop }
			}
			if = {
				limit = {
					has_variable = Western_Autocracy_pop
					check_variable = { Western_Autocracy_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Western_Autocracy_pop }
			}
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = conservatism_pop } }
				set_country_flag = set_conservatism
			}
			else_if = { limit = { check_variable = { prevmax_temp = liberalism_pop } }
				set_country_flag = set_liberalism
			}
			else_if = { limit = { check_variable = { prevmax_temp = socialism_pop } }
				set_country_flag = set_socialism
			}
			else_if = { limit = { check_variable = { prevmax_temp = Western_Autocracy_pop } }
				set_country_flag = set_Western_Autocracy
			}
		}
		
		if = { limit = { has_government = communism }
			if = {
				limit = {
					has_variable = Communist-State_pop
					check_variable = { Communist-State_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Communist-State_pop }
			}
			if = {
				limit = {
					has_variable = Conservative_pop
					check_variable = { Conservative_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Conservative_pop }
			}
			if = {
				limit = {
					has_variable = Autocracy_pop
					check_variable = { Autocracy_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Autocracy_pop }
			}
			if = {
				limit = {
					has_variable = Vilayat_e_Faqih_pop
					check_variable = { Vilayat_e_Faqih_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Vilayat_e_Faqih_pop }
			}
			if = {
				limit = {
					has_variable = Mod_Vilayat_e_Faqih_pop
					check_variable = { Mod_Vilayat_e_Faqih_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Mod_Vilayat_e_Faqih_pop }
			}
			if = {
				limit = {
					has_variable = anarchist_communism_pop
					check_variable = { anarchist_communism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = anarchist_communism_pop }
			}
			
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = Communist-State_pop } }
				set_country_flag = set_Communist-State
			}
			else_if = { limit = { check_variable = { prevmax_temp = Conservative_pop } }
				set_country_flag = set_Conservative
			}
			else_if = { limit = { check_variable = { prevmax_temp = Autocracy_pop } }
				set_country_flag = set_Autocracy
			}
			else_if = { limit = { check_variable = { prevmax_temp = Vilayat_e_Faqih_pop } }
				set_country_flag = set_Vilayat_e_Faqih
			}
			else_if = { limit = { check_variable = { prevmax_temp = Mod_Vilayat_e_Faqih_pop } }
				set_country_flag = set_Mod_Vilayat_e_Faqih
			}
			else_if = { limit = { check_variable = { prevmax_temp = anarchist_communism_pop } }
				set_country_flag = set_anarchist_communism
			}
		}
		
		if = { limit = { has_government = neutrality }
			if = {
				limit = {
					has_variable = Neutral_conservatism_pop
					check_variable = { Neutral_conservatism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_conservatism_pop }
			}
			if = {
				limit = {
					has_variable = oligarchism_pop
					check_variable = { oligarchism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = oligarchism_pop }
			}
			if = {
				limit = {
					has_variable = neutral_Social_pop
					check_variable = { neutral_Social_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = neutral_Social_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_Libertarian_pop
					check_variable = { Neutral_Libertarian_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_Libertarian_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_Autocracy_pop
					check_variable = { Neutral_Autocracy_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_Autocracy_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_Communism_pop
					check_variable = { Neutral_Communism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_Communism_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_green_pop
					check_variable = { Neutral_green_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_green_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_Muslim_Brotherhood_pop
					check_variable = { Neutral_Muslim_Brotherhood_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_Muslim_Brotherhood_pop }
			}
			
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = Neutral_conservatism_pop } }
				set_country_flag = set_Neutral_conservatism
			}
			else_if = { limit = { check_variable = { prevmax_temp = oligarchism_pop } }
				set_country_flag = set_oligarchism
			}
			else_if = { limit = { check_variable = { prevmax_temp = neutral_Social_pop } }
				set_country_flag = set_neutral_Social
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_Libertarian_pop } }
				set_country_flag = set_Neutral_Libertarian
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_Autocracy_pop } }
				set_country_flag = set_Neutral_Autocracy
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_Communism_pop } }
				set_country_flag = set_Neutral_Communism
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_green_pop } }
				set_country_flag = set_Neutral_Muslim_Brotherhood
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_Muslim_Brotherhood_pop } }
				set_country_flag = set_Neutral_green
			}
		}
		if = { limit = { has_government = nationalist }
			if = {
				limit = {
					has_variable = Nat_Autocracy_pop
					check_variable = { Nat_Autocracy_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Nat_Autocracy_pop }
			}
			if = {
				limit = {
					has_variable = Nat_Fascism_pop
					check_variable = { Nat_Fascism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Nat_Fascism_pop }
			}
			if = {
				limit = {
					has_variable = Nat_Populism_pop
					check_variable = { Nat_Populism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Nat_Populism_pop }
			}
			if = {
				limit = {
					has_variable = Monarchist_pop
					check_variable = { Monarchist_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Monarchist_pop }
			}
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = Nat_Autocracy_pop } }
				set_country_flag = set_Nat_Autocracy
			}
			else_if = { limit = { check_variable = { prevmax_temp = Nat_Fascism_pop } }
				set_country_flag = set_Nat_Fascism
			}
			else_if = { limit = { check_variable = { prevmax_temp = Nat_Populism_pop } }
				set_country_flag = set_Nat_Populism
			}
			else_if = { limit = { check_variable = { prevmax_temp = Monarchist_pop } }
				set_country_flag = set_Monarchist
			}
		}
		
		if = { limit = { has_government = fascism }
			if = {
				limit = {
					has_variable = Kingdom_pop
					check_variable = { Kingdom_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Kingdom_pop }
			}
			if = {
				limit = {
					has_variable = Caliphate_pop
					check_variable = { Caliphate_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Caliphate_pop }
			}
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = Kingdom_pop } }
				set_country_flag = set_Kingdom
			}
			else_if = { limit = { check_variable = { prevmax_temp = Caliphate_pop } }
				set_country_flag = set_Caliphate
			}
		}
	}
}