on_actions = {
	on_weekly_JAP = {
		effect = {

		}
	}

	on_monthly_JAP = {
		effect = {
			# Monthly Consciousness Decay
			decay_mdmosjap_conrad_left = yes
			decay_mdmosjap_conrad_right = yes

			#Depopulation Modifier
			add_to_variable = { mdmosjap_var_depopulating_virtual_rates_six_months_counter = 1 }
			if = {
				limit = {
					OR = {
						check_variable = { mdmosjap_var_depopulating_virtual_rates_six_months_counter = 12 }
						check_variable = { mdmosjap_var_depopulating_virtual_rates_six_months_counter > 12 }
					}
				}
				add_to_variable = { mdmosjap_var_depopulating_virtual_rates = -0.010 }
				add_to_variable = { mdmosjap_var_depopulating_healthcare_impact = 0.005 }
				add_to_variable = { mdmosjap_var_depopulating_social_cost_impact = 0.005 }
				set_variable = { mdmosjap_var_depopulating_virtual_rates_six_months_counter = 0 }
				force_update_dynamic_modifier = yes
			}

			# Koichi Kato Scandal
			if = {
				limit = {
					original_tag = JAP
					date > 2002.3.0
					has_country_flag = MDMOSJAP_KATO_REBELLION_EXECUTED
					has_country_leader = { name = "Koichi Kato" }
					NOT = { has_country_flag = MDMOSJAP_EVENT_KATO_ONCE_QUIT_FROM_DIET }
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.801 random_days = 14 } }
			}

			# Koichi Kato leaves diet
			if = {
				limit = {
					original_tag = JAP
					date > 2002.3.0
					OR = {
						has_country_flag = MDMOSJAP_KATO_REBELLION_FAILED_SUCCESSFULLY
						NOT = { has_country_leader = { name = "Koichi Kato" } }
						NOT = { has_country_flag = MDMOSJAP_KATO_REBELLION_EXECUTED }
					}
					NOT = { has_country_flag = MDMOSJAP_EVENT_KATO_ONCE_QUIT_FROM_DIET }
					NOT = { has_country_flag = MDMOSJAP_RETIREMENT_KOICHI_KATO }
				}
				JAP = { country_event = { id = mdmosjap_japan.140402001 random_days = 14 } }
			}

			# Taku Yamasaki Scandal
			if = {
				limit = {
					original_tag = JAP
					date > 2003.1.0
					has_country_leader = { name = "Taku Yamasaki" }
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.852 random_days = 28 } }
			}

			# Dissolve NCP (CP)
			if = {
				limit = {
					original_tag = JAP
					date > 2003.11.0 #Date of 2003 Lower House General Election
					has_country_flag = MDMOSJAP_LP
					NOT = { is_in_array = { ruling_party = 6 } }
					NOT = { has_country_flag = MDMOSJAP_NCP_DISSOLUTION }
				}
				JAP = { country_event = { id = mdmosjap_japan.151121001 days = 9 random_days = 14 } }
			}

			# Nisshiren Scandal
			if = {
				limit = {
					original_tag = JAP
					date > 2004.7.0
					NOT = { has_country_leader = { name = "Hiromu Nonaka" } } # Nonoka not PM
					NOT = { has_country_flag = MDMOSJAP_EVENT_NONAKA_SCANDAL }
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.901 random_days = 28 } }
			}
			if = {
				limit = {
					original_tag = JAP
					date > 2004.7.0
					NOT = { has_country_leader = { name = "Hiromu Nonaka" } } # Nonoka is PM
					NOT = { has_country_flag = MDMOSJAP_EVENT_NONAKA_SCANDAL }
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.902 random_days = 28 } }
			}

			# Preceding Autumn Equinox Crisis
			if = {
				limit = {
					original_tag = JAP
					date > 2004.8.10
					has_country_leader = { name = "Yohei Kono" }
					has_country_flag = MDMOSJAP_EVENT_NONAKA_SCANDAL
					has_country_flag = MDMOSJAP_KATO_REBELLION_EPILOGUE_KONO_ENDING
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.952 random_days = 14 } }
			}
			if = {
				limit = {
					original_tag = JAP
					date > 2004.8.10
					has_country_leader = { name = "Koichi Kato" }
					has_country_flag = MDMOSJAP_KATO_REBELLION_EPILOGUE_KATO_STAYED
					has_country_flag = MDMOSJAP_EVENT_NONAKA_SCANDAL
					has_country_flag = MDMOSJAP_KATO_REBELLION_EPILOGUE_KONO_ENDING
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.953 random_days = 14 } }
			}

			# Kenkiho Recession
			if = {
				limit = {
					original_tag = JAP
					NOT = { has_country_flag = MDMOSJAP_EVENTEXECUTED_KENKIHO_RECESSION }
					date > 2007.6.0
				}
				JAP = { country_event = { id = mdmosjap_japan.190621001 random_days = 28 } }
			}

			# 2008 Financial Crisis Impact
			if = {
				limit = {
					original_tag = JAP
					NOT = { has_country_flag = MDMOSJAP_EVENTEXECUTED_LEHMAN_SHOCK_AFTERMATH_IN_JAPAN }
					USA = {
						exists = yes
						OR = {
							has_country_flag = usa_nationalize_four
							has_country_flag = usa_bailout_four
							has_country_flag = usa_nothing_four
						}
					}
					date > 2008.9.30
				}
				JAP = { country_event = { id = mdmosjap_japan.200916001 random_days = 28 } }
			}

			# Kim Hyon-hui petitions to enter Japan
			if = {
				limit = {
					original_tag = JAP
					NOT = { has_country_flag = MDMOSJAP_EVENTEXECUTED_KIM_HYON_HUI }
					OR = {
						has_idea = JAP_abductionleague
						has_country_flag = MDMOSJAP_YES_PYONGYANG_STATEMENT
						has_country_flag = MDMOSJAP_NO_PYONGYANG_STATEMENT
						has_country_flag = MDMOSJAP_POOR_PYONGYANG_STATEMENT
					}
					OR = {
						NKO = { exists = yes }
						KOR = { exists = yes }
					}
					date > 2010.7.0
				}
				JAP = { country_event = { id = mdmosjap_japan.220720001 random_days = 28 } }
			}

			# Completion of new Henoko USFJ Base
			if = {
				limit = {
					original_tag = JAP
					USA = {
						exists = yes
						is_puppet = no
						is_subject = no
					}
					has_country_flag = MDMOSJAP_HENOKO_PREPARATION
					date > 2030.1.0
				}
				JAP = { country_event = { id = mdmosjap_japan.430101001 random_days = 28 } }
			}

			# Retirement of Hiromu Nonaka
			if = {
				limit = {
					date > 2003.10.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_HIROMU_NONAKA } # Will prevent multiple execution
						NOT = { has_country_leader = { name = "Hiromu Nonaka" } }
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.151001001 random_days = 14 } }
			}

			# Retirement of Yohei Kono
			if = {
				limit = {
					date > 2008.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_YOHEI_KONO } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.200917001 random_days = 14 } }
			}

			# Retirement of Junichiro Koizumi
			if = {
				limit = {
					date > 2008.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_JUNICHIRO_KOIZUMI } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.200926001 random_days = 14 } }
			}

			# Retirement of Yoshiro Mori
			if = {
				limit = {
					date > 2012.7.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_YOSHIRO_MORI } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.240723001 random_days = 14 } }
			}

			# Retirement of Taku Yamasaki
			if = {
				limit = {
					date > 2012.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_TAKU_YAMASAKI } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.240901001 random_days = 14 } }
			}

			# Retirement of Yasuo Fukuda
			if = {
				limit = {
					date > 2012.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_YASUO_FUKUDA } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.240927001 random_days = 14 } }
			}

			# Retirement of Yukio Hatoyama
			if = {
				limit = {
					date > 2012.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_YUKIO_HATOYAMA } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.241121001 random_days = 14 } }
			}

			# Retirement of Koichi Kato
			if = {
				limit = {
					date > 2013.4.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_KOICHI_KATO } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.250417001 random_days = 14 } }
			}

			# Death of Takako Doi
			if = {
				limit = {
					date > 2014.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_TAKAKO_DOI } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.260921001 random_days = 14 } }
			}
		}
	}

	on_startup = {
		effect = {
			JAP = {
				set_cosmetic_tag = JAP_western_conservatism

				clr_country_flag = MDMOSJAP_EVENT_THE_GREAT_REFERENDUM_MALCONCLUSION
				build_railway = {	#Ouu Main Line (Yamagata Shinkansen): Fukushima-Yamagata-Shinjo
					level = 2
					path = { 1024 4153 4067 }
					start_province = 1024 target_province = 4067
				}
				build_railway = {	#Uchibo Line: Chiba-Awa Kamogawa
					level = 1
					path = { 4188 4184 }
					start_province = 4188 target_province = 4184
				}
				build_railway = {	#Chuo Main Line: Tokyo-Kofu-Okaya/Shiojiri-Tajimi-Nagoya
					level = 2
					path = { 1182 12072 10100 7187 10125 }
					start_province = 1182 target_province = 10125
				}
				build_railway = {
					level = 1
					path = { 7072 6168 }
					start_province = 7072 target_province = 6168
				}
				build_railway = {	#San'in Main Line: Kyoto-Maizuru
					level = 2
					path = { 11960 1136 }
					start_province = 11960 target_province = 1136
				}
				build_railway = {	#Sanyo Main Line: Kobe-Moji
					level = 1
					path = { 6168 12031 7212 11946 1092 10052 11985 1025 }
					start_province = 6168 target_province = 1025
				}
				build_railway = {	#Seto-Ohashi Line: Okayama-Takamatsu
					level = 2
					path = { 7212 4094 }
					start_province = 7212 target_province = 4094
				}

				build_railway = {	#Dosan Line: Tadotsu-Awa Ikeda
					level = 2
					path = { 4094 12028 }
					start_province = 4094 target_province = 12028
				}

				build_railway = {	#Nagasaki Main Line: Kubota-Nagasaki
					level = 1
					path = { 1158 9950 }
					start_province = 1158 target_province = 9950
				}

				#2000 BOOKMARK
				if = { limit = { date < 2016.12.31 }
					set_global_flag = MDMOSJAP_JAP_STARTS_2000

					#Constitutional Consciousness
					set_variable = { mdmosjap_JAP_var_LeftCon = 70.0 }
					set_variable = { mdmosjap_JAP_var_RightCon = 30.0 }

					CALC_MDMOSJAP_CONCON_MAXLIMIT = yes

					#Popular Radicalism
					set_variable = { mdmosjap_JAP_var_LeftRad = 5.0 }
					set_variable = { mdmosjap_JAP_var_RightRad = 5.0 }

					CALC_MDMOSJAP_CONRAD_MAXLIMIT = yes

					#MILLENNIUM DAWN ACCESS
					set_variable = { election_threshold = 0.00 } #JAPAN HAS NO ELECTION THRESHOLD SYSTEM IN NATURE
					set_country_flag = MDMOSJAP_MDMOSJAP_LOADED
					MDACCESS_CALC_zero_interest_policy = yes
				#	calculate_debt_rate = yes
					set_variable = { check_point_debt = debt }

				}
			}


			### United States of America
			USA = {
				#2017 BOOKMARK
				if = { limit = { date > 2016.12.31 }
					country_event = mdmosjap_japan.1610301										#By NF: JAP_article_five_of_treaty
				}
			}

			### Republic of Korea
			KOR = {
				#2017 BOOKMARK
				if = { limit = { date > 2016.12.31 }
					#HANDOVERED EVENTS' SCHEDULES
					country_event = { id = mdmosjap_japan.1640831 days = 145 }				#2017.05.26 - By NF: JAP_last_apologize
				}
			}
		}
	}

	on_declare_war = {
		effect = {
			#ROOT = ATTACKER / FROM = DEFENDER
			#IF JAP GOES WAR ON USA, ROOT = JAP (ATTACKER) / FROM = USA (DEFENDER)

			#THE CHINA ENCIRCLEMENT NETWORK or APDA GOES WAR WITH CHINA
			if = {
				limit = {
					ROOT = {
						AND = {
							OR = {
								has_idea = JAP_anticcp_refugees
								has_idea = JAP_anticcp_refugees_revenge1
								has_idea = JAP_anticcp_refugees_revenge2
								has_idea = JAP_anticcp_member
								has_idea = JAP_apda_member
							}
							NOT = { has_country_flag = MDMOSJAP_ANTICCP_IS_IN_THE_WAR_WITH_CHINA }
						}
					}
					any_other_country = {
						AND = {
							OR = {
								has_idea = JAP_anticcp_refugees
								has_idea = JAP_anticcp_refugees_revenge1
								has_idea = JAP_anticcp_refugees_revenge2
								has_idea = JAP_anticcp_member
								has_idea = JAP_apda_member
							}
							NOT = { has_country_flag = MDMOSJAP_ANTICCP_IS_IN_THE_WAR_WITH_CHINA }
						}
					}
					FROM = {
						OR = {
							tag = CHI
							is_guaranteed_by = CHI
							is_in_faction_with = CHI
							is_subject_of = CHI
							is_puppet_of = CHI
						}
					}
				}
				log = "[GetDateText]: [Root.GetName]: has declared war on [From.GetName]"
				ROOT = {
				#	hidden_effect = {
						country_event = mdmosjap_japan.410101
				#	}
					if = {
						limit = {
							OR = {
								has_idea = JAP_anticcp_refugees
								has_idea = JAP_anticcp_refugees_revenge1
								has_idea = JAP_anticcp_refugees_revenge2
								has_idea = JAP_anticcp_member
							}
						}
						create_faction = mdmosjap_faction_JAP_anticcp_alliance
					}
					if = {
						limit = {
							has_idea = JAP_apda_member
						}
						create_faction = mdmosjap_faction_JAP_apda_alliance
					}
				}
				set_global_flag = MDMOSJAP_THIRD_SINO_JAPANESE_WAR
			}

			#CHINA GOES WAR WITH THE CHINA ENCIRCLEMENT NETWORK or APDA
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = CHI
							is_in_faction_with = CHI
						#	is_subject_of = CHI
						#	is_puppet_of = CHI
						}
					}
					FROM = {
						AND = {
							OR = {
								has_idea = JAP_anticcp_refugees
								has_idea = JAP_anticcp_refugees_revenge1
								has_idea = JAP_anticcp_refugees_revenge2
								has_idea = JAP_anticcp_member
								has_idea = JAP_apda_member
							}
							NOT = { has_country_flag = MDMOSJAP_ANTICCP_IS_IN_THE_WAR_WITH_CHINA }
						}
					}
					any_other_country = {
						AND = {
							OR = {
								has_idea = JAP_anticcp_refugees
								has_idea = JAP_anticcp_refugees_revenge1
								has_idea = JAP_anticcp_refugees_revenge2
								has_idea = JAP_anticcp_member
								has_idea = JAP_apda_member
							}
							NOT = { has_country_flag = MDMOSJAP_ANTICCP_IS_IN_THE_WAR_WITH_CHINA }
						}
					}
				}
				log = "[GetDateText]: [Root.GetName]: has declared war on [From.GetName]"
				FROM = {
				#	hidden_effect = {
						country_event = mdmosjap_japan.410102
				#	}
					if = {
						limit = {
							OR = {
								has_idea = JAP_anticcp_refugees
								has_idea = JAP_anticcp_refugees_revenge1
								has_idea = JAP_anticcp_refugees_revenge2
								has_idea = JAP_anticcp_member
							}
						}
						create_faction = mdmosjap_faction_JAP_anticcp_alliance
					}
					if = {
						limit = {
							has_idea = JAP_apda_member
						}
						create_faction = mdmosjap_faction_JAP_apda_alliance
					}
				}
				set_global_flag = MDMOSJAP_THIRD_SINO_JAPANESE_WAR
			}

			#RYUKYU DECLARES INDEPENDENCE WAR WITH JAPAN
			if = {
				limit = {
					tag = JAP
					FROM = { tag = RYU }
					has_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES
				}
				log = "[GetDateText]: [Root.GetName]: has declared war on [From.GetName]"
				#JAPAN SET-UP
				ROOT = {
					country_event = mdmosjap_sengoku.71
					add_opinion_modifier = { target = FROM modifier = mdmosjap_opinion_RYU_JAP_independence_war }
					set_province_controller = 10124	#Preparation to spawn Japanese brigades on Nago
					division_template = {
						name = "Okinawa Prefectural Police"
						is_locked = yes
						#template_counter = 6
						#division_names_group = MDMOSJAP_JAP_POLICE
						regiments = {
							Mot_Inf_Bat = { x = 0 y = 0 }
							L_Inf_Bat = { x = 1 y = 0 }
						#	Special_Forces = { x = 2 y = 0 }
						}
					}
					division_template = {
						name = "Kagoshima Prefectural Police"
						is_locked = yes
						#template_counter = 6
						#division_names_group = MDMOSJAP_JAP_POLICE
						regiments = {
							Mot_Inf_Bat = { x = 0 y = 0 }
							L_Inf_Bat = { x = 1 y = 0 }
						#	Special_Forces = { x = 2 y = 0 }
						}
					}
					set_province_controller = 1123	#Prevent to spawn Ryukyuan brigades on Amamioshima
					618 = {
					#	limit = {
					#		is_core_of = FROM
					#		is_controlled_by = ROOT
					#	}
						create_unit = {
							division = "division_template = \"Okinawa Prefectural Police\" start_experience_factor = 0.1"
							owner = ROOT
							allow_spawning_on_enemy_provs = no
							count = 2
						}
						create_unit = {
							division = "division_template = \"Kagoshima Prefectural Police\" start_experience_factor = 0.1"
							owner = ROOT
							allow_spawning_on_enemy_provs = no
							count = 2
						}
					#	add_building_construction = { type = naval_base level = 1 province = 10124 instant_build = yes }
					}
					if = {
						limit = { has_country_flag = MDMOSJAP_JCW_BEAT_OKINAWAN_WITH_USFJ }
						division_template = {
							name = "Metropolitan Police"
							is_locked = yes
							#template_counter = 6
							#division_names_group = MDMOSJAP_JAP_POLICE
							regiments = {
								Mot_Inf_Bat = { x = 0 y = 0 }
								Mot_Inf_Bat = { x = 0 y = 1 }
								L_Inf_Bat = { x = 1 y = 0 }
								L_Inf_Bat = { x = 1 y = 1 }
							#	Special_Forces = { x = 2 y = 0 }
							}
						}
						618 = {
							create_unit = {
								division = "division_template = \"Metropolitan Police\" start_experience_factor = 0.1"
								owner = ROOT
								allow_spawning_on_enemy_provs = no
								count = 1
							}
						}
					}
				}
				news_event = { id = mdmosjap_sengokunews.71 days = 1 }
				#RYUKYU SET-UP
				FROM = {
					set_capital = { state = 618 }
					add_opinion_modifier = { target = ROOT modifier = mdmosjap_opinion_RYU_JAP_refused_demand }
					REDISTRIBUTE_MDMOSJAP_RYU_GOVERNMENT_SETUP = yes
					swap_ideas = { remove_idea = volunteer_army add_idea = draft_army }
				#	swap_ideas = { remove_idea = volunteer_woman add_idea = drafted_woman }
					swap_ideas = { remove_idea = officer_military_school add_idea = officer_baptism_by_fire }
				#	add_ideas = gdp_3
					add_ideas = depression
					add_ideas = bureau_02
					add_ideas = edu_02
					add_ideas = social_01
					add_ideas = health_01
					add_ideas = Non_State_Actor
					division_template = {
						name = "Ryukyu Civil Defence Forces"
						is_locked = yes
						#template_counter = 6
						#division_names_group = MDMOSJAP_RYU_SEPARATIST
						regiments = {
							Militia_Bat = { x = 0 y = 0 }
							Militia_Bat = { x = 0 y = 1 }
						#	Militia_Bat = { x = 0 y = 2 }
						}
					}
					set_variable = { mdmosjap_RYU_var_StartUpUnitLoop = 0 }
					while_loop_effect = {
						limit = { check_variable = { mdmosjap_RYU_var_StartUpUnitLoop < mdmosjap_RYU_var_SeparatistAggressiveness } }
						618 = {
						#	limit = {
						#		is_controlled_by = FROM
						#	}
							create_unit = {
								division = "division_template = \"Ryukyu Civil Defence Forces\" start_experience_factor = 0.0"
								owner = FROM
								allow_spawning_on_enemy_provs = no
								count = 1
							}
						}
						add_to_variable = { mdmosjap_RYU_var_StartUpUnitLoop = 1 }
					}
					618 = {	#FOR THE OUT OF ABOVE LOOP
						remove_building = { type = infrastructure level = 1 }
						add_building_construction = { type = bunker level = 1 province = 11932 instant_build = yes }
						add_building_construction = { type = coastal_bunker level = 1 province = 11932 instant_build = yes }
					}
					clear_variable = mdmosjap_RYU_var_StartUpUnitLoop
					inherit_technology = ROOT
					add_research_slot = -3
					if = {
						limit = {
							NOT = { has_idea = JAP_RYU_all_okinawa }
							has_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES
						}
						add_ideas = JAP_RYU_all_okinawa
					}
					if = {
						limit = {
							NOT = { has_idea = JAP_RYU_japanese_article_9 }
							has_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES
						}
						add_ideas = JAP_RYU_japanese_article_9
					}
					if = {
						limit = {
							NOT = { has_idea = JAP_RYU_rebellion_weak }
							has_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES
							NOT = { has_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES_CEASED }
							NOT = { has_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES_TRANQUILISED }
						}
						add_ideas = JAP_RYU_rebellion_weak
					}
					set_rule = {
						can_create_factions = no
					}
				#	add_ai_strategy = { type = prepare_for_war id = "JAP" value = 200 }
				#	add_ai_strategy = { type = antagonize id = "JAP" value = 200 }
				#	add_ai_strategy = { type = garrison value = 200 }
				}
			}
		}
	}

	on_capitulation = {
		#ROOT is the capitulated country, FROM is the winner
		effect = {
			#WHEN CHI IS FIGHTING WITH ANTI-CCP NETWORK / APDA
			if = {
				limit = {
					ROOT = {
						tag = CHI
					}
					FROM = {
						OR = {
							AND = {
								tag = TAI
								OR = {
									has_idea = JAP_anticcp_refugees
									has_idea = JAP_anticcp_refugees_revenge1
									has_idea = JAP_anticcp_refugees_revenge2
									has_idea = JAP_anticcp_member
									has_idea = JAP_apda_member
								}
								NOT = { is_in_faction_with = ROOT }
							}
							AND = {
								NOT = { tag = TAI }
								OR = {
									has_idea = JAP_anticcp_refugees
									has_idea = JAP_anticcp_refugees_revenge1
									has_idea = JAP_anticcp_refugees_revenge2
									has_idea = JAP_anticcp_member
									has_idea = JAP_apda_member
								}
								is_in_faction_with = TAI
								NOT = { is_in_faction_with = ROOT }
							}
						}
					}
				}
				ROOT = { capitulation_mdmosjap_CHI = yes }
			}

			#WHEN SOUTH KOREA / NORTH KOREA HAS BEEN CAPITULATED
			if = {
				limit = {
					has_global_flag = MDMOSJAP_SECOND_KOREAN_WAR
					OR = {
						ROOT = { tag = KOR }
						ROOT = { tag = NKO }
					}
					OR = {
						KOR = { NOT = { has_country_flag = MDMOSJAP_SECOND_KOREAN_WAR_LOSER } }
						NKO = { NOT = { has_country_flag = MDMOSJAP_SECOND_KOREAN_WAR_LOSER } }
					}
				}
				ROOT = {
					set_country_flag = MDMOSJAP_SECOND_KOREAN_WAR_LOSER
				}
			}

			#WHEN RYUKYU HAD INDEPENDENCE WAR WITH JAPAN
			if = {
				limit = {
					tag = RYU
					has_war_with = JAP
					has_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES
					NOT = { has_global_flag = MDMOSJAP_RYU_CAPITULATED  }
				}
				FROM = { news_event = { id = mdmosjap_sengokunews.90 days = 1 } }
				clr_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES
				set_global_flag = MDMOSJAP_OKINAWA_IN_FLAMES_IMPOSSIBLE_WAR
			}
		}
	}

	on_uncapitulation = {
		#ROOT is the uncapitulated country that once had capitulated
		effect = {
			#WHEN SOUTH KOREA / NORTH KOREA HAS BEEN CAPITULATED
			if = {
				limit = {
					has_global_flag = MDMOSJAP_SECOND_KOREAN_WAR
					NOT = { has_global_flag = MDMOSJAP_SECOND_KOREAN_WAR_CONFERENCE_EXECUTED }
					OR = {
						ROOT = { tag = KOR }
						ROOT = { tag = NKO }
					}
					has_country_flag = MDMOSJAP_SECOND_KOREAN_WAR_LOSER
				}
				ROOT = {
					clr_country_flag = MDMOSJAP_SECOND_KOREAN_WAR_LOSER
				}
			}
		}
	}

	on_peaceconference_ended = {
		#ROOT is the winner, FROM is the loser
		effect = {
			#REMOVE SOUTH KOREA'S / NORTH KOREA'S CASUS BELLI
			if = {
				limit = {
					has_global_flag = MDMOSJAP_SECOND_KOREAN_WAR
					NOT = { has_global_flag = MDMOSJAP_SECOND_KOREAN_WAR_CONFERENCE_EXECUTED }
					OR = {
						AND = {
							ROOT = { tag = KOR }
							has_wargoal_against = NKO
						}
						AND = {
							ROOT = { tag = NKO }
							has_wargoal_against = KOR
						}
					}
					FROM = {
						OR = {
							tag = NKO
							tag = KOR
						}
						has_country_flag = MDMOSJAP_SECOND_KOREAN_WAR_LOSER
					}
				}
				if = {
					limit = { ROOT = { tag = KOR } }
					remove_wargoal = { target = NKO type = all }
				}
				if = {
					limit = { ROOT = { tag = NKO } }
					remove_wargoal = { target = KOR type = all }
				}
			}
		}
	}

}
