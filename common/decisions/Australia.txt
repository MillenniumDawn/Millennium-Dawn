#By Marmite and MoreDPS
AST_diplo_tug_of_war = {
	
	AST_USA_test1 = {

		allowed = {
			original_tag = AST
		}

		#available = {
		#	USA = {
		#		exists = yes
		#		has_government = western
		#	}
		#}
		fire_only_once = no
		cost = 10
		visible = {
			ROOT = {
				is_ai = no
			}
		}
		complete_effect = {
			add_to_variable = { USA.AST_USA_trade_influence = 5 }
		}
		ai_will_do = {
			factor = 0
		}
	}
	AST_Impose_Manufacturting_Tariffs_On_USA1_dec = {

		allowed = {
			original_tag = AST
		}

		days_re_enable = 360

		cost = 10

		visible = {	
		}

		available = { has_completed_focus = AST_Import_Tariffs }
		complete_effect = {
			country_event = { id = australia_md.52 days = 1 }
			USA = { country_event = { id = australia_md.51 days = 1 } }
			add_to_variable = { USA.AST_USA_trade_influence = -10 }
			USA = {
			add_opinion_modifier = {
				target = AST
				modifier = import_tariffs_mod
			}
			}
		}

		ai_will_do = {
			factor = 0
		}
	}

	AST_CHI_test1 = {

		allowed = {
			original_tag = AST
		}

		fire_only_once = no

		cost = 10

		visible = {
			ROOT = {
				is_ai = no
			}
		}

		complete_effect = {
			add_to_variable = { CHI.AST_CHI_trade_influence = 5 }
		}

		ai_will_do = {
			factor = 0
		}
	}

AST_Impose_Manufacturting_Tariffs_On_CHI1_dec = {

		allowed = {
			original_tag = AST
		}

		days_re_enable = 360

		cost = 10

		visible = {	
		}

		available = { has_completed_focus = AST_Import_Tariffs }
		complete_effect = {
			country_event = { id = australia_md.53 days = 1 }
			CHI = { country_event = { id = australia_md.51 days = 1 } }
			add_to_variable = { CHI.AST_CHI_trade_influence = -10 }
			CHI = {
			add_opinion_modifier = {
				target = AST
				modifier = import_tariffs_mod
			}
			}
		}

		ai_will_do = {
			factor = 0
		}
	}

	AST_Chinese_support_for_senkaku_dec = {

		allowed = {
			original_tag = AST
		}

		fire_only_once = yes

		cost = 25

		visible = {	
		}
		custom_effect_tooltip = "Will increase Chinese Trade Influence by 10"
		available = { has_completed_focus = AST_The_Senkaku_Daiyou_Islands }
		complete_effect = {
			add_to_variable = { CHI.AST_CHI_trade_influence = 10 }
		}

		ai_will_do = {
			factor = 0
		}
	}

}

AST_Citizen_Initiated_Referenda_cat = {


AST_develop_Sangara_rubber_plantation = { #731

		icon = rubber

		allowed = {
		OR = {
		tag = PAP
		tag = AST
		}
		}

		highlight_states = {
			highlight_state_targets = {
				state = 731
			}
		}

		available = {
			has_completed_focus = AST_grow_Sangara_rubber_plantation
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 8
			OR = {
			owns_state = 731
			controls_state = 731
			AND = {
			PAP = controls_state = 731
			ROOT = { tag = AST }
			}
			}
		}

		visible = {
			OR = {
			owns_state = 731
			controls_state = 731
			AND = {
			PAP = controls_state = 731
			ROOT = { tag = AST }
			}
			}

			731 = {
				NOT = {
					has_state_flag = {
						flag = Sangara_rubber_developed
						value = 4
					}
				}
			}
		}

		cost = 25
		days_remove = AST_develop_Sangara_rubber_plantation?30

		modifier = {
			civilian_factory_use = 6
		}

		remove_effect = {
			PAP = {
			add_opinion_modifier = {
				target = AST
				modifier = developed_sangara_mod
			}
			}
			set_temp_variable = { treasury_change = -3.00 }
			modify_treasury_effect = yes
			custom_effect_tooltip = repeatable_decision_tt
			add_to_variable = { var = AST_develop_Sangara_rubber_plantation_duration value = 30 }
			731 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = Sangara_rubber_developed
						}
					}
					set_state_flag = {
						flag = Sangara_rubber_developed
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = Sangara_rubber_developed
						value = 1
					}
				}
			}
			731 = {
				add_resource = {
					type = rubber
					amount = 12
				}
			}
		}

		ai_will_do = {
			base = 0.5
			modifier = {
				factor = 2 #1 was the default weight before
				original_tag = AST
			}
			modifier = {
				factor = 0
				OR = {
					AND = { #Ultimatum decisions are available and we should prio them
						original_tag = SOV
						SOV_we_want_to_send_ultimatums = yes
					}
					AND = { #Too low MP we need to save PP for the laws
						has_manpower < 10000
						NOT = { has_idea = scraping_the_barrel }
					}
					has_political_power < 200
				}
			}
			modifier = { #Running out of the stuff, need more!
				factor = 5
				has_resources_in_country = {
					resource = rubber
					amount < 1
				}
			}
		}

		complete_effect = {
			if = {
				limit = {
					check_variable = { var = AST_develop_Sangara_rubber_plantation_duration value = 30 compare = less_than }
				}
				set_variable = { var = AST_develop_Sangara_rubber_plantation_duration value = 30 }
			}
		}
	}


AST_ANZAC_Commitments = {

		allowed = {
			original_tag = AST
		}

		

		cost = 25

		visible = {
			NZL = { exists = yes }
			#original_tag = AST
			#AST = { has_completed_focus = AST_Import_Tariffs }
		}

		complete_effect = {
			NZL = {
			add_ideas = AST_ANZAC_Commitments_idea
			set_temp_variable = { party_index = 20 }
			set_temp_variable = { party_popularity_increase = 0.15 }
			set_temp_variable = { temp_outlook_increase = 0.10 }
			add_relative_party_popularity = yes
			}

			#country_event = { id = australia_md.52 days = 1 }
			
			NZL = {
			add_opinion_modifier = {
				target = AST
				modifier = anzac_commitments_mod
			}
			}

			add_ideas = AST_ANZAC_Commitments_idea
			AST = {
			add_opinion_modifier = {
				target = NZL
				modifier = anzac_commitments_mod
			}
			}
		}

		ai_will_do = {
			factor = 0
		}
	}





}
	AST_diplo_tug_of_war_USA_cat = {
	


	AST_USA_test_decison1 = {

		allowed = {
			original_tag = USA
		}

		fire_only_once = no

		cost = 10

		visible = {
			original_tag = USA
		}

		complete_effect = {
			add_to_variable = { USA.AST_USA_trade_influence = 5 }
		}

		ai_will_do = {
			factor = 0
		}
	}
	AST_USA_expand_military_industry_ties = {

		allowed = {
			original_tag = USA
		}

		days_re_enable = 120

		cost = 10

		visible = {
			original_tag = USA
			NOT = { has_idea = USA_australian_military_ties1 }
		}

		complete_effect = {
			#TODO AST (set this shit as an event)
			add_to_variable = { USA.AST_USA_trade_influence = 10 }
			set_temp_variable = { treasury_change = -20.00 }
			add_timed_idea = {idea = USA_australian_military_ties1 days = 120}
			AST = {add_timed_idea = {idea = USA_australian_military_ties1 days = 120} }
		}

		ai_will_do = {
			factor = 0
		}
	}

	




}
AST_diplo_tug_of_war_CHI_cat = {
	AST_CHI_test_decison1 = {

		allowed = {
			original_tag = CHI
		}

		cost = 10

		fire_only_once = no

		visible = {
			ROOT = {
				is_ai = no
			}
		}

		complete_effect = {
			add_to_variable = { CHI.AST_CHI_trade_influence = 500 }
		}

		ai_will_do = {
			factor = 0
		}
	}

	AST_CHI_attack_USA = {

		allowed = {
			original_tag = CHI
		}

		fire_only_once = no

		cost = 40

		visible = {
			ROOT = {
				is_ai = no
			}
		}

		complete_effect = {
			add_to_variable = { CHI.AST_CHI_trade_influence = -2 }
			add_to_variable = { USA.AST_USA_trade_influence = -5 }
		}

		ai_will_do = {
			factor = 0
		}
	}

	AST_CHI_begin_mining_investment = {

		allowed = {
			original_tag = CHI
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CHI_influece_greater_influ_20_tt
				check_variable = { AST_CHI_trade_influence > 20 }
			}
		}

		days_re_enable = 120
		cost = 150

		visible = {
			NOT = {has_idea = CHI_mining_boom}

			ROOT = {
				is_ai = no
			}
		}

		complete_effect = {
			set_temp_variable = { treasury_change = -20.00 }
			modify_treasury_effect = yes
			add_timed_idea = { idea = CHI_trade_dividends  days = 120 }
			add_to_variable = { CHI.CHI_mining_investment_level = 5 }
		}

		ai_will_do = {
			factor = 0
		}
	}

	AST_CHI_reap_rewards_of_invest = {

		allowed = {
			original_tag = CHI
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CHI_invest_greater_than_4_tt
				check_variable = { CHI_mining_investment_level > 4 }
			}
		}

		days_re_enable = 120
		cost = 150


		visible = {
			NOT = { has_idea = CHI_mining_boom }

			ROOT = {
				is_ai = no
			}
		}

		complete_effect = {
			set_temp_variable = { treasury_change = -20.00 }
			modify_treasury_effect = yes
			if = {
				limit = {
					CHI = {has_idea = CHI_iron_coal_shortage}
				}
				swap_ideas = {
					remove_idea = CHI_iron_coal_shortage
					add_idea = CHI_iron_coal_shortage1
				}
				add_to_variable = { CHI.CHI_mining_investment_level = -5 }

				else_if = {
					limit = {
						CHI = {has_idea = CHI_iron_coal_shortage1}
					}
					swap_ideas = {
						remove_idea = CHI_iron_coal_shortage1
						add_idea = CHI_iron_coal_shortage2
					}
					add_to_variable = { CHI.CHI_mining_investment_level = -5 }
				}
				else_if = {
					limit = {
						CHI = {has_idea = CHI_iron_coal_shortage2}
					}
					swap_ideas = {
						remove_idea = CHI_iron_coal_shortage2
						add_idea = CHI_mining_boom
					}
					add_to_variable = { CHI.CHI_mining_investment_level = -5 }
				}
			}
		}

	}
}

