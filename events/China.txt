###########################
# 	  Chinese Events	  #
###########################

add_namespace = china

#19th National Congress
news_event = {
	id = china.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event china.1"}
	title = china.1.t
	desc = china.1.d
	picture = GFX_china_19th_national_congress

	fire_only_once = yes

	trigger = {
		tag = CHI
		date > 2017.10.18
		date < 2017.10.24
	}

	option = {
		name = china.1.a
		log = "[GetDateText]: [This.GetName]: china.1.a executed"
		add_stability = 0.05
	}
}

#90th PLA Anniversary
news_event = {
	id = china.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event china.2"}
	title = china.2.t
	desc = china.2.d
	picture = GFX_china_90th_pla_anniversary

	fire_only_once = yes

	trigger = {
		tag = CHI
		date > 2017.8.1
		date < 2017.8.4
	}

	option = {
		name = china.2.a
		log = "[GetDateText]: [This.GetName]: china.2.a executed"
		add_war_support = 0.05
	}
}

country_event = { #2008 Melamine Scandal
	id = china.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event china.3"}
	title = china.3.t
	desc = china.3.d
	picture = GFX_melamine_scandal

	fire_only_once = yes

	trigger = {
		tag = CHI
		has_government = communism
		date > 2008.7.1
		date < 2008.7.30
	}

	option = {
		name = china.3.a
		log = "[GetDateText]: [This.GetName]: china.3.a executed"
		ai_chance = {
			factor = 100
		}

		add_political_power = -10

		add_stability = -0.10

		hidden_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			recalculate_party = yes
		}
	}
}

# Typhoon Bilis
country_event = {
	id = china.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event china.4"}
	title = china.4.t
	desc = china.4.d
	picture = GFX_typhoon

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = china.4.a
		log = "[GetDateText]: [This.GetName]: china.4.a executed"
		subtract_from_variable = {
			var = treasury
			value = 0.53
		}
		add_manpower = -57
		537 = { damage_building = { type = infrastructure damage = 0.4 } damage_building = { type = industrial_complex damage = 0.2 } }
	}
}

#China Announces "Peaceful Rise" Policy
country_event = {
	id = china.5
	title = china.5.t
	desc = china.5.d
	picture = CHI_generic
	
	is_triggered_only = yes

	option = {
		name = china.5.a
		log = "[GetDateText]: [This.GetName]: china.5.a executed"
		add_opinion_modifier = {
			target = CHI
			modifier = peaceful_rise
		}
		reverse_add_opinion_modifier = {
			target = CHI
			modifier = peaceful_rise
		}
	}
}

#Bo Xilai Falls from Grace
news_event = {
	id = china.6
	title = china.6.t
	desc = china.6.d
	
	is_triggered_only = yes
	
	option = {
		name = china.6.a
		log = "[GetDateText]: [This.GetName]: china.6.a executed"
	}
}

#Catching Tigers and Flies
news_event = {
	id = china.7
	title = china.7.t
	desc = china.7.d
	
	is_triggered_only = yes
	
	option = {
		name = china.7.a
		log = "[GetDateText]: [This.GetName]: china.7.a executed"
	}
}

#Uighur protests
news_event = {
	id = china.8
	title = china.8.t
	desc = china.8.d
	
	picture = GFX_news_election_rally
	
	trigger = {
		CHI = {
			controls_state = 592
			check_variable = {
				var = uighur_opinion
				value = 100
				compare = less_than
			}
		}
	}
		
	mean_time_to_happen = {
		days = 1000
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_opinion
				value = 75
				compare = less_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_opinion
				value = 50
				compare = less_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_opinion
				value = 25
				compare = less_than
			}
		}
	}
	
	option = {
		name = china.8.a
		log = "[GetDateText]: [This.GetName]: china.8.a executed"
		if = {
			limit = { original_tag = CHI }
			add_stability = -0.02
			add_war_support = -0.02
			custom_effect_tooltip = CHI_uighur_threat_increase_1_tt
			hidden_effect = {
				add_to_variable = {
					var = uighur_threat
					value = 1
				}
				clamp_variable = {
					var = uighur_threat
					min = 0
					max = 100
				}
			}
		}
	}
}

#Uighur knife attack

news_event = {
	id = china.9
	title = china.9.t
	desc = china.9.d
	picture = GFX_news_rise_of_taliban
	
	trigger = {
		CHI = {
			controls_state = 592
			check_variable = {
				var = uighur_opinion
				value = 100
				compare = less_than
			}
			check_variable = {
				var = uighur_threat
				value = 25
				compare = greater_than
			}
		}
	}
		
	mean_time_to_happen = {
		days = 1000
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_threat
				value = 25
				compare = greater_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_threat
				value = 50
				compare = greater_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_threat
				value = 75
				compare = greater_than
			}
			
		}
	}
	
	option = {
		name = china.9.a
		log = "[GetDateText]: [This.GetName]: china.9.a executed"
		if = {
			limit = { 
				original_tag = CHI
				check_variable = {
					var = uighur_threat
					value = 25
					compare = greater_than_or_equals
				}
				check_variable = {
					var = uighur_threat
					value = 50
					compare = less_than
				}
			}
			add_manpower = -25
			add_stability = -0.02
			custom_effect_tooltip = CHI_uighur_threat_increase_1_tt
			hidden_effect = {
				add_to_variable = {
					var = uighur_threat
					value = 1
				}
				clamp_variable = {
					var = uighur_threat
					min = 0
					max = 100
				}
			}
		}
		else_if = {
			limit = { 
				original_tag = CHI
				check_variable = {
					var = uighur_threat
					value = 50
					compare = greater_than_or_equals
				}
				check_variable = {
					var = uighur_threat
					value = 75
					compare = less_than
				}
			}
			add_manpower = -50
			add_stability = -0.03
			custom_effect_tooltip = CHI_uighur_threat_increase_2_tt
			hidden_effect = {
				add_to_variable = {
					var = uighur_threat
					value = 2
				}
				clamp_variable = {
					var = uighur_threat
					min = 0
					max = 100
				}
			}
		}
		else_if = {
			limit = { 
				original_tag = CHI
				check_variable = {
					var = uighur_threat
					value = 75
					compare = greater_than_or_equals
				}
			}
			add_manpower = -75
			add_stability = -0.04
			custom_effect_tooltip = CHI_uighur_threat_increase_5_tt
			hidden_effect = {
				add_to_variable = {
					var = uighur_threat
					value = 5
				}
				clamp_variable = {
					var = uighur_threat
					min = 0
					max = 100
				}
			}
		}
	}
}

#Uighur bombing

news_event = {
	id = china.10
	title = china.10.t
	desc = china.10.d
	picture = GFX_news_rocket_explosion
	
	trigger = {
		CHI = {
			controls_state = 592
			check_variable = {
				var = uighur_opinion
				value = 100
				compare = less_than
			}
			check_variable = {
				var = uighur_threat
				value = 25
				compare = greater_than
			}
		}
	}
		
	mean_time_to_happen = {
		days = 1200
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_threat
				value = 25
				compare = greater_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_threat
				value = 50
				compare = greater_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_threat
				value = 75
				compare = greater_than
			}
		}
	}
	
	option = {
		name = china.10.a
		log = "[GetDateText]: [This.GetName]: china.10.a executed"
		if = {
			limit = { 
				original_tag = CHI
				check_variable = {
					var = uighur_threat
					value = 25
					compare = greater_than_or_equals
				}
				check_variable = {
					var = uighur_threat
					value = 50
					compare = less_than
				}
			}
			add_manpower = -50
			add_stability = -0.05
			random_owned_state = {
				damage_building = {
					type = infrastructure 
					damage = 1
				}
			}
			custom_effect_tooltip = CHI_uighur_threat_increase_2_tt
			hidden_effect = {
				add_to_variable = {
					var = uighur_threat
					value = 2
				}
				clamp_variable = {
					var = uighur_threat
					min = 0
					max = 100
				}
			}
		}
		else_if = {
			limit = { 
				original_tag = CHI
				check_variable = {
					var = uighur_threat
					value = 50
					compare = greater_than_or_equals
				}
				check_variable = {
					var = uighur_threat
					value = 75
					compare = less_than
				}
			}
			add_manpower = -75
			add_stability = -0.06
			random_owned_state = {
				damage_building = {
					type = infrastructure 
					damage = 2
				}
			}
			custom_effect_tooltip = CHI_uighur_threat_increase_5_tt
			hidden_effect = {
				add_to_variable = {
					var = uighur_threat
					value = 5
				}
				clamp_variable = {
					var = uighur_threat
					min = 0
					max = 100
				}
			}
		}
		else_if = {
			limit = { 
				original_tag = CHI
				check_variable = {
					var = uighur_threat
					value = 75
					compare = greater_than_or_equals
				}
			}
			add_manpower = -100
			add_stability = -0.07
			random_owned_state = {
				damage_building = {
					type = infrastructure 
					damage = 5
				}
			}
			custom_effect_tooltip = CHI_uighur_threat_increase_10_tt
			hidden_effect = {
				add_to_variable = {
					var = uighur_threat
					value = 10
				}
				clamp_variable = {
					var = uighur_threat
					min = 0
					max = 100
				}
			}
		}
	}
}

#hidden event that increases Uighur Threat
country_event = {
	id = china.11
	title = china.11.t
	desc = china.11.d
	
	hidden = yes
	
	trigger = {
			controls_state = 592
			check_variable = {
				var = uighur_opinion
				value = 100
				compare = less_than
			}
	}
	
	mean_time_to_happen = {
		days = 400
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_opinion
				value = 75
				compare = less_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_opinion
				value = 50
				compare = less_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_opinion
				value = 25
				compare = less_than
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				var = uighur_opinion
				value = 10
				compare = less_than
			}
		}
	}
	
	option = {
		name = china.11.a
		log = "[GetDateText]: [This.GetName]: china.11.a executed"
		add_to_variable = {
			var = uighur_threat
			value = 5
		}
	}
}

