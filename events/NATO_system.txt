add_namespace = NATO

#Warning event when justifying against a NATO country
country_event = {

	id = NATO.1
	title = NATO.1.t
	desc = NATO.1.d
	
	picture = GFX_NATO_picture
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {	has_country_flag = Justifying_against_@FROM }
		FROM = {
			has_idea = NATO_member
		}
	}
	
	immediate = {
		set_country_flag = Justifying_against_@FROM
	}
	
	option = {
		name = NATO.1.a
		ai_chance = { factor = 100 }
	}
}

#NATO call to arms
country_event = {

	id = NATO.2
	title = NATO.2.t
	desc = NATO.2.d
	
	picture = GFX_NATO_picture
	
	is_triggered_only = yes
	
	option = {
		name = NATO.2.a 	#Call NATO
		ai_chance = { factor = 100 }
		every_other_country = {
			limit = {
				has_idea = NATO_member
				NOT = { has_war_with = ROOT }		#Just in case someone starts a war between NATO countries
			}
			country_event = NATO.3
		}
	}
	option = {
		name = NATO.2.b		#We can handle this
		ai_chance = { factor = 0 }
	}
}

#NATO member response
country_event = {
	
	id = NATO.3
	title = NATO.3.t
	desc = NATO.3.d
	
	picture = GFX_NATO_picture
	
	is_triggered_only = yes
	
	option = {
		name = NATO.3.a		#Respect call to arms
		ai_chance = { 
			factor = 95
			modifier = {		#We'll definitely join if already at war with the attacker
				factor = 1
				any_country = {
					has_war_with = FROM
					has_war_with = ROOT
				}
			}
		}
		random_country = {
			limit = { 
				has_war_with = FROM
				NOT = { has_war_with = PREV }
			}
			PREV = {
				add_to_war = {
					targeted_alliance = FROM
					enemy = PREV
				}
			}
		}
	}
	option = {
		name = NATO.3.b		#Stay out of it
		ai_chance = { 
			factor = 5 
			modifier = {		#We'll definitely join if already at war with the attacker
				factor = 0
				any_country = {
					has_war_with = FROM
					has_war_with = ROOT
				}
			}
		}
		FROM = {
			add_opinion_modifier = {
				target = PREV
				modifier = faction_traitor 
			}
		}
	}
}