# Original Author(s): TheGeneral
### search_filters = {FOCUS_FILTER_CMW}

shared_focus = {
	id = CMW_Aso_Rock_Declaration
	icon = generic_government

	x = 80
	y = 0

	cost = 10

	# Offsets for Custom Focus Trees
	offset = {
	}

	allow_branch = {
		Is_Commonwealth_Member = yes
	}

	search_filters = { FOCUS_FILTER_CMW FOCUS_FILTER_DIPLOMACY }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Aso_Rock_Declaration"
		add_political_power = 150
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Charter
	icon = government_beu

	x = -5
	y = 1
	relative_position_id = CMW_Aso_Rock_Declaration

	cost = 10

	prerequisite = { focus = CMW_Aso_Rock_Declaration }
	search_filters = {
		FOCUS_FILTER_CMW
		FOCUS_FILTER_DIPLOMACY
	}

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Charter"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Stability_Factor_change = 0.05
		}
		CMW_modify_stability_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Ministerial_Action_Group
	icon = expand_finance_ministry

	x = -3
	y = 1
	relative_position_id = CMW_Charter

	cost = 10

	prerequisite = { focus = CMW_Charter }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Ministerial_Action_Group"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Stability_Factor_change = 0.05
		}
		CMW_modify_stability_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Kampala_Review
	icon = flag_uganda

	x = 0
	y = 1
	relative_position_id = CMW_Ministerial_Action_Group

	cost = 10

	prerequisite = { focus = CMW_Ministerial_Action_Group }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Kampala_Review"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Stability_Factor_change = 0.05
		}
		CMW_modify_stability_factor_effect = yes
	}

	completion_reward_joint_originator = {
		add_political_power = 100
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Debt_Swaps
	icon = money_laundering

	x = -2
	y = 1
	relative_position_id = CMW_Ministerial_Action_Group

	cost = 10

	prerequisite = { focus = CMW_Ministerial_Action_Group }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Debt_Swaps"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Interest_rate_multiplier_modifier_change = -0.5
		}
		CMW_modify_interest_rate_multiplier_modifier_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Climate_Hub
	icon = sustainable_development

	x = -1
	y = 1
	relative_position_id = CMW_Debt_Swaps

	cost = 10

	prerequisite = { focus = CMW_Debt_Swaps }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Climate_Hub"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Energy_Use_Multiplier_change = 0.05
		}
		CMW_modify_energy_use_multiplier_effect = yes
		set_temp_variable = {
			CMW_renewable_energy_gain_multiplier_change = 0.10
		}
		CMW_modify_renewable_energy_gain_multiplier = yes
		set_temp_variable = {
			CMW_production_speed_synthetic_refinery_factor_change = 0.25
		}
		CMW_modify_production_speed_synthetic_refinery_factor_effect = yes
	}

	completion_reward_joint_originator = {
		add_tech_bonus = {
			name = CMW_Climate_Hub_Bonus
			uses = 1
			bonus = 0.15
			category = CAT_renewable
		}
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Blue_Charter
	icon = treaty4

	x = 1
	y = 1
	relative_position_id = CMW_Debt_Swaps

	cost = 10

	prerequisite = { focus = CMW_Debt_Swaps }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Blue_Charter"
	}

	completion_reward_joint_originator = {
		add_tech_bonus = {
			name = CMW_Blue_Charter_Bonus
			uses = 3
			bonus = 0.15
			category = CAT_renewable
		}
	}

	completion_reward_joint_member = {
		add_tech_bonus = {
			name = CMW_Blue_Charter_Bonus
			uses = 1
			bonus = 0.15
			category = CAT_renewable
		}
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Living_Lands
	icon = agriculture2

	x = 0
	y = 2
	relative_position_id = CMW_Debt_Swaps

	cost = 10

	prerequisite = {
		focus = CMW_Blue_Charter
		focus = CMW_Climate_Hub
		}
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Living_Lands"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Global_Building_Slots_Modifier_change = -0.05
		}
		CMW_modify_global_building_slots_factor_effect = yes
		set_temp_variable = {
			CMW_agriculture_workers_modifier_change = -0.05
		}
		CMW_modify_agriculture_workers_modifier_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Anti_Corruption_Centre
	icon = BLR_Anti_Corruption

	x = 2
	y = 1
	relative_position_id = CMW_Ministerial_Action_Group

	cost = 10

	prerequisite = { focus = CMW_Ministerial_Action_Group }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		root = {
			NOT = { has_idea = negligible_corruption }
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Anti_Corruption_Centre"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_corruption_cost_factor_change = -0.25
		}
		CMW_modify_corruption_cost_factor_effect = yes
	}

	completion_reward_joint_originator = {
		decrease_corruption = yes
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Association_Legislative_Council
	icon = legislative_palace

	x = 2
	y = 2
	relative_position_id = CMW_Ministerial_Action_Group

	cost = 10

	prerequisite = { focus = CMW_Anti_Corruption_Centre }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Association_Legislative_Council"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Expected_Adm_Modifier_change = 0.5
		}
		CMW_modify_expected_adm_modifier_effect = yes
		set_temp_variable = {
			CMW_Stability_Factor_change = 0.10
		}
		CMW_modify_stability_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Health_Section
	icon = health_care_reform

	x = -1
	y = 1
	relative_position_id = CMW_Association_Legislative_Council

	cost = 10

	prerequisite = { focus = CMW_Association_Legislative_Council }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Health_Section"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Health_Cost_Multiplier_Modifier_change = -0.02
		}
		CMW_modify_health_cost_multiplier_modifier_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Body_And_Sports
	icon = ukr_sport

	x = -2.5
	y = 2
	relative_position_id = CMW_Association_Legislative_Council

	cost = 10

	prerequisite = { focus = CMW_Living_Lands }
	prerequisite = { focus = CMW_Health_Section }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Health_Section"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Expected_Healthcare_Modifier_change = 0.5
		}
		CMW_modify_expected_healthcare_modifier_effect = yes
		set_temp_variable = {
			CMW_Health_Cost_Multiplier_Modifier_change = -0.03
		}
		CMW_modify_health_cost_multiplier_modifier_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Promoting_Democracy
	dynamic = yes
	#Needs Dynamic naming
	icon = propaganda
	relative_position_id = CMW_Charter
	x = 1
	y = 1
	cost = 10
	prerequisite = {
		focus = CMW_Charter
	}
	available = {
		Is_Commonwealth_Member = yes
	}
	search_filters = {
		FOCUS_FILTER_CMW
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Promoting_Democracy"
		if = {
			limit = {
				ENG = {
					has_government = democratic
				}
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.05
				}
			}
		else_if = {
			limit = {
				ENG = {
					has_government = communism
				}
			}
			add_popularity = {
				ideology = communism
				popularity = 0.05
				}
			}
		else_if = {
			limit = {
				ENG = {
					has_government = neutrality
				}
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.05
				}
			}
		else_if = {
			limit = {
				ENG = {
					has_government = nationalist
				}
			}
			add_popularity = {
				ideology = nationalist
				popularity = 0.05
				}
			}
		}
	completion_reward_joint_originator = {
	}
	completion_reward_joint_member = {
	}
}
joint_focus = {
	id = CMW_Connectivity_Agenda
	icon = irish_roads

	x = 1
	y = 3
	relative_position_id = CMW_Charter

	cost = 10

	prerequisite = { focus = CMW_Promoting_Democracy }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Connectivity_Agenda"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Investment_Cost_Modifier_change = -0.15
		}
		CMW_modify_investment_cost_modifier_effect = yes
		newline = yes
		random_owned_state = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
	}

	completion_reward_joint_originator = {
		random_owned_state = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Parliament
	icon = parliament_box

	x = 1
	y = 4
	relative_position_id = CMW_Charter

	cost = 10

	prerequisite = { focus = CMW_Connectivity_Agenda }
	prerequisite = { focus = CMW_Association_Legislative_Council }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Parliament"
		custom_effect_tooltip = CMW_Parliament_tt
		hidden_effect = {
			allow_elections = yes
		}
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_of_Learning
	icon = university

	x = 0
	y = 1
	relative_position_id = CMW_Aso_Rock_Declaration

	cost = 10

	prerequisite = { focus = CMW_Aso_Rock_Declaration }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_of_Learning"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Research_Speed_Factor_Change = 0.02
		}
		CMW_modify_research_speed_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Legal_Education_Association
	icon = focus_generic_university_2

	x = -2
	y = 1
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_of_Learning }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Legal_Education_Association"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Expected_Adm_Modifier_change = 0.5
		}
		CMW_modify_expected_adm_modifier_effect = yes
		set_temp_variable = {
			CMW_Stability_Factor_change = 0.05
		}
		CMW_modify_stability_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Fintech_Toolkit
	icon = focus_generic_financial_agreement

	x = -2
	y = 3
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_Legal_Education_Association }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Fintech_Toolkit"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Office_Park_Income_Tax_Modifier_change = 0.10
		}
		CMW_modify_office_park_income_tax_modifier_effect = yes

		set_temp_variable = {
			CMW_Stability_Factor_change = 0.02
		}
		CMW_modify_stability_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Youth_Networks
	icon = Generic_Child_Soldiers

	x = -2
	y = 4
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_Legal_Education_Association }
	prerequisite = { focus = CMW_Connectivity_Agenda }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Youth_Networks"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_offices_worker_requirement_modifier_change = -0.1
		}
		CMW_modify_offices_worker_Requirement_modifier_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Education_Framework
	icon = tech_sharing

	x = 0
	y = 1
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_of_Learning }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Education_Framework"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_education_cost_multiplier_modifier_change = -0.05
		}
		CMW_modify_education_cost_multiplier_modifier_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_CFTC
	icon = education_reform

	x = 0
	y = 2
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_Education_Framework }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_CFTC"
		set_temp_variable = {
			CMW_productivity_Growth_change = 0.05
		}
		CMW_modify_productivity_growth_modifier_effect = yes
		set_temp_variable = {
			CMW_Tax_Gain_Multiplier_modifier_change = 0.02
		}
		CMW_modify_tax_gain_multiplier_modifier_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_School_Leaders
	icon = focus_generic_university_1

	x = 0
	y = 3
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_CFTC }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_School_Leaders"
		set_temp_variable = {
			CMW_expected_education_modifier_change = 0.5
		}
		CMW_modify_expected_education_modifier = yes
		set_temp_variable = {
			CMW_Research_Speed_Factor_change = 0.05
		}
		CMW_modify_research_speed_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Trade_Association
	icon = wip

	x = 2
	y = 1
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_of_Learning }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Trade_Association"
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Joint_Research_Initiative
	icon = continuous_research

	x = 2
	y = 2
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_Trade_Association }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Joint_Research_Initiative"
		add_to_tech_sharing_group = Commonwealth_allies_tech_share
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Hub_And_Spokes_Program
	icon = ExpandTrade

	x = 2
	y = 3
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_Joint_Research_Initiative }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Hub_And_Spokes_Program"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Trade_Opinion_Factor_change = 0.10
		}
		CMW_modify_trade_opinion_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_New_Petroleum_Group
	icon = oil_companies

	x = 2
	y = 4
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_Hub_And_Spokes_Program }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_New_Petroleum_Group"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_Fuel_Gain_Factor_change = 0.05
		}
		CMW_modify_fuel_gain_factor_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Valuta
	icon = money

	x = 0
	y = 4
	relative_position_id = CMW_of_Learning

	cost = 10

	prerequisite = { focus = CMW_Fintech_Toolkit }
	prerequisite = { focus = CMW_School_Leaders }
	prerequisite = { focus = CMW_Hub_And_Spokes_Program }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Valuta"
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Defense_Association
	icon = defense

	x = 6
	y = 1
	relative_position_id = CMW_Aso_Rock_Declaration

	cost = 10

	prerequisite = { focus = CMW_Aso_Rock_Declaration }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Defense_Association"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_experience_gain_air_factor_change = 0.10
		}
		CMW_modify_experience_gain_air_factor_effect = yes
		set_temp_variable = {
			CMW_experience_gain_army_factor_change = 0.10
		}
		CMW_modify_experience_gain_army_factor_effect = yes
		set_temp_variable = {
			CMW_experience_gain_navy_factor_change = 0.10
		}
		CMW_modify_experience_gain_navy_factor_effect = yes
	}

	completion_reward_joint_originator = {
		army_experience = 25
		navy_experience = 25
		air_experience = 25
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Counter_Insurgency_Training
	icon = police_funding_bonus

	x = -2
	y = 1
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Defense_Association }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Counter_Insurgency_Training"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_expected_police_modifier_change = 0.5
		}
		CMW_modify_expected_police_modifier_effect = yes
		set_temp_variable = {
			CMW_resistance_growth_change = -0.25
		}
		CMW_modify_resistance_growth_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Cyber_Declaration
	icon = cyberspace_protection

	x = -2
	y = 2
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Counter_Insurgency_Training }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Cyber_Declaration"
	}

	completion_reward_joint_originator = {
		add_tech_bonus = {
			name = CMW_Cyber
			bonus = 0.25
			uses = 2
			category = CAT_ai
		}
	}

	completion_reward_joint_member = {
		add_tech_bonus = {
			name = CMW_Cyber
			bonus = 0.15
			uses = 1
			category = CAT_ai
		}
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Intelligence_Network
	icon = Generic_Spy_Sabotage

	x = -2
	y = 3
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Cyber_Declaration }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Intelligence_Network"
		if = { limit = { has_dlc = "La Resistance" }
			if = { limit = { has_intelligence_agency = no }
				create_intelligence_agency = {
					name = "Commonwealth Intelligence and Security Service"
					icon = x
				}
			}
		}
		else = {
			add_tech_bonus = {
				name = CMW_Intelligence_boost
				bonus = 0.15
				uses = 1
				category = CAT_decryption_tech
			}
			add_tech_bonus = {
				name = CMW_Intelligence_boost
				bonus = 0.15
				uses = 1
				category = CAT_encryption_tech
			}
		}
	}

	completion_reward_joint_originator = {
		add_tech_bonus = {
			name = CMW_Intelligence_boost
			bonus = 0.15
			uses = 1
			category = CAT_decryption_tech
		}
		add_tech_bonus = {
			name = CMW_Intelligence_boost
			bonus = 0.15
			uses = 1
			category = CAT_encryption_tech
		}
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Patrol_Boat_Program
	icon = focus_generic_merchant_fleet

	x = 0
	y = 1
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Defense_Association }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Patrol_Boat_Program"
	}

	completion_reward_joint_originator = {
		add_ideas = CMW_Patrol_Boat_Program_Leader
	}

	completion_reward_joint_member = {
		add_ideas = CMW_Patrol_Boat_Program_Member
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Chief_Of_Staff
	icon = chiefs_of_staff_committee

	x = 0
	y = 2
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Patrol_Boat_Program }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Chief_Of_Staff"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_army_speed_factor_change = 0.05
		}
		CMW_modify_army_speed_factor_effect = yes
		set_temp_variable = {
			CMW_terrain_trait_xp_gain_factor_change = 0.15
		}
		CMW_modify_terrain_trait_xp_gain_factor_effect = yes
	}

	completion_reward_joint_originator = {
		# Wanted the mechanic where you can call countries to send volunteers or a general
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Secretariat_CVE
	icon = counter

	x = 0
	y = 3
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Chief_Of_Staff }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Secretariat_CVE"
		set_temp_variable = {
			radicalization = -1
		}
		modify_radicalization_effect = yes
		set_temp_variable = {
			threat_level = -1
		}
		modify_terror_threat_effect = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
joint_focus = {
	id = CMW_Offices_For_Peace
	icon = united_nations

	x = 2
	y = 1
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Defense_Association }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Offices_For_Peace"
		volunteers = yes
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Academy
	icon = military_academy

	x = 2
	y = 2
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Offices_For_Peace }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Academy"
		custom_effect_tooltip = CMW_Member_Spirit_Change_TT
		set_temp_variable = {
			CMW_experience_gain_factor_change = 0.25
		}
		CMW_modify_experience_gain_factor_effect = yes
	}

	completion_reward_joint_originator = {
		random_army_leader = {
			add_skill_level = 1
		}
		random_army_leader = {
			add_skill_level = 1
		}
		random_navy_leader = {
			add_skill_level = 1
		}
	}

	completion_reward_joint_member = {
		random_unit_leader = {
			promote_character = yes
		}
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Training_Day
	icon = Generic_Infantry_Training

	x = 2
	y = 3
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Academy }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.3
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Training_Day"
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_Defense_Treaty
	icon = forceful_treaty

	x = 0
	y = 5
	relative_position_id = CMW_Defense_Association

	cost = 10

	prerequisite = { focus = CMW_Intelligence_Network }
	prerequisite = { focus = CMW_Secretariat_CVE }
	prerequisite = { focus = CMW_Training_Day }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
		threat > 0.5
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_Defense_Treaty"
		create_faction = faction_Commonwealth_of_Nations
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}

joint_focus = {
	id = CMW_New_CMW
	icon = align_to_commonwealth

	x = 0
	y = 6
	relative_position_id = CMW_Aso_Rock_Declaration

	cost = 10

	prerequisite = { focus = CMW_Parliament }
	prerequisite = { focus = CMW_Valuta }
	search_filters = { FOCUS_FILTER_CMW }

	available = {
		Is_Commonwealth_Member = yes
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CMW_New_CMW"
	}

	completion_reward_joint_originator = {
	}

	completion_reward_joint_member = {
	}

	ai_will_do = {
		factor = 1
	}
}
