#written by Traiano
 
#mafia
  #police effectivness in each region is based on the italian baseline that is affected by focuses and laws
  #mafia_strength is used to calculate industrial focus costs and police effectivness
update_mafia_strength = {
	set_variable = { mafia_strength = cosa_nostra_strength }
	add_to_variable = { mafia_strength = camorra_strength }
	add_to_variable = { mafia_strength = ndrangheta_strength }
	add_to_variable = { mafia_strength = sacra_corona_unita_strength }
	divide_variable = { mafia_strength = 4 }
}
update_police_effectivness = {
	update_mafia_strength = yes
	set_variable = { police_effectivness = police_effectivness_base }
	if = {
		limit = { has_idea = police_01 }
		add_to_variable = { police_effectivness = -0.25 }
	}
	else_if = {
		limit = { has_idea = police_02 }
		add_to_variable = { police_effectivness = -0.05 }
	}
	else_if = {
		limit = { has_idea = police_03 }
		add_to_variable = { police_effectivness = 0.05 }
	}
	else_if = {
		limit = { has_idea = police_04 }
		add_to_variable = { police_effectivness = 0.15 }
	}
	else_if = {
		limit = { has_idea = police_05 }
		add_to_variable = { police_effectivness = 0.3 }
	}
	if = {
		limit = { has_idea = negligible_corruption }
		add_to_variable = { police_effectivness = -0.025 }
	}
	else_if = {
		limit = { has_idea = slight_corruption }
		add_to_variable = { police_effectivness = -0.05 }
	}
	else_if = {
		limit = { has_idea = modest_corruption }
		add_to_variable = { police_effectivness = -0.075 }
	}
	else_if = {
		limit = { has_idea = medium_corruption }
		add_to_variable = { police_effectivness = -0.1 }
	}
	else_if = {
		limit = { has_idea = widespread_corruption }
		add_to_variable = { police_effectivness = -0.125 }
	}
	else_if = {
		limit = { has_idea = systematic_corruption }
		add_to_variable = { police_effectivness = -0.15 }
	}
	else_if = {
		limit = { has_idea = unrestrained_corruption }
		add_to_variable = { police_effectivness = -0.175 }
	}
	else_if = {
		limit = { has_idea = rampant_corruption }
		add_to_variable = { police_effectivness = -0.2 }
	}
	else_if = {
		limit = { has_idea = crippling_corruption }
		add_to_variable = { police_effectivness = -0.225 }
	}
	else_if = {
		limit = { has_idea = paralyzing_corruption }
		add_to_variable = { police_effectivness = -0.25 }
	}
	set_temp_variable = { police_effectivness_multiplier = 1 }
	set_temp_variable = { mafia_strength_reduced = mafia_strength }
	multiply_temp_variable = { mafia_strength_reduced = 0.5 }
	subtract_from_temp_variable = { police_effectivness_multiplier = mafia_strength_reduced }
	multiply_variable = { police_effectivness = police_effectivness_multiplier }
	set_variable = { police_effectivness_sicily = police_effectivness }
	set_variable = { police_effectivness_campania = police_effectivness }
	set_variable = { police_effectivness_calabria = police_effectivness }
	set_variable = { police_effectivness_puglia = police_effectivness }
	#each undercover agent increases police effectivness by 5%
	set_temp_variable = { police_effectivness_multiplier_sicily = undercover_agents_sicily }
	multiply_temp_variable = { police_effectivness_multiplier_sicily = 0.025 }
	add_to_temp_variable = { police_effectivness_multiplier_sicily = 1 }
	multiply_variable = { police_effectivness_sicily = police_effectivness_multiplier_sicily }
	set_temp_variable = { police_effectivness_multiplier_campania = undercover_agents_campania }
	multiply_temp_variable = { police_effectivness_multiplier_campania = 0.025 }
	add_to_temp_variable = { police_effectivness_multiplier_campania = 1 }
	multiply_variable = { police_effectivness_campania = police_effectivness_multiplier_campania }
	set_temp_variable = { police_effectivness_multiplier_calabria = undercover_agents_calabria }
	multiply_temp_variable = { police_effectivness_multiplier_calabria = 0.025 }
	add_to_temp_variable = { police_effectivness_multiplier_calabria = 1 }
	multiply_variable = { police_effectivness_calabria = police_effectivness_multiplier_calabria }
	set_temp_variable = { police_effectivness_multiplier_puglia = undercover_agents_puglia }
	multiply_temp_variable = { police_effectivness_multiplier_puglia = 0.025 }
	add_to_temp_variable = { police_effectivness_multiplier_puglia = 1 }
	multiply_variable = { police_effectivness_puglia = police_effectivness_multiplier_puglia }
}

#reform expectance
remove_1_ruling_party_drift = {
	custom_effect_tooltip = remove_1_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.001 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.01 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.01 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.01 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.01 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.01 }
	}
}

remove_2_ruling_party_drift = {
	custom_effect_tooltip = remove_2_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.002 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.02 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.02 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.02 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.02 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.02 }
	}
}

remove_3_ruling_party_drift = {
	custom_effect_tooltip = remove_3_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.003 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.03 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.03 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.03 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.03 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.03 }
	}
}

remove_4_ruling_party_drift = {
	custom_effect_tooltip = remove_4_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.004 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.04 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.04 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.04 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.04 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.04 }
	}
}

remove_5_ruling_party_drift = {
	custom_effect_tooltip = remove_5_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.005 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.05 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.05 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.05 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.05 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.05 }
	}
}

remove_6_ruling_party_drift = {
	custom_effect_tooltip = remove_6_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.006 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.06 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.06 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.06 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.06 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.06 }
	}
}

remove_7_ruling_party_drift = {
	custom_effect_tooltip = remove_7_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.007 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.07 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.07 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.07 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.07 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.07 }
	}
}

remove_8_ruling_party_drift = {
	custom_effect_tooltip = remove_8_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.008 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.08 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.08 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.08 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.08 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.08 }
	}
}

remove_9_ruling_party_drift = {
	custom_effect_tooltip = remove_9_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.009 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.09 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.09 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.09 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.09 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.09 }
	}
}

remove_10_ruling_party_drift = {
	custom_effect_tooltip = remove_10_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = -0.01 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = -0.1 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = -0.1 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = -0.1 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = -0.1 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = -0.1 }
	}
}

add_1_ruling_party_drift = {
	custom_effect_tooltip = add_1_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = 0.001 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = 0.01 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = 0.01 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = 0.01 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = 0.01 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = 0.01 }
	}
}

add_2_ruling_party_drift = {
	custom_effect_tooltip = add_2_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = 0.002 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = 0.02 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = 0.02 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = 0.02 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = 0.02 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = 0.02 }
	}
}

add_3_ruling_party_drift = {
	custom_effect_tooltip = add_3_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = 0.003 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = 0.03 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = 0.03 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = 0.03 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = 0.03 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = 0.03 }
	}
}

add_4_ruling_party_drift = {
	custom_effect_tooltip = add_4_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = 0.004 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = 0.04 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = 0.04 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = 0.04 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = 0.04 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = 0.04 }
	}
}

add_5_ruling_party_drift = {
	custom_effect_tooltip = add_5_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = 0.005 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = 0.05 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = 0.05 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = 0.05 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = 0.05 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = 0.05 }
	}
}

add_6_ruling_party_drift = {
	custom_effect_tooltip = add_6_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = 0.006 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = 0.06 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = 0.06 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = 0.06 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = 0.06 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = 0.06 }
	}
}

add_7_ruling_party_drift = {
	custom_effect_tooltip = add_7_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = 0.007 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = 0.07 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = 0.07 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = 0.07 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = 0.07 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = 0.07 }
	}
}

add_8_ruling_party_drift = {
	custom_effect_tooltip = add_8_ruling_party_drift_TT
	add_to_variable = { ruling_subparty_drift_var = 0.008 } 
	if = { 
		limit = { has_government = fascism }
			add_to_variable = { fascism_drift_var = 0.08 }
	}
	else_if ={
		limit = { has_government = communism }
			add_to_variable = { communism_drift_var = 0.08 }
	}
	else_if = { 
		limit = { has_government = democratic } 
			add_to_variable = { democratic_drift_var = 0.08 }
	}
	else_if = { 
		limit = { has_government = neutrality }
			add_to_variable = { neutrality_drift_var = 0.08 }
	}
	else_if = { 
		limit = { has_government = nationalist } 
			add_to_variable = { nationalist_drift_var = 0.08 }
	}
}

ruling_subparty_drift_effect = {
	set_variable = { ruling_subparty_drift_modified_var = ruling_subparty_drift_var }
	set_variable = { coalition_subparty_drift_modified_var = ruling_subparty_drift_var }
	set_variable = { coalition_parties_number = gov_coalition_array^num }
	multiply_variable = { coalition_parties_number = 0.25 }
	set_variable = { coalition_parties_switch_var = 1 }
	subtract_from_variable = { coalition_parties_switch_var = coalition_parties_number }
	multiply_variable = { ruling_subparty_drift_modified_var = coalition_parties_switch_var }
	multiply_variable = { coalition_subparty_drift_modified_var = 0.25 }
	if = {
		limit = { is_in_array = { ruling_party = 0 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^0 = ruling_subparty_drift_modified_var } #western autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 1 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^1 = ruling_subparty_drift_modified_var } #conservatism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 2 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^2 = ruling_subparty_drift_modified_var } #liberalism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 3 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^3 = ruling_subparty_drift_modified_var } #socialism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 4 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^4 = ruling_subparty_drift_modified_var } #Comunist-state
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 5 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^5 = ruling_subparty_drift_modified_var } #anarchist_communism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 6 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^6 = ruling_subparty_drift_modified_var } #Conservative
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 7 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^7 = ruling_subparty_drift_modified_var } #Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 8 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^8 = ruling_subparty_drift_modified_var } #Mod_Vilayat_e_Faqih
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 9 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^9 = ruling_subparty_drift_modified_var } #Vilayat_e_Faqih
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 10 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^10 = ruling_subparty_drift_modified_var } #Kingdom
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 11 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^11 = ruling_subparty_drift_modified_var } #Caliphate
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 12 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^12 = ruling_subparty_drift_modified_var } #Neutral_Muslim_Brotherhood
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 13 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^13 = ruling_subparty_drift_modified_var } #Neutral_Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 14 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^14 = ruling_subparty_drift_modified_var } #Neutral_conservatism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 15 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^15 = ruling_subparty_drift_modified_var } #oligarchism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 16 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^16 = ruling_subparty_drift_modified_var } #Neutral_Libertarian
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 17 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^17 = ruling_subparty_drift_modified_var } #Neutral_green
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 18 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^18 = ruling_subparty_drift_modified_var } #neutral_Social
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 19 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^19 = ruling_subparty_drift_modified_var } #Neutral_Communism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 20 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^20 = ruling_subparty_drift_modified_var } #Nat_Populism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 21 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^21 = ruling_subparty_drift_modified_var } #Nat_Fascism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 22 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^22 = ruling_subparty_drift_modified_var } #Nat_Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 23 } }
		hidden_effect = {
			add_to_variable = { party_pop_array^23 = ruling_subparty_drift_modified_var } #Monarchist
		}
	}	
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 0  }
		}
		add_to_variable = { party_pop_array^0 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 1  }
		}
		add_to_variable = { party_pop_array^1 = coalition_subparty_drift_modified_var }
					}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 2  }
		}
		add_to_variable = { party_pop_array^2 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 3  }
		}
		add_to_variable = { party_pop_array^3 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 4  }
		}
		add_to_variable = { party_pop_array^4 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 5  }
		}
		add_to_variable = { party_pop_array^5 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 6  }
		}
		add_to_variable = { party_pop_array^6 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 7  }
		}
		add_to_variable = { party_pop_array^7 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 8  }
		}
		add_to_variable = { party_pop_array^8 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 9  }
		}
		add_to_variable = { party_pop_array^9 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 10  }
		}
		add_to_variable = { party_pop_array^10 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 11  }
		}
		add_to_variable = { party_pop_array^11 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 12  }
		}
		add_to_variable = { party_pop_array^12 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 13  }
		}
		add_to_variable = { party_pop_array^13 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 14  }
		}
		add_to_variable = { party_pop_array^14 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 15  }
		}
		add_to_variable = { party_pop_array^15 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 16  }
		}
		add_to_variable = { party_pop_array^16 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 17  }
		}
		add_to_variable = { party_pop_array^17 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 18  }
		}
		add_to_variable = { party_pop_array^18 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 19  }
		}
		add_to_variable = { party_pop_array^19 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 20  }
		}
		add_to_variable = { party_pop_array^20 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 21  }
		}
		add_to_variable = { party_pop_array^21 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 22  }
		}
		add_to_variable = { party_pop_array^22 = coalition_subparty_drift_modified_var }
	}
	if = {
		limit = {
			is_in_array = { gov_coalition_array = 23  }
		}
		add_to_variable = { party_pop_array^23 = coalition_subparty_drift_modified_var }
	}
	recalculate_party = yes
}
reforme_expectance_government_change_update = {
				set_variable = { drift_switch_var = fascism_drift_var }
				add_to_variable = { drift_switch_var = communism_drift_var }
				add_to_variable = { drift_switch_var = democratic_drift_var }
				add_to_variable = { drift_switch_var = neutrality_drift_var }
				add_to_variable = { drift_switch_var = nationalist_drift_var }
				set_variable = { fascism_drift_var = 0 }
				set_variable = { communism_drift_var = 0 }
				set_variable = { democratic_drift_var = 0 }
				set_variable = { neutrality_drift_var = 0 }
				set_variable = { nationalist_drift_var = 0 }
				set_variable = { number_of_coalition_parties = gov_coalition_array^num }
				set_variable = { ruling_drift_switch_var = drift_switch_var }
				set_variable = { coalition_drift_switch_var = drift_switch_var }
				multiply_variable = { number_of_coalition_parties = 0.25 }
				set_variable = { coalition_switch_var = 1 }
				subtract_from_variable = { coalition_switch_var = number_of_coalition_parties }
				multiply_variable = { ruling_drift_switch_var = coalition_switch_var }
				multiply_variable = { coalition_drift_switch_var = 0.25 }
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 0  }
					}
					add_to_variable { democratic_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 1  }
					}
					add_to_variable { democratic_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 2  }
					}
					add_to_variable { democratic_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 3  }
					}
					add_to_variable { democratic_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 4  }
					}
					add_to_variable { communism_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 5  }						}
						add_to_variable { communism_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 6  }
					}
					add_to_variable { communism_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 7  }
					}
					add_to_variable { communism_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 8  }
					}
					add_to_variable { fascism_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 9  }
					}
					add_to_variable { fascism_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 10  }
					}
					add_to_variable { fascism_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 11  }
					}
					add_to_variable { fascism_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 12  }
					}
					add_to_variable { neutrality_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 13  }
					}
					add_to_variable { neutrality_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 14  }
					}
					add_to_variable { neutrality_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 15  }
					}
					add_to_variable { neutrality_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 16  }
					}
					add_to_variable { neutrality_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 17  }
					}
					add_to_variable { neutrality_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 18  }
					}
					add_to_variable { neutrality_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 19  }
					}
					add_to_variable { neutrality_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 20  }
					}
					add_to_variable { nationalist_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 21  }
					}
					add_to_variable { nationalist_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 22  }
					}
					add_to_variable { nationalist_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = {
						is_in_array = { gov_coalition_array = 23  }
					}
					add_to_variable { nationalist_drift_var = coalition_drift_switch_var }
				}
				if = {
					limit = { has_government = fascism }
						add_to_variable = { fascism_drift_var = ruling_drift_switch_var }
				}
				else_if = {
					limit = { has_government = communism }
						add_to_variable = { communism_drift_var = ruling_drift_switch_var }
				}
				else_if = {
					limit = { has_government = democratic }
						add_to_variable = { democratic_drift_var = ruling_drift_switch_var }
				}
				else_if = {
					limit = { has_government = neutrality }
						add_to_variable = { neutrality_drift_var = ruling_drift_switch_var }
				}
				else_if = {
					limit = { has_government = nationalist }
						add_to_variable = { nationalist_drift_var = ruling_drift_switch_var }
				}
}

add_40_western_autocracy = {
	add_to_variable =  {
		var = party_pop_array^0
		value = 0.40
	}
	custom_effect_tooltip = 40_increase_0_TT
	recalculate_party = yes
}
add_40_emerging_autocrats = {
	add_to_variable =  {
		var = party_pop_array^7
		value = 0.40
	}
	custom_effect_tooltip = 40_increase_7_TT
	recalculate_party = yes
}