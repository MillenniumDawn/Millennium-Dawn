NKO_Arduous_March = {
    #Acquiescence to the black market
    Acquiescence_the_black_market = {
        icon = GFX_decision_category_generic_economy
        cost = 100
        days_remove = 180
        fire_only_once = yes
        visible = {
	    	OR = {
            has_idea = NKO_Arduous_March_1
	    	has_idea = NKO_Arduous_March_2
	    	has_idea = NKO_Arduous_March_3
	    	has_idea = NKO_Arduous_March_4
	    	has_idea = NKO_Arduous_March_5
	    	}
        }
        available = {
            has_completed_focus = NKO_black_market
			OR = {
        		has_idea = NKO_Arduous_March_1
				has_idea = NKO_Arduous_March_2
				has_idea = NKO_Arduous_March_3
				has_idea = NKO_Arduous_March_4
				has_idea = NKO_Arduous_March_5
			}
        }
        complete_effect = {
            add_ideas = NKO_the_black_market
        }
    }
    #Citizens go to the countryside for farming
    Citizens_go_the_countryside = {
        icon = GFX_decision_eng_blackshirt_march
        cost = 100
        days_remove = 90
        fire_only_once = yes
        visible = {
	    	OR = {
            has_idea = NKO_Arduous_March_1
	    	has_idea = NKO_Arduous_March_2
	    	has_idea = NKO_Arduous_March_3
	    	has_idea = NKO_Arduous_March_4
	    	has_idea = NKO_Arduous_March_5
	    	}
        }
        available = {
	    	OR = {
            has_idea = NKO_Arduous_March_1
	    	has_idea = NKO_Arduous_March_2
	    	has_idea = NKO_Arduous_March_3
	    	has_idea = NKO_Arduous_March_4
	    	has_idea = NKO_Arduous_March_5
	    	}
        }
        complete_effect = {
            add_timed_idea = { idea = Talent_loss days = 180 }
            decrease_NKO_Arduous_March = yes
        }
    }

    A_milestone_win = {
        allowed = { tag = NKO }
        activation = {
            has_completed_focus = NKO_black_market
        }
        available = {
            has_idea = NKO_milestone_win
        }
        selectable_mission = no
        fire_only_once = yes
        is_good = yes
        days_mission_timeout = 90
        timeout_effect = {
            add_political_power = 50
            increase_NKO_Arduous_March = yes
        }
        complete_effect = {
            add_political_power = -50
            decrease_NKO_Arduous_March = yes
        }
    }
    International_assistance = {
        icon = GFX_decision_category_generic_economy
        cost = 150
        available = {
            NOT = { has_idea = Massive_International_Sanctions has_idea = NKO_Arduous_March_1 }
			OR = {
        		has_idea = NKO_Arduous_March_1
				has_idea = NKO_Arduous_March_2
				has_idea = NKO_Arduous_March_3
				has_idea = NKO_Arduous_March_4
				has_idea = NKO_Arduous_March_5
			}
			has_equipment = {
 			   convoy > 19
			}
        }
        visible = {
	    	OR = {
            has_idea = NKO_Arduous_March_1
	    	has_idea = NKO_Arduous_March_2
	    	has_idea = NKO_Arduous_March_3
	    	has_idea = NKO_Arduous_March_4
	    	has_idea = NKO_Arduous_March_5
	    	}
        }
        days_remove = 360
        complete_effect = {
            add_equipment_to_stockpile = {
                type = convoy
                amount = -20
                producer = NKO
            }
        }
        remove_effect = {
            decrease_NKO_Arduous_March = yes
        }
    }
}

NKO_Power_struggle = {
    praise_China_reform_opening_up = {
        icon = GFX_decision_generic_china
        cost = 100
        fire_only_once = yes
        complete_effect = {
            if = {
                limit = { has_completed_focus = NKO_support_private_markets }
                custom_effect_tooltip = NKO_Support_Market_tt
                add_stability = -0.05
			    hidden_effect = {
			    	subtract_from_variable = {
			    		var = Kim_Jong_un
				    	value = 20
			    	}
			    	clamp_variable = {
						var = Kim_Jong_un
						min = 0
						max = 100
				    }
				    add_to_variable = {
				    	var = Kim_Jong_Nam
				    	value = 20
				    }
				    clamp_variable = {
				    	var = Kim_Jong_Nam
				    	min = 0
				    	max = 100
				    }
			    }
            }
            else = {
                custom_effect_tooltip = NKO_Not_Support_Market_tt
				set_country_flag = KimJongNam_Run_flag
			    hidden_effect = {
			    	add_to_variable = {
			    		var = Kim_Jong_un
				    	value = 50
			    	}
			    	clamp_variable = {
						var = Kim_Jong_un
						min = 0
						max = 100
				    }
				    subtract_from_variable = {
				    	var = Kim_Jong_Nam
				    	value = 50
				    }
				    clamp_variable = {
				    	var = Kim_Jong_Nam
				    	min = 0
				    	max = 100
				    }
			    }
            }
        }
    }
    Kim_Jong_un_Military_support = {
        icon = GFX_decision_armed_forces_officers
        visible = {
            NOT = { has_decision = Kim_Jong_Nam_Military_support }
        }
		fire_only_once = yes

        available = {
            check_variable = {
				var = Kim_Jong_un
    			value = 45
    			compare = greater_than_or_equals
			}
			custom_trigger_tooltip = {
				tooltip = NKO_45_support_Kim_Jong_un_tt
            	check_variable = {
					var = Kim_Jong_un
    				value = 45
    				compare = greater_than_or_equals
				}
			}
        }

		cost = 500
		days_remove = 120

		complete_effect = {
			custom_effect_tooltip = NKO_35_increase_Kim_Jong_un_tt
			hidden_effect = {
				random_list = {
					70 = {
				        add_to_variable = {
					     	var = Kim_Jong_un
				        	value = 35
				        }
				        clamp_variable = {
				        	var = Kim_Jong_un
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_Nam
			    	      	value = 35
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_Nam
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
					30 = {
				        add_to_variable = {
					     	var = Kim_Jong_un
				        	value = 25
				        }
				        clamp_variable = {
				        	var = Kim_Jong_un
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_Nam
			    	      	value = 25
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_Nam
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
			    }
			}
		}
    }

    Kim_Jong_Nam_Military_support = {
        icon = GFX_decision_army
        visible = {
            NOT = { has_decision = Kim_Jong_un_Military_support }
        }
		cost = 500
		days_remove = 120

        available = {
            check_variable = {
				var = Kim_Jong_Nam
    			value = 45
    			compare = greater_than_or_equals
			}
			custom_trigger_tooltip = {
				tooltip = NKO_45_support_Kim_Jong_Nam_tt
            	check_variable = {
					var = Kim_Jong_Nam
    				value = 45
    				compare = greater_than_or_equals
				}
			}
        }

		fire_only_once = yes

		complete_effect = {
			custom_effect_tooltip = NKO_35_increase_Kim_Jong_Nam_tt
			hidden_effect = {
				random_list = {
						70 = {
				    	    add_to_variable = {
						     	var = Kim_Jong_Nam
				    	    	value = 35
				    	    }
				    	    clamp_variable = {
				    	    	var = Kim_Jong_Nam
				    	    	min = 0
				    	    	max = 100
				    	    }
			 	    	    subtract_from_variable = {
		    	    	    	var = Kim_Jong_un
			    	 	     	value = 35
				    	    }
			    	 	   clamp_variable = {
			    		        var = Kim_Jong_un
			    	  	     	min = 0
			    	 	      	max = 100
		        		    }
						}
						30 = {
			    		    add_to_variable = {
							   	var = Kim_Jong_Nam
			   		     	    value = 25
			    		    }
			        		clamp_variable = {
			    		    	var = Kim_Jong_Nam
				   		    	min = 0
			    		    	max = 100
			    		    }
			    		    subtract_from_variable = {
		    	   		    	var = Kim_Jong_un
						      	value = 25
			    		    }
						    clamp_variable = {
				 		       var = Kim_Jong_un
				 		      	min = 0
						       	max = 100
		    			    }
						}
		    	    }
				}
			}
    }

    Kim_Jong_Nam_support = {

        icon = GFX_decision_category_generic_democracy

        cost = 100

        days_remove = 60

		complete_effect = {
			custom_effect_tooltip = NKO_2_5_increase_Kim_Jong_Nam_tt
			hidden_effect = {
				random_list = {
					50 = {
				        add_to_variable = {
					     	var = Kim_Jong_Nam
				        	value = 2
				        }
				        clamp_variable = {
				        	var = Kim_Jong_Nam
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_un
			    	      	value = 2
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_un
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
					30 = {
				        add_to_variable = {
					     	var = Kim_Jong_Nam
				        	value = 3
				        }
				        clamp_variable = {
				        	var = Kim_Jong_Nam
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_un
			    	      	value = 3
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_un
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
					15 = {
				        add_to_variable = {
					     	var = Kim_Jong_Nam
				        	value = 4
				        }
				        clamp_variable = {
				        	var = Kim_Jong_Nam
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_un
			    	      	value = 4
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_un
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
					5 = {
				        add_to_variable = {
					     	var = Kim_Jong_Nam
				        	value = 5
				        }
				        clamp_variable = {
				        	var = Kim_Jong_Nam
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_un
			    	      	value = 5
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_un
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
				}
			}
		}
    }

    Kim_Jong_un_support = {

        icon = GFX_decision_category_generic_communism

        cost = 100

        days_remove = 60

		complete_effect = {
			custom_effect_tooltip = NKO_2_5_increase_Kim_Jong_un_tt
			hidden_effect = {
				random_list = {
					50 = {
				        add_to_variable = {
					     	var = Kim_Jong_un
				        	value = 2
				        }
				        clamp_variable = {
				        	var = Kim_Jong_un
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_Nam
			    	      	value = 2
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_Nam
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
					30 = {
				        add_to_variable = {
					     	var = Kim_Jong_un
				        	value = 3
				        }
				        clamp_variable = {
				        	var = Kim_Jong_un
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_Nam
			    	      	value = 3
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_Nam
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
					15 = {
				        add_to_variable = {
					     	var = Kim_Jong_un
				        	value = 4
				        }
				        clamp_variable = {
				        	var = Kim_Jong_un
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_Nam
			    	      	value = 4
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_Nam
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
					5 = {
				        add_to_variable = {
					     	var = Kim_Jong_un
				        	value = 5
				        }
				        clamp_variable = {
				        	var = Kim_Jong_un
				        	min = 0
				        	max = 100
				        }
			 	        subtract_from_variable = {
		    	        	var = Kim_Jong_Nam
			    	      	value = 5
				        }
			    	    clamp_variable = {
			    	        var = Kim_Jong_Nam
			    	       	min = 0
			    	       	max = 100
		        	    }
					}
				}
			}
		}
    }

    Kim_Jong_il_Death = {
        icon = GFX_decision_generic_political_discourse
		allowed = { tag = NKO }
        days_mission_timeout = 60
        fire_only_once = yes
        activation = {
            has_country_flag = Kim_Jong_il_Death_tt
        }
		available = { always = no }
        timeout_effect = {
            if = {
				limit = {
					has_stability > 0.55
					check_variable = {
    					var = Kim_Jong_Nam
    					value = 75
    					compare = greater_than_or_equals
    					}
					}
				    if = {
						limit = {
							has_decision = Kim_Jong_Nam_Military_support
							NOT = { has_completed_focus = NKO_People_Army }
							has_stability < 0.70
						}
						random_list = {
							60 = {
								complete_national_focus = NKO_Kim_Jong_Nam
							}
							40 = {
								complete_national_focus = NKO_Junta
							}
						}
					}
				else = {
					random_list = {
						70 = {
							complete_national_focus = NKO_Kim_Jong_Nam
						}
						30 = {
							complete_national_focus = NKO_Junta
						}
					}
				}
        	}
        	if = {
				limit = {
					has_stability > 0.45
					check_variable = {
    					var = Kim_Jong_un
    					value = 80
    					compare = greater_than_or_equals
    					}
					}
				    if = {
						limit = {
							has_decision = Kim_Jong_un_Military_support
							NOT = { has_completed_focus = NKO_People_Army }
							has_stability < 0.75
						}
						random_list = {
							70 = {
								complete_national_focus = NKO_Kim_Jong_un
							}
							30 = {
								complete_national_focus = NKO_Junta
							}
						}
					}
				else = { complete_national_focus = NKO_Kim_Jong_un }
        	}
    	}
	}

	matched_adversaries = {
		icon = GFX_decision_generic_political_discourse
		allowed = { tag = NKO }
        days_mission_timeout = 60
        fire_only_once = yes
        activation = {
			OR = {
				check_variable = {
    				var = Kim_Jong_Nam
    				value = 80
    				compare = greater_than
    			}
				check_variable = {
    				var = Kim_Jong_un
    				value = 80
    				compare = greater_than
    			}
			}
		    date < 2005.01.01
		}

		timeout_effect = {
			if = {
				limit = {
					check_variable = {
    				var = Kim_Jong_Nam
    				value = 80
    				compare = greater_than
    				}
					date < 2005.01.01
				}
				add_stability = -0.10
				custom_effect_tooltip = NKO_35_increase_Kim_Jong_un_tt
			    hidden_effect = {
				    add_to_variable = {
				    	var = Kim_Jong_un
			        	value = 35
				    }
				    clamp_variable = {
				    	var = Kim_Jong_un
				    	min = 0
				    	max = 100
			        }
			        subtract_from_variable = {
			        	var = Kim_Jong_Nam
			        	value = 35
			        }
			        clamp_variable = {
			        var = Kim_Jong_Nam
			        	min = 0
			        	max = 100
			        }
				}
			}
			if = {
				limit = {
					check_variable = {
    				var = Kim_Jong_un
    				value = 80
    				compare = greater_than
    				}
					date < 2005.01.01
				}
				add_stability = -0.10
				custom_effect_tooltip = NKO_35_increase_Kim_Jong_Nam_tt
			    hidden_effect = {
				    add_to_variable = {
				    	var = Kim_Jong_Nam
			        	value = 35
				    }
				    clamp_variable = {
				    	var = Kim_Jong_Nam
				    	min = 0
				    	max = 100
			        }
			        subtract_from_variable = {
			        	var = Kim_Jong_un
			        	value = 35
			        }
			        clamp_variable = {
			        var = Kim_Jong_un
			        	min = 0
			        	max = 100
			        }
				}
			}
		}
    }

	The_gradual_loss_of_trust = {
		icon = GFX_decision_generic_political_discourse
		allowed = { tag = NKO }
        days_mission_timeout = 60

        activation = {
			NOT = {
                has_idea = NKO_Arduous_March_1
	    	    has_idea = NKO_Arduous_March_2
	    	    has_idea = NKO_Arduous_March_3
	    	    has_idea = NKO_Arduous_March_4
	    	    has_idea = NKO_Arduous_March_5
			}
			date > 2004.01.01
		}

		timeout_effect = {
			custom_effect_tooltip = NKO_decrease_Kim_Jong_Nam_tt
				add_to_variable = {
					var = Kim_Jong_un
			    	value = 2
				}
				clamp_variable = {
					var = Kim_Jong_un
				 	min = 0
					max = 100
			    }
			    subtract_from_variable = {
			    	var = Kim_Jong_Nam
			    	value = 2
			    }
			    clamp_variable = {
			    	var = Kim_Jong_Nam
			    	min = 0
			    	max = 100
			    }
		}
    }
}