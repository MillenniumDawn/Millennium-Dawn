## Contents
# set_leader = yes
# update_set_politics = yes
# set_correct_ideology_trait = yes
# remove_set_ideology_flag = yes
# set_failsafe_values = yes #for general politics
# set_failsafe_change_leader = yes #only for on_action



#Main Function


update_set_politics = {
	#western
	if = { 
		limit = {
			OR = {
				has_country_flag = set_conservatism
				has_country_flag = set_liberalism
				has_country_flag = set_socialism
				has_country_flag = set_Western_Autocracy
			}
		}
		set_politics = { ruling_party = democratic }
		meta_effect = {
			text = {
				set_party_name = { 
					ideology = [OUTLOOK]
					name = [SUBIDEOLOGY_NAME]
					long_name = [SUBIDEOLOGY_NAME]
				}
			}
			OUTLOOK = "[meta_ideology_names]"
			SUBIDEOLOGY_NAME = "[show_ruling_party]"
		}
	}
	#Emerging
	if = { 
		limit = {
			OR = {
				has_country_flag = set_Communist-State
				has_country_flag = set_Conservative
				has_country_flag = set_Autocracy
				has_country_flag = set_Vilayat_e_Faqih
				has_country_flag = set_Mod_Vilayat_e_Faqih
				has_country_flag = set_anarchist_communism
			}
		}
		set_politics = { ruling_party = communism }
		meta_effect = {
			text = {
				set_party_name = { 
					ideology = [OUTLOOK]
					name = [SUBIDEOLOGY_NAME]
					long_name = [SUBIDEOLOGY_NAME]
				}
			}
			OUTLOOK = "[meta_ideology_names]"
			SUBIDEOLOGY_NAME = "[show_ruling_party]"
		}
	}
	#Non-Aligned
	if = { 
		limit = {
			OR = {
				has_country_flag = set_Neutral_conservatism
				has_country_flag = set_oligarchism
				has_country_flag = set_neutral_Social
				has_country_flag = set_Neutral_Libertarian
				has_country_flag = set_Neutral_Autocracy
				has_country_flag = set_Neutral_Communism
				has_country_flag = set_Neutral_Muslim_Brotherhood
				has_country_flag = set_Neutral_green
			}
		}
		set_politics = { ruling_party = neutrality }
		meta_effect = {
			text = {
				set_party_name = { 
					ideology = [OUTLOOK]
					name = [SUBIDEOLOGY_NAME]
					long_name = [SUBIDEOLOGY_NAME]
				}
			}
			OUTLOOK = "[meta_ideology_names]"
			SUBIDEOLOGY_NAME = "[show_ruling_party]"
		}
	}
	#Salafist
	if = { 
		limit = {
			OR = {
				has_country_flag = set_Kingdom
				has_country_flag = set_Caliphate
			}
		}
		set_politics = { ruling_party = fascism }
		meta_effect = {
			text = {
				set_party_name = { 
					ideology = [OUTLOOK]
					name = [SUBIDEOLOGY_NAME]
					long_name = [SUBIDEOLOGY_NAME]
				}
			}
			OUTLOOK = "[meta_ideology_names]"
			SUBIDEOLOGY_NAME = "[show_ruling_party]"
		}
	}
	#Nationalist
	if = { 
		limit = {
			OR = {
				has_country_flag = set_Nat_Autocracy
				has_country_flag = set_Nat_Fascism
				has_country_flag = set_Nat_Populism
				has_country_flag = set_Monarchist
			}
		}
		set_politics = { ruling_party = nationalist }
		meta_effect = {
			text = {
				set_party_name = { 
					ideology = [OUTLOOK]
					name = [SUBIDEOLOGY_NAME]
					long_name = [SUBIDEOLOGY_NAME]
				}
			}
			OUTLOOK = "[meta_ideology_names]"
			SUBIDEOLOGY_NAME = "[show_ruling_party]"
		}
	}
}

set_correct_ideology_trait = {
	if = {
		limit = {
			has_country_flag = set_conservatism
			NOT = { has_country_leader_with_trait = western_conservatism }
		}
		add_country_leader_trait = western_conservatism
	}
	else_if = {
		limit = {
			has_country_flag = set_liberalism
			NOT = { has_country_leader_with_trait = western_liberalism }
		}
		add_country_leader_trait = western_liberalism
	}
	else_if = {
		limit = {
			has_country_flag = set_socialism
			NOT = { has_country_leader_with_trait = western_socialism }
		}
		add_country_leader_trait = western_socialism
	}
	else_if = {
		limit = {
			has_country_flag = set_Western_Autocracy
			NOT = { has_country_leader_with_trait = western_Western_Autocracy }
		}
		add_country_leader_trait = western_Western_Autocracy
	}
	else_if = {
		limit = {
			has_country_flag = set_Communist-State
			NOT = { has_country_leader_with_trait = emerging_Communist-State }
		}
		add_country_leader_trait = emerging_Communist-State
	}
	else_if = {
		limit = {
			has_country_flag = set_Conservative
			NOT = { has_country_leader_with_trait = emerging_Conservative }
		}
		add_country_leader_trait = emerging_Conservative
	}
	else_if = {
		limit = {
			has_country_flag = set_Autocracy
			NOT = { has_country_leader_with_trait = emerging_Autocracy }
		}
		add_country_leader_trait = emerging_Autocracy
	}
	else_if = {
		limit = {
			has_country_flag = set_Vilayat_e_Faqih
			NOT = { has_country_leader_with_trait = emerging_Vilayat_e_Faqih }
		}
		add_country_leader_trait = emerging_Vilayat_e_Faqih
	}
	else_if = {
		limit = {
			has_country_flag = set_Mod_Vilayat_e_Faqih
			NOT = { has_country_leader_with_trait = emerging_Mod_Vilayat_e_Faqih }
		}
		add_country_leader_trait = emerging_Mod_Vilayat_e_Faqih
	}
	else_if = {
		limit = {
			has_country_flag = set_anarchist_communism
			NOT = { has_country_leader_with_trait = emerging_anarchist_communism }
		}
		add_country_leader_trait = emerging_anarchist_communism
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_conservatism
			NOT = { has_country_leader_with_trait = neutrality_Neutral_conservatism }
		}
		add_country_leader_trait = neutrality_Neutral_conservatism
	}
	else_if = {
		limit = {
			has_country_flag = set_oligarchism
			NOT = { has_country_leader_with_trait = neutrality_oligarchism }
		}
		add_country_leader_trait = neutrality_oligarchism
	}
	else_if = {
		limit = {
			has_country_flag = set_neutral_Social
			NOT = { has_country_leader_with_trait = neutrality_neutral_Social }
		}
		add_country_leader_trait = neutrality_neutral_Social
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_Libertarian
			NOT = { has_country_leader_with_trait = neutrality_Neutral_Libertarian }
		}
		add_country_leader_trait = neutrality_Neutral_Libertarian
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_Autocracy
			NOT = { has_country_leader_with_trait = neutrality_Neutral_Autocracy }
		}
		add_country_leader_trait = neutrality_Neutral_Autocracy
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_Communism
			NOT = { has_country_leader_with_trait = neutrality_Neutral_Communism }
		}
		add_country_leader_trait = neutrality_Neutral_Communism
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_Muslim_Brotherhood
			NOT = { has_country_leader_with_trait = neutrality_Neutral_Muslim_Brotherhood }
		}
		add_country_leader_trait = neutrality_Neutral_Muslim_Brotherhood
	}
	else_if = {
		limit = {
			has_country_flag = set_Neutral_green
			NOT = { has_country_leader_with_trait = neutrality_Neutral_green }
		}
		add_country_leader_trait = neutrality_Neutral_green
	}
	else_if = {
		limit = {
			has_country_flag = set_Kingdom
			NOT = { has_country_leader_with_trait = salafist_Kingdom }
		}
		add_country_leader_trait = salafist_Kingdom
	}
	else_if = {
		limit = {
			has_country_flag = set_Caliphate
			NOT = { has_country_leader_with_trait = salafist_Caliphate }
		}
		add_country_leader_trait = salafist_Caliphate
	}
	else_if = {
		limit = {
			has_country_flag = set_Nat_Autocracy
			NOT = { has_country_leader_with_trait = nationalist_Nat_Autocracy }
		}
		add_country_leader_trait = nationalist_Nat_Autocracy
	}
	else_if = {
		limit = {
			has_country_flag = set_Nat_Fascism
			NOT = { has_country_leader_with_trait = nationalist_Nat_Fascism }
		}
		add_country_leader_trait = nationalist_Nat_Fascism
	}
	else_if = {
		limit = {
			has_country_flag = set_Nat_Populism
			NOT = { has_country_leader_with_trait = nationalist_Nat_Populism }
		}
		add_country_leader_trait = nationalist_Nat_Populism
	}
	else_if = {
		limit = {
			has_country_flag = set_Monarchist
			NOT = { has_country_leader_with_trait = nationalist_Monarchist }
		}
		add_country_leader_trait = nationalist_Monarchist
	}
}

remove_set_ideology_flag = {
	if = {
		limit = { has_country_flag = set_conservatism }
		clr_country_flag = set_conservatism
	}
	if = {
		limit = { has_country_flag = set_liberalism }
		clr_country_flag = set_liberalism
	}
	if = {
		limit = { has_country_flag = set_socialism }
		clr_country_flag = set_socialism
	}
	if = {
		limit = { has_country_flag = set_Western_Autocracy }
		clr_country_flag = set_Western_Autocracy
	}
	if = {
		limit = { has_country_flag = set_Communist-State }
		clr_country_flag = set_Communist-State
	}
	if = {
		limit = { has_country_flag = set_Conservative }
		clr_country_flag = set_Conservative
	}
	if = {
		limit = { has_country_flag = set_Autocracy }
		clr_country_flag = set_Autocracy
	}
	if = {
		limit = { has_country_flag = set_Vilayat_e_Faqih }
		clr_country_flag = set_Vilayat_e_Faqih
	}
	if = {
		limit = { has_country_flag = set_Mod_Vilayat_e_Faqih }
		clr_country_flag = set_Mod_Vilayat_e_Faqih
	}
	if = {
		limit = { has_country_flag = set_anarchist_communism }
		clr_country_flag = set_anarchist_communism
	}
	if = {
		limit = { has_country_flag = set_Kingdom }
		clr_country_flag = set_Kingdom
	}
	if = {
		limit = { has_country_flag = set_Caliphate }
		clr_country_flag = set_Caliphate
	}
	if = {
		limit = { has_country_flag = set_Neutral_conservatism }
		clr_country_flag = set_Neutral_conservatism
	}
	if = {
		limit = { has_country_flag = set_oligarchism }
		clr_country_flag = set_oligarchism
	}
	if = {
		limit = { has_country_flag = set_neutral_Social }
		clr_country_flag = set_neutral_Social
	}
	if = {
		limit = { has_country_flag = set_Neutral_Libertarian }
		clr_country_flag = set_Neutral_Libertarian
	}
	if = {
		limit = { has_country_flag = set_Neutral_Autocracy }
		clr_country_flag = set_Neutral_Autocracy
	}
	if = {
		limit = { has_country_flag = set_Neutral_Communism }
		clr_country_flag = set_Neutral_Communism
	}
	if = {
		limit = { has_country_flag = set_Neutral_green }
		clr_country_flag = set_Neutral_green
	}
	if = {
		limit = { has_country_flag = set_Neutral_Muslim_Brotherhood }
		clr_country_flag = set_Neutral_Muslim_Brotherhood
	}
	if = {
		limit = { has_country_flag = set_Nat_Autocracy }
		clr_country_flag = set_Nat_Autocracy
	}
	if = {
		limit = { has_country_flag = set_Nat_Fascism }
		clr_country_flag = set_Nat_Fascism
	}
	if = {
		limit = { has_country_flag = set_Nat_Populism }
		clr_country_flag = set_Nat_Populism
	}
	if = {
		limit = { has_country_flag = set_Monarchist }
		clr_country_flag = set_Monarchist
	}
}

set_failsafe_values = {
	#Western
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = conservatism_pop
					has_variable = liberalism_pop
					has_variable = socialism_pop
					has_variable = Western_Autocracy_pop
				}
			}
		}
		if = { limit = { has_elections = yes }
			random_list = {
				2 = {
					set_variable = { socialism_pop = 0.3 }
					set_variable = { conservatism_pop = 0.1 }
					set_variable = { liberalism_pop = 0.1 }
				
				}
				2 = {
					set_variable = { conservatism_pop = 0.3 }
					set_variable = { socialism_pop = 0.1 }
					set_variable = { liberalism_pop = 0.1 }
				}
			}
			else = {
				random_list = {
					2 = {
						set_variable = { Western_Autocracy_pop = 0.3 }
						set_variable = { conservatism_pop = 0.1 }
						set_variable = { socialism_pop = 0.1 }
					}
					2 = {
						set_variable = { Western_Autocracy_pop = 0.5 }
						set_variable = { liberalism_pop = 0.1 }
						set_variable = { socialism_pop = 0.1 }
					}
				}
			}
		}
	}
	#Emerging
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = Communist-State_pop
					has_variable = Conservative_pop
					has_variable = Autocracy_pop
					has_variable = Vilayat_e_Faqih_pop
					has_variable = Mod_Vilayat_e_Faqih_pop
					has_variable = anarchist_communism_pop
				}
			}
		}
		if = { limit = { has_elections = yes }
		
			if = { limit = { has_idea = shia }
				random_list = {
					2 = {
						set_variable = { Vilayat_e_Faqih_pop = 0.5 } #iranian revolution is spreading
						set_variable = { Mod_Vilayat_e_Faqih_pop = 0.2 }
						set_variable = { anarchist_communism_pop = 0.1 }
					
					}
					1 = {
						set_variable = { Vilayat_e_Faqih_pop = 0.4 } #iranian revolution is spreading
						set_variable = { Mod_Vilayat_e_Faqih_pop = 0.3 }
						set_variable = { anarchist_communism_pop = 0.2 }
					}
				}
			}
			if = { limit = { has_idea = western_country }
				set_variable = { anarchist_communism_pop = 0.5 } #left-wing radicalism can rise
				set_variable = { Communist-State_pop = 0.01 } #communism is dead
			}
			else_if = { limit = { OR = { Russian_Proficient = yes is_asian_nation = yes } } #soviet block and asia
				random_list = {
					2 = {
						set_variable = { Conservative_pop = 0.3 } #reactionary
						set_variable = { Communist-State_pop = 0.1 } #communism can be a potent force still here
					}
					2 = {
						set_variable = { Conservative_pop = 0.1 } #reactionary
						set_variable = { Communist-State_pop = 0.2 } #communism can be a potent force still here
					}
				}
			}
			else_if = { limit = { OR = { is_Central_America = yes is_caribbean_nation = yes is_South_America = yes } }
				set_variable = { anarchist_communism_pop = 0.5 } #revolutionary socialism is major force
				set_variable = { Communist-State_pop = 0.1 } #more hard core castroism is muted
			}
			else_if = { limit = { always = yes }
				set_variable = { anarchist_communism_pop = 0.5 } #generic left-radical movement
			}
		}
		else_if = { limit = { has_elections = no }
		
			if = { limit = { has_idea = shia }
				set_variable = { Vilayat_e_Faqih_pop = 0.5 } #iranian revolution is spreading
			}
			if = { limit = { has_idea = western_country }
				set_variable = { Communist-State_pop = 0.5 } #communism is only viable western emerging autocratic force
				set_variable = { anarchist_communism_pop = 0.1 } #revolutionary socialism is supporting role
			}
			else_if = { limit = { OR = { Russian_Proficient = yes is_asian_nation = yes } } #soviet block and asia
				random_list = {
					2 = {
						set_variable = { Autocracy_pop = 0.3 } #reactionary autocrat
						set_variable = { Communist-State_pop = 0.1 } #communism can be a potent force still here
					}
					2 = {
						set_variable = { Autocracy_pop = 0.1 } #reactionary autocrat
						set_variable = { Communist-State_pop = 0.3 } #communism can be a potent force still here
					}
				}
			}
			else_if = { limit = { OR = { is_Central_America = yes is_caribbean_nation = yes is_South_America = yes } }
				set_variable = { Communist-State_pop = 0.5 } #communism! viva Che!
			}
			else_if = { limit = { always = yes }
				set_variable = { Autocracy_pop = 0.5 } #generic autocracy
			}
		}
	}
	#Non-aligned
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = Neutral_conservatism_pop
					has_variable = oligarchism_pop
					has_variable = neutral_Social_pop
					has_variable = Neutral_Libertarian_pop
					has_variable = Neutral_Autocracy_pop
					has_variable = Neutral_Communism_pop
					has_variable = Neutral_green_pop
					has_variable = Neutral_Muslim_Brotherhood_pop
				}
			}
		}
		if = { limit = { has_elections = yes }
		
			if = { limit = { Is_Possible_Muslim_Brotherhood = yes }
				set_variable = { Neutral_Muslim_Brotherhood_pop = 0.5 } #Islamism!
			}
			else_if = { limit = { has_idea = western_country }
				random_list = {
					2 = {
						set_variable = { Neutral_Libertarian_pop = 0.3 } #libertarian
						set_variable = { Neutral_green_pop = 0.1 } #Green party
					}
					2 = {
						set_variable = { Neutral_green_pop = 0.3 } #Green party
						set_variable = { Neutral_Libertarian_pop = 0.1 } #libertarian
						set_variable = { neutral_Social_pop = 0.02 }
					}
					2 = {
						set_variable = { Neutral_green_pop = 0.2 } #Green party
						set_variable = { Neutral_Libertarian_pop = 0.1 } #libertarian
						set_variable = { neutral_Social_pop = 0.15 }
					}
				}
			}
			else_if = { limit = { OR = { Russian_Proficient = yes } } #soviet block
				random_list = {
					2 = {
						set_variable = { oligarchism_pop = 0.3 }
						set_variable = { Neutral_Communism_pop = 0.1 } #communism can be a potent force still here
					}
					2 = {
						set_variable = { oligarchism_pop = 0.1 } #reactionary
						set_variable = { Neutral_Communism_pop = 0.2 } #communism can be a potent force still here
					}
				}
			}
			else_if = { limit = { OR = { is_Central_America = yes is_caribbean_nation = yes is_South_America = yes } }
				set_variable = { Neutral_conservatism_pop = 0.5 }
				set_variable = { Neutral_green_pop = 0.1 }
			}
			else_if = { limit = { always = yes }
				set_variable = { Neutral_conservatism_pop = 0.5 }
			}
		}
		else_if = { limit = { has_elections = no }
			
			if = { limit = { Is_Possible_Muslim_Brotherhood = yes }
				set_variable = { Neutral_Muslim_Brotherhood_pop = 0.5 } #Islamism!
			}
			if = { limit = { has_idea = western_country }
				set_variable = { Neutral_Autocracy_pop = 0.5 }
			}
			else_if = { limit = { OR = { Russian_Proficient = yes is_asian_nation = yes } } #soviet block and asia
				set_variable = { Neutral_Communism_pop = 0.5 }
			}
			else_if = { limit = { OR = { is_asian_nation = yes } } #asia
				random_list = {
					2 = {
						set_variable = { Neutral_Autocracy_pop = 0.3 }
					}
					2 = {
						set_variable = { Neutral_Communism_pop = 0.3 }
					}
				}
			}
			else_if = { limit = { OR = { is_Central_America = yes is_caribbean_nation = yes is_South_America = yes } }
				set_variable = { Neutral_Autocracy_pop = 0.5 }
			}
			else_if = { limit = { always = yes }
				set_variable = { Neutral_Autocracy_pop = 0.5 }
			}
		}
	}
	#Salafism
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = Kingdom_pop
					has_variable = Caliphate_pop
				}
			}
		}
		set_variable = { Caliphate_pop = 0.5 }
	}
	#Nationalist
	if = {
		limit = {
			NOT = {
				OR = {
					has_variable = Nat_Autocracy_pop
					has_variable = Nat_Fascism_pop
					has_variable = Nat_Populism_pop
					has_variable = Monarchist_pop
				}
			}
		}
		if = { limit = { has_elections = yes }
			set_variable = { Nat_Populism_pop = 0.5 }
		}
		else_if = { limit = { has_elections = no }
			
			if = { limit = { OR = { has_idea = western_country Russian_Proficient = yes } } #soviet block
				set_variable = { Nat_Fascism_pop = 0.5 }
			}
			else_if = { limit = { OR = { is_asian_nation = yes } } #asia
				random_list = {
					5 = {
						set_variable = { Nat_Autocracy_pop = 0.3 }
					}
					1 = {
						set_variable = { Monarchist_pop = 0.3 }
					}
				}
			}
			else_if = { limit = { always = yes }
				set_variable = { Nat_Autocracy_pop = 0.5 }
			}
		}
	}
}

## Failsafe set change ideology if none specified ##
#intended for on_action

set_failsafe_change_leader = {
	if = {
		limit = { 
			NOT = {
				OR = {
					has_country_flag = set_conservatism
					has_country_flag = set_liberalism
					has_country_flag = set_socialism
					has_country_flag = set_Western_Autocracy
					has_country_flag = set_Communist-State
					has_country_flag = set_Conservative
					has_country_flag = set_Autocracy
					has_country_flag = set_Vilayat_e_Faqih
					has_country_flag = set_Mod_Vilayat_e_Faqih
					has_country_flag = set_anarchist_communism
					has_country_flag = set_Kingdom
					has_country_flag = set_Caliphate
					has_country_flag = set_Neutral_conservatism
					has_country_flag = set_oligarchism
					has_country_flag = set_neutral_Social
					has_country_flag = set_Neutral_Libertarian
					has_country_flag = set_Neutral_Autocracy
					has_country_flag = set_Neutral_Communism
					has_country_flag = set_Neutral_green
					has_country_flag = set_Neutral_Muslim_Brotherhood
					has_country_flag = set_Nat_Autocracy
					has_country_flag = set_Nat_Fascism
					has_country_flag = set_Nat_Populism
					has_country_flag = set_Monarchist
				}
			}
		}
		set_temp_variable = { prevmax_temp = 0 }
		if = { limit = { has_government = democratic }
			if = {
				limit = {
					has_variable = conservatism_pop
					check_variable = { conservatism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = conservatism_pop }
			}
			if = {
				limit = {
					has_variable = liberalism_pop
					check_variable = { liberalism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = liberalism_pop }
			}
			if = {
				limit = {
					has_variable = socialism_pop
					check_variable = { socialism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = socialism_pop }
			}
			if = {
				limit = {
					has_variable = Western_Autocracy_pop
					check_variable = { Western_Autocracy_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Western_Autocracy_pop }
			}
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = conservatism_pop } }
				set_country_flag = set_conservatism
			}
			else_if = { limit = { check_variable = { prevmax_temp = liberalism_pop } }
				set_country_flag = set_liberalism
			}
			else_if = { limit = { check_variable = { prevmax_temp = socialism_pop } }
				set_country_flag = set_socialism
			}
			else_if = { limit = { check_variable = { prevmax_temp = Western_Autocracy_pop } }
				set_country_flag = set_Western_Autocracy
			}
		}
		
		if = { limit = { has_government = communism }
			if = {
				limit = {
					has_variable = Communist-State_pop
					check_variable = { Communist-State_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Communist-State_pop }
			}
			if = {
				limit = {
					has_variable = Conservative_pop
					check_variable = { Conservative_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Conservative_pop }
			}
			if = {
				limit = {
					has_variable = Autocracy_pop
					check_variable = { Autocracy_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Autocracy_pop }
			}
			if = {
				limit = {
					has_variable = Vilayat_e_Faqih_pop
					check_variable = { Vilayat_e_Faqih_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Vilayat_e_Faqih_pop }
			}
			if = {
				limit = {
					has_variable = Mod_Vilayat_e_Faqih_pop
					check_variable = { Mod_Vilayat_e_Faqih_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Mod_Vilayat_e_Faqih_pop }
			}
			if = {
				limit = {
					has_variable = anarchist_communism_pop
					check_variable = { anarchist_communism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = anarchist_communism_pop }
			}
			
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = Communist-State_pop } }
				set_country_flag = set_Communist-State
			}
			else_if = { limit = { check_variable = { prevmax_temp = Conservative_pop } }
				set_country_flag = set_Conservative
			}
			else_if = { limit = { check_variable = { prevmax_temp = Autocracy_pop } }
				set_country_flag = set_Autocracy
			}
			else_if = { limit = { check_variable = { prevmax_temp = Vilayat_e_Faqih_pop } }
				set_country_flag = set_Vilayat_e_Faqih
			}
			else_if = { limit = { check_variable = { prevmax_temp = Mod_Vilayat_e_Faqih_pop } }
				set_country_flag = set_Mod_Vilayat_e_Faqih
			}
			else_if = { limit = { check_variable = { prevmax_temp = anarchist_communism_pop } }
				set_country_flag = set_anarchist_communism
			}
		}
		
		if = { limit = { has_government = neutrality }
			if = {
				limit = {
					has_variable = Neutral_conservatism_pop
					check_variable = { Neutral_conservatism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_conservatism_pop }
			}
			if = {
				limit = {
					has_variable = oligarchism_pop
					check_variable = { oligarchism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = oligarchism_pop }
			}
			if = {
				limit = {
					has_variable = neutral_Social_pop
					check_variable = { neutral_Social_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = neutral_Social_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_Libertarian_pop
					check_variable = { Neutral_Libertarian_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_Libertarian_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_Autocracy_pop
					check_variable = { Neutral_Autocracy_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_Autocracy_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_Communism_pop
					check_variable = { Neutral_Communism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_Communism_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_green_pop
					check_variable = { Neutral_green_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_green_pop }
			}
			if = {
				limit = {
					has_variable = Neutral_Muslim_Brotherhood_pop
					check_variable = { Neutral_Muslim_Brotherhood_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Neutral_Muslim_Brotherhood_pop }
			}
			
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = Neutral_conservatism_pop } }
				set_country_flag = set_Neutral_conservatism
			}
			else_if = { limit = { check_variable = { prevmax_temp = oligarchism_pop } }
				set_country_flag = set_oligarchism
			}
			else_if = { limit = { check_variable = { prevmax_temp = neutral_Social_pop } }
				set_country_flag = set_neutral_Social
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_Libertarian_pop } }
				set_country_flag = set_Neutral_Libertarian
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_Autocracy_pop } }
				set_country_flag = set_Neutral_Autocracy
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_Communism_pop } }
				set_country_flag = set_Neutral_Communism
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_green_pop } }
				set_country_flag = set_Neutral_Muslim_Brotherhood
			}
			else_if = { limit = { check_variable = { prevmax_temp = Neutral_Muslim_Brotherhood_pop } }
				set_country_flag = set_Neutral_green
			}
		}
		if = { limit = { has_government = nationalist }
			if = {
				limit = {
					has_variable = Nat_Autocracy_pop
					check_variable = { Nat_Autocracy_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Nat_Autocracy_pop }
			}
			if = {
				limit = {
					has_variable = Nat_Fascism_pop
					check_variable = { Nat_Fascism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Nat_Fascism_pop }
			}
			if = {
				limit = {
					has_variable = Nat_Populism_pop
					check_variable = { Nat_Populism_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Nat_Populism_pop }
			}
			if = {
				limit = {
					has_variable = Monarchist_pop
					check_variable = { Monarchist_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Monarchist_pop }
			}
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = Nat_Autocracy_pop } }
				set_country_flag = set_Nat_Autocracy
			}
			else_if = { limit = { check_variable = { prevmax_temp = Nat_Fascism_pop } }
				set_country_flag = set_Nat_Fascism
			}
			else_if = { limit = { check_variable = { prevmax_temp = Nat_Populism_pop } }
				set_country_flag = set_Nat_Populism
			}
			else_if = { limit = { check_variable = { prevmax_temp = Monarchist_pop } }
				set_country_flag = set_Monarchist
			}
		}
		
		if = { limit = { has_government = fascism }
			if = {
				limit = {
					has_variable = Kingdom_pop
					check_variable = { Kingdom_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Kingdom_pop }
			}
			if = {
				limit = {
					has_variable = Caliphate_pop
					check_variable = { Caliphate_pop > prevmax_temp }
				}
				set_temp_variable = { prevmax_temp = Caliphate_pop }
			}
			#Set for highest value
			if = { limit = { check_variable = { prevmax_temp = Kingdom_pop } }
				set_country_flag = set_Kingdom
			}
			else_if = { limit = { check_variable = { prevmax_temp = Caliphate_pop } }
				set_country_flag = set_Caliphate
			}
		}
	}
}