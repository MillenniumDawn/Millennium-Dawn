scripted_gui = {

	buy_equipment_window = {
		#context_type = selected_country_context
		window_name = "equipment_purchasing_window_container"
		
		visible = {
			ROOT = {
				has_country_flag = equipment_purchasing_opened
			}
		}
		
		properties = {
			EP_small_arms_button = {
				image = "[AC_GetInfraButtonTexture]"
			}
		}
		
		effects = {
			equipment_purchasing_close_button_click = {
				clr_country_flag = equipment_purchasing_opened
			}
		}
		
		triggers = {
			EP_small_arms_button_visible = {
				if = {
					has_country_flag = equipment_purchasing_opened
				}
			}
			EP_small_arms_button_click_enabled = {
				if = {
					has_country_flag = equipment_purchasing_opened
				}
			}
		}
	}

	buy_equipment = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		window_name = "equipment_purchasing_container"
		
		visible = {
			ROOT = {
				is_faction_leader = yes
			}
			FROM = {
				NOT = {
					tag = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		effects = {
			equipment_purchasing_button_click = {
				ROOT = {
					if = {
						limit = { NOT = { has_country_flag = equipment_purchasing_opened } }
						set_country_flag = equipment_purchasing_opened
					}
					else = {
						clr_country_flag = equipment_purchasing_opened
					}
				}
			}
		}

		triggers = {
			equipment_purchasing_button_click_enabled = {
				THIS = {
					OR = {					
						has_idea = great_power
						has_idea = regional_power
						has_idea = superpower
						has_idea = large_power
						tag = ISR
						tag = BEL
						tag = SKO
						tag = SPR
						tag = SOV 
						tag = FRA
						tag = GER
						tag = ENG 
						tag = SOV 
						tag = CHI
						tag = HOL
						tag = ITA
					}
				}
			}
		}
	}
	
	buy_equipment_2 = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		window_name = "equipment_purchasing_container_2"
		
		visible = {
			ROOT = {
				is_faction_leader = yes
			}
			FROM = {
				is_in_faction_with = ROOT
				NOT = { tag = ROOT }
			}
		}
		
		effects = {
			equipment_purchasing_button_2_click = {
				ROOT = {
					if = {
						limit = { NOT = { has_country_flag = equipment_purchasing_opened } }
						set_country_flag = equipment_purchasing_opened
					}
					else = {
						clr_country_flag = equipment_purchasing_opened
					}
				}
			}
		}

		triggers = {
			equipment_purchasing_button_2_click_enabled = {
				THIS = {
					OR = {					
						has_idea = great_power
						has_idea = regional_power
						has_idea = superpower
						has_idea = large_power
						tag = ISR
						tag = BEL
						tag = SKO
						tag = SPR
						tag = SOV 
						tag = FRA
						tag = GER
						tag = ENG 
						tag = SOV 
						tag = CHI
						tag = HOL
						tag = ITA
					}
				}
			}
		}
	}
	
	buy_equipment_3 = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		window_name = "equipment_purchasing_container_3"
		
		visible = {
			ROOT = {
				is_faction_leader = no
			}
			FROM = {
				is_in_faction_with = ROOT
				NOT = { tag = ROOT }
			}
		}
		
		effects = {
			equipment_purchasing_button_3_click = {
				ROOT = {
					if = {
						limit = { NOT = { has_country_flag = equipment_purchasing_opened } }
						set_country_flag = equipment_purchasing_opened
					}
					else = {
						clr_country_flag = equipment_purchasing_opened
					}
				}
			}
		}

		triggers = {
			equipment_purchasing_button_3_click_enabled = {
				THIS = {
					OR = {					
						has_idea = great_power
						has_idea = regional_power
						has_idea = superpower
						has_idea = large_power
						tag = ISR
						tag = BEL
						tag = SKO
						tag = SPR
						tag = SOV 
						tag = FRA
						tag = GER
						tag = ENG 
						tag = SOV 
						tag = CHI
						tag = HOL
						tag = ITA
					}
				}
			}
		}
	}
	
	buy_equipment_4 = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		window_name = "equipment_purchasing_container_4"
		
		visible = {
			ROOT = {
				is_faction_leader = no
			}
			FROM = {
				NOT = {
					tag = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		effects = {
			equipment_purchasing_button_4_click = {
				ROOT = {
					if = {
						limit = { NOT = { has_country_flag = equipment_purchasing_opened } }
						set_country_flag = equipment_purchasing_opened
					}
					else = {
						clr_country_flag = equipment_purchasing_opened
					}
				}
			}
		}

		triggers = {
			equipment_purchasing_button_4_click_enabled = {
				THIS = {
					OR = {					
						has_idea = great_power
						has_idea = regional_power
						has_idea = superpower
						has_idea = large_power
						tag = ISR
						tag = BEL
						tag = SKO
						tag = SPR
						tag = SOV 
						tag = FRA
						tag = GER
						tag = ENG 
						tag = SOV 
						tag = CHI
						tag = HOL
						tag = ITA
					}
				}
			}
		}
	}
	
	buy_equipment_5 = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		window_name = "equipment_purchasing_container_5"
		
		visible = {
			ROOT = {
				is_in_faction = no
			}
			FROM = {
				NOT = {
					tag = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		effects = {
			equipment_purchasing_button_5_click = {
				ROOT = {
					if = {
						limit = { NOT = { has_country_flag = equipment_purchasing_opened } }
						set_country_flag = equipment_purchasing_opened
					}
					else = {
						clr_country_flag = equipment_purchasing_opened
					}
				}
			}
		}

		triggers = {
			equipment_purchasing_button_5_click_enabled = {
				THIS = {
					OR = {					
						has_idea = great_power
						has_idea = regional_power
						has_idea = superpower
						has_idea = large_power
						tag = ISR
						tag = BEL
						tag = SKO
						tag = SPR
						tag = SOV 
						tag = FRA
						tag = GER
						tag = ENG 
						tag = SOV 
						tag = CHI
						tag = HOL
						tag = ITA
					}
				}
			}
		}
	}
}
	