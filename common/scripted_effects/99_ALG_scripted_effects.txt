algeria_update_casablanca_accords_acceptance = {
	#Morocco
	set_variable = { Morocco_acceptance = 0 }
	if = {
		limit = { MOR = { is_subject_of = ROOT } }
		set_variable = { Morocco_acceptance = 100 }
	}
	else = {
		if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_annexation }
			add_to_variable = { Morocco_acceptance = 95 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_autonomy }
			add_to_variable = { Morocco_acceptance = 40 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_independence }
			add_to_variable = { Morocco_acceptance = 5 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_mauritania }
			add_to_variable = { Morocco_acceptance = 5 }
		}
		if = {
			limit = {
				is_in_array = {
					array = MOR.influence_array
					value = ROOT.id
				}
			}
			for_each_loop = {
				array = MOR.influence_array
				index = i
				if = {
					limit = { check_variable = { MOR.influence_array^i = ROOT.id } }
					add_to_variable = { ROOT.Morocco_acceptance = MOR.influence_array_val^i }
				}
			}
		}
		if = {
			limit = {
				MOR = {
					has_opinion = {
						target = ROOT
						value > 150
					}
				}
			}
			multiply_variable = { Morocco_acceptance = 1.3 }
		}
		else_if = {
			limit = {
				MOR = {
					has_opinion = {
						target = ROOT
						value > 100
					}
				}
			}
			multiply_variable = { Morocco_acceptance = 1.2 }
		}
		else_if = {
			limit = {
				MOR = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
			}
			multiply_variable = { Morocco_acceptance = 1.1 }
		}
		if = {
			limit = {
				OR = {
					AND = {
						ROOT = { has_government = democratic }
						MOR = { has_government = democratic }
					}
					AND = {
						ROOT = { has_government = communism }
						MOR = { has_government = communism }
					}
					AND = {
						ROOT = { has_government = fascism }
						MOR = { has_government = fascism }
					}
					AND = {
						ROOT = { has_government = neutrality }
						MOR = { has_government = neutrality }
					}
					AND = {
						ROOT = { has_government = nationalist }
						MOR = { has_government = nationalist }
					}
				}
			}
			multiply_variable = { Morocco_acceptance = 1.2 }
		}
		clamp_variable = {
			var = Morocco_acceptance
			max = 100
		}
		set_variable = { Morocco_acceptance_neg = 100 }
		subtract_from_variable = { Morocco_acceptance_neg = Morocco_acceptance }
	}
	#Sahrawi
	set_variable = { Sahrawi_acceptance = 0 }
	if = {
		limit = { SHA = { is_subject_of = ROOT } }
		set_variable = { Sahrawi_acceptance = 100 }
	}
	else = {
		if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_annexation }
			add_to_variable = { Sahrawi_acceptance = 5 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_autonomy }
			add_to_variable = { Sahrawi_acceptance = 20 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_independence }
			add_to_variable = { Sahrawi_acceptance = 95 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_mauritania }
			add_to_variable = { Sahrawi_acceptance = 5 }
		}
		if = {
			limit = {
				is_in_array = {
					array = SHA.influence_array
					value = ROOT.id
				}
			}
			for_each_loop = {
				array = SHA.influence_array
				index = i
				if = {
					limit = { check_variable = { MOR.influence_array^i = ROOT.id } }
					add_to_variable = { ROOT.Sahrawi_acceptance = SHA.influence_array_val^i }
				}
			}
		}
		if = {
			limit = {
				SHA = {
					has_opinion = {
						target = ROOT
						value > 150
					}
				}
			}
			multiply_variable = { Sahrawi_acceptance = 1.3 }
		}
		else_if = {
			limit = {
				SHA = {
					has_opinion = {
						target = ROOT
						value > 100
					}
				}
			}
			multiply_variable = { Sahrawi_acceptance = 1.2 }
		}
		else_if = {
			limit = {
				SHA = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
			}
			multiply_variable = { Sahrawi_acceptance = 1.1 }
		}
		if = {
			limit = {
				OR = {
					AND = {
						ROOT = { has_government = democratic }
						SHA = { has_government = democratic }
					}
					AND = {
						ROOT = { has_government = communism }
						SHA = { has_government = communism }
					}
					AND = {
						ROOT = { has_government = fascism }
						SHA = { has_government = fascism }
					}
					AND = {
						ROOT = { has_government = neutrality }
						SHA = { has_government = neutrality }
					}
					AND = {
						ROOT = { has_government = nationalist }
						SHA = { has_government = nationalist }
					}
				}
			}
			multiply_variable = { Sahrawi_acceptance = 1.2 }
		}
		clamp_variable = {
			var = Sahrawi_acceptance
			max = 100
		}
		set_variable = { Sahrawi_acceptance_neg = 100 }
		subtract_from_variable = { Sahrawi_acceptance_neg = Sahrawi_acceptance }
	}
	#Libya
	set_variable = { Libya_acceptance = 0 }
	if = {
		limit = { LBA = { is_subject_of = ROOT } }
		set_variable = { Libya_acceptance = 100 }
	}
	else = {
		if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_annexation }
			add_to_variable = { Libya_acceptance = 10 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_autonomy }
			add_to_variable = { Libya_acceptance = 30 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_independence }
			add_to_variable = { Libya_acceptance = 80 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_mauritania }
			add_to_variable = { Libya_acceptance = 15 }
		}
		if = {
			limit = {
				is_in_array = {
					array = LBA.influence_array
					value = ROOT.id
				}
			}
			for_each_loop = {
				array = LBA.influence_array
				index = i
				if = {
					limit = { check_variable = { LBA.influence_array^i = ROOT.id } }
					add_to_variable = { ROOT.Libya_acceptance = LBA.influence_array_val^i }
				}
			}
		}
		if = {
			limit = {
				LBA = {
					has_opinion = {
						target = ROOT
						value > 150
					}
				}
			}
			multiply_variable = { Libya_acceptance = 1.3 }
		}
		else_if = {
			limit = {
				LBA = {
					has_opinion = {
						target = ROOT
						value > 100
					}
				}
			}
			multiply_variable = { Libya_acceptance = 1.2 }
		}
		else_if = {
			limit = {
				LBA = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
			}
			multiply_variable = { Libya_acceptance = 1.1 }
		}
		if = {
			limit = {
				OR = {
					AND = {
						ROOT = { has_government = democratic }
						LBA = { has_government = democratic }
					}
					AND = {
						ROOT = { has_government = communism }
						LBA = { has_government = communism }
					}
					AND = {
						ROOT = { has_government = fascism }
						LBA = { has_government = fascism }
					}
					AND = {
						ROOT = { has_government = neutrality }
						LBA = { has_government = neutrality }
					}
					AND = {
						ROOT = { has_government = nationalist }
						LBA = { has_government = nationalist }
					}
				}
			}
			multiply_variable = { Libya_acceptance = 1.2 }
		}
		clamp_variable = {
			var = Libya_acceptance
			max = 100
		}
		set_variable = { Libya_acceptance_neg = 100 }
		subtract_from_variable = { Libya_acceptance_neg = Libya_acceptance }
	}
	#Mauritania
	set_variable = { Mauritania_acceptance = 0 }
	if = {
		limit = { MAU = { is_subject_of = ROOT } }
		set_variable = { Mauritania_acceptance = 100 }
	}
	else = {
		if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_annexation }
			add_to_variable = { Mauritania_acceptance = 50 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_autonomy }
			add_to_variable = { Mauritania_acceptance = 50 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_independence }
			add_to_variable = { Mauritania_acceptance = 50 }
		}
		else_if = {
			limit = { has_country_flag = algeria_western_sahara_peace_plan_mauritania }
			if = {
				limit = { MAU = { has_government = nationalist } }
				add_to_variable = { Mauritania_acceptance = 100 }
			}
			else = {
				add_to_variable = { Mauritania_acceptance = 10 }
			}
		}
		if = {
			limit = {
				is_in_array = {
					array = MAU.influence_array
					value = ROOT.id
				}
			}
			for_each_loop = {
				array = MAU.influence_array
				index = i
				if = {
					limit = { check_variable = { MAU.influence_array^i = ROOT.id } }
					add_to_variable = { ROOT.Mauritania_acceptance = MAU.influence_array_val^i }
				}
			}
		}
		if = {
			limit = {
				MAU = {
					has_opinion = {
						target = ROOT
						value > 150
					}
				}
			}
			multiply_variable = { Mauritania_acceptance = 1.3 }
		}
		else_if = {
			limit = {
				MAU = {
					has_opinion = {
						target = ROOT
						value > 100
					}
				}
			}
			multiply_variable = { Mauritania_acceptance = 1.2 }
		}
		else_if = {
			limit = {
				MAU = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
			}
			multiply_variable = { Mauritania_acceptance = 1.1 }
		}
		if = {
			limit = {
				OR = {
					AND = {
						ROOT = { has_government = democratic }
						MAU = { has_government = democratic }
					}
					AND = {
						ROOT = { has_government = communism }
						MAU = { has_government = communism }
					}
					AND = {
						ROOT = { has_government = fascism }
						MAU = { has_government = fascism }
					}
					AND = {
						ROOT = { has_government = neutrality }
						MAU = { has_government = neutrality }
					}
					AND = {
						ROOT = { has_government = nationalist }
						MAU = { has_government = nationalist }
					}
				}
			}
			multiply_variable = { Mauritania_acceptance = 1.2 }
		}
		clamp_variable = {
			var = Mauritania_acceptance
			max = 100
		}
		set_variable = { Mauritania_acceptance_neg = 100 }
		subtract_from_variable = { Mauritania_acceptance_neg = Mauritania_acceptance }
	}
}
# PRODUCTIVITY GROWTH
update_ALG_productivity_cost = {
	custom_effect_tooltip = ALG_productivity_cost_tt
	add_to_variable = { ALG_productivity_growth = ALG_productivity_cost_change }
}
# SANCTIONS #
update_ALG_sanction_trade_opinion_factor = {
	custom_effect_tooltip = ALG_sanction_trade_opinion_factor_tt
	add_to_variable = { ALG_sanction_trade_opinion_factor = ALG_sanction_trade_opinion_factor_change }
}
update_ALG_sanction_oil_export_multiplier_modifier = {
	custom_effect_tooltip = ALG_sanction_oil_export_multiplier_modifier_tt
	add_to_variable = { ALG_sanction_oil_export_multiplier_modifier = ALG_sanction_oil_export_multiplier_modifier_change }
}
update_ALG_sanction_trade_laws_cost_factor = {
	custom_effect_tooltip = ALG_sanction_trade_laws_cost_factor_tt
	add_to_variable = { ALG_sanction_trade_laws_cost_factor = ALG_sanction_trade_laws_cost_factor_change }
}
update_ALG_sanction_improve_relations_maintain_cost_factor = {
	custom_effect_tooltip = ALG_sanction_improve_relations_maintain_cost_factor_tt
	add_to_variable = { ALG_sanction_improve_relations_maintain_cost_factor = ALG_sanction_improve_relations_maintain_cost_factor_change }
}
update_ALG_sanction_productivity_growth_modifier = {
	custom_effect_tooltip = ALG_sanction_productivity_growth_modifier_tt
	add_to_variable = { ALG_sanction_productivity_growth_modifier = ALG_sanction_productivity_growth_modifier_change }
}
update_ALG_sanction_stability_factor = {
	custom_effect_tooltip = ALG_sanction_stability_factor_tt
	add_to_variable = { ALG_sanction_stability_factor = ALG_sanction_stability_factor_change }
}
ALG_minister_clear = {
    clr_country_flag = ALG_sellal_minister
    clr_country_flag = ALG_ouyahia_minister
    clr_country_flag = ALG_bedoui_minister
}
# Constitution #
alg_increase_reform = {
	custom_effect_tooltip = alg_increase_reform_tt
	add_to_variable = { algeria_constitution_reform = 1 }
}

alg_decrease_reform = {
	custom_effect_tooltip = alg_decrease_reform_tt
	add_to_variable = { algeria_constitution_reform = -1 }
}
