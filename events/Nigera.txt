###########
####NIG####
###########

##Author: Bird

add_namespace = nigeria_md
add_namespace = nigeria_news

##Religious Conversion Events
####Peaceful Religious Conversion in [statenamehere]!
country_event = {
	id = nigeria_md.1
	title = nigeria_md.1.t
	desc = {
		text = nigeria_md.1.d1
		trigger = { has_completed_focus = NIG_convert_the_christians }
	}
	desc = {
		text = nigeria_md.1.d2
		trigger = { has_completed_focus = NIG_suppresion_of_islam }
	}
	
	is_triggered_only = yes
	
	option = { #Christian State
		name = nigeria_md.1.a
		trigger = { has_completed_focus = NIG_suppresion_of_islam }
		log = "[GetDateText]: [This.GetName]: nigeria_md.1.a executed"
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_biafra
			}
			332 = { set_state_flag = NIG_christian_state }
			add_popularity = { ideology = neutrality popularity = 0.032 }
			add_to_variable = { party_pop_array^14 = 0.032 }
			recalculate_party = yes
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
			add_stability = -0.008
		}
		if = {
			limit = { 
				has_country_flag = NIG_religious_conversion_kano
			}
			339 = { set_state_flag = NIG_christian_state }
			add_popularity = { ideology = neutrality popularity = 0.018 }
			add_to_variable = { party_pop_array^14 = 0.018 }
			recalculate_party = yes
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
			add_stability = -0.0045
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_sokoto
			}
			338 = { set_state_flag = NIG_christian_state } 
			add_popularity = { ideology = neutrality popularity = 0.029 }
			add_to_variable = { party_pop_array^14 = 0.029 }
			recalculate_party = yes 
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
			add_stability = -0.00725
			
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_borno
			}
			340 = { set_state_flag = NIG_christian_state }
			add_popularity = { ideology = neutrality popularity = 0.056 }
			###BASE OF BOKO HARAM CAN TRIGGER THE CIVIL WAR EARLIER
			add_stability = -0.06
			add_to_variable = { party_pop_array^14 = 0.056 }
			recalculate_party = yes 
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
			add_stability = -0.014
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_lagos
			}
			334 = { set_state_flag = NIG_christian_state }
			###LARGEST CITY CAN HEIGHTEN TENSIONS
			add_popularity = { ideology = neutrality popularity = 0.093 }
			add_to_variable = { party_pop_array^14 = 0.093 }
			recalculate_party = yes
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
			add_stability = -0.002325
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_benue
			}
			336 = { set_state_flag = NIG_christian_state }
			add_popularity = { ideology = neutrality popularity = 0.034 }
			add_to_variable = { party_pop_array^14 = 0.034 }
			recalculate_party = yes
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
			add_stability = -0.0085
		}
		if = {
			limit = { 
				has_country_flag = NIG_religious_conversion_abuja 
			}
			337 = { set_state_flag = NIG_christian_state }
			add_popularity = { ideology = neutrality popularity = 0.064 }
			add_to_variable = { party_pop_array^14 = 0.064 }
			recalculate_party = yes 
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
			add_stability = -0.0018
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_ambazonia
			}
			322 = { set_state_flag = NIG_christian_state }
			add_popularity = { ideology = neutrality popularity = 0.023 }
			add_to_variable = { party_pop_array^14 = 0.023 }
			recalculate_party = yes 
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
			add_stability = -0.00625
		}
		clr_country_flag = NIG_religious_conversion_abuja
		clr_country_flag = NIG_religious_conversion_ambazonia
		clr_country_flag = NIG_religious_conversion_benue
		clr_country_flag = NIG_religious_conversion_biafra
		clr_country_flag = NIG_religious_conversion_borno
		clr_country_flag = NIG_religious_conversion_kano
		clr_country_flag = NIG_religious_conversion_lagos
		clr_country_flag = NIG_religious_conversion_sokoto
		clr_country_flag = NIG_conversion_timer_flag
	}
	option = { #Islamic State 
		name = nigeria_md.1.b
		trigger = { has_completed_focus = NIG_convert_the_christians }
		log = "[GetDateText]: [This.GetName]: nigeria_md.1.b executed"
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_biafra
			}
			332 = { set_state_flag = NIG_islamic_state }
			add_popularity = { ideology = fascism popularity = 0.032 }
			add_to_variable = { party_pop_array^11 = 0.032 }
			recalculate_party = yes
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
		}
		if = {
			limit = { 
				has_country_flag = NIG_religious_conversion_kano
			}
			339 = { set_state_flag = NIG_islamic_state }
			add_popularity = { ideology = fascism popularity = 0.018 }
			add_to_variable = { party_pop_array^11 = 0.018 }
			recalculate_party = yes
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_sokoto
			}
			338 = { set_state_flag = NIG_islamic_state } 
			add_popularity = { ideology = fascism popularity = 0.029 }
			add_to_variable = { party_pop_array^11 = 0.029 }
			recalculate_party = yes 
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_borno
			}
			340 = { set_state_flag = NIG_islamic_state }
			add_popularity = { ideology = fascism popularity = 0.056 }
			###BASE OF BOKO HARAM CAN TRIGGER THE CIVIL WAR EARLIER
			add_stability = -0.06
			add_to_variable = { party_pop_array^11 = 0.056 }
			recalculate_party = yes 
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_lagos
			}
			334 = { set_state_flag = NIG_islamic_state }
			###LARGEST CITY CAN HEIGHTEN TENSIONS
			add_popularity = { ideology = fascism popularity = 0.093 }
			add_to_variable = { party_pop_array^11 = 0.093 }
			recalculate_party = yes
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_benue
			}
			336 = { set_state_flag = NIG_islamic_state }
			add_popularity = { ideology = fascism popularity = 0.034 }
			add_to_variable = { party_pop_array^11 = 0.034 }
			recalculate_party = yes
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
		}
		if = {
			limit = { 
				has_country_flag = NIG_religious_conversion_abuja 
			}
			337 = { set_state_flag = NIG_islamic_state }
			add_popularity = { ideology = fascism popularity = 0.064 }
			add_to_variable = { party_pop_array^11 = 0.064 }
			recalculate_party = yes 
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
		}
		if = {
			limit = {
				has_country_flag = NIG_religious_conversion_ambazonia
			}
			322 = { set_state_flag = NIG_islamic_state }
			add_popularity = { ideology = fascism popularity = 0.023 }
			add_to_variable = { party_pop_array^11 = 0.023 }
			recalculate_party = yes 
			custom_effect_tooltip = NIG_religious_conversion_christian_TT
		}
		clr_country_flag = NIG_religious_conversion_abuja
		clr_country_flag = NIG_religious_conversion_ambazonia
		clr_country_flag = NIG_religious_conversion_benue
		clr_country_flag = NIG_religious_conversion_biafra
		clr_country_flag = NIG_religious_conversion_borno
		clr_country_flag = NIG_religious_conversion_kano
		clr_country_flag = NIG_religious_conversion_lagos
		clr_country_flag = NIG_religious_conversion_sokoto
		clr_country_flag = NIG_conversion_timer_flag
	}
}

###Non-Violent Protests
country_event = {
	id = nigeria_md.2
	title = nigeria_md.2.t
	desc = {
		text = nigeria_md.2.d1
		trigger = { has_completed_focus = NIG_suppresion_of_islam }
	}
	desc = {
		text = nigeria_md.2.d2 
		trigger = { 
			has_completed_focus = NIG_convert_the_christians
		}
	}
	picture = unknown
	
	is_triggered_only = yes 
	
	option = {
		name = nigeria_md.2.a 
		trigger = { has_completed_focus = NIG_suppresion_of_islam }
		log = "[GetDateText]: [This.GetName]: nigeria_md.2.a executed"
		
	}
	option = {
		name = nigeria_md.2.b 
		trigger = { has_completed_focus = NIG_convert_the_christians }
		log = "[GetDateText]: [This.GetName]: nigeria_md.2.b executed"
	}
}

#Violent Resistance to Coversions
country_event = {
	id = nigeria_md.3
	title = nigeria_md.3.t
	desc = {
		text = nigeria_md.3.d1
		trigger = { has_completed_focus = NIG_suppresion_of_islam }
	}
	desc = {
		text = nigeria_md.3.d2 
		trigger = { 
			has_completed_focus = NIG_convert_the_christians
		}
	}
	
	is_triggered_only = yes 
	
	option = {
		name = nigeria_md.3.a 
		trigger = { has_completed_focus = NIG_suppresion_of_islam }
		log = "[GetDateText]: [This.GetName]: nigeria_md.3.a executed"
		
	}
	option = {
		name = nigeria_md.3.b 
		trigger = { has_completed_focus = NIG_convert_the_christians }
		log = "[GetDateText]: [This.GetName]: nigeria_md.3.b executed"
	}
}

##Religious Civil War!
country_event = {
	id = nigeria_md.4
	title = {
		text = nigeria_md.1.t1
		trigger = { has_completed_focus = NIG_suppresion_of_islam }
	}
	title = {
		text = nigeria_md.1.t2
		trigger = { has_completed_focus = NIG_convert_the_christians }
	}
	desc = nigeria_md.4.d
	
	is_triggered_only = yes 
	fire_only_once = yes
	
	#Civil War!
	option = {
		name = nigeria_md.4.a
		log = "[GetDateText]: [This.GetName]: nigeria_md.4.a executed"
		
		if = {
			limit = { has_completed_focus = NIG_suppresion_of_islam } 
			#Islamic Uprising
		}
		if = {
			limit = { has_completed_focus = NIG_convert_the_christians }
			#Chrisitan Uprising
		}
	}
}

##Party Switch Event 
#PDP Resurgence
country_event = {
	id = nigeria_md.5
	title = nigeria_md.5.t
	desc = nigeria_md.5.d
	#picture = unknown
	
	is_triggered_only = yes 
	fire_only_once = yes
	
	option = {
		name = nigeria_md.5.a 
		log = "[GetDateText]: [This.GetName]: nigeria_md.5.a executed"
		trigger = { has_country_flag = NIG_the_pdp_flag }
		add_popularity = { ideology = neutrality popularity = 0.10 }
		add_to_variable = { party_pop_array^14 = 0.25 }
		recalculate_party = yes
		hidden_effect = {
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 14 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			meta_effect = {
				text = {
					set_country_flag = [META_SET_RULING_PARTY]
				}
				META_SET_RULING_PARTY = "[meta_set_ruling_leader]"
			}
			set_leader = yes
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = yes
		}
		custom_effect_tooltip = NIG_the_pdp_TT
	}
}

##ANPP
country_event = {
	id = nigeria_md.6
	title = nigeria_md.6.t
	desc = nigeria_md.6.d
	picture = unknown
	
	is_triggered_only = yes 
	fire_only_once = yes
	option = {
		name = nigeria_md.6.b 
		log = "[GetDateText]: [This.GetName]: nigeria_md.6.b executed"
		trigger = { has_country_flag = NIG_the_anpp_flag }
		add_popularity = { ideology = democratic popularity = 0.10 }
		add_to_variable = { party_pop_array^3 = 0.25 }
		recalculate_party = yes
		hidden_effect = {
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 3 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			meta_effect = {
				text = {
					set_country_flag = [META_SET_RULING_PARTY]
				}
				META_SET_RULING_PARTY = "[meta_set_ruling_leader]"
			}
			set_leader = yes
		}
		set_politics = {
			ruling_party = democratic
			elections_allowed = yes
		}
		custom_effect_tooltip = NIG_anpp_empower_TT
	}
}

##Nigeria Seeks Foreign Grants
country_event = {
	id = nigeria_md.7
	title = nigeria_md.7.t
	desc = nigeria_md.7.d 
	picture = unknown
	
	is_triggered_only = yes 
	fire_only_once = yes
	
	option = { #Oil? OIIIILLLLLL
		name = nigeria_md.7.a
		log = "[GetDateText]: [This.GetName]: nigeria_md.7.a executed"
		NIG = {
			hidden_effect = {
				set_temp_variable = { influence_gain = 25 }
				for_loop_effect = {
					end = influence_array^num
					value = v
					if = {
						limit = {
							check_variable = { influence_array^v = ROOT }
						}
						add_to_variable = { influence_array_val^v = influence_gain }
						set_country_flag = found
					}
				}
				if = {
					limit = { NOT = { has_country_flag = found } }
						add_to_array = { influence_array = ROOT.id }
						add_to_array = { influence_array_val = influence_gain }
				}
				clr_country_flag = found
				recalculate_influence = yes
			}
		}
		NIG = { 
			country_event = { id = diplomatic_response.1 days = 1 } 
			add_to_variable = { treasury = 1.0 }
			random_owned_state = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		subtract_from_variable = { treasury = 6.0 }
		custom_effect_tooltip = NIG_foreign_grants_events_tt
		
		ai_chance = {
			factor = 10
			modifier = {
				add = 5 
				is_in_faction_with = NIG 
			}	
			modifier = {
				add = 5 
				has_opinion = { target = NIG value > 25 }
			}
			modifier = {
				is_historical_focus_on = yes 
				add = 10 
			}
		}
	}
	
	option = { #IT isn't worth it
		name = nigeria_md.7.b 
		log = "[GetDateText]: [This.GetName]: nigeria_md.7.b executed"
		NIG = { country_event = { id = diplomatic_response.2 days = 1 } }
		add_opinion_modifier = { target = NIG modifier = denied_us }
		reverse_add_opinion_modifier = { target = NIG modifier = denied_us }
		ai_chance = {
			factor = 5
			modifier = {
				add = 10
				has_opinion = { target = NIG value < 0 }
			}
			modifier = {
				is_historical_focus_on = no 
				add = 5
			}
			modifier = { 
				has_war_with = NIG 
				add = -5 
			}
		}
	}
}

#African Investments! 
country_event = {
	id = nigeria_md.8
	title = nigeria_md.8.t
	desc = nigeria_md.8.d 
	picture = unknown
	
	is_triggered_only = yes 
	fire_only_once = yes
	
	option = { #Yeah, Sure
		name = nigeria_md.8.a
		log = "[GetDateText]: [This.GetName]: nigeria_md.8.a executed"
		hidden_effect = {
			set_temp_variable = { influence_gain = 25 }
			for_loop_effect = {
				end = influence_array^num
				value = v
				if = {
					limit = {
						check_variable = { influence_array^v = NIG }
					}
					add_to_variable = { influence_array_val^v = influence_gain }
					set_country_flag = found
				}
			}
			if = {
				limit = { NOT = { has_country_flag = found } }
					add_to_array = { influence_array = NIG.id }
					add_to_array = { influence_array_val = influence_gain }
			}
			clr_country_flag = found
			recalculate_influence = yes
		}
		NIG = {
			subtract_from_variable = { treasury = 1.0 } 
			country_event = { id = diplomatic_response.1 days = 1 }
		}
		random_owned_state = {
			add_building_construction = {
				type = infrastructure 
				level = 1 
				instant_build = yes
			}
		}
		custom_effect_tooltip = NIG_african_investments_one_TT
		
		ai_chance = {
			factor = 10 
			modifier = { 
				has_government = neutrality 
				add = -1 
			}
			modifier = {
				has_government = communism 
				add = 2 
			}
			modifier = { 
				has_government = democratic 
				add = 3
			}
			modifier = { 
				has_government = nationalist
				factor = 0 
			}
			modifier = {
				has_opinion = { target = NIG value > 25 }
				add = 3
			}
		}
	}
	
	option = { #Hell no
		name = nigeria_md.8.b
		log = "[GetDateText]: [This.GetName]: nigeria_md.8.b executed"
		add_opinion_modifier = { target = NIG modifier = denied_us }
		reverse_add_opinion_modifier = { target = NIG modifier = denied_us }
		
		ai_chance = {
			factor = 5 
			modifier = {
				has_opinion = { target = NIG value < 25 }
				add = 3
			}
			modifier = {
				has_government = neutrality 
				add = 3 
			}
		}
	}
}