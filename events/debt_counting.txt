# Debt changing mechanism
add_namespace = debt_count

#Updates counting every 75 days
country_event = {
	id = debt_count.1
	title = debt_count.1.t
	desc = debt_count.1.d
	
	hidden = yes
	is_triggered_only = yes

    immediate = {
		country_event = { id = debt_count.1 days = 75 }
	}
	
	option = {
		name = debt_count.1.a
		
		#Giving correct counts
		if = {
			limit = { has_idea = bud_neg_48 }
			increase_debtcount_by_12 = yes
		}
		if = {
			limit = { has_idea = bud_neg_32 }
			increase_debtcount_by_8 = yes
		}
		if = {
			limit = { has_idea = bud_neg_24 }
			increase_debtcount_by_6 = yes
		}
		if = {
			limit = { has_idea = bud_neg_20 }
			increase_debtcount_by_5 = yes
		}
		if = {
			limit = { has_idea = bud_neg_16 }
			increase_debtcount_by_4 = yes
		}
		if = {
			limit = { has_idea = bud_neg_12 }
			increase_debtcount_by_3 = yes
		}
		if = {
			limit = { has_idea = bud_neg_8 }
			increase_debtcount_by_2 = yes
		}
		if = {
			limit = { has_idea = bud_neg_4 }
			increase_debtcount_by_1 = yes
		}
		if = {
			limit = { has_idea = bud_bal }
			#Do nothing, check again in 75 days
		}
		if = {
			limit = { has_idea = bud_pos_4 }
			decrease_debtcount_by_1 = yes
		}
		if = {
			limit = { has_idea = bud_pos_8 }
			decrease_debtcount_by_2 = yes
		}
		if = {
			limit = { has_idea = bud_pos_12 }
			decrease_debtcount_by_3 = yes
		}
	}
}

### Increase debt level once count has been reached
country_event = {
	id = debt_count.2
	title = debt_count.2.t
	desc = debt_count.2.d
	
	trigger = {
				has_country_flag = {
					flag = debt_counting
					value > 48
				}
			}

	
	mean_time_to_happen = {
		days = 9
	}
	
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_160 }
		add_ideas = debt_180
		        add_ideas = bud_bal
		        clr_country_flag = bud_neg_48
				clr_country_flag = bud_neg_32
				clr_country_flag = bud_neg_24
				clr_country_flag = bud_neg_20
				clr_country_flag = bud_neg_16
				clr_country_flag = bud_neg_12
				clr_country_flag = bud_neg_08
				clr_country_flag = bud_neg_04
				set_country_flag = bud_bal
				clr_country_flag = bud_pos_04
				clr_country_flag = bud_pos_08
				clr_country_flag = bud_pos_12
		clr_country_flag = debt_160
		clr_country_flag = debt_counting
		set_country_flag = debt_180
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_140 }
		add_ideas = debt_160
		clr_country_flag = debt_140
		clr_country_flag = debt_counting
		set_country_flag = debt_160
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_120 }
		add_ideas = debt_140
		clr_country_flag = debt_120
		clr_country_flag = debt_counting
		set_country_flag = debt_140
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_100 }
		add_ideas = debt_120
		clr_country_flag = debt_100
		clr_country_flag = debt_counting
		set_country_flag = debt_120
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_80 }
		add_ideas = debt_100
		clr_country_flag = debt_80
		clr_country_flag = debt_counting
		set_country_flag = debt_100
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_60 }
		add_ideas = debt_80
		clr_country_flag = debt_60
		clr_country_flag = debt_counting
		set_country_flag = debt_80
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_40 }
		add_ideas = debt_60
		clr_country_flag = debt_40
		clr_country_flag = debt_counting
		set_country_flag = debt_60
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_20 }
		add_ideas = debt_40
		clr_country_flag = debt_20
		clr_country_flag = debt_counting
		set_country_flag = debt_40
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = debt_0 }
		add_ideas = debt_20
		clr_country_flag = debt_0
		clr_country_flag = debt_counting
		set_country_flag = debt_20
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_20 }
		add_ideas = debt_0
		clr_country_flag = reserves_20
		clr_country_flag = debt_counting
		set_country_flag = debt_0
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_40 }
		add_ideas = reserves_20
		clr_country_flag = reserves_40
		clr_country_flag = debt_counting
		set_country_flag = reserves_20
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_60 }
		add_ideas = reserves_40
		clr_country_flag = reserves_60
		clr_country_flag = debt_counting
		set_country_flag = reserves_40
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_80 }
		add_ideas = reserves_60
		clr_country_flag = reserves_80
		clr_country_flag = debt_counting
		set_country_flag = reserves_60
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_100 }
		add_ideas = reserves_80
		clr_country_flag = reserves_100
		clr_country_flag = debt_counting
		set_country_flag = reserves_80
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_120 }
		add_ideas = reserves_100
		clr_country_flag = reserves_120
		clr_country_flag = debt_counting
		set_country_flag = reserves_100
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_140 }
		add_ideas = reserves_120
		clr_country_flag = reserves_140
		clr_country_flag = debt_counting
		set_country_flag = reserves_120
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_160 }
		add_ideas = reserves_140
		clr_country_flag = reserves_160
		clr_country_flag = debt_counting
		set_country_flag = reserves_140
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.2.a
		trigger = { has_idea = reserves_180 }
		add_ideas = reserves_160
		clr_country_flag = reserves_180
		clr_country_flag = debt_counting
		set_country_flag = reserves_160
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
}

### decrease debt level once count has been reached
country_event = {
	id = debt_count.3
	title = debt_count.3.t
	desc = debt_count.3.d
	
	trigger = {
				has_country_flag = {
					flag = debt_counting
					value < 2
				}
			}

	
	mean_time_to_happen = {
		days = 9
	}
	
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_180 }
		add_ideas = debt_160
		clr_country_flag = debt_180
		clr_country_flag = debt_counting
		set_country_flag = debt_160
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_160 }
		add_ideas = debt_140
		clr_country_flag = debt_160
		clr_country_flag = debt_counting
		set_country_flag = debt_140
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_140 }
		add_ideas = debt_120
		clr_country_flag = debt_140
		clr_country_flag = debt_counting
		set_country_flag = debt_120
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_120 }
		add_ideas = debt_100
		clr_country_flag = debt_120
		clr_country_flag = debt_counting
		set_country_flag = debt_100
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_100 }
		add_ideas = debt_80
		clr_country_flag = debt_100
		clr_country_flag = debt_counting
		set_country_flag = debt_80
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_80 }
		add_ideas = debt_60
		clr_country_flag = debt_80
		clr_country_flag = debt_counting
		set_country_flag = debt_60
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_60 }
		add_ideas = debt_40
		clr_country_flag = debt_60
		clr_country_flag = debt_counting
		set_country_flag = debt_40
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_40 }
		add_ideas = debt_20
		clr_country_flag = debt_40
		clr_country_flag = debt_counting
		set_country_flag = debt_20
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_20 }
		add_ideas = debt_0
		clr_country_flag = debt_20
		clr_country_flag = debt_counting
		set_country_flag = debt_0
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = debt_0 }
		add_ideas = reserves_20
		clr_country_flag = debt_0
		clr_country_flag = debt_counting
		set_country_flag = reserves_20
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = reserves_20 }
		add_ideas = reserves_40
		clr_country_flag = reserves_20
		clr_country_flag = debt_counting
		set_country_flag = reserves_40
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = reserves_40 }
		add_ideas = reserves_60
		clr_country_flag = reserves_40
		clr_country_flag = debt_counting
		set_country_flag = reserves_60
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = reserves_60 }
		add_ideas = reserves_80
		clr_country_flag = reserves_60
		clr_country_flag = debt_counting
		set_country_flag = reserves_80
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = reserves_80 }
		add_ideas = reserves_100
		clr_country_flag = reserves_80
		clr_country_flag = debt_counting
		set_country_flag = reserves_100
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = reserves_100 }
		add_ideas = reserves_120
		clr_country_flag = reserves_100
		clr_country_flag = debt_counting
		set_country_flag = reserves_120
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = reserves_120 }
		add_ideas = reserves_140
		clr_country_flag = reserves_120
		clr_country_flag = debt_counting
		set_country_flag = reserves_140
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = reserves_140 }
		add_ideas = reserves_160
		clr_country_flag = reserves_140
		clr_country_flag = debt_counting
		set_country_flag = reserves_160
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
	option = {
		name = debt_count.3.a
		trigger = { has_idea = reserves_160 }
		add_ideas = reserves_180
		        add_ideas = bud_bal
		        clr_country_flag = bud_neg_48
				clr_country_flag = bud_neg_32
				clr_country_flag = bud_neg_24
				clr_country_flag = bud_neg_20
				clr_country_flag = bud_neg_16
				clr_country_flag = bud_neg_12
				clr_country_flag = bud_neg_08
				clr_country_flag = bud_neg_04
				set_country_flag = bud_bal
				clr_country_flag = bud_pos_04
				clr_country_flag = bud_pos_08
				clr_country_flag = bud_pos_12
		clr_country_flag = reserves_160
		clr_country_flag = debt_counting
		set_country_flag = reserves_180
		set_country_flag = {
			flag = debt_counting
			value = 25
		}
	}
}