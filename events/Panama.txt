add_namespace = panama
add_namespace = panama_news
# add_namespace = gca

# FIRST EVENT - NEW MILLENIUM #
# country_event = {
# 	id = panama.1
# 	title = panama.1.t
# 	desc = panama.1.d
# 	is_triggered_only = yes
# 	fire_only_once = yes
#     # picture = GFX_manuel_noriega_arrested
# 	trigger = {
# 		original_tag = PAN
#         date >= 2000.1.1
# 	}
# 	option = {
# 		name = panama.1.a
# 		log = "[GetDateText]: [This.GetName]: panama.1.a executed"
# 	}
# }

# extradition of Manuel Noriega
country_event = {
	id = panama.1
	title = panama.1.t
	desc = panama.1.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_noriega_arrested
	trigger = {
		original_tag = PAN
		date < 2004.1.1
        date > 2002.1.1
		# emerging_anarchist_communism_in_power_or_coalition = yes
		# has_country_leader = { name = "Hugo Chávez" ruling_only = yes }
		# has_country_flag = VEN_2004_recall_referendum_engaged
	}
	# ask to extradite Noriega
	option = {
		name = panama.1.a
		log = "[GetDateText]: [This.GetName]: panama.1.a executed"
		country_event = { id = panama.2 days = 15 }
		# hidden_effect = {
		# 	set_country_flag = fully_supported_us_nine_eleven
		# }
	}
	# do not ask for Noriega
	option = {
		name = panama.1.b
		log = "[GetDateText]: [This.GetName]: panama.1.b executed"
	}
}

country_event = {
	id = panama.2
	title = panama.2.t
	desc = panama.2.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_noriega_extradited
	# trigger = {
	# 	original_tag = PAN
	# 	# date > 2004.1.1
	# 	# emerging_anarchist_communism_in_power_or_coalition = yes
	# 	# has_country_leader = { name = "Hugo Chávez" ruling_only = yes }
	# 	# has_country_flag = request
	# }
    # imprison Noriega
	option = {
		name = panama.2.a
		log = "[GetDateText]: [This.GetName]: panama.2.a executed"
		set_party_index_to_ruling_party = yes
		set_temp_variable = { party_popularity_increase = 0.03 }
		set_temp_variable = { temp_outlook_increase = 0.03 }
		add_relative_party_popularity = yes
		hidden_effect = {
			set_country_flag = PAN_imprisoned_noriega
		}
	}
}

# noriega as general - protests + instability + US mad
country_event = {
	id = panama.3
	title = panama.3.t
	desc = panama.3.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_panama_protest_noriega
	is_triggered_only = yes
	option = {
		name = panama.3.a
		log = "[GetDateText]: [This.GetName]: panama.3.a executed"
		# PAN = {
		# 	set_party_index_to_ruling_party = yes
		# 	set_temp_variable = { party_popularity_increase = -0.03 }
		# 	set_temp_variable = { temp_outlook_increase = -0.03 }
		# 	add_relative_party_popularity = yes
		# 	add_stability = -0.05
		# }
	}
}

# news_event = {
# 	id = panama.3
# 	title = panama.3.t
# 	desc = panama.3.d
# 	is_triggered_only = yes
# 	fire_only_once = yes
#     picture = panama_protest_noriega
# 	is_triggered_only = yes
# 	option = {
# 		name = panama.3.a
# 		log = "[GetDateText]: [This.GetName]: panama.3.a executed"
# 		# PAN = {
# 		# 	set_party_index_to_ruling_party = yes
# 		# 	set_temp_variable = { party_popularity_increase = -0.03 }
# 		# 	set_temp_variable = { temp_outlook_increase = -0.03 }
# 		# 	add_relative_party_popularity = yes
# 		# 	add_stability = -0.05
# 		# }
# 	}
# }

# noriega coup
country_event = {
	id = panama.4
	title = panama.4.t
	desc = panama.4.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_manuel_noriega_with_men
    # imprison Noriega
	option = {
		name = panama.4.a
		log = "[GetDateText]: [This.GetName]: panama.2.a executed"
		# set_party_index_to_ruling_party = yes
		# set_temp_variable = { party_popularity_increase = 0.03 }
		# set_temp_variable = { temp_outlook_increase = 0.03 }
		# add_relative_party_popularity = yes
	}
}

# noriega dies
country_event = {
	id = panama.5
	title = panama.5.t
	desc = panama.5.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_manuel_noriega_with_men
    # imprison Noriega
	option = {
		name = panama.5.a
		log = "[GetDateText]: [This.GetName]: panama.5.a executed"
		# set_party_index_to_ruling_party = yes
		# set_temp_variable = { party_popularity_increase = 0.03 }
		# set_temp_variable = { temp_outlook_increase = 0.03 }
		# add_relative_party_popularity = yes
		country_event = { id = panama.6 days = 2 }
		create_country_leader = {
			name = "Military Junta"
			picture = "military_junta_panama.dds"
			desc = "MILITARY_JUNTA_PANAMA_DESC"
			ideology = Nat_Fascism
		}
	}
}

country_event = {
	id = panama.6
	title = panama.6.t
	desc = panama.6.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_manuel_noriega_with_men
    # General Rubén Darío Paredes
	option = {
		name = panama.6.a
		# log = "[GetDateText]: [This.GetName]: panama.6.a executed"
		create_country_leader = {
			name = "Rubén Darío Paredes"
			picture = "RUBEN_DARIO_PAREDES.dds"
			desc = "RUBEN_DARIO_PAREDES_DESC"
			ideology = Nat_Fascism
			traits = {
				nationalist_Nat_Fascism
				staunch_constitutionalist
				diplomat
			}
		}
	}
	# Colonel Roberto Díaz Herrera
	option = {
		name = panama.6.b
		# log = "[GetDateText]: [This.GetName]: panama.6.a executed"
		create_country_leader = {
			name = "Roberto Díaz Herrera"
			picture = "roberto_diaz_herrera.dds"
			desc = "ROBERTO_DIAZ_HERRERA_DESC"
			ideology = Nat_Fascism
			traits = {
				nationalist_Nat_Fascism
				military_career
				technocrat
			}
		}
	}
	# Raoul Cédras
	option = {
		name = panama.6.c
		# log = "[GetDateText]: [This.GetName]: panama.6.a executed"
		create_country_leader = {
			name = "Raoul Cédras"
			picture = "raoul_cedras.dds"
			desc = "RAOUL_CEDRAS_DESC"
			ideology = Nat_Fascism
			traits = {
				nationalist_Nat_Fascism
				stubborn
				ruthless
				army_general
				panama_bitter
			}
		}
	}
	# call elections
	option = {
		name = panama.6.e
		# log = "[GetDateText]: [This.GetName]: panama.6.a executed"
		allow_elections = yes
		set_politics = {
			ruling_party = nationalist
			elections_allowed = yes
		}
	}
}

# election
country_event = {
	id = panama.7
	title = panama.7.t
	desc = panama.7.d
    # picture = GFX_manuel_noriega_with_men
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		original_tag = PAN
		date > 2003.10.1
		date < 2003.12.1
		NOT = { has_country_flag = PAN_election_2004 }
		has_country_flag = generic_election_killswitch
	}
	immediate = {
		set_country_flag = PAN_election_2004
		complete_national_focus = PAN_2004_election
	}

	# torrijos
	option = {
		name = panama.7.a
		# log = "[GetDateText]: [This.GetName]: panama.2.a executed"
		# set_party_index_to_ruling_party = yes
		# set_temp_variable = { party_popularity_increase = 0.03 }
		# set_temp_variable = { temp_outlook_increase = 0.03 }
		# add_relative_party_popularity = yes
		retire_country_leader = yes
		hidden_effect = {
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 3 }
			# add_to_array = { gov_coalition_array = 6 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			set_ruling_leader = yes
			# set_leader = yes
		}
		add_popularity = {
			ideology = democratic
			popularity = 0.10
		}
		add_popularity = {
			ideology = neutrality
			popularity = 0.075
		}
		set_politics = {
			ruling_party = democratic
			elections_allowed = yes
		}
		create_country_leader = {
			name = "Martín Torrijos"
			picture = "martin_torrijos.dds"
			desc = "MARTIN_TORRIJOS_DESC"
			ideology = socialism
			traits = {
				western_socialism
			}
		}
	}

	# endara
	option = {
		name = panama.7.b
		# log = "[GetDateText]: [This.GetName]: panama.2.a executed"
		# set_party_index_to_ruling_party = yes
		# set_temp_variable = { party_popularity_increase = 0.03 }
		# set_temp_variable = { temp_outlook_increase = 0.03 }
		# add_relative_party_popularity = yes
		retire_country_leader = yes
		hidden_effect = {
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 14 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			set_ruling_leader = yes
			# set_leader = yes
		}
		# add_popularity = {
		# 	ideology = democratic
		# 	popularity = 0.025
		# }
		# add_popularity = {
		# 	ideology = neutrality
		# 	popularity = 0.1
		# }
		set_politics = {
			ruling_party = neutrality
			elections_allowed = yes
		}
		create_country_leader = {
			name = "Guillermo Endara"
			picture = "guillermo_endara.dds"
			desc = "GUILLERMO_ENDARA_DESC"
			ideology = Neutral_conservatism
			traits = {
				panama_anti_corruption_crusader
			}
		}
		add_popularity = { ideology = neutrality popularity = 0.1 }
		recalculate_party = yes
	}

	# martinelli
	option = {
		name = panama.7.c
		# log = "[GetDateText]: [This.GetName]: panama.2.a executed"
		# set_party_index_to_ruling_party = yes
		# set_temp_variable = { party_popularity_increase = 0.03 }
		# set_temp_variable = { temp_outlook_increase = 0.03 }
		# add_relative_party_popularity = yes
		retire_country_leader = yes
		hidden_effect = {
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 1 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			set_ruling_leader = yes
			# set_leader = yes
		}
		add_popularity = {
			ideology = democratic
			popularity = 0.1
		}
		add_popularity = {
			ideology = neutrality
			popularity = 0.075
		}
		set_politics = {
			ruling_party = democratic
			elections_allowed = yes
		}
		create_country_leader = {
			name = "Ricardo Martinelli"
			picture = "ricardo_martinelli_2004.dds"
			desc = "RICARDO_MARTINELLI_DESC"
			ideology = conservatism
			traits = {
				western_conservatism
				businessman
				panama_infrastructure_bulldozer
			}
		}
	}

	# batista
	option = {
		name = panama.7.e
		# log = "[GetDateText]: [This.GetName]: panama.2.a executed"
		# set_party_index_to_ruling_party = yes
		# set_temp_variable = { party_popularity_increase = 0.03 }
		# set_temp_variable = { temp_outlook_increase = 0.03 }
		# add_relative_party_popularity = yes
		retire_country_leader = yes
		hidden_effect = {
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 4 }
			add_to_array = { gov_coalition_array = 5 }
			add_to_array = { gov_coalition_array = 19 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			set_ruling_leader = yes
			# set_leader = yes
		}
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}
		set_politics = {
			ruling_party = communism
			elections_allowed = yes
		}
		create_country_leader = {
			name = "Rubén Darío Sousa Batista"
			picture = "ruben_dario_sousa_batista.dds"
			desc = "RUBEN_DARIO_SOUSA_BATISTA_DESC"
			ideology = Communist-State
			traits = {
				union_man
			}
		}
		recalculate_party = yes
	}
}
# US ALIGNMENT - PROTESTS #
country_event = {
	id = panama.8
	title = panama.8.t
	desc = panama.8.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_panama_leftist_protest
	option = {
		name = panama.8.a
		log = "[GetDateText]: [This.GetName]: panama.8.a executed"
		add_popularity = { ideology = nationalist popularity = 0.01 }
		add_popularity = { ideology = neutrality popularity = 0.025 }
		add_popularity = { ideology = communism popularity = 0.025 }
	}
}
# CHINA ALIGNMENT - PROTESTS #
country_event = {
	id = panama.80
	title = panama.80.t
	desc = panama.80.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_panama_china_flags
	option = {
		name = panama.80.a
		log = "[GetDateText]: [This.GetName]: panama.80.a executed"
		add_popularity = { ideology = nationalist popularity = 0.01 }
		add_popularity = { ideology = neutrality popularity = 0.025 }
		add_popularity = { ideology = communism popularity = 0.025 }
	}
}
# ATLANTIC BRIDGE #
country_event = {
	id = panama.9
	title = panama.9.t
	desc = panama.9.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_panama_atlantic_bridge
	option = {  # france - historical
		name = panama.9.a
		log = "[GetDateText]: [This.GetName]: panama.9.a executed"
		FRA = {
			add_opinion_modifier = {
				target = PAN
				modifier = PAN_contracted_a_construction_company_from_us
			}
			set_temp_variable = { treasury_change = 0.366 }
			modify_treasury_effect = yes
		}
		ai_chance = {
			base = 5
			# modifier = {
			# 	factor = 2
			# 	is_historical_focus_on = yes
			# }
		}
	}
	option = {  # spain + mexico
		name = panama.9.b
		log = "[GetDateText]: [This.GetName]: panama.9.b executed"
		SPR = {
			add_opinion_modifier = {
				target = PAN
				modifier = PAN_contracted_a_construction_company_from_us
			}
			set_temp_variable = { treasury_change = 0.183 }
			modify_treasury_effect = yes
		}
		MEX = {
			add_opinion_modifier = {
				target = PAN
				modifier = PAN_contracted_a_construction_company_from_us
			}
			set_temp_variable = { treasury_change = 0.183 }
			modify_treasury_effect = yes
		}
	}
	option = {  # korea + brazil
		name = panama.9.c
		log = "[GetDateText]: [This.GetName]: panama.9.c executed"
		KOR = {
			add_opinion_modifier = {
				target = PAN
				modifier = PAN_contracted_a_construction_company_from_us
			}
			set_temp_variable = { treasury_change = 0.183 }
			modify_treasury_effect = yes
		}
		BRA = {
			add_opinion_modifier = {
				target = PAN
				modifier = PAN_contracted_a_construction_company_from_us
			}
			set_temp_variable = { treasury_change = 0.183 }
			modify_treasury_effect = yes
		}
	}
}
# CANAL REPATRIATION #
country_event = {
	id = panama.10
	title = panama.10.t
	desc = panama.10.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_panama_canal_handoff_1999
	option = {
		name = panama.10.a
		log = "[GetDateText]: [This.GetName]: panama.10.a executed"
		852 = { add_manpower = 30000 }
		853 = { add_manpower = 30000 }
		add_stability = 0.05
		add_political_power = 150
	}
}
# INFRA ASSISTANCE - SPAIN GETS THIS #
country_event = {
	id = panama.11
	title = panama.11.t
	desc = panama.11.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_mireya_moscoso_cheering
	trigger = { original_tag = SPR }
	option = {  # accepts
		name = panama.11.a
		log = "[GetDateText]: [This.GetName]: panama.11.a executed"
		effect_tooltip = {
			SPR = {
				set_temp_variable = { treasury_change = -1.12 }
				modify_treasury_effect = yes
				set_temp_variable = { int_investment_change = 1.12 }
				modify_international_investment_effect = yes
			}
			set_temp_variable = { percent_change = 2 }
			set_temp_variable = { tag_index = SPR.id }
			set_temp_variable = { influence_target = PAN.id }
			change_influence_percentage = yes
			newline = yes
			853 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
		set_country_flag = PAN_SPR_accepted_infrastructure_investment
		hidden_effect = { PAN = { country_event = { id = panama.12 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 3 has_opinion = { target = PAN value > 24 } }
			modifier = { add = 3 has_opinion = { target = PAN value > 49 } }
			modifier = { add = 5 has_opinion = { target = PAN value > 74 } }
			modifier = {
				add = 5
				AND = { SPR = { has_government = democratic } PAN = { has_government = democratic } }
			}
		}
	}
	option = {  # rejects
		name = panama.11.b
		log = "[GetDateText]: [This.GetName]: panama.11.b executed"
		hidden_effect = { PAN = { country_event = { id = panama.12 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 3 has_opinion = { target = PAN value < 6 } }
		}
	}
}
# INFRA ASSISTANCE - SPAIN RESPONSE #
country_event = {
	id = panama.12
	title = {  # accepts
		text = panama.12.t1
		trigger = { SPR = { has_country_flag = PAN_SPR_accepted_infrastructure_investment } }
	}
	title = {  # rejects
		text = panama.12.t2
		trigger = { SPR = { NOT = { has_country_flag = PAN_SPR_accepted_infrastructure_investment } } }
	}
	desc = {  # accepts
		text = panama.12.d1
		trigger = { SPR = { has_country_flag = PAN_SPR_accepted_infrastructure_investment } }
	}
	desc = {  # rejects
		text = panama.12.d2
		trigger = { SPR = { NOT = { has_country_flag = PAN_SPR_accepted_infrastructure_investment } } }
	}
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_mireya_moscoso_cheering
	option = {  # accepts
		name = panama.12.a
		log = "[GetDateText]: [This.GetName]: panama.12.a executed"
		trigger = { SPR = { has_country_flag = PAN_SPR_accepted_infrastructure_investment } }
		SPR = {
			set_temp_variable = { treasury_change = -1.12 }
			modify_treasury_effect = yes
			set_temp_variable = { int_investment_change = 1.12 }
			modify_international_investment_effect = yes
		}
		set_temp_variable = { percent_change = 2 }
		set_temp_variable = { tag_index = SPR.id }
		set_temp_variable = { influence_target = PAN.id }
		change_influence_percentage = yes
		newline = yes
		853 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
		}
		ai_chance = { base = 1 }
	}
	option = {  # rejects
		name = panama.12.b
		log = "[GetDateText]: [This.GetName]: panama.12.b executed"
		trigger = { SPR = { NOT = { has_country_flag = PAN_SPR_accepted_infrastructure_investment } } }
		ai_chance = { base = 1 }
	}
}
# SEASONAL WORKERS - NICARAGUA GETS THIS #
country_event = {
	id = panama.13
	title = panama.13.t
	desc = panama.13.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation
	trigger = { original_tag = NIC }
	option = {  # accepts
		name = panama.13.a
		log = "[GetDateText]: [This.GetName]: panama.13.a executed"
		effect_tooltip = {
			set_temp_variable = { percent_change = 1 }
			set_temp_variable = { tag_index = NIC.id }
			set_temp_variable = { influence_target = PAN.id }
			change_influence_percentage = yes
			newline = yes
			NIC = { random_owned_controlled_state = { add_manpower = -30000 } }
			852 = { add_manpower = 30000 }
		}
		set_country_flag = PAN_NIC_accepted_seasonal_workers
		hidden_effect = { PAN = { country_event = { id = panama.14 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 3 has_opinion = { target = PAN value > 4 } }
			modifier = { add = 5 has_opinion = { target = PAN value > 29 } }
			modifier = { add = 10 has_opinion = { target = PAN value > 49 } }
		}
	}
	option = {  # rejects
		name = panama.13.b
		log = "[GetDateText]: [This.GetName]: panama.11.b executed"
		hidden_effect = { PAN = { country_event = { id = panama.14 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 3 has_opinion = { target = PAN value < 0 } }
		}
	}
}
# INFRA ASSISTANCE - NICARAGUA RESPONSE #
country_event = {
	id = panama.14
	title = {  # accepts
		text = panama.14.t1
		trigger = { NIC = { has_country_flag = PAN_NIC_accepted_seasonal_workers } }
	}
	title = {  # rejects
		text = panama.14.t2
		trigger = { NIC = { NOT = { has_country_flag = PAN_NIC_accepted_seasonal_workers } } }
	}
	desc = {  # accepts
		text = panama.14.d1
		trigger = { NIC = { has_country_flag = PAN_NIC_accepted_seasonal_workers } }
	}
	desc = {  # rejects
		text = panama.14.d2
		trigger = { NIC = { NOT = { has_country_flag = PAN_NIC_accepted_seasonal_workers } } }
	}
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation
	option = {  # accepts
		name = panama.14.a
		log = "[GetDateText]: [This.GetName]: panama.14.a executed"
		trigger = { NIC = { has_country_flag = PAN_NIC_accepted_seasonal_workers } }
		set_temp_variable = { percent_change = 1 }
		set_temp_variable = { tag_index = NIC.id }
		set_temp_variable = { influence_target = PAN.id }
		change_influence_percentage = yes
		newline = yes
		NIC = { random_owned_controlled_state = { add_manpower = -30000 } }
		852 = { add_manpower = 30000 }
		hidden_effect = {
			add_popularity = { ideology = communism popularity = 0.025 }
			NIC = {
				add_opinion_modifier = { target = PAN modifier = PAN_opinion_free_movement_of_labor }
				reverse_add_opinion_modifier = { target = PAN modifier = PAN_opinion_free_movement_of_labor }
			}
		}
		ai_chance = { base = 1 }
	}
	option = {  # rejects
		name = panama.14.b
		log = "[GetDateText]: [This.GetName]: panama.14.b executed"
		trigger = { NIC = { NOT = { has_country_flag = PAN_NIC_accepted_seasonal_workers } } }
		hidden_effect = { add_opinion_modifier = { target = NIC modifier = PAN_opinion_rejected_our_proposal } }
		ai_chance = { base = 1 }
	}
}
# MOSCOSO PARDONS CUBAN EXILES #
country_event = {
	id = panama.15
	title = panama.15.t
	desc = panama.15.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_panama_canal_handoff_1999
	trigger = {
		original_tag = PAN
		date > 2003.9.1
		date < 2003.9.14
		country_exists = CUB
		has_country_leader = {
			name = "Mireya Moscoso"
			ruling_only = yes
		}
	}
	option = {
		name = panama.15.a
		log = "[GetDateText]: [This.GetName]: panama.15.a executed"
		if = {
			limit = { AND = { country_exists = USA USA = { has_government = democratic } } }
			USA = { add_opinion_modifier = { target = PAN modifier = PAN_opinion_pardoned_anti_communists } }
		}
		CUB = { add_opinion_modifier = { target = PAN modifier = PAN_opinion_pardoned_state_enemies } }
		VEN = { add_opinion_modifier = { target = PAN modifier = PAN_opinion_pardoned_state_enemies } }
		newline = yes
		news_event = panama_news.1
	}
}
# CENTRAL AMERICA + MEXICO gets this #
country_event = {
	id = panama.50
	title = panama.50.t
	desc = panama.50.d
	is_triggered_only = no
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation  # TODO: CHANGE
	# trigger = { original_tag = NIC }
	option = {  # accepts
		name = panama.50.a
		log = "[GetDateText]: [This.GetName]: panama.50.a executed"
		# effect_tooltip = {
		if = {
			limit = { PAN = { has_trade_agreement_with_PREV_nation = yes } }
			add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
			reverse_add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
		}
		else = {
			set_temp_variable = { receiver_nation = THIS.id }
			set_temp_variable = { sender_nation = PAN.id }
			set_improved_trade_agreement = yes
			newline = yes
			add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
			reverse_add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
		}
		ai_chance = {
			base = 1
			modifier = { add = 1 has_opinion = { target = PAN value > 4 } }
			modifier = { add = 5 has_opinion = { target = PAN value > 29 } }
			modifier = { add = 10 has_opinion = { target = PAN value > 49 } }
		}
	}
	option = {  # rejects
		name = panama.50.b
		log = "[GetDateText]: [This.GetName]: panama.50.b executed"
		ai_chance = {
			base = 1
			modifier = { add = 5 has_opinion = { target = PAN value < 0 } }
		}
	}
}
# PAN_strengthen_colombia_border_cooperation - COL GETS THIS
country_event = {
	id = panama.51
	title = panama.51.t
	desc = panama.51.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation  # TODO: CHANGE
	option = {  # accepts
		name = panama.51.a
		log = "[GetDateText]: [This.GetName]: panama.51.a executed"
		effect_tooltip = {
			add_timed_idea = {
				idea = PAN_idea_darien_border_joint_security_operations
				days = 90
			}
			if = {
				limit = { check_variable = { strength_of_cartels > 4 } }
				newline = yes
				set_temp_variable = { cart_strength_change = -7 }
				set_temp_variable = { cart_influence_change = -7 }
				modify_cartel_variables_effect = yes
			}
		}
		set_country_flag = PAN_COL_accepted_darien_agreement
		hidden_effect = { PAN = { country_event = { id = panama.52 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 1 has_opinion = { target = PAN value > 4 } }
			modifier = { add = 5 has_opinion = { target = PAN value > 14 } }
			modifier = {
				add = 10
				OR = {
					AND = {
						has_opinion = { target = PAN value > 0 }
						check_variable = { strength_of_cartels > 9 }
					}
					has_opinion = { target = PAN value > 29 }
				}
			}
		}
	}
	option = {  # rejects
		name = panama.51.b
		log = "[GetDateText]: [This.GetName]: panama.51.b executed"
		hidden_effect = { PAN = { country_event = { id = panama.52 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 5 has_opinion = { target = PAN value < 0 } }
		}
	}
}
# PAN_strengthen_colombia_border_cooperation - RECEIVE RESPONSE #
country_event = {
	id = panama.52
	title = {  # accepts
		text = panama.52.t1
		trigger = { COL = { has_country_flag = PAN_COL_accepted_darien_agreement } }
	}
	title = {  # rejects
		text = panama.52.t2
		trigger = { COL = { NOT = { has_country_flag = PAN_COL_accepted_darien_agreement } } }
	}
	desc = {  # accepts
		text = panama.52.d1
		trigger = { COL = { has_country_flag = PAN_COL_accepted_darien_agreement } }
	}
	desc = {  # rejects
		text = panama.52.d2
		trigger = { COL = { NOT = { has_country_flag = PAN_COL_accepted_darien_agreement } } }
	}
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation
	option = {  # COL accepted
		name = panama.52.a
		log = "[GetDateText]: [This.GetName]: panama.52.a executed"
		trigger = { COL = { has_country_flag = PAN_COL_accepted_darien_agreement } }
		add_timed_idea = {
			idea = PAN_idea_darien_border_joint_security_operations
			days = 90
		}
		if = {
			limit = { check_variable = { strength_of_cartels > 4 } }
			newline = yes
			set_temp_variable = { cart_strength_change = -7 }
			set_temp_variable = { cart_influence_change = -7 }
			modify_cartel_variables_effect = yes
		}
		COL = {
			add_timed_idea = {
				idea = PAN_idea_darien_border_joint_security_operations
				days = 90
			}
			if = {
				limit = { check_variable = { strength_of_cartels > 4 } }
				newline = yes
				set_temp_variable = { cart_strength_change = -7 }
				set_temp_variable = { cart_influence_change = -7 }
				modify_cartel_variables_effect = yes
			}
		}
		hidden_effect = {
			COL = {
				add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
				reverse_add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
				clr_country_flag = PAN_COL_accepted_darien_agreement
			}
		}
		ai_chance = { base = 1 }
	}
	option = {  # COL rejected
		name = panama.52.b
		log = "[GetDateText]: [This.GetName]: panama.52.b executed"
		trigger = { COL = { NOT = { has_country_flag = PAN_NIC_accepted_seasonal_workers } } }
		hidden_effect = { add_opinion_modifier = { target = COL modifier = PAN_opinion_rejected_our_proposal } }
		ai_chance = { base = 1 }
	}
}
# VENEZUELA OIL DEAL - GETS THIS - PAN_negotiate_venezuela_energy_deal
country_event = {
	id = panama.53
	title = panama.53.t
	desc = panama.53.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation  # TODO: CHANGE
	option = {  # accepts
		name = panama.53.a
		log = "[GetDateText]: [This.GetName]: panama.53.a executed"
		effect_tooltip = {
			PAN = {
				set_temp_variable = { treasury_change = -1 }
				modify_treasury_effect = yes
				853 = {
					add_building_construction = {
						type = fuel_silo
						level = 1
						instant_build = yes
					}
				}
			}
			newline = yes
			add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
			reverse_add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
			set_temp_variable = { treasury_change = -1 }
			modify_treasury_effect = yes
			add_resource = {
				type = oil
				amount = 12
				state = 916
			}
		}
		set_country_flag = PAN_VEN_energy_deal
		hidden_effect = { PAN = { country_event = { id = panama.54 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 1 has_opinion = { target = PAN value > 4 } }
			modifier = { add = 5 has_opinion = { target = PAN value > 14 } }
		}
	}
	option = {  # rejects
		name = panama.53.b
		log = "[GetDateText]: [This.GetName]: panama.53.b executed"
		hidden_effect = { PAN = { country_event = { id = panama.54 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 5 has_opinion = { target = PAN value < 0 } }
		}
	}
}
# VEN OIL DEAL - RECEIVE RESPONSE #
country_event = {
	id = panama.54
	title = {  # accepts
		text = panama.54.t1
		trigger = { VEN = { has_country_flag = PAN_VEN_energy_deal } }
	}
	title = {  # rejects
		text = panama.54.t2
		trigger = { VEN = { NOT = { has_country_flag = PAN_VEN_energy_deal } } }
	}
	desc = {  # accepts
		text = panama.54.d1
		trigger = { VEN = { has_country_flag = PAN_VEN_energy_deal } }
	}
	desc = {  # rejects
		text = panama.54.d2
		trigger = { VEN = { NOT = { has_country_flag = PAN_VEN_energy_deal } } }
	}
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation
	option = {  # VEN accepted
		name = panama.54.a
		log = "[GetDateText]: [This.GetName]: panama.54.a executed"
		trigger = { COL = { has_country_flag = PAN_COL_accepted_darien_agreement } }
		set_temp_variable = { treasury_change = -1 }
		modify_treasury_effect = yes
		853 = {
			add_building_construction = {
				type = fuel_silo
				level = 1
				instant_build = yes
			}
			add_resource = { type = oil amount = 2 }
		}
		newline = yes
		VEN = {
			add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
			reverse_add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
			set_temp_variable = { treasury_change = -1 }
			modify_treasury_effect = yes
			add_resource = {
				type = oil
				amount = 12
				state = 916
			}
		}
		hidden_effect = {
			VEN = {
				add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
				reverse_add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
				clr_country_flag = PAN_VEN_energy_deal
			}
		}
		ai_chance = { base = 1 }
	}
	option = {  # VEN rejected
		name = panama.54.b
		log = "[GetDateText]: [This.GetName]: panama.54.b executed"
		trigger = { VEN = { NOT = { has_country_flag = PAN_VEN_energy_deal } } }
		hidden_effect = { add_opinion_modifier = { target = VEN modifier = PAN_opinion_rejected_our_proposal } }
		ai_chance = { base = 1 }
	}
}
# ARGENTINA GETS THIS - PAN_sign_argentina_agriculture_coop
country_event = {
	id = panama.55
	title = panama.55.t
	desc = panama.55.d
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation  # TODO: CHANGE
	option = {  # accepts
		name = panama.55.a
		log = "[GetDateText]: [This.GetName]: panama.55.a executed"
		effect_tooltip = {
			PAN = {
				add_ideas = PAN_argentinian_agricultural_advisors
				set_temp_variable = { treasury_change = -0.025 }
				modify_treasury_effect = yes
			}
			add_opinion_modifier = { target = ARG modifier = PAN_regional_cooperation }
			reverse_add_opinion_modifier = { target = ARG modifier = PAN_regional_cooperation }
			# pay argentina
			set_temp_variable = { treasury_change = 0.025 }
			modify_treasury_effect = yes
		}
		set_country_flag = PAN_ARG_agriculture_coop
		hidden_effect = { PAN = { country_event = { id = panama.56 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 1 has_opinion = { target = PAN value > 14 } }
			modifier = { add = 5 has_opinion = { target = PAN value > 24 } }
		}
	}
	option = {  # rejects
		name = panama.55.b
		log = "[GetDateText]: [This.GetName]: panama.55.b executed"
		hidden_effect = { PAN = { country_event = { id = panama.56 days = 3 } } }
		ai_chance = {
			base = 1
			modifier = { add = 5 has_opinion = { target = PAN value < 9 } }
		}
	}
}
# ARGENTINA - RECEIVE RESPONSE #
country_event = {
	id = panama.56
	title = {  # accepts
		text = panama.56.t1
		trigger = { ARG = { has_country_flag = PAN_ARG_agriculture_coop } }
	}
	title = {  # rejects
		text = panama.56.t2
		trigger = { ARG = { NOT = { has_country_flag = PAN_ARG_agriculture_coop } } }
	}
	desc = {  # accepts
		text = panama.56.d1
		trigger = { ARG = { has_country_flag = PAN_ARG_agriculture_coop } }
	}
	desc = {  # rejects
		text = panama.56.d2
		trigger = { ARG = { NOT = { has_country_flag = PAN_ARG_agriculture_coop } } }
	}
	is_triggered_only = yes
	fire_only_once = yes
    picture = GFX_PAN_processing_plant_banana_plantation
	option = {  # ARG accepted
		name = panama.56.a
		log = "[GetDateText]: [This.GetName]: panama.56.a executed"
		trigger = { ARG = { has_country_flag = PAN_ARG_agriculture_coop } }
		PAN = {
			add_ideas = PAN_argentinian_agricultural_advisors
			set_temp_variable = { treasury_change = -0.025 }
			modify_treasury_effect = yes
		}
		# pay argentina
		set_temp_variable = { treasury_change = 0.025 }
		modify_treasury_effect = yes
		hidden_effect = {
			ARG = {
				add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
				reverse_add_opinion_modifier = { target = PAN modifier = PAN_regional_cooperation }
				clr_country_flag = PAN_ARG_agriculture_coop
			}
		}
		ai_chance = { base = 1 }
	}
	option = {  # ARG rejected
		name = panama.56.b
		log = "[GetDateText]: [This.GetName]: panama.56.b executed"
		trigger = {
			ARG = {
				NOT = { has_country_flag = PAN_ARG_agriculture_coop }
			}
		}
		hidden_effect = {
			add_opinion_modifier = {
				target = ARG
				modifier = PAN_regional_cooperation
			}
		}
		ai_chance = { base = 1 }
	}
}


###########################
#        NEWS EVENTS      #
###########################
# MOSCOSO PARDONS CUBAN EXILES - NEWS #
news_event = {
	id = panama_news.1
	title = panama_news.1.t
	desc = panama_news.1.d
	picture = GFX_BRA_Petrobras_news
	is_triggered_only = yes
	major = yes
	option = {
		name = panama_news.1.a
		log = "[GetDateText]: [This.GetName]: panama_news.1.a executed"
		trigger = { original_tag = PAN }
	}
	option = {
		name = panama_news.1.b
		log = "[GetDateText]: [This.GetName]: panama_news.1.b executed"
		trigger = {
			OR = {
				NOT = {
					original_tag = PAN
					original_tag = CUB
					original_tag = VEN
				}
				AND = { original_tag = USA NOT = { has_government = democratic } }
			}
		}
	}
	option = {
		name = panama_news.1.c
		log = "[GetDateText]: [This.GetName]: panama_news.1.b executed"
		trigger = {
			AND = { original_tag = USA has_government = democratic }
		}
	}
	option = {
		name = panama_news.1.e
		log = "[GetDateText]: [This.GetName]: panama_news.1.e executed"
		trigger = { OR = { original_tag = CUB original_tag = VEN } }
	}
}

