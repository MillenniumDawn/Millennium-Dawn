#################
### EU events ### for EU voting events see EU_voting_events.txt
#################

add_namespace = EUevent
add_namespace = EUcheat

country_event = {
	id = EUcheat.1
	title = EUcheat.1.t
	desc = EUcheat.1.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUcheat.1.a
		set_global_flag = EU_voting_cheat_yes
	}
	option = { #b
		name = EUcheat.1.b
		set_global_flag = EU_voting_cheat_no
	}
	option = { #c
		name = EUcheat.1.c
		clr_global_flag = EU_voting_cheat_yes
		clr_global_flag = EU_voting_cheat_yes		
	}
}

###SOTEU

country_event = {
	id = EUevent.1
	title = EUevent.1.t
	desc = EUevent.1.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = {
		set_variable = {	
			var = global.var_EUpopTotal
			value = 0
		}				
		every_country = {
			limit = {
				has_idea = EU_member
			}
				add_to_variable = {
					var = global.var_EUpopTotal
					value = THIS.max_manpower_k
				}
		}

		set_variable = {	
			var = global.var_EUmemberstatesTotal
			value = 0
		}				
		every_country = {
			limit = { 
				has_idea = EU_member 
			}
				add_to_variable = {
					var = global.var_EUmemberstatesTotal
					value = 1
				}
		}	
	
		every_country = {
			if = {
				limit = {
					has_idea = EU_member
				}
				set_variable = {
					var = THIS.var_EUpopRatio
					value = 0
				}
				add_to_variable = {
					var = THIS.var_EUpopRatio
					value = THIS.max_manpower_k
				}
				divide_variable = {
					var = THIS.var_EUpopRatio
					value = global.var_EUpopTotal
				}
			}
		}
		
		###Europeanism Update
		set_variable = {	
			var = global.var_europeanism
			value = 0
		}				
		
		every_country = {
			if = {
				limit = {
					has_idea = EU_member
				}
				set_variable = {
					var = THIS.var_proeuropean
					value = 1
				}
				subtract_from_variable = {
					var = THIS.var_proeuropean
					value = THIS.eurosceptic
				}
				multiply_variable = {
					var = THIS.var_proeuropean
					value = max_manpower_k
				}
			}
		}
		every_country = {
			if = {
				limit = { 
					has_idea = EU_member 
				}
				add_to_variable = {
					var = global.var_europeanism
					value = THIS.var_proeuropean
				}
			}
		}	
			
		divide_variable = {
			var = global.var_europeanism
			value = global.var_EUpopTotal			
		}
		###Europeanism Update End
	}
}

### EU–Turkey deal

country_event = {
	id = EUevent.2
	title = EUevent.2.t
	desc = EUevent.2.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUevent.2.a
		###
	}
}

### United States of Europe

country_event = {
	id = EUevent.3
	title = EUevent.3.t
	desc = EUevent.3.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUevent.3.a
		every_country = {
			limit = {  has_idea = EU_member }
			country_event = EUevent.4
		}
		ROOT = { set_cosmetic_tag = USoE }
	}
}

country_event = {
	id = EUevent.4
	title = EUevent.4.t
	desc = EUevent.4.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUevent.4.a
			if = {
				limit = {
					NOT = { original_tag = FROM }
				}			
				FROM = {
					annex_country = {
						target = ROOT
						transfer_troops = yes
					}
				}
			}
	}
}

### European debt crisis 
country_event = {
	id = EUevent.5
	title = EUevent.5.t
	desc = EUevent.5.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUevent.5.a
		ROOT = {
			add_ideas = european_debt_crisis
		}
		if = {
			limit = {
				OR ={
					original_tag = POR
					original_tag = ITA
					original_tag = IRE
					original_tag = GRE
					original_tag = SPR
					original_tag = CYP
				}
			}
			ROOT = {
				add_ideas = national_dept_crisis_EU
			}
		}
	}
}

### eurozone reforms
country_event = { 
	id = EUevent.6
	title = EUevent.6.t
	desc = EUevent.6.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUevent.6.a
		set_global_flag = eurozone_reforms ### European debt crisis will never happen
		ROOT = {
			add_to_variable = {
				var = eurosceptic
				value = -0.10
			}
			if = {
				limit = {
					check_variable = { eurosceptic > 1 }
				}
				set_variable = { eurosceptic = 1 }
			}
			else_if = {
				limit = {
					check_variable = { eurosceptic < 0 }
				}
				set_variable = { eurosceptic = 0 }
			}
		}
	}
}

### eurozone reforms activate_mission
country_event = { 
	id = EUevent.7
	title = EUevent.7.t
	desc = EUevent.7.d
	
	#picture = GFX_eu
	fire_only_once = yes
	#is_triggered_only = yes
	trigger = {
			NOT = { has_global_flag = eurozone_reforms }
			ROOT = {
				has_idea = EU_member
			}
			date > 2008.09.15 ### Day of Lehman Bankruptcy
	}
	
	
	option = { #a
		name = EUevent.7.a
		every_country = {
			limit = {
				has_idea = EU_member
			}
			activate_mission =  eurozone_reforms
		}
	}
}
### troika_reforms accomplised
country_event = { 
	id = EUevent.8
	title = EUevent.8.t
	desc = EUevent.8.d
	
	#picture = GFX_eu
	
	is_triggered_only = yes
	
	option = { #a
		name = EUevent.8.a
		ROOT = {
			add_timed_idea = {
				idea = austerity
				days = 730 # two years
		}
	}
}