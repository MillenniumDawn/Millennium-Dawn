add_namespace = Yemen

### Yemeni civil war cleanup events ###

#Give the winner YEM cosmetic tag
country_event = {
	id = Yemen.0
	
	hidden = yes
	
	trigger = {
		OR = {
			AND = {
				tag = HOU
				NOT = {
					country_exists = YEM
					country_exists = AQY
				}
			}
			AND = {
				tag = YEM
				NOT = {
					country_exists = HOU
					country_exists = AQY
				}
			}
			AND = {
				tag = AQY
				NOT = {
					country_exists = HOU 
					country_exists = YEM
				}
			}
		}
		NOT = { has_global_flag = Yemen_Civil_War_Over }
	}
	
	mean_time_to_happen = {
		days = 2
	}
	
	immediate = {
		#Civil war is over
		set_global_flag = Yemen_Civil_War_Over
		#Clear core status
		194 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		195 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		196 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		197 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		198 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		199 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		200 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		#Make the winner Yemen
		if = {
			limit = {
				OR = {
					tag = HOU
					#tag = AQY
				}
			}
			set_cosmetic_tag = YEM
		}
		add_state_core = 194
		add_state_core = 195
		add_state_core = 196
		add_state_core = 197
		add_state_core = 198
		add_state_core = 199
		add_state_core = 200
		set_capital = 195
	}
	
	option = {
		name = Yemen.0.a
	}
}

#Al-Qaeda in Yemen is beaten. Force a peace deal as not to drag the war on forever
country_event = {
	id = Yemen.1
	
	hidden = yes
	
	trigger = {
		country_exists = AQY
		AQY = { 
			has_capitulated = yes
			is_in_faction = yes 
		}
		NOT = { has_global_flag = Yemen_Civil_War_Over } 	#No special rules if Al-Qaeda has already won Yemeni civil war
	}
	
	mean_time_to_happen = {
		days = 2
	}
	
	immediate = {
		remove_from_faction = AQY
	}
	
	option = {
		name = Yemen.1.a
	}
}

#Recreate Yemen in case it has been annexed
country_event = {
	id = Yemen.2
	
	hidden = yes
	
	trigger = {
		NOT = {
			country_exists = YEM
			country_exists = AQY
			country_exists = HOU
		}
		NOT = { 195 = { is_core_of = YEM } }
	}
	
	mean_time_to_happen = {
		days = 2
	}
	
	immediate = {
		#Clear core status
		194 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		195 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		196 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		197 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		198 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		199 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		200 = {
			remove_core_of = YEM
			remove_core_of = AQY
			remove_core_of = HOU
		}
		YEM = {
			add_state_core = 194
			add_state_core = 195
			add_state_core = 196
			add_state_core = 197
			add_state_core = 198
			add_state_core = 199
			add_state_core = 200
			set_capital = 195
		}
	}
	
	option = {
		name = Yemen.2.a
	}
}
			