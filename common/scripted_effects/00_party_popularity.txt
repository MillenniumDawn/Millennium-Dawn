#written by ahmeteris #Tweaked by Bird/Turtle
#needed for PKK attack and counter terrorism effects

add_1_popularity = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = 0.01
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = 0.01
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = 0.01
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = 0.01
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = 0.01
		}
	}
	recalculate_party = yes
}

add_2_popularity = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = 0.02
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = 0.02
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = 0.02
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = 0.02
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = 0.02
		}
	}
	recalculate_party = yes
}

add_5_popularity = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = 0.05
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = 0.05
		}
	}
	recalculate_party = yes
}

add_10_popularity = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = 0.1
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = 0.1
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = 0.1
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = 0.1
		}
	}
	recalculate_party = yes
}

decrease_popularity_1 = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = -0.01
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = -0.01
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = -0.01
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = -0.01
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = -0.01
		}
	}
	recalculate_party = yes
}

decrease_popularity_2 = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = -0.02
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = -0.02
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = -0.02
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = -0.02
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = -0.02
		}
	}
	recalculate_party = yes
}

decrease_popularity_2_5 = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = -0.025
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = -0.025
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = -0.025
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = -0.025
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = -0.025
		}
	}
	recalculate_party = yes
}

decrease_popularity_3 = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = -0.03
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = -0.03
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = -0.03
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = -0.03
		}
	}
	recalculate_party = yes
}

decrease_popularity_4 = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = -0.04
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = -0.04
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = -0.04
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = -0.04
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = -0.04
		}
	}
	recalculate_party = yes
}

decrease_popularity_5 = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = -0.05
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = -0.05
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = -0.05
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = -0.05
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = -0.05
		}
	}
	recalculate_party = yes
}

decrease_popularity_10 = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = -0.10
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = -0.10
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = -0.10
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = -0.10
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = -0.10
		}
	}
	recalculate_party = yes
}

decrease_popularity_20 = {
	if = {
		limit = { has_government = democratic }
		add_popularity = {
			ideology = democratic
			popularity = -0.20
		}
	}
	else_if = {
		limit = { has_government = communism }
		add_popularity = {
			ideology = communism
			popularity = -0.20
		}
	}
	else_if = {
		limit = { has_government = fascism }
		add_popularity = {
			ideology = fascism
			popularity = -0.20
		}
	}
	else_if = {
		limit = { has_government = neutrality }
		add_popularity = {
			ideology = neutrality
			popularity = -0.20
		}
	}
	else_if = {
		limit = { has_government = nationalist }
		add_popularity = {
			ideology = nationalist
			popularity = -0.20
		}
	}
	recalculate_party = yes
}

#added only the 5% version, if you need other numbers obviously just copy paste and change the values, remember to create the custom tooltips in localization
add_5_popularity_sub = {
	if = {
		limit = { is_in_array = { ruling_party = 0 } }
		custom_effect_tooltip = 5_increase_0_TT
		hidden_effect = { 
			add_popularity = { ideology = democratic popularity = 0.05 }
			add_to_variable = { party_pop_array^0 = 0.05 } #western autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 1 } }
		custom_effect_tooltip = 5_increase_1_TT
		hidden_effect = { 
			add_popularity = { ideology = democratic popularity = 0.05 }
			add_to_variable = { party_pop_array^1 = 0.05 } #conservatism
		}
	}	
	else_if = {
		limit = { is_in_array = { ruling_party = 2 } }
		custom_effect_tooltip = 5_increase_2_TT
		hidden_effect = { 
			add_popularity = { ideology = democratic popularity = 0.05 }
			add_to_variable = { party_pop_array^2 = 0.05 } #liberalism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 3 } }
		custom_effect_tooltip = 5_increase_3_TT
		hidden_effect = { 
			add_popularity = { ideology = democratic popularity = 0.05 }
			add_to_variable = { party_pop_array^3 = 0.05 } #socialism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 4 } }
		custom_effect_tooltip = 5_increase_4_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = 0.05 }
			add_to_variable = { party_pop_array^4 = 0.05 } #Comunist-state
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 5 } }
		custom_effect_tooltip = 5_increase_5_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = 0.05 }
			add_to_variable = { party_pop_array^5 = 0.05 } #anarchist_communism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 6 } }
		custom_effect_tooltip = 5_increase_6_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = 0.05 }
			add_to_variable = { party_pop_array^6 = 0.05 } #Conservative
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 7 } }
		custom_effect_tooltip = 5_increase_7_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = 0.05 }
			add_to_variable = { party_pop_array^7 = 0.05 } #Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 8 } }
		custom_effect_tooltip = 5_increase_8_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = 0.05 }
			add_to_variable = { party_pop_array^8 = 0.05 } #Mod_Vilayat_e_Faqih
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 9 } }
		custom_effect_tooltip = 5_increase_9_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = 0.05 }
			add_to_variable = { party_pop_array^9 = 0.05 } #Vilayat_e_Faqih
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 10 } }
		custom_effect_tooltip = 5_increase_10_TT
		hidden_effect = { 
			add_popularity = { ideology = fascism popularity = 0.05 }
			add_to_variable = { party_pop_array^10 = 0.05 } #Kingdom
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 11 } }
		custom_effect_tooltip = 5_increase_11_TT
		hidden_effect = { 
			add_popularity = { ideology = fascism popularity = 0.05 }
			add_to_variable = { party_pop_array^11 = 0.05 } #Caliphate
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 12 } }
		custom_effect_tooltip = 5_increase_12_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = 0.05 }
			add_to_variable = { party_pop_array^12 = 0.05 } #Neutral_Muslim_Brotherhood
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 13 } }
		custom_effect_tooltip = 5_increase_13_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = 0.05 }
			add_to_variable = { party_pop_array^13 = 0.05 } #Neutral_Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 14 } }
		custom_effect_tooltip = 5_increase_14_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = 0.05 }
			add_to_variable = { party_pop_array^14 = 0.05 } #Neutral_conservatism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 15 } }
		custom_effect_tooltip = 5_increase_15_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = 0.05 }
			add_to_variable = { party_pop_array^15 = 0.05 } #oligarchism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 16 } }
		custom_effect_tooltip = 5_increase_16_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = 0.05 }
			add_to_variable = { party_pop_array^16 = 0.05 } #Neutral_Libertarian
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 17 } }
		custom_effect_tooltip = 5_increase_17_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = 0.05 }
			add_to_variable = { party_pop_array^17 = 0.05 } #Neutral_green
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 18 } }
		custom_effect_tooltip = 5_increase_18_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = 0.05 }
			add_to_variable = { party_pop_array^18 = 0.05 } #neutral_Social
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 19 } }
		custom_effect_tooltip = 5_increase_19_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = 0.05 }
			add_to_variable = { party_pop_array^19 = 0.05 } #Neutral_Communism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 20 } }
		custom_effect_tooltip = 5_increase_20_TT
		hidden_effect = { 
			add_popularity = { ideology = nationalist popularity = 0.05 }
			add_to_variable = { party_pop_array^20 = 0.05 } #Nat_Populism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 21 } }
		custom_effect_tooltip = 5_increase_21_TT
		hidden_effect = { 
			add_popularity = { ideology = nationalist popularity = 0.05 }
			add_to_variable = { party_pop_array^21 = 0.05 } #Nat_Fascism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 22 } }
		custom_effect_tooltip = 5_increase_22_TT
		hidden_effect = { 
			add_popularity = { ideology = nationalist popularity = 0.05 }
			add_to_variable = { party_pop_array^22 = 0.05 } #Nat_Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 23 } }
		custom_effect_tooltip = 5_increase_23_TT
		hidden_effect = { 
			add_popularity = { ideology = nationalist popularity = 0.05 }
			add_to_variable = { party_pop_array^23 = 0.05 } #Monarchist
		}
	}
	recalculate_party = yes
}

remove_5_popularity_sub = {
	if = {
		limit = { is_in_array = { ruling_party = 0 } }
		custom_effect_tooltip = 5_decrease_0_TT
		hidden_effect = { 
			add_popularity = { ideology = democratic popularity = -0.05 }
			add_to_variable = { party_pop_array^0 = -0.05 } #western autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 1 } }
		custom_effect_tooltip = 5_decrease_1_TT
		hidden_effect = { 
			add_popularity = { ideology = democratic popularity = -0.05 }
			add_to_variable = { party_pop_array^1 = -0.05 } #conservatism
		}
	}	
	else_if = {
		limit = { is_in_array = { ruling_party = 2 } }
		custom_effect_tooltip = 5_decrease_2_TT
		hidden_effect = { 
			add_popularity = { ideology = democratic popularity = -0.05 }
			add_to_variable = { party_pop_array^2 = -0.05 } #liberalism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 3 } }
		custom_effect_tooltip = 5_decrease_3_TT
		hidden_effect = { 
			add_popularity = { ideology = democratic popularity = -0.05 }
			add_to_variable = { party_pop_array^3 = -0.05 } #socialism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 4 } }
		custom_effect_tooltip = 5_decrease_4_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = -0.05 }
			add_to_variable = { party_pop_array^4 = -0.05 } #Comunist-state
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 5 } }
		custom_effect_tooltip = 5_decrease_5_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = -0.05 }
			add_to_variable = { party_pop_array^5 = -0.05 } #anarchist_communism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 6 } }
		custom_effect_tooltip = 5_decrease_6_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = -0.05 }
			add_to_variable = { party_pop_array^6 = -0.05 } #Conservative
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 7 } }
		custom_effect_tooltip = 5_decrease_7_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = -0.05 }
			add_to_variable = { party_pop_array^7 = -0.05 } #Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 8 } }
		custom_effect_tooltip = 5_decrease_8_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = -0.05 }
			add_to_variable = { party_pop_array^8 = -0.05 } #Mod_Vilayat_e_Faqih
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 9 } }
		custom_effect_tooltip = 5_decrease_9_TT
		hidden_effect = { 
			add_popularity = { ideology = communism popularity = -0.05 }
			add_to_variable = { party_pop_array^9 = -0.05 } #Vilayat_e_Faqih
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 10 } }
		custom_effect_tooltip = 5_decrease_10_TT
		hidden_effect = { 
			add_popularity = { ideology = fascism popularity = -0.05 }
			add_to_variable = { party_pop_array^10 = -0.05 } #Kingdom
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 11 } }
		custom_effect_tooltip = 5_decrease_11_TT
		hidden_effect = { 
			add_popularity = { ideology = fascism popularity = -0.05 }
			add_to_variable = { party_pop_array^11 = -0.05 } #Caliphate
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 12 } }
		custom_effect_tooltip = 5_decrease_12_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = -0.05 }
			add_to_variable = { party_pop_array^12 = -0.05 } #Neutral_Muslim_Brotherhood
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 13 } }
		custom_effect_tooltip = 5_decrease_13_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = -0.05 }
			add_to_variable = { party_pop_array^13 = -0.05 } #Neutral_Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 14 } }
		custom_effect_tooltip = 5_decrease_14_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = -0.05 }
			add_to_variable = { party_pop_array^14 = -0.05 } #Neutral_conservatism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 15 } }
		custom_effect_tooltip = 5_decrease_15_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = -0.05 }
			add_to_variable = { party_pop_array^15 = -0.05 } #oligarchism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 16 } }
		custom_effect_tooltip = 5_decrease_16_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = -0.05 }
			add_to_variable = { party_pop_array^16 = -0.05 } #Neutral_Libertarian
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 17 } }
		custom_effect_tooltip = 5_decrease_17_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = -0.05 }
			add_to_variable = { party_pop_array^17 = -0.05 } #Neutral_green
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 18 } }
		custom_effect_tooltip = 5_decrease_18_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = -0.05 }
			add_to_variable = { party_pop_array^18 = -0.05 } #neutral_Social
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 19 } }
		custom_effect_tooltip = 5_decrease_19_TT
		hidden_effect = { 
			add_popularity = { ideology = neutrality popularity = -0.05 }
			add_to_variable = { party_pop_array^19 = -0.05 } #Neutral_Communism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 20 } }
		custom_effect_tooltip = 5_decrease_20_TT
		hidden_effect = { 
			add_popularity = { ideology = nationalist popularity = -0.05 }
			add_to_variable = { party_pop_array^20 = -0.05 } #Nat_Populism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 21 } }
		custom_effect_tooltip = 5_decrease_21_TT
		hidden_effect = { 
			add_popularity = { ideology = nationalist popularity = -0.05 }
			add_to_variable = { party_pop_array^21 = -0.05 } #Nat_Fascism
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 22 } }
		custom_effect_tooltip = 5_decrease_22_TT
		hidden_effect = { 
			add_popularity = { ideology = nationalist popularity = -0.05 }
			add_to_variable = { party_pop_array^22 = -0.05 } #Nat_Autocracy
		}
	}
	else_if = {
		limit = { is_in_array = { ruling_party = 23 } }
		custom_effect_tooltip = 5_decrease_23_TT
		hidden_effect = { 
			add_popularity = { ideology = nationalist popularity = -0.05 }
			add_to_variable = { party_pop_array^23 = -0.05 } #Monarchist
		}
	}
	recalculate_party = yes
}