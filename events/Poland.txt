add_namespace = poland
add_namespace = poland_news
add_namespace = poland_influence

# events 1-4 were removed as part of cleanup,
# they are no longer used and are free for grabs

country_event = {
	id = poland.5
	title = poland.5.t
	desc = poland.5.d
	picture = GFX_anaconda_16_event

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.5.a
		log = "[GetDateText]: [This.GetName]: poland.5.a executed"
		army_experience = 50
		air_experience = 50
		add_political_power = 75
	}
}

# Soicalists on power, corruption scandal
country_event = {
	id = poland.6
	title = poland.6.t
	desc = poland.6.d
	picture = GFX_pol_corruption_event
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.6.a
		log = "[GetDateText]: [This.GetName]: poland.6.a executed"

		custom_effect_tooltip = POL_corruption_Scandal_Soc_1_TT
		set_temp_variable = {
			current_soc_popularity = party_pop_array^3
		}

		multiply_temp_variable = { current_soc_popularity = 0.9 }

		set_temp_variable = { party_index = 2 }
		set_temp_variable = { party_popularity_increase = current_soc_popularity }
		add_relative_party_popularity = yes

		ai_chance = {
			base = 40
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}

	option = {
		name = poland.6.b
		log = "[GetDateText]: [This.GetName]: poland.6.b executed"

		custom_effect_tooltip = POL_corruption_Scandal_Soc_2_TT
		set_temp_variable = {
			current_soc_popularity = party_pop_array^3
		}

		multiply_temp_variable = { current_soc_popularity = 0.9 }

		set_temp_variable = { party_index = 1 }
		set_temp_variable = { party_popularity_increase = current_soc_popularity }
		add_relative_party_popularity = yes

		ai_chance = { base = 40 }
	}
}

# Cons dropping out of popularity
country_event = {
	id = poland.7
	title = poland.7.t
	desc = poland.7.d
	picture = GFX_pol_corruption_event
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.7.a
		log = "[GetDateText]: [This.GetName]: poland.7.a executed"

		custom_effect_tooltip = POL_corruption_Scandal_Con_1_TT
		set_temp_variable = { current_cons_popularity = party_pop_array^1 }
		multiply_temp_variable = { current_cons_popularity = 0.5 }

		set_temp_variable = { party_index = 2 }
		set_temp_variable = { party_popularity_increase = current_cons_popularity }
		add_relative_party_popularity = yes

		ai_chance = { base = 40 }
	}

	option = {
		name = poland.7.b
		log = "[GetDateText]: [This.GetName]: poland.7.b executed"

		custom_effect_tooltip = POL_corruption_Scandal_Con_2_TT
		add_political_power = -200
		set_temp_variable = { party_index = 3 }
		set_temp_variable = { party_popularity_increase = 0.20 }
		add_relative_party_popularity = yes


		ai_chance = { base = 40 }
	}
}

# Question of socialism
country_event = {
	id = poland.8
	title = poland.8.t
	desc = poland.8.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.8.a
		log = "[GetDateText]: [This.GetName]: poland.8.a executed"

		add_political_power = 75
		add_stability = 0.05

		ai_chance = { base = 40 }
	}

	option = {
		name = poland.8.b
		log = "[GetDateText]: [This.GetName]: poland.8.b executed"

		set_temp_variable = { party_index = 3 }
		set_temp_variable = { party_popularity_increase = party_pop_array^3 }
		add_relative_party_popularity = yes

		add_timed_idea = {
			idea = POL_political_schism
			days = 365
		}

		ai_chance = { base = 10 }
	}
}

# first elections change
country_event = {
	id = poland.9
	title = poland.9.t
	desc = poland.9.d
	picture = GFX_pol_election_event
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.9.a
		log = "[GetDateText]: [This.GetName]: poland.9.a executed"

		custom_effect_tooltip = POL_First_elections_1_TT
		add_political_power = 75
		add_stability = 0.03

		ai_chance = { base = 40 }
	}

	option = {
		name = poland.9.b
		log = "[GetDateText]: [This.GetName]: poland.9.b executed"

		custom_effect_tooltip = POL_First_elections_2_TT
		add_stability = -0.03
		add_political_power = -50

		set_temp_variable = { party_index = 1 }
		set_temp_variable = { party_popularity_increase = 0.30 }
		add_relative_party_popularity = yes

		ai_chance = {
			base = 40
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
}

# lgbt protests
country_event = {
	id = poland.10
	title = poland.10.t
	desc = poland.10.d
	picture = GFX_pol_lgbt_protests
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.10.a
		log = "[GetDateText]: [This.GetName]: poland.10.a executed"

		add_political_power = -100
		add_stability = -0.1

		ai_chance = { base = 40 }
	}

	option = {
		name = poland.10.b
		log = "[GetDateText]: [This.GetName]: poland.10.b executed"

		custom_effect_tooltip = POL_lgbt_protest_ingored_TT
		add_stability = 0.05
		add_political_power = -50

		set_temp_variable = { party_index = 2 }
		set_temp_variable = { party_popularity_increase = -0.20 }
		add_relative_party_popularity = yes


		ai_chance = { base = 10 }
	}
}

# PO and PiS are created
country_event = {
	id = poland.11
	title = poland.11.t
	desc = poland.11.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.11.a
		log = "[GetDateText]: [This.GetName]: poland.11.a executed"
		ai_chance = { base = 40 }
	}
}

# ZKP/PPS schism
country_event = {
	id = poland.12
	title = poland.12.t
	desc = poland.12.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.12.a
		log = "[GetDateText]: [This.GetName]: poland.12.a executed"

		if = {
			limit = { NOT = { is_in_array = { ruling_party = 4 } } }
			hidden_effect = {
				clear_array = ruling_party
				clear_array = gov_coalition_array
				add_to_array = { ruling_party = 4 }
				update_government_coalition_strength = yes
				update_party_name = yes
				set_coalition_drift = yes
				set_ruling_leader = yes
				set_leader = yes
			}

			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}

			set_temp_variable = { party_index = 4 }
			set_temp_variable = { party_popularity_increase = 0.075 }
			set_temp_variable = { temp_outlook_increase = 0.075 }
			add_relative_party_popularity = yes

			add_stability = -0.1
		}
		else_if = {
			limit = { is_in_array = { ruling_party = 4 } }
			set_temp_variable = { party_index = 4 }
			set_temp_variable = { party_popularity_increase = 0.075 }
			set_temp_variable = { temp_outlook_increase = 0.075 }
			add_relative_party_popularity = yes

			add_stability = -0.05
		}

		ai_chance = { base = 40 }
	}

	option = {
		name = poland.12.b
		log = "[GetDateText]: [This.GetName]: poland.12.b executed"

		if = {
			limit = { NOT = { is_in_array = { ruling_party = 5 } } }
			hidden_effect = {
				clear_array = ruling_party
				clear_array = gov_coalition_array
				add_to_array = { ruling_party = 5 }
				update_government_coalition_strength = yes
				update_party_name = yes
				set_coalition_drift = yes
				set_ruling_leader = yes
				set_leader = yes
			}

			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}


			set_temp_variable = { party_index = 5 }
			set_temp_variable = { party_popularity_increase = 0.075 }
			set_temp_variable = { temp_outlook_increase = 0.075 }
			add_relative_party_popularity = yes

			add_stability = -0.1
		}
		else_if = {
			limit = { is_in_array = { ruling_party = 5 } }
			set_temp_variable = { party_index = 5 }
			set_temp_variable = { party_popularity_increase = 0.075 }
			set_temp_variable = { temp_outlook_increase = 0.075 }
			add_relative_party_popularity = yes

			add_stability = -0.05
		}

		ai_chance = { base = 40 }
	}
}

# women in the army
country_event = {
	id = poland.13
	title = poland.13.t
	desc = poland.13.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.13.a
		log = "[GetDateText]: [This.GetName]: poland.13.a executed"
		set_no_women_effect = yes
		ai_chance = { base = 10 }
	}

	option = {
		name = poland.13.b
		log = "[GetDateText]: [This.GetName]: poland.13.b executed"
		set_volunteer_women_effect = yes
		ai_chance = { base = 40 }
	}

	option = {
		name = poland.13.c
		log = "[GetDateText]: [This.GetName]: poland.13.c executed"
		set_drafted_women_effect = yes
		ai_chance = { base = 20 }
	}
}

# ZKP and PPS parties info event
country_event = {
	id = poland.14
	title = poland.14.t
	desc = poland.14.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.14.a
		log = "[GetDateText]: [This.GetName]: poland.14.a executed"
		ai_chance = { base = 10 }
	}
}

country_event = {
	id = poland.15
	title = poland.15.t
	desc = poland.15.d

	is_triggered_only = yes

	option = {
		name = poland.15.a
		log = "[GetDateText]: [This.GetName]: poland.15.a executed"
		ai_chance = { base = 10 }
	}
}

# Germany war reparations
country_event = {
	id = poland.16
	title = poland.16.t
	desc = poland.16.d

	is_triggered_only = yes

	option = {
		name = poland.16.a
		log = "[GetDateText]: [This.GetName]: poland.16.a executed"
		ai_chance = { base = 10 }

		add_political_power = -50
		POL = {
			add_opinion_modifier = {
				target = GER
				modifier = POL_germany_refuses
			}
		}
		POL = { country_event = { id = poland.17 } }
	}

	option = {
		name = poland.16.b
		log = "[GetDateText]: [This.GetName]: poland.16.b executed"
		ai_chance = { base = 90 }

		add_political_power = 100
		POL = {
			add_opinion_modifier = {
				target = GER
				modifier = POL_germany_accepts
			}
		}
		set_temp_variable = { treasury_change = -10 }
		modify_treasury_effect = yes
		POL = { country_event = { id = poland.18 } }
	}
}

country_event = {
	id = poland.17
	title = poland.17.t
	desc = poland.17.d

	is_triggered_only = yes

	option = {
		name = poland.17.a
		log = "[GetDateText]: [This.GetName]: poland.17.a executed"
		ai_chance = { base = 10 }

		add_political_power = -50
	}
}

country_event = {
	id = poland.18
	title = poland.18.t
	desc = poland.18.d

	is_triggered_only = yes

	option = {
		name = poland.18.a
		log = "[GetDateText]: [This.GetName]: poland.18.a executed"
		ai_chance = { base = 10 }

		set_temp_variable = { treasury_change = 10 }
		modify_treasury_effect = yes
	}
}

country_event = {
	id = poland.19
	title = poland.19.t
	desc = poland.19.d

	is_triggered_only = yes

	option = {
		name = poland.19.a
		log = "[GetDateText]: [This.GetName]: poland.19.a executed"
		ai_chance = { base = 90 }

		POL = {
			set_autonomy = {
				target = CZE
				autonomy_state = autonomy_autonomous_state
			}
			add_state_core = 117
			add_state_core = 118
			add_state_core = 1017
			add_state_core = 1018
			news_event = poland_news.6
		}
	}

	option = {
		name = poland.19.b
		log = "[GetDateText]: [This.GetName]: poland.19.b executed"
		ai_chance = { base = 10 }

		add_political_power = 100
		POL = {
			add_opinion_modifier = {
				target = CZE
				modifier = POL_czech_republic_declines
			}
		}
	}
}

country_event = {
	id = poland.20
	title = poland.20.t
	desc = poland.20.d

	is_triggered_only = yes

	option = {
		name = poland.20.a
		log = "[GetDateText]: [This.GetName]: poland.20.a executed"
		ai_chance = { base = 90 }

		POL = {
			set_autonomy = {
				target = SLO
				autonomy_state = autonomy_autonomous_state
			}
			add_state_core = 119
			add_state_core = 120
			news_event = poland_news.7
		}
	}

	option = {
		name = poland.20.b
		log = "[GetDateText]: [This.GetName]: poland.20.b executed"
		ai_chance = { base = 10 }

		add_political_power = 100
		POL = {
			add_opinion_modifier = {
				target = SLO
				modifier = POL_slovakia_declines
			}
			end_puppet = CZE
		}
	}
}

country_event = {
	id = poland.21
	title = poland.21.t
	desc = poland.21.d

	is_triggered_only = yes

	option = {
		name = poland.21.a
		log = "[GetDateText]: [This.GetName]: poland.21.a executed"
		ai_chance = { base = 90 }

		POL = {
			set_autonomy = {
				target = HUN
				autonomy_state = autonomy_autonomous_state
			}
			add_state_core = 111
			add_state_core = 122
			add_state_core = 123
			add_state_core = 999
			news_event = poland_news.8
		}
	}

	option = {
		name = poland.21.b
		log = "[GetDateText]: [This.GetName]: poland.21.b executed"
		ai_chance = { base = 10 }

		add_political_power = 100
		POL = {
			add_opinion_modifier = {
				target = HUN
				modifier = POL_hungary_declines
			}
			end_puppet = CZE
			end_puppet = SLO
		}
	}
}

country_event = {
	id = poland.22
	title = poland.22.t
	desc = poland.22.d

	is_triggered_only = yes

	option = {
		name = poland.22.a
		log = "[GetDateText]: [This.GetName]: poland.22.a executed"
		ai_chance = { base = 60 }

		if = {
			limit = { has_dlc = "No Step Back" }

			add_equipment_to_stockpile = {
				type = mbt_hull_1
				amount = 30
				variant_name = "K2 PL"
			}
			set_temp_variable = { treasury_change = -20 }
			modify_treasury_effect = yes
			POL = {
				add_equipment_to_stockpile = {
					type = mbt_hull_1
					amount = -30
					variant_name = "K2 PL"
				}
				set_temp_variable = { treasury_change = 20 }
				modify_treasury_effect = yes
			}
		}
		else = {
			add_equipment_to_stockpile = {
				type = MBT_3
				amount = 30
				variant_name = "K2 PL"
			}
			set_temp_variable = { treasury_change = -20 }
			modify_treasury_effect = yes
			POL = {
				add_equipment_to_stockpile = {
					type = MBT_3
					amount = -30
					variant_name = "K2 PL"
				}
				set_temp_variable = { treasury_change = 20 }
				modify_treasury_effect = yes
			}
		}
	}

	option = {
		name = poland.22.b
		log = "[GetDateText]: [This.GetName]: poland.22.b executed"
		ai_chance = { base = 40 }
	}
}

country_event = {
	id = poland.23
	title = poland.23.t
	desc = poland.23.d
	picture = GFX_anaconda_16_event

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.23.a
		log = "[GetDateText]: [This.GetName]: poland.23.a executed"
		army_experience = 85
		air_experience = 20
		add_political_power = 40
	}
}

country_event = {
	id = poland.100
	title = poland.100.t
	desc = poland.100.d
	picture = GFX_stock_market

	fire_only_once = yes

	trigger = {
		has_country_flag = POL_stay_outside_the_eu_flag
		has_idea = EU_member
	}

	option = {
		name = poland.100.a
		log = "[GetDateText]: [This.GetName]: poland.100.a executed"
		remove_ideas = EU_member
	}
}

country_event = {
	id = poland.102
	title = poland.102.t
	desc = poland.102.d
	picture = GFX_POL_generic

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = poland.102.a
		log = "[GetDateText]: [This.GetName]: poland.102.a executed"
	}
}

country_event = {
	id = poland.101
	title = poland.101.t
	desc = poland.101.d
	picture = GFX_anaconda_16_event

	is_triggered_only = yes
	major = yes

	option = {
		name = poland.101.a
		log = "[GetDateText]: [This.GetName]: poland.101.a executed"
	}
}

#country_event = {
#	id = poland.103
#	title = poland.103.t
#	desc = poland.103.d
#	picture = GFX_POL_generic
#
#	fire_only_once = yes
#	is_triggered_only = yes
#
#	option = {
#		name = poland.103.a
#		log = "[GetDateText]: [This.GetName]: poland.103.a executed"
#	}
#}

# nationalist influence stuff
country_event = {
	id = poland_influence.1
	title = poland_influence.1.t
	desc = poland_influence.1.d

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: poland_influence.1.a executed"
		name = poland_influence.1.a

		set_temp_variable = { party_index = 20 }
		set_temp_variable = { party_popularity_increase = 0.07 }
		add_relative_party_popularity = yes

		set_country_flag = accepted_pol_influence
		set_country_flag = received_pol_influence
		ai_chance = {
			base = 10
			modifier = {
				OR = {
					nationalist_right_wing_populists_are_in_power = yes
					nationalist_fascist_are_in_power = yes
				}

				factor = 20
			}
		}
	}

	option = {
		log = "[GetDateText]: [This.GetName]: poland_influence.1.b executed"
		name = poland_influence.1.b

		set_temp_variable = { party_index = 20 }
		set_temp_variable = { party_popularity_increase = 0.03 }
		add_relative_party_popularity = yes

		set_country_flag = rejected_pol_influence
		set_country_flag = received_pol_influence

		ai_chance = {
			base = 80
			modifier = {
				OR = {
					nationalist_right_wing_populists_are_in_power = yes
					nationalist_fascist_are_in_power = yes
				}

				factor = 0
			}
		}
	}
}

# Smolensk disaster
news_event = {
	id = poland_news.2
	title = poland_news.2.t
	desc = poland_news.2.d
	picture = GFX_news_smolensk_disaster

	is_triggered_only = yes
	major = yes

	option = {
		name = poland_news.2.a
		trigger = {
			NOT = {
				tag = POL
				tag = SOV
			}
		}
		log = "[GetDateText]: [This.GetName]: poland_news.2.a executed"
	}

	option = {
		name = poland_news.2.b
		trigger = { tag = POL }
		hidden_effect = { kill_country_leader = yes }
		log = "[GetDateText]: [This.GetName]: poland_news.2.b executed"
	}
	option = {
		name = poland_news.2.c
		trigger = { tag = SOV }
		log = "[GetDateText]: [This.GetName]: poland_news.2.c executed"
	}
}

# not a Smolensk disaster
news_event = {
	id = poland_news.3
	title = poland_news.3.t
	desc = poland_news.3.d
	picture = GFX_news_smolensk_incident

	is_triggered_only = yes
	major = yes

	option = {
		name = poland_news.3.a
		trigger = {
			NOT = {
				tag = POL
				tag = SOV
			}
		}
		log = "[GetDateText]: [This.GetName]: poland_news.3.a executed"
	}
	option = {
		name = poland_news.3.b
		trigger = { tag = POL }
		log = "[GetDateText]: [This.GetName]: poland_news.3.b executed"
	}
	option = {
		name = poland_news.3.c
		trigger = { tag = SOV }
		log = "[GetDateText]: [This.GetName]: poland_news.3.c executed"
	}
}

# Eurozone acceptation
news_event = {
	id = poland_news.4
	title = poland_news.4.t
	desc = poland_news.4.d
	picture = GFX_news_update_gdpc

	is_triggered_only = yes
	major = yes

	option = {
		name = poland_news.4.a
		trigger = {
			NOT = {
				tag = POL
			}
		}
		log = "[GetDateText]: [This.GetName]: poland_news.4.a executed"
	}
	option = {
		name = poland_news.4.b
		trigger = { tag = POL }
		log = "[GetDateText]: [This.GetName]: poland_news.4.b executed"
	}
}

#Eurozone denied
news_event = {
	id = poland_news.5
	title = poland_news.5.t
	desc = poland_news.5.d
	picture = GFX_news_update_gdpc

	is_triggered_only = yes
	major = yes

	option = {
		name = poland_news.5.a
		trigger = {
			NOT = {
				tag = POL
			}
		}
		log = "[GetDateText]: [This.GetName]: poland_news.5.a executed"
	}
	option = {
		name = poland_news.5.b
		trigger = { tag = POL }
		log = "[GetDateText]: [This.GetName]: poland_news.5.b executed"
	}
}

news_event = {
	id = poland_news.6
	title = poland_news.6.t
	desc = poland_news.6.d
	picture = GFX_trade_agreement

	is_triggered_only = yes
	major = yes

	option = {
		name = poland_news.6.a
		trigger = {
			NOT = {
				tag = POL
				tag = CZE
			}
		}
		log = "[GetDateText]: [This.GetName]: poland_news.6.a executed"
	}
	option = {
		name = poland_news.6.b
		trigger = { tag = POL tag = CZE }
		log = "[GetDateText]: [This.GetName]: poland_news.6.b executed"
	}
}

news_event = {
	id = poland_news.7
	title = poland_news.7.t
	desc = poland_news.7.d
	picture = GFX_trade_agreement

	is_triggered_only = yes
	major = yes

	option = {
		name = poland_news.7.a
		trigger = {
			NOT = {
				tag = POL
				tag = CZE
				tag = SLO
			}
		}
		log = "[GetDateText]: [This.GetName]: poland_news.7.a executed"
	}
	option = {
		name = poland_news.7.b
		trigger = { tag = POL tag = CZE tag = SLO }
		log = "[GetDateText]: [This.GetName]: poland_news.7.b executed"
	}
}

news_event = {
	id = poland_news.8
	title = poland_news.8.t
	desc = poland_news.8.d
	picture = GFX_trade_agreement

	is_triggered_only = yes
	major = yes

	option = {
		name = poland_news.8.a
		trigger = {
			NOT = {
				tag = POL
				tag = CZE
				tag = SLO
				tag = HUN
			}
		}
		log = "[GetDateText]: [This.GetName]: poland_news.8.a executed"
	}
	option = {
		name = poland_news.8.b
		trigger = { tag = POL tag = CZE tag = SLO tag = HUN }
		log = "[GetDateText]: [This.GetName]: poland_news.8.b executed"
	}
}

news_event = {
	id = poland_news.9
	title = poland_news.9.t
	desc = poland_news.9.d
	picture = GFX_trade_agreement

	is_triggered_only = yes
	major = yes

	option = {
		name = poland_news.9.a
		trigger = {
			NOT = {
				tag = POL
				tag = CZE
				tag = SLO
				tag = HUN
			}
		}
		log = "[GetDateText]: [This.GetName]: poland_news.9.a executed"
	}
	option = {
		name = poland_news.9.b
		trigger = { tag = POL }
		log = "[GetDateText]: [This.GetName]: poland_news.9.b executed"
	}
	option = {
		name = poland_news.9.c
		trigger = { tag = CZE tag = SLO tag = HUN }
		log = "[GetDateText]: [This.GetName]: poland_news.9.c executed"
	}
}