add_namespace = iraqi_events
add_namespace = iraq_war

country_event = {
	id = iraqi_events.1 # New Year Reports
	title = iraqi_events.1.t
	desc = iraqi_events.1.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.1.o1
		log = "[GetDateText]: [This.GetName]: iraqi_events.1.o1 executed"
		#No effects
	}
}
country_event = {
	id = iraqi_events.2 # Iraq asks for Westerner's help (this event is received by them)
	title = iraqi_events.2.t
	desc = iraqi_events.2.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.2.o1 # Decide to help
		log = "[GetDateText]: [This.GetName]: iraqi_events.2.o1 executed"
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.90
				has_opinion = { target = IRQ value < 10 }
			}
			modifier = {
				factor = 0.80
				has_opinion = { target = IRQ value < -10 }
			}
			modifier = {
				factor = 0.65
				has_opinion = { target = IRQ value < -30 }
			}
			modifier = {
				factor = 0.40
				has_opinion = { target = IRQ value < -60 }
			}
			modifier = {
				factor = 0.30
				has_opinion = { target = IRQ value < -80 }
			}
			modifier = {
				factor = 0.10
				has_opinion = { target = IRQ value < -90 }
			}
			modifier = {
				factor = 0
				has_opinion = { target = IRQ value < -100 }
			}
		}
		#Gives Iraq +1 temporary offmap factory
		add_to_variable = {
			civilian_aid_to_iraq_count = 1
		}

		set_temp_variable = { int_investment_change = 5 }
		modify_international_investment_effect = yes

		set_temp_variable = { percent_change = 1.5 }
		set_temp_variable = { tag_index = ROOT }
		set_temp_variable = { influence_target = IRQ }
		change_influence_percentage = yes

		set_temp_variable = { treasury_change = -7.50 }
		modify_treasury_effect = yes
	}
	option = {
		name = iraqi_events.2.o2 # Decide not to help
		log = "[GetDateText]: [This.GetName]: iraqi_events.2.o2 executed"
		ai_chance = {
			base = 0.7
		}
		#No effects
	}
}
country_event = {
	id = iraqi_events.3 # Iraq asks Iran for powerplant investments (this event is received by Iran)
	title = iraqi_events.3.t
	desc = iraqi_events.3.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.3.o1 # Decide to help
		log = "[GetDateText]: [This.GetName]: iraqi_events.3.o1 executed"
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.90
				has_opinion = { target = IRQ value < 10 }
			}
			modifier = {
				factor = 0.80
				has_opinion = { target = IRQ value < -10 }
			}
			modifier = {
				factor = 0.65
				has_opinion = { target = IRQ value < -30 }
			}
			modifier = {
				factor = 0.40
				has_opinion = { target = IRQ value < -60 }
			}
			modifier = {
				factor = 0.30
				has_opinion = { target = IRQ value < -80 }
			}
			modifier = {
				factor = 0.10
				has_opinion = { target = IRQ value < -90 }
			}
			modifier = {
				factor = 0
				has_opinion = { target = IRQ value < -100 }
			}
		}
		IRQ = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = fossil_powerplant
					level = 2
					instant_build = yes
				}
			}
			country_event = { id = iraqi_events.4 }
		}

		set_temp_variable = { int_investment_change = 5 }
		modify_international_investment_effect = yes

		set_temp_variable = { percent_change = 1.5 }
		set_temp_variable = { tag_index = ROOT }
		set_temp_variable = { influence_target = IRQ }
		change_influence_percentage = yes
		
		set_temp_variable = { treasury_change = -5 }
		modify_treasury_effect = yes
	}
	option = {
		name = iraqi_events.3.o2 # Decide not to help
		log = "[GetDateText]: [This.GetName]: iraqi_events.3.o2 executed"
		country_event = { id = iraqi_events.5 }
		ai_chance = {
			base = 1.8
		}
	}
}
country_event = {
	id = iraqi_events.4 # Iran accepts Iraq's offer for energy investments
	title = iraqi_events.4.t
	desc = iraqi_events.4.d
	picture = null #Needs picture

	is_triggered_only = yes
	option = {
		name = iraqi_events.4.o1
		log = "[GetDateText]: [This.GetName]: iraqi_events.4.o1 executed"
		#No effects
	}
}
country_event = {
	id = iraqi_events.5 # Iran rejects Iraq's offer for energy investments
	title = iraqi_events.5.t
	desc = iraqi_events.5.d
	picture = null #Needs picture

	is_triggered_only = yes
	option = {
		name = iraqi_events.5.o1
		log = "[GetDateText]: [This.GetName]: iraqi_events.5.o1 executed"
		#No effects
	}
}
country_event = {
	id = iraqi_events.6 # Iraq asks America and Europe for economic investments (this event is received by them)
	title = iraqi_events.6.t
	desc = iraqi_events.6.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.6.o1 # Send engineers
		log = "[GetDateText]: [This.GetName]: iraqi_events.6.o1 executed"
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.90
				has_opinion = { target = IRQ value < 10 }
			}
			modifier = {
				factor = 0.80
				has_opinion = { target = IRQ value < -10 }
			}
			modifier = {
				factor = 0.65
				has_opinion = { target = IRQ value < -30 }
			}
			modifier = {
				factor = 0.40
				has_opinion = { target = IRQ value < -60 }
			}
			modifier = {
				factor = 0.30
				has_opinion = { target = IRQ value < -80 }
			}
			modifier = {
				factor = 0.10
				has_opinion = { target = IRQ value < -90 }
			}
			modifier = {
				factor = 0
				has_opinion = { target = IRQ value < -100 }
			}
		}
		IRQ = {
			custom_effect_tooltip = will_receive_5_percent_construction_speed_TT
			add_to_variable = {
				western_engineers_in_iraq_speed = 0.05
			}
		}

		set_temp_variable = { int_investment_change = 1 }
		modify_international_investment_effect = yes

		set_temp_variable = { percent_change = 0.3 }
		set_temp_variable = { tag_index = ROOT }
		set_temp_variable = { influence_target = IRQ }
		change_influence_percentage = yes
		
		set_temp_variable = { treasury_change = -1 }
		modify_treasury_effect = yes
	}
	option = {
		name = iraqi_events.6.o2 # Decide not to help
		log = "[GetDateText]: [This.GetName]: iraqi_events.6.o2 executed"
		ai_chance = {
			base = 1.7
		}
	}
}
country_event = {
	id = iraqi_events.7 # Iraq asks Syria, Iran, Lebanon and Yemen (if Shia) for investments. instead, gives them some positive modifiers (this event is received by them)
	title = iraqi_events.7.t
	desc = iraqi_events.7.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.7.o1 # Decide to construct Civilian Factory
		log = "[GetDateText]: [This.GetName]: iraqi_events.7.o1 executed"
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.90
				has_opinion = { target = IRQ value < 10 }
			}
			modifier = {
				factor = 0.80
				has_opinion = { target = IRQ value < -10 }
			}
			modifier = {
				factor = 0.65
				has_opinion = { target = IRQ value < -30 }
			}
			modifier = {
				factor = 0.40
				has_opinion = { target = IRQ value < -60 }
			}
			modifier = {
				factor = 0.30
				has_opinion = { target = IRQ value < -80 }
			}
			modifier = {
				factor = 0.10
				has_opinion = { target = IRQ value < -90 }
			}
			modifier = {
				factor = 0
				has_opinion = { target = IRQ value < -100 }
			}
		}
		IRQ = {
			random_owned_controlled_state = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		set_temp_variable = { int_investment_change = 2.5 }
		modify_international_investment_effect = yes

		set_temp_variable = { treasury_change = -3.5 }
		modify_treasury_effect = yes

		add_ideas = IRQ_iraq_economic_aid_to_allies
	}
	option = {
		name = iraqi_events.7.o2 # Decide to construct Civilian Factory
		log = "[GetDateText]: [This.GetName]: iraqi_events.7.o2 executed"
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.90
				has_opinion = { target = IRQ value < 10 }
			}
			modifier = {
				factor = 0.80
				has_opinion = { target = IRQ value < -10 }
			}
			modifier = {
				factor = 0.65
				has_opinion = { target = IRQ value < -30 }
			}
			modifier = {
				factor = 0.40
				has_opinion = { target = IRQ value < -60 }
			}
			modifier = {
				factor = 0.30
				has_opinion = { target = IRQ value < -80 }
			}
			modifier = {
				factor = 0.10
				has_opinion = { target = IRQ value < -90 }
			}
			modifier = {
				factor = 0
				has_opinion = { target = IRQ value < -100 }
			}
		}
		IRQ = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = fossil_powerplant
					level = 1
					instant_build = yes
				}
			}
		}

		set_temp_variable = { int_investment_change = 1 }
		modify_international_investment_effect = yes

		set_temp_variable = { treasury_change = -2.25 }
		modify_treasury_effect = yes

		add_ideas = IRQ_iraq_economic_aid_to_allies
	}
	option = {
		name = iraqi_events.7.o3 # Decide not to help
		log = "[GetDateText]: [This.GetName]: iraqi_events.7.o3 executed"
		country_event = { id = iraqi_events.5 }
		ai_chance = {
			base = 0.8
		}
	}
}
country_event = {
	id = iraqi_events.8 # Iraq asks for Iran's permission to form an economic union
	title = iraqi_events.8.t
	desc = iraqi_events.8.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.8.o1 # Iran accepts
		log = "[GetDateText]: [This.GetName]: iraqi_events.8.o1 executed"
		IRQ = {
			country_event = { id = iraqi_events.9 }
			set_temp_variable = { treasury_change = -15 }
			modify_treasury_effect = yes
		}
		set_temp_variable = { treasury_change = -15 }
		modify_treasury_effect = yes
	}
	option = {
		name = iraqi_events.8.o2 # Iran refuses
		log = "[GetDateText]: [This.GetName]: iraqi_events.8.o2 executed"
		ai_chance = {
			base = 0
		}
		IRQ = { country_event = { id = iraqi_events.10 } }
	}
}
country_event = {
	id = iraqi_events.9 # Iran has accepted Iraq's offer for economic union
	title = iraqi_events.9.t
	desc = iraqi_events.9.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.9.o1 # Iran accepts
		log = "[GetDateText]: [This.GetName]: iraqi_events.9.o1 executed"
		set_country_flag = economic_union_formed_iraq
	}
}
country_event = {
	id = iraqi_events.10 # Iran has declined Iraq's offer for economic union
	title = iraqi_events.10.t
	desc = iraqi_events.10.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.10.o1 # Iran accepts
		log = "[GetDateText]: [This.GetName]: iraqi_events.10.o1 executed"
		#No Effects
	}
}
country_event = {
	id = iraqi_events.11 # Iraq sends an offer for countries to join its economic union
	title = iraqi_events.11.t
	desc = iraqi_events.11.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.11.o1 # Accept
		log = "[GetDateText]: [This.GetName]: iraqi_events.11.o1 executed"
		set_country_flag = joined_iraqi_economic_union
		add_dynamic_modifier = {
			modifier = IRQ_economic_union_member
		}
	}
	option = {
		name = iraqi_events.11.o2 # Deny
		log = "[GetDateText]: [This.GetName]: iraqi_events.11.o2 executed"
		IRQ = { country_event = { id = iraqi_events.12 } }
	}
}
country_event = {
	id = iraqi_events.12 # Country refuses to join the economic union
	title = iraqi_events.12.t
	desc = iraqi_events.12.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.12.o1 # Iran accepts
		log = "[GetDateText]: [This.GetName]: iraqi_events.12.o1 executed"
		#No Effects
	}
}
news_event = {
	id = iraqi_events.13 # World event that the invited country has join the economic union
	title = {
		text = iraqi_events.13.t
	}
	desc = {
		text = iraqi_events.13.d
	}

	picture = null #Needs Picture

	is_triggered_only = yes
	major = yes

	option = {
		name = iraqi_events.13.o1
		log = "[GetDateText]: [This.GetName]: iraqi_events.13.o1 executed"
	}
}
country_event = {
	id = iraqi_events.14 # You are kicked out of the economic union
	title = iraqi_events.14.t
	desc = iraqi_events.14.d
	picture = null #Needs picture

	is_triggered_only = yes

	option = {
		name = iraqi_events.14.o1
		log = "[GetDateText]: [This.GetName]: iraqi_events.14.o1 executed"
		#No Effects
	}
}

# Iraq war events
country_event = {
	id = iraq_war.1 # USA is petitioning a war against us!
	title = iraq_war.1.t
	desc = iraq_war.1.d
	picture = null

	is_triggered_only = yes
	# Time to prepare for war
	option = {
		name = iraq_war.1.a
		log = "[GetDateText]: [This.GetName]: iraq_war.1.a executed"
		set_country_flag = IRQ_prepare_for_usa_war
		custom_effect_tooltip = IRQ_prepare_for_war
		# Unlock decisions to allow for fortifications, new divisions, manpower, allies, etc.
	}
	# Yeah I think it's time to go somewhere else..
	option = {
		name = iraq_war.1.b
		log = "[GetDateText]: [This.GetName]: iraq_war.1.b executed"
		set_country_flag = IRQ_interim_government
		custom_effect_tooltip = IRQ_saddam_leaves_interim_govt
		hidden_effect = {
			set_temp_variable = { party_index = 13 }
			set_temp_variable = { party_popularity_increase = 1.00 }
			set_temp_variable = { temp_outlook_increase = 1.00 }
			add_relative_party_popularity = yes
			hidden_effect = {
				clear_array = ruling_party
				clear_array = gov_coalition_array
				add_to_array = { ruling_party = 13 }
				update_government_coalition_strength = yes
				set_coalition_drift = yes
				set_ruling_leader = yes
				set_leader = yes
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
			}
		}
	}
}
# (For USA)
country_event = {
	id = iraq_war.11 # Saddam flees Iraq!
	title = iraq_war.11.t
	desc = iraq_war.11.d
	picture = null

	is_triggered_only = yes
	#
	option = {
		name = iraq_war.11.a
		log = "[GetDateText]: [This.GetName]: iraq_war.11.a executed"
	}
}
# (For USA)
country_event = {
	id = iraq_war.2 # Saddams Ultimatum
	title = iraq_war.2.t
	desc = iraq_war.2.d
	picture = null

	is_triggered_only = yes
	# Demand that Saddam Hussein leaves the nation
	option = {
		name = iraq_war.2.a
		log = "[GetDateText]: [This.GetName]: iraq_war.2.a executed"
		custom_effect_tooltip = IRQ_gets_ultimatum
		newline = yes
		IRQ = {
			country_event = {
				id = iraq_war.3
			}
		}
	}
	# No, dictators can't be negotiated with
	option = {
		name = iraq_war.2.b
		log = "[GetDateText]: [This.GetName]: iraq_war.2.b executed"
		set_country_flag = Operation_iraqi_freedom
		create_wargoal = {
			target = IRQ
			type = puppet_wargoal_focus
		}
		every_country = {
			limit = { is_in_array = { global.ct_states = THIS } }
			set_temp_variable = { rad_change = 10 }
			modify_radicalization_effect = yes
		}
		hidden_effect = { news_event = { id = wotnews.11 hours = 6 } }
	}
}
# (For Iraq)
country_event = {
	id = iraq_war.3 # U.S. President sends us an ultimatum
	title = iraq_war.3.t
	desc = iraq_war.3.d
	picture = null

	is_triggered_only = yes
	# Let them come
	option = {
		name = iraq_war.3.a
		log = "[GetDateText]: [This.GetName]: iraq_war.3.a executed"
		USA = {
			country_event = {
				id = iraq_war.4
				days = 2
			}
		}
	}
	# Shit, pack the bags we're going to Jordan!
	option = {
		name = iraq_war.3.b
		log = "[GetDateText]: [This.GetName]: iraq_war.3.b executed"
		set_country_flag = IRQ_interim_government
		custom_effect_tooltip = IRQ_saddam_leaves_interim_govt
		hidden_effect = {
			set_temp_variable = { party_index = 13 }
			set_temp_variable = { party_popularity_increase = 1.00 }
			set_temp_variable = { temp_outlook_increase = 1.00 }
			add_relative_party_popularity = yes
			hidden_effect = {
				clear_array = ruling_party
				clear_array = gov_coalition_array
				add_to_array = { ruling_party = 13 }
				update_government_coalition_strength = yes
				set_coalition_drift = yes
				set_ruling_leader = yes
				set_leader = yes
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
			}
		}
	}
}
# (For USA)
country_event = {
	id = iraq_war.4 # Saddam refuses to leave the nation
	title = iraq_war.4.t
	desc = iraq_war.4.d
	picture = null

	is_triggered_only = yes
	# The operation shall commence..
	option = {
		name = iraq_war.4.a
		log = "[GetDateText]: [This.GetName]: iraq_war.4.a executed"
		set_country_flag = Operation_iraqi_freedom
		create_wargoal = {
			target = IRQ
			type = puppet_wargoal_focus
		}
		every_country = {
			limit = { is_in_array = { global.ct_states = THIS } }
			set_temp_variable = { rad_change = 10 }
			modify_radicalization_effect = yes
		}
		hidden_effect = { news_event = { id = wotnews.11 hours = 6 } }
	}
}