#################
### EU events ### for EU voting events see EU_voting_events.txt
#################

add_namespace = EUevent
add_namespace = EUcheat

country_event = {
	id = EUcheat.1
	title = EUcheat.1.t
	desc = EUcheat.1.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUcheat.1.a
		set_global_flag = EU_voting_cheat_yes
	}
	option = { #b
		name = EUcheat.1.b
		set_global_flag = EU_voting_cheat_no
	}
	option = { #c
		name = EUcheat.1.c
		clr_global_flag = EU_voting_cheat_yes
		clr_global_flag = EU_voting_cheat_yes		
	}
}

###SOTEU

country_event = {
	id = EUevent.1
	title = EUevent.1.t
	desc = EUevent.1.d
	
	picture = GFX_eu

	is_triggered_only = yes
	
	option = {
		set_variable = {	
			var = global.var_EUpopTotal
			value = 0
		}				
		every_country = {
			limit = {
				has_idea = EU_member
			}
				add_to_variable = {
					var = global.var_EUpopTotal
					value = THIS.max_manpower_k
				}
		}

		set_variable = {	
			var = global.var_EUmemberstatesTotal
			value = 0
		}				
		every_country = {
			limit = { 
				has_idea = EU_member 
			}
				add_to_variable = {
					var = global.var_EUmemberstatesTotal
					value = 1
				}
		}	
	
		every_country = {
			if = {
				limit = {
					has_idea = EU_member
				}
				set_variable = {
					var = THIS.var_EUpopRatio
					value = 0
				}
				add_to_variable = {
					var = THIS.var_EUpopRatio
					value = THIS.max_manpower_k
				}
				divide_variable = {
					var = THIS.var_EUpopRatio
					value = global.var_EUpopTotal
				}
			}
		}
		
		###Europeanism Update
		set_variable = {	
			var = global.var_europeanism
			value = 0
		}				
		
		every_country = {
			if = {
				limit = {
					has_idea = EU_member
				}
				set_variable = {
					var = THIS.var_proeuropean
					value = 1
				}
				subtract_from_variable = {
					var = THIS.var_proeuropean
					value = THIS.eurosceptic
				}
				multiply_variable = {
					var = THIS.var_proeuropean
					value = max_manpower_k
				}
			}
		}
		every_country = {
			if = {
				limit = { 
					has_idea = EU_member 
				}
				add_to_variable = {
					var = global.var_europeanism
					value = THIS.var_proeuropean
				}
			}
		}	
			
		divide_variable = {
			var = global.var_europeanism
			value = global.var_EUpopTotal			
		}
		###Europeanism Update End
	}
}

### EU–Turkey deal

country_event = {
	id = EUevent.2
	title = EUevent.2.t
	desc = EUevent.2.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUevent.2.a
		###
	}
}

### United States of Europe

country_event = {
	id = EUevent.3
	title = EUevent.3.t
	desc = EUevent.3.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUevent.3.a
		every_country = {
			limit = {  has_idea = EU_member }
			country_event = EUevent.4
		}
		ROOT = { set_cosmetic_tag = USoE }
	}
}

country_event = {
	id = EUevent.4
	title = EUevent.4.t
	desc = EUevent.4.d
	
	#picture = GFX_eu

	is_triggered_only = yes
	
	option = { #a
		name = EUevent.4.a
			if = {
				limit = {
					NOT = { original_tag = FROM }
				}			
				FROM = {
					annex_country = {
						target = ROOT
						transfer_troops = yes
					}
				}
			}
	}
}

