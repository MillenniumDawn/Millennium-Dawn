add_namespace = USA

#New Years - Intro Event
country_event = {
    id = USA.1
    title = USA.1.t
    desc = USA.1.d
    picture = GFX_new_years_2017_usa

    fire_only_once = yes

    is_triggered_only = yes

    option = {
        name = USA.1.o1
        news_event = {
        }
    }
}
#Inaguration
country_event = {
	id = USA.2
	title = USA.2.t
	desc = USA.2.d
	picture = GFX_Trump_Inaug
	
	fire_only_once = yes
	
	trigger = {
		tag = USA
		date > 2017.1.19
		date < 2017.1.21
	}
	
	option = {
		name = USA.2.o1
		news_event = {
		}
	}
}
#berkley riots
country_event = {
	id = USA.3
	title = USA.3.t
	desc = USA.3.d
	picture = GFX_Berkley_Riot
	
	fire_only_once = yes
	
	trigger = {
		tag = USA
		date > 2017.2.1
		date < 2017.4.27
	}
	
	option = {
		name = USA.3.o1
		add_political_power = -5
		news_event = {
	
		}
	}
}
#SuperBowl
country_event = {
	id = USA.4
	title = USA.4.t
	desc = USA.4.d
	picture = GFX_Super_Bowl_LI
	
	fire_only_once = yes
	
	trigger = {
		tag = USA
		date > 2017.2.4
		date < 2017.2.6
	}
	
	option = {
		name = USA.4.o1
		news_event = {
		}
	}
}
#Major Industry stays in the US
country_event = {
	id = USA.5
	title = USA.5.t
	desc = USA.5.d
	picture = GFX_Trump_Thumbs_Up
	
	fire_only_once = yes
	
	trigger = {
		tag = USA
		has_government = nationalist
		date > 2017.2.1
		date < 2017.2.10
	}
	
	option = {
		name = USA.5.o1
		ai_chance = { factor = 0 }
        random_owned_state = { add_extra_state_shared_building_slots = 1 }

	}
}

#Agressor against Rio-pact member - hidden event no need for localisation/pics
country_event = {
	id = USA.6
	title = USA.6.t
	desc = USA.6.d
	#picture = GFX_USA_6
	
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		save_event_target_as = being_attacked
		FROM = { save_event_target_as = agressor }
		every_country = {
			limit = {
				has_idea = rio_pact_member
			}
			country_event = { id = USA.7 }
		}
	}
	
	option = {
		name = USA.6.a
		
	}
}

#RIO-Pact members decide to intervene or not
country_event = {
	id = USA.7
	title = USA.7.t
	desc = USA.7.d
	#picture = GFX_USA_7

	is_triggered_only = yes
	
	#Intervene, send an ultimatum peace out or war
	option = {
		name = USA.7.a
	
		#Need to use FROM FROM scope since the one sending the event is the nation under attack
		ai_chance = {
			factor = 20			
			modifier = {
				factor = 0.2
				event_target:agressor = {
					strength_ratio = {
						tag = this
						ratio > 0.8
					}
				}
			}		
		}
		set_country_flag = RIO_Pact_War_Member
		#event_target:agressor = { country_event = { id = USA.8 days = 2 }}
	}

	#Don't Intervene - leave rio-pact
	option = {
		name = USA.17.b
		remove_ideas = rio_pact_member
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				event_target:agressor = {
					strength_ratio = {
						tag = this
						ratio < 0.8
					}
				}
			}
		}
	}
}
# Agressors response to RIO-Pact members intervening - occours aproximately 20 days after the war starts
country_event = {
	id = USA.8
	title = USA.8.t
	desc = USA.8.d
	#picture = GFX_report_event_soldiers_marching

	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_country_flag = RIO_Pact_War_Member
		}
	}
	
	
	#Go to war with RIO-Pact members
	option = { 
		name = USA.8.a

		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.5
				strength_ratio = {
					tag = FROM
					ratio < 0.7
				}
				is_in_faction = yes
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio > 0.7
				}
			}
		}

		event_target:being_attacked = {
			every_country = {
				limit = { has_country_flag = RIO_Pact_War_Member }
				add_to_war = {
					targeted_alliance = PREV
					enemy = ROOT
				}
				clr_country_flag = RIO_Pact_War_Member
			}
		}
		
		# hidden_effect = {
			# news_event = { id = news.157 days = 2 }
		# }
	}

	#Back down & white peace RIO Pact members
	option = {
		name = USA.8.b

		ai_chance = { 
			factor = 10
			modifier = {
				factor = 10
				strength_ratio = {
					tag = USA
					ratio < 0.5
				}
				is_in_faction = no
			}			
		}
		event_target:being_attacked = { white_peace = event_target:agressor
			hidden_effect = {
				every_country = {
					limit = { has_country_flag = RIO_Pact_War_Member }
					clr_country_flag = RIO_Pact_War_Member
				}
			}
		}
	}
}
