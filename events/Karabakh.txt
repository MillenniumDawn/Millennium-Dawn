add_namespace = karabakh
add_namespace = karabakh_news

# Armenia Attacks from Stepanakert
country_event = {
	id = karabakh.1

	title = karabakh.1.t
	desc = karabakh.1.d
	picture = GFX_arm_war_decl

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.1.a executed"
		name = karabakh.1.a
		ai_chance = {
			base = 10
		}
	}
}

country_event = {
	id = karabakh.2

	title = karabakh.2.t
	desc = karabakh.2.d
	picture = GFX_win_armenian

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.2.a executed"
		name = karabakh.2.a
		if = {
			limit = {
				original_tag = ARM
			}
			add_war_support = 0.05
			add_political_power = 100
			army_experience = 35
		}
		if = {
			limit = {
				original_tag = AZE
			}
			add_war_support = -0.05
			add_political_power = -100
		}
		ai_chance = {
			base = 10
		}
	}
}

country_event = {
	id = karabakh.3

	title = karabakh.3.t
	desc = karabakh.3.d
	picture = GFX_win_azerbaijani

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.3.a executed"
		name = karabakh.3.a
		if = {
			limit = {
				original_tag = AZE
			}
			add_war_support = 0.05
			add_political_power = 50
			army_experience = 35
		}
		if = {
			limit = {
				original_tag = ARM
			}
			add_war_support = -0.08
			add_political_power = -150
		}
		ai_chance = {
			base = 10
		}
	}
}

country_event = {
	id = karabakh.4

	title = karabakh.4.t
	desc = karabakh.4.d
	picture = GFX_win_azerbaijani

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.4.a executed"
		name = karabakh.4.a
		if = {
			limit = {
				original_tag = AZE
			}
			add_war_support = -0.03
		}
		if = {
			limit = {
				original_tag = ARM
			}
			add_war_support = -0.03
		}
		ai_chance = {
			base = 10
		}
	}
}

# Azeris Attack Stepanakert

country_event = {
	id = karabakh.5

	title = karabakh.5.t
	desc = karabakh.5.d
	picture = GFX_azerbaijan_fight

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.5.a executed"
		name = karabakh.5.a
		ai_chance = {
			base = 10
		}
	}
}

country_event = {
	id = karabakh.6

	title = karabakh.6.t
	desc = karabakh.6.d
	picture = GFX_win_azerbaijani

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.2.a executed"
		name = karabakh.6.a
		if = {
			limit = {
				original_tag = AZE
			}
			add_war_support = 0.05
			add_political_power = 100
			army_experience = 35
		}
		if = {
			limit = {
				original_tag = ARM
			}
			add_war_support = -0.05
			add_political_power = -100
		}
		ai_chance = {
			base = 10
		}
	}
}

country_event = {
	id = karabakh.7

	title = karabakh.7.t
	desc = karabakh.7.d
	picture = GFX_arm_nkr_army

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.7.a executed"
		name = karabakh.7.a
		if = {
			limit = {
				original_tag = ARM
			}
			add_war_support = 0.05
			add_political_power = 50
			army_experience = 35
		}
		if = {
			limit = {
				original_tag = AZE
			}
			add_war_support = -0.08
			add_political_power = -150
		}
		ai_chance = {
			base = 10
		}
	}
}

#Drone recon succ
country_event = {
	id = karabakh.8

	title = karabakh.8.t
	desc = karabakh.8.d
	picture = GFX_AFG_Drone_Event

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.8.a executed"
		name = karabakh.8.a
		if = {
			limit = {
				original_tag = ARM
			}
			random_list = {
				20 = {
					add_intel = {
						target = AZE
						civilian_intel = 1
						army_intel = 2
						navy_intel = 0
						airforce_intel = 1
					}
				}
				20 = {
					add_intel = {
						target = AZE
						civilian_intel = 2
						army_intel = 0
						navy_intel = 0
						airforce_intel = 1
					}
				}
				20 = {
					add_intel = {
						target = AZE
						civilian_intel = 1
						army_intel = 1
						navy_intel = 0
						airforce_intel = 1
					}
				}
				20 = {
					add_intel = {
						target = AZE
						civilian_intel = 0
						army_intel = 3
						navy_intel = 1
						airforce_intel = 1
					}
				}
				20 = {
					add_intel = {
						target = AZE
						civilian_intel = 3
						army_intel = 0
						navy_intel = 1
						airforce_intel = 2
					}
				}
			}
		}
		if = {
			limit = {
				original_tag = AZE
			}
			random_list = {
				20 = {
					add_intel = {
						target = ARM
						civilian_intel = 1
						army_intel = 2
						navy_intel = 0
						airforce_intel = 1
					}
				}
				20 = {
					add_intel = {
						target = ARM
						civilian_intel = 2
						army_intel = 0
						navy_intel = 0
						airforce_intel = 1
					}
				}
				20 = {
					add_intel = {
						target = ARM
						civilian_intel = 1
						army_intel = 1
						navy_intel = 0
						airforce_intel = 1
					}
				}
				20 = {
					add_intel = {
						target = ARM
						civilian_intel = 0
						army_intel = 3
						navy_intel = 1
						airforce_intel = 1
					}
				}
				20 = {
					add_intel = {
						target = ARM
						civilian_intel = 3
						army_intel = 0
						navy_intel = 1
						airforce_intel = 2
					}
				}
			}
		}
		ai_chance = {
			base = 10
		}
	}
}
#Drone recon fail
country_event = {
	id = karabakh.9

	title = karabakh.9.t
	desc = karabakh.9.d
	picture = GFX_AFG_Drone_Event

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.9.a executed"
		name = karabakh.9.a
		add_war_support = -0.05
		set_temp_variable = { treasury_change = -2 }
		modify_treasury_effect = yes
		if = {
			limit = {
				original_tag = AZE
			}
			ARM = {
				country_event = karabakh.10
			}
		}
		if = {
			limit = {
				original_tag = ARM
			}
			AZE = {
				country_event = karabakh.10
			}
		}
		ai_chance = {
			base = 10
		}
	}
}
#Notify oppos
country_event = {
	id = karabakh.10

	title = karabakh.10.t
	desc = karabakh.10.d
	picture = GFX_AFG_Drone_Event

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.10.a executed"
		name = karabakh.10.a
		add_war_support = 0.05
		air_experience = 15
		ai_chance = {
			base = 10
		}
	}
}
###########NEGOTIATIONS
country_event = {
	id = karabakh.10

	title = karabakh.10.t
	desc = karabakh.10.d
	picture = GFX_armaze_negot

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.10.a executed"
		name = karabakh.10.a
		AZE = {
			country_event = karabakh.11
		}
		ai_chance = {
			base = 4
		}
	}
	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.10.b executed"
		name = karabakh.10.b
		AZE = {
			country_event = karabakh.12
		}
		ai_chance = {
			base = 6
		}
	}
}
country_event = {
	id = karabakh.11

	title = karabakh.11.t
	desc = karabakh.11.d
	picture = GFX_armaze_negot

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.11.a executed"
		name = karabakh.11.a
		news_event = karabakh_news.2
		add_stability = 0.3
		set_country_flag = karabakh_regulated_flag
		transfer_state = 1037
		1037 = {
			remove_core_of = NKR
			remove_core_of = ARM
		}
		ARM = {
			set_country_flag = karabakh_regulated_flag
			annex_country = {
				target = NKR
				transfer_troops = yes
			}
		}
		710 = {
			remove_core_of = AZE
		}
		1036 = {
			remove_core_of = AZE
		}
		diplomatic_relation = {
			country = ARM
			relation = non_aggression_pact
			active = no
		}
		ai_chance = {
			base = 6
		}
	}
	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.11.b executed"
		name = karabakh.11.b
		ARM = {
			country_event = karabakh.13
		}
		ai_chance = {
			base = 2
		}
	}
}

country_event = {
	id = karabakh.12

	title = karabakh.12.t
	desc = karabakh.12.d
	picture = GFX_armaze_negot

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.12.a executed"
		name = karabakh.12.a
		add_threat = 1
		set_country_flag = {
			flag = negot_recent_was
			days = 300
			value = 1
		}
		set_country_flag =  gu_first_stage
		ARM = {
			country_event = karabakh.13
			set_country_flag = {
				flag = negot_recent_was
				days = 300
				value = 1
			}
			set_country_flag =  gu_first_stage
		}
		custom_effect_tooltip = next_negot_stage_tt
		ai_chance = {
			base = 6
		}
	}
	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.12.b executed"
		name = karabakh.12.b
		news_event = karabakh_news.2
		add_stability = 0.3
		add_political_power = -150
		set_country_flag = karabakh_regulated_flag
		ARM = {
			set_country_flag = karabakh_regulated_flag
			annex_country = {
				target = NKR
				transfer_troops = yes
			}
		}
		710 = {
			remove_core_of = AZE
		}
		1036 = {
			remove_core_of = AZE
		}
		1037 = {
			remove_core_of = AZE
		}
		diplomatic_relation = {
			country = ARM
			relation = non_aggression_pact
			active = no
		}
		ai_chance = {
			base = 0
		}
	}
}

country_event = {
	id = karabakh.13

	title = karabakh.13.t
	desc = karabakh.13.d
	picture = GFX_armaze_negot

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: karabakh.12.a executed"
		name = karabakh.13.a
		custom_effect_tooltip = next_negot_stage_tt
		ai_chance = {
			base = 6
		}
	}
}

news_event = {
	id = karabakh_news.2
	title = karabakh_news.2.t
	desc = karabakh_news.2.d
	picture = GFX_news_artsakh
	is_triggered_only = yes
	option = {
		name = karabakh_news.o1
		log = "[GetDateText]: [This.GetName]: karabakh_news.o1 executed"
	}
}