add_namespace = algerian_events

# 379 - Mzab
country_event = {
    id = algerian_events.201
    title = algerian_events.201.t
    desc = algerian_events.201.d
    picture = GFX_alg_hirak3
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_mzab_fell_recently }
        NOT = { 379 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.201.a
        log = "[GetDateText]: Mzab has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        379 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# 380 - Aurès
country_event = {
    id = algerian_events.202
    title = algerian_events.202.t
    desc = algerian_events.202.d
    picture = GFX_alg_hirak2
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_aures_fell_recently }
        NOT = { 380 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.202.a
        log = "[GetDateText]: Aurès has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        380 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# 381 - Tamanrasset
country_event = {
    id = algerian_events.203
    title = algerian_events.203.t
    desc = algerian_events.203.d
    picture = GFX_alg_hirak4
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_tamanrasset_fell_recently }
        NOT = { 381 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.203.a
        log = "[GetDateText]: Tamanrasset has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        381 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# 382 - Grand Erg Occidental
country_event = {
    id = algerian_events.204
    title = algerian_events.204.t
    desc = algerian_events.204.d
    picture = GFX_alg_hirak4
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_granderg_fell_recently }
        NOT = { 382 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.204.a
        log = "[GetDateText]: Grand Erg Occidental has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        382 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# 383 - Algerian Atlas
country_event = {
    id = algerian_events.205
    title = algerian_events.205.t
    desc = algerian_events.205.d
    picture = GFX_alg_hirak1
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_atlas_fell_recently }
        NOT = { 383 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.205.a
        log = "[GetDateText]: Algerian Atlas has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        383 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# 384 - Constantinois
country_event = {
    id = algerian_events.206
    title = algerian_events.206.t
    desc = algerian_events.206.d
    picture = GFX_alg_hirak1
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_constantinois_fell_recently }
        NOT = { 384 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.206.a
        log = "[GetDateText]: Constantinois has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        384 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# 385 - Kabylia
country_event = {
    id = algerian_events.207
    title = algerian_events.207.t
    desc = algerian_events.207.d
    picture = GFX_alg_hirak
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_kabylia_fell_recently }
        NOT = { 385 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.207.a
        log = "[GetDateText]: Kabylia has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        385 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# 386 - Algérois
country_event = {
    id = algerian_events.208
    title = algerian_events.208.t
    desc = algerian_events.208.d
    picture = GFX_alg_hirak2
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_algerois_fell_recently }
        NOT = { 386 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.208.a
        log = "[GetDateText]: Algérois has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        386 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# 387 - Oranais
country_event = {
    id = algerian_events.209
    title = algerian_events.209.t
    desc = algerian_events.209.d
    picture = GFX_alg_hirak4
    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_oranais_fell_recently }
        NOT = { 387 = { has_state_flag = ALG_locals_swayed } }
    }
    option = {
        name = algerian_events.209.a
        log = "[GetDateText]: Oranais has fallen to protesters"
        custom_effect_tooltip = ALG_state_falls_TT
        387 = { set_state_flag = ALG_locals_swayed }
        add_to_variable = { var = ALG_protest_exhaustion value = 1 }
        if = {
            limit = { has_power_balance = { id = algeria_power_balance } }
            add_power_balance_value = { id = algeria_power_balance value = -0.05 }
        }
    }
}

# Protests Suppressed
country_event = {
	id = algerian_events.200
	title = algerian_events.200.t
	desc = algerian_events.200.d
	picture = GFX_alg_hirak5
	is_triggered_only = yes

	option = {
		name = algerian_events.200.a
		log = "[GetDateText]: [This.GetName]:algerian_events.200.a executed"
		hidden_effect = {
			random_list = {
				70 = {
					add_to_variable = { var = ALG_protest_exhaustion value = 1 }
				}
				30 = {
					add_to_variable = { var = ALG_protest_exhaustion value = -2 }
				}
			}
		}
		if = {
			limit = {
				has_power_balance = {
					id = algeria_power_balance
				}
			}
			add_power_balance_value = {
				id = algeria_power_balance
				value = 0.02
			}
		}
	}
}

# Suppression Backfires
country_event = {
	id = algerian_events.2015
	title = algerian_events.2015.t
	desc = algerian_events.2015.d
	picture = GFX_alg_hirak6
	is_triggered_only = yes

	option = {
		name = algerian_events.2015.a
		log = "[GetDateText]: [This.GetName]:algerian_events.2015.a executed"
		if = {
			limit = {
				has_power_balance = {
					id = algeria_power_balance
				}
			}
			add_power_balance_value = {
				id = algeria_power_balance
				value = -0.01
			}
		}
	}
}

# End of Protests
country_event = {
	id = algerian_events.2025
	title = algerian_events.2025.t
	desc = algerian_events.2025.d
	picture = GFX_alg_hirak6
	is_triggered_only = yes

	option = {
		name = algerian_events.2025.a
		log = "[GetDateText]: [This.GetName]:algerian_events.2025.a executed"
		clr_country_flag = ALG_protests_ongoing
		clear_variable = ALG_protest_exhaustion
		every_owned_state = {
			clr_state_flag = ALG_locals_swayed
		}
		if = {
			limit = {
				has_power_balance = {
					id = algeria_power_balance
				}
			}
			add_power_balance_value = {
				id = algeria_power_balance
				value = 0.05
			}
		}
	}
}
country_event = {
    id = algerian_events.300
    title = algerian_events.300.t
    desc = algerian_events.300.d
    picture = GFX_algerian_protests1

    is_triggered_only = yes
    trigger = {
        NOT = { has_country_flag = ALG_protests_ongoing }
    }

    option = {
        name = algerian_events.300.a # Downplay unrest
        add_stability = -0.03
        add_popularity = { ideology = communism popularity = 0.02 } # regime consolidates
    }
    option = {
        name = algerian_events.300.b # Protests escalate
        custom_effect_tooltip = ALG_may_start_protests_TT
        hidden_effect = {
            country_event = { id = algerian_events.301 days = 10 }
        }
    }
}
country_event = {
    id = algerian_events.301
    title = algerian_events.301.t
    desc = algerian_events.301.d
    picture = GFX_algerian_protests1

    is_triggered_only = yes

    option = {
        name = algerian_events.301.a
        set_country_flag = ALG_protests_ongoing
        hidden_effect = {
            news_event = { id = algerian_events.230 days = 7 }
        }
    }
}
news_event = {
    id = algerian_events.230
    title = algerian_events.230.t
    desc = algerian_events.230.d
    picture = GFX_Algerian_CW
    is_triggered_only = yes
    major = yes

    option = {
        name = algerian_events.230.a
    }
}


