add_namespace = morocco
add_namespace = morocco_bop
add_namespace = morocco_focus
# Morocco Focus Tree

# 400 - Random Yearly event

# 2003 - Casablanca Bombings
country_event = {
	id = morocco.400
	title = morocco.400.t
	desc = morocco.400.d
	# TODO: Add an event image here
	is_triggered_only = yes

	# Truly a Tragedy
	option = {
		name = morocco.400.a
		log = "[GetDateText]: [This.GetName]: event morocco.400.a executed"
		set_party_index_to_ruling_party = yes
		set_temp_variable = { party_popularity_increase = -0.02 }
		set_temp_variable = { temp_outlook_increase = -0.02 }
		add_relative_party_popularity = yes

		set_temp_variable = { party_index = 11 }
		set_temp_variable = { party_popularity_increase = 0.03 }
		set_temp_variable = { temp_outlook_increase = 0.03 }
		add_relative_party_popularity = yes

		add_stability = -0.04

		set_temp_variable = { rad_change = 5 }
		modify_radicalization_effect = yes
		set_temp_variable = { threat_change = 3 }
		modify_terror_threat_effect = yes

		ai_chance = {
			base = 1
		}
	}

	# Pay for the Funerals
	option = {
		name = morocco.400.b
		log = "[GetDateText]: [This.GetName]: event morocco.400.b executed"
		set_party_index_to_ruling_party = yes
		set_temp_variable = { party_popularity_increase = 0.02 }
		set_temp_variable = { temp_outlook_increase = 0.02 }
		add_relative_party_popularity = yes

		set_temp_variable = { party_index = 11 }
		set_temp_variable = { party_popularity_increase = 0.01 }
		set_temp_variable = { temp_outlook_increase = 0.01 }
		add_relative_party_popularity = yes

		add_stability = -0.02

		set_temp_variable = { treasury_change = gdp_total }
		multiply_temp_variable = { treasury_change = -0.01 }
		modify_treasury_effect = yes

		set_temp_variable = { rad_change = -3 }
		modify_radicalization_effect = yes
		set_temp_variable = { threat_change = 1 }
		modify_terror_threat_effect = yes

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_active_mission = bankruptcy_incoming_collapse
			}
		}
	}
}

# Morocco Balance of Power
# The Title of the King
country_event = {
	id = morocco_bop.1
	title = morocco_bop.1.t
	desc = morocco_bop.2.d
	is_triggered_only = yes
	trigger = {
		original_tag = MOR
	}

	# Remain the King
	option = {
		name = morocco_bop.1.a
		log = "[GetDateText]: [This.GetName]: event morocco_bop.1.a executed"
		set_country_flag = MOR_the_title_of_king

		ai_chance = {
			base = 1
		}
	}

	# Take the Title of Sultan
	option = {
		name = morocco_bop.1.b
		log = "[GetDateText]: [This.GetName]: event morocco_bop.1.b executed"
		set_country_flag = MOR_the_title_of_sultan

		ai_chance = {
			base = 1
		}
	}

	# Take the Title of Shah
	option = {
		name = morocco_bop.1.c
		log = "[GetDateText]: [This.GetName]: event morocco_bop.1.c executed"
		trigger = {
			OR = {
				PER = { has_completed_focus = PER_rastakhiz_empowerment }
				nationalist_monarchists_are_in_power = yes
			}
			PER = { has_completed_focus = PER_the_revolution }
		}
		set_country_flag = MOR_the_title_of_shah

		ai_chance = {
			base = 1
		}
	}

	# Take the Title of Caliph
	option = {
		name = morocco_bop.1.e
		log = "[GetDateText]: [This.GetName]: event morocco_bop.1.e executed"
		set_country_flag = MOR_the_title_of_caliph

		ai_chance = {
			base = 1
		}
	}
}

# The Role of the King
country_event = {
	id = morocco_bop.2
	title = morocco_bop.2.t
	desc = morocco_bop.2.d
	is_triggered_only = yes
	trigger = {
		original_tag = MOR
	}

	# An Active Role
	option = {
		name = morocco_bop.2.a
		log = "[GetDateText]: [This.GetName]: event morocco_bop.2.a executed"
		set_country_flag = MOR_king_an_active_role_in_government

		ai_chance = {
			base = 1
		}
	}

	# A Hybrid Role
	option = {
		name = morocco_bop.2.b
		log = "[GetDateText]: [This.GetName]: event morocco_bop.2.b executed"
		set_country_flag = MOR_king_a_hybrid_role_in_government

		ai_chance = {
			base = 1
		}
	}

	# The Parliament Above All
	option = {
		name = morocco_bop.2.c
		log = "[GetDateText]: [This.GetName]: event morocco_bop.2.c executed"
		set_country_flag = MOR_king_the_parliament_role_in_government

		ai_chance = {
			base = 1
		}
	}
}