# categories

#ETH_eritrea_category = {
#	icon = GFX_decision_generic_eritrea
#
#	allowed = {
#		original_tag = ETH
#	}
#	visible = {
#		has_country_flag = EPLF_formed_again
#	}
#}

#ETH_eritrea_1_category = {
#	icon = GFX_decision_generic_eritrea
#
#	allowed = {
#		original_tag = ETH
#	}
#	visible = {
#		NOT = { country_exists = ERI }
#		OR = {
#			controls_state = 228
#			controls_state = 229
#		}
#		has_country_flag = EPLF_formed_again
#		has_completed_focus = ETH_eritrea_dissolve_assembly
#	}
#}



# decisions proper

ETH_eritrea_category = {
	ETH_destroy_sudan_base = {

		icon = generic_decision

		available = {
			divisions_in_state = {
				state = 220
				size > 2
			}
			has_completed_focus = ETH_eritrea_tackle_seperatists
		}

		cost = 50

		highlight_states = { state = 220 }

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETH_destroy_sudan_base"
			activate_mission = ETH_sudan_mission
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 200
				divisions_in_state = {
					state = 220
					size > 2
				}
			}
		}
	}

	ETH_sudan_mission = {
		icon = generic_decision

		activation = { always = no }
		visible = { always = no }

		days_mission_timeout = 120

		activation = {
			always = no #Triggered from effect
		}

		cancel_trigger = {
			divisions_in_state = {
				state = 220
				size < 2
			}
		}

		highlight_states = {
			state = 220
		}

		is_good = yes

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout ETH_sudan_mission"
			custom_effect_tooltip = ETH_sudan_elf_tt
			clr_country_flag = EPLF_formed_again
		}
	}

	ETH_strenghten_outposts_1 = {

		icon = decision_fortification

		fire_only_once = yes

		available = {
			has_country_flag = EPLF_formed_again
			has_completed_focus = ETH_eritrea_tackle_seperatists
			num_of_civilian_factories_available_for_projects > 3
		}

		visible = {
			tag = ETH
			has_country_flag = EPLF_formed_again
			OR = {
				AND = {
					owns_state = 229
					controls_state = 229
					owns_state = 228
					controls_state = 228
				}
				ERI = { is_puppet_of = ETH }
			}
			NOT = { has_idea = outposts_strenghtened_2 }
			NOT = { has_idea = outposts_strenghtened_3 }
			NOT = { has_idea = outposts_strenghtened_4 }
			NOT = { has_idea = outposts_strenghtened_5 }
			NOT = { has_idea = outposts_strenghtened_6 }
			hidden_trigger = {
				NOT = { has_country_flag = eplf_mil_less }
			}
		}

		cost = 30
		days_remove = 100

		modifier = {
			civilian_factory_use = 4
		}

		ai_will_do = {
			factor = 5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETH_strenghten_outposts_1"
				add_to_variable = { var = ct_op_count_1 value = 1 }
				add_to_variable = { var = ct_op_count_2 value = 1 }
			}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETH_strenghten_outposts_1"
				add_ideas = outposts_strenghtened_1
			}
	}

	ETH_strenghten_outposts_2 = {

		icon = decision_fortification

		fire_only_once = yes

		available = {
			has_country_flag = EPLF_formed_again
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			tag = ETH
			has_country_flag = EPLF_formed_again
			has_idea = outposts_strenghtened_1
			OR = {
				AND = {
					owns_state = 229
					controls_state = 229
					owns_state = 228
					controls_state = 228
				}
				ERI = { is_puppet_of = ETH }
			}
			hidden_trigger = {
				NOT = { has_country_flag = eplf_mil_less }
			}
		}

		cost = 40
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETH_strenghten_outposts_2"
				add_to_variable = { var = ct_op_count_1 value = 1 }
				add_to_variable = { var = ct_op_count_2 value = 1 }
			}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETH_strenghten_outposts_2"
				swap_ideas = {
					remove_idea = outposts_strenghtened_1
					add_idea = outposts_strenghtened_2
				}
				subtract_from_variable = { var = eplf_presence_max value = 5 }

			}
	}

	ETH_strenghten_outposts_3 = {

		icon = decision_fortification

		fire_only_once = yes

		available = {
			has_country_flag = EPLF_formed_again
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			tag = ETH
			has_country_flag = EPLF_formed_again
			has_idea = outposts_strenghtened_2
			OR = {
				AND = {
					owns_state = 229
					controls_state = 229
					owns_state = 228
					controls_state = 228
				}
				ERI = { is_puppet_of = ETH }
			}
			hidden_trigger = {
				NOT = { has_country_flag = eplf_mil_less }
			}
		}

		cost = 50
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETH_strenghten_outposts_3"
				add_to_variable = { var = ct_op_count_1 value = 1 }
				add_to_variable = { var = ct_op_count_2 value = 1 }
			}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETH_strenghten_outposts_3"
				swap_ideas = {
					remove_idea = outposts_strenghtened_2
					add_idea = outposts_strenghtened_3
				}
				subtract_from_variable = { var = eplf_presence_max value = 5 }
			}
	}

	ETH_strenghten_outposts_4 = {

		icon = decision_fortification

		fire_only_once = yes

		available = {
			has_country_flag = EPLF_formed_again
			num_of_civilian_factories_available_for_projects > 3
		}

		visible = {
			tag = ETH
			has_country_flag = EPLF_formed_again
			has_idea = outposts_strenghtened_3
			OR = {
				AND = {
					owns_state = 229
					controls_state = 229
					owns_state = 228
					controls_state = 228
				}
				ERI = { is_puppet_of = ETH }
			}
			hidden_trigger = {
				NOT = { has_country_flag = eplf_mil_less }
			}
		}

		cost = 60
		days_remove = 80

		modifier = {
			civilian_factory_use = 4
		}

		ai_will_do = {
			factor = 5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETH_strenghten_outposts_4"
				add_to_variable = { var = ct_op_count_1 value = 1 }
				add_to_variable = { var = ct_op_count_2 value = 1 }
			}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETH_strenghten_outposts_4"
				swap_ideas = {
					remove_idea = outposts_strenghtened_3
					add_idea = outposts_strenghtened_4
				}
				subtract_from_variable = { var = eplf_presence_max value = 5 }
			}
	}

	ETH_strenghten_outposts_5 = {

		icon = decision_fortification

		fire_only_once = yes

		available = {
			has_country_flag = EPLF_formed_again
			num_of_civilian_factories_available_for_projects > 3
		}

		visible = {
			tag = ETH
			has_country_flag = EPLF_formed_again
			has_idea = outposts_strenghtened_4
			OR = {
				AND = {
					owns_state = 229
					controls_state = 229
					owns_state = 228
					controls_state = 228
				}
				ERI = { is_puppet_of = ETH }
			}
			hidden_trigger = {
				NOT = { has_country_flag = eplf_mil_less }
			}
		}

		cost = 70
		days_remove = 80

		modifier = {
			civilian_factory_use = 4
		}

		ai_will_do = {
			factor = 5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETH_strenghten_outposts_5"
				add_to_variable = { var = ct_op_count_1 value = 1 }
				add_to_variable = { var = ct_op_count_2 value = 1 }
			}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETH_strenghten_outposts_5"
				swap_ideas = {
					remove_idea = outposts_strenghtened_4
					add_idea = outposts_strenghtened_5
				}
				subtract_from_variable = { var = eplf_presence_max value = 10 }
			}
	}

	ETH_strenghten_outposts_6 = {

		icon = decision_fortification

		fire_only_once = yes

		available = {
			has_country_flag = EPLF_formed_again
			num_of_civilian_factories_available_for_projects > 4
		}

		visible = {
			tag = ETH
			has_country_flag = EPLF_formed_again
			has_idea = outposts_strenghtened_5
			OR = {
				AND = {
					owns_state = 229
					controls_state = 229
					owns_state = 228
					controls_state = 228
				}
				ERI = { is_puppet_of = ETH }
			}
			hidden_trigger = {
				NOT = { has_country_flag = eplf_mil_less }
			}
		}

		cost = 60
		days_remove = 30

		modifier = {
			civilian_factory_use = 5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETH_strenghten_outposts_6"
			add_to_variable = { var = ct_op_count_1 value = 1 }
			add_to_variable = { var = ct_op_count_2 value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETH_strenghten_outposts_6"
			remove_ideas = outposts_problem
			swap_ideas = {
				remove_idea = outposts_strenghtened_5
				add_idea = outposts_strenghtened_6
			}
			subtract_from_variable = { var = eplf_presence_max value = 10 }
		}

		ai_will_do = {
			factor = 5
		}
	}
}