#Unlisted on_actions by haveabeard
#http://forum.paradoxplaza.com/forum/index.php?threads/list-of-currently-hardcoded-features-mechanics-etc-in-hoi4.957265/page-25#post-22275603
#military_access
#offer_military_access
#improve_relation
#guarantee
#non_aggression_pact
#call_allies
#join_allies
#declare_war
#create_faction
#join_faction
#offer_join_faction
#peace_proposal
#add_wargoal
#lend_lease
#incoming_lend_lease
#send_volunteers
#send_expeditionary_force
#return_expeditionary_forces
#request_expeditionary_forces
#generate_wargoal
#boost_party_popularity
#stage_coup
#leave_faction
#dismantle_faction
#ask_for_state_control
#give_state_control
#reduce_autonomy
#increase_autonomy

on_actions = {
	# country 
	on_new_term_election = {
		
		random_events = {
			100 = brazil.1
		}
		
		random_events = {
			# 100 = election.2
			# 100 = election.3
			# 100 = election.4
			# 100 = election.5
			# 100 = election.6
			# 100 = election.11
			# 100 = election.12
			# 100 = election.13
			# 100 = election.14
			# 100 = election.15
		}
	}

	# Ace pilots
	# country, FROM = ace
	on_ace_promoted = {
		
	}

	# country, FROM = ace, PREV = enemy ace 
	# This event fires twice, once for each ace.
	on_aces_killed_each_other = {
		
	}
	
	# country, FROM = our ace, 
	# PREV = enemy ace, has killed FROM
	on_ace_killed_by_ace = {
		
	}

	# country, FROM = our ace, 
	# PREV = enemy ace, killed by FROM
	on_ace_killed_other_ace = {
		
	}

	# country, FROM = ace
	on_ace_killed = {
		
	}

	# During justifying wargoals
	# triggered daily, so make sure there is a sink somewhere not firing events
	# country, FROM = target nation
	on_justifying_wargoal_pulse = {
		random_events = {
			1000 = NATO.1
		}
	}

	on_wargoal_expire = {
		effect = {
		
		}
	}

	#FROM is state #ROOT is broken as hell
	on_nuke_drop = {
		effect = {
		}
	}

	on_border_war_lost = {
		effect = {
		
		}
	}
	
	on_leave_faction = {
		effect = {
		
		}
	}

	#FROM is the one that joins the faction
	on_create_faction = {
		effect = {
		
		}
	}

	#FROM is country getting invited.
	on_offer_join_faction = {
		effect = {
		
		}
	}

	#FROM is faction leader on join faction requests.
	on_join_faction = {
		effect = {
		
		}
	}
	
	# ROOT is capitulated country, FROM is winner
	on_capitulation = {
		effect = {
			news_event = { id = country_capitulated.0 days = 1 }
		}
	}

	#FROM is war target
	on_declare_war = {
		effect = {
			#NATO
			if = {
				limit = {
					FROM = { has_idea = NATO_member }
				}
				custom_effect_tooltip = TT_CALL_NATO
				FROM = { country_event = NATO.2 }
			}
			
			#if Target country is not a major and has less than 40% of your IC
			#War 1
			if = {
				limit = {
					
					from = { is_major = no}
					from = {
						ic_ratio = {
							tag = ROOT 
							ratio < 0.4
						}
					}
					not = {
						has_country_flag = AB_War1
						has_country_flag = AB_pick_war
						has_government = fascism
					}
					threat < 0.6
				}
				#news_event = { id = war.0 } #Generic war news event for flavor

				hidden_effect = {
					set_country_flag = AB_War1_NU0
					set_country_flag = AB_War1
					set_country_flag = AB_pick_war
					save_event_target_as = AB_ATT
					from = {
						save_event_target_as = AB_DEFF
						country_event = { id = anti_bully.1 }
					}
				}
				
			}
			#if Target country is not a major and has less than 40% of your IC
			#War 2
			if = {
				limit = {
					
					from = { is_major = no}
					from = {
						ic_ratio = {
							tag = ROOT 
							ratio < 0.4
						}
					}
					not = {
						has_country_flag = AB_War2
						has_country_flag = AB_pick_war
						has_government = fascism
					}
					threat < 0.6
				}
				#news_event = { id = war.0 } #Generic war news event for flavor

				hidden_effect = {
					set_country_flag = AB_War2_NU0
					set_country_flag = AB_War2
					set_country_flag = AB_pick_war
					save_event_target_as = AB_ATT
					from = {
						save_event_target_as = AB_DEFF
						country_event = { id = anti_bully.10 }
					}
				}
				
			}
			
			#Leave this at bottom. Clears the flag after war has started so AB_war1 & war2
			#Don't activate for 1 war
			clr_country_flag = AB_pick_war
			
			############ Anti Bully System - Won't activate ########################
			#target country is  a major & more than 40% of your IC
			if = {
				limit = {
					or = {
						from = { is_major = yes}
						from = {
							ic_ratio = {
								tag = ROOT 
								ratio > 0.4
							}
						}
					}
				}
				#news_event = { id = war.0 } #Generic war event for flavor w/ Anti bully active

			}
			###Activates US Brigade In Poland If US has done USA_Reinforce_NATO_EAST focus
			if = {
				limit = {
					FROM = {
						is_in_faction_with = USA
						or = {
							tag = EST
							tag = LAT
							tag = LIT
							tag = POL
							tag = SLO
							tag = HUN
							tag = ROM
							
						}
					}
					POL = {
						is_in_faction_with = USA
					}
					USA = {
						has_country_flag = Reinforce_NATO_EAST
					}
				}
				hidden_effect = {
					country_event = { id = USA_FOCUS.2 }
				}
				
				country_event = { id = USA_FOCUS.2 days = 1 }
				add_threat = 5
				
			}
			
			###Activates US Brigade In Turkey If US has done USA_REINFORCE_Bosphorus focus
			if = {
				limit = {
					FROM = {
						is_in_faction_with = USA
						or = {
							tag = BUL
							tag = GRE
							tag = ALB
							tag = TUR
							
						}
					}
					TUR = {
						is_in_faction_with = USA
					}
					USA = {
						has_country_flag = REINFORCE_Bosphorus
					}
				}
				hidden_effect = {
					USA = {
						country_event = { id = USA_FOCUS.4 }
					}
					USA = {
						country_event = { id = USA_FOCUS.4 days = 1 }
					}
				}
				
			}
			
			#Rio Pact
			if = {
				limit = {
					from = {
						has_idea = rio_pact_member
					}
					ROOT = {
						not = {
							or = {
								tag = ISI
								tag = TAL
								tag = TTP
								tag = NUS
								tag = AQY
								has_country_flag = terrorist_group
							}
						}
					}
				}
				FROM = { country_event = { id = USA.6 } }
				ROOT = { country_event = { id = USA.8 days = 20 } }
			}
			
		}
	}
	
	#Ask for Mil access - From is target country
	on_military_access = {
		effect = {
			#country_event = { id = init.1 }
			#from = { add_ideas = USA_USAID }
		}
	}
	
	#offer for Mil access to your country - From is target country
	on_offer_military_access = {
		effect = {
			#from = { country_event = { id = init.1 } }
			#add_ideas = USA_USAID
		}
	}
	
	#try on_revoke_guarantee
	
	# When a new faction is formed
	on_faction_formed = {
		effect = {
		}
	}

	on_government_change = {
		effect = {
		}
	}

	on_coup_succeeded = {
		effect = {
			ROOT = {
				country_event = {id = init.2}
			}
		}
	}

	#ROOT is winner #FROM gets annexed
	on_civil_war_end = {
		effect = {
		}
	}

	# on_guarantee = {
		# effect = {
			# news_event = { id = war.0 }
		# }
	# }
	# on_non_aggression_pact = {
		# effect = {
			# news_event = { id = war.0 }
		# }
	# }
	# on_improve_relation = {
		# effect = {
			# news_event = { id = war.0 }
		# }
	# }
	  
	on_startup = {
		effect = {
			every_country = {
				country_event = { id = init.0 }
			}
			random_country = {
				country_event = { id = init_relations.0 }
			}
			USA = {
				country_event = { id = USA.1 days = 1 }
			}
		}
	}
}
