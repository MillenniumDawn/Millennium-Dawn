native_update_substance_abuse = {
	# Clear the Ideas first
	if = {
		limit = {
			OR = {
				has_idea = Native_Subsidized_Mass_Alcoholism
				has_idea = Native_Extremely_High_Substance_Abuse
				has_idea = Native_Very_High_Substance_Abuse
				has_idea = Native_High_Substance_Abuse
				has_idea = Native_Medium_Substance_Abuse
				has_idea = Native_Low_Substance_Abuse
				has_idea = Native_Very_Low_Substance_Abuse
				has_idea = Native_Extremely_Low_Substance_Abuse
				has_idea = Native_Sober_Populace
			}
		}
		custom_effect_tooltip = native_remove_substance_abuse_tt
		hidden_effect = {
			remove_ideas = {
				Native_Subsidized_Mass_Alcoholism
				Native_Extremely_High_Substance_Abuse
				Native_Very_High_Substance_Abuse
				Native_High_Substance_Abuse
				Native_Medium_Substance_Abuse
				Native_Low_Substance_Abuse
				Native_Very_Low_Substance_Abuse
				Native_Extremely_Low_Substance_Abuse
				Native_Sober_Populace
			}
		}
	}

	# Add Alcohol Abuse Idea
	if = { 
		limit = { 
			check_variable = { substance_abuse_var > 95 }
		}
		add_ideas = Native_Subsidized_Mass_Alcoholism
	}
	else_if = {
		limit = {
			check_variable = { substance_abuse_var < 96 }
			check_variable = { substance_abuse_var > 75 }
		}
		add_ideas = Native_Extremely_High_Substance_Abuse
	}
	else_if = {
		limit = {
			check_variable = { substance_abuse_var < 76 }
			check_variable = { substance_abuse_var > 50 }
		}
		add_ideas = Native_Very_High_Substance_Abuse
	}
	else_if = {
		limit = {
			check_variable = { substance_abuse_var < 51 }
			check_variable = { substance_abuse_var > 25 }
		}
		add_ideas = Native_High_Substance_Abuse
	}
	else_if = {
		limit = {
			check_variable = { substance_abuse_var < 26 }
			check_variable = { substance_abuse_var > -25 }
		}
		add_ideas = Native_Medium_Substance_Abuse
	}
	else_if = {
		limit = {
			check_variable = { substance_abuse_var < -26 }
			check_variable = { substance_abuse_var > -50 }
		}
		add_ideas = Native_Low_Substance_Abuse
	}
	else_if = {
		limit = {
			check_variable = { substance_abuse_var < -51 }
			check_variable = { substance_abuse_var > -75 }
		}
		add_ideas = Native_Very_Low_Substance_Abuse
	}
	else_if = {
		limit = {
			check_variable = { substance_abuse_var < -76 }
			check_variable = { substance_abuse_var > -95 }
		}
		add_ideas = Native_Extremely_Low_Substance_Abuse
	}
	else = {
		add_ideas = Native_Sober_Populace
	}

	clamp_variable = { var = substance_abuse_var min = -100 max = 100 }
}

native_modify_substance_abuse = {
	add_to_variable = { substance_abuse_var = modify_substance_abuse }
	custom_effect_tooltip = native_modify_substance_abuse_tt
	native_update_substance_abuse = yes
}

native_update_cultural_integrity = {
	# Clear the Ideas first
	if = {
		limit = {
			OR = {
				has_idea = Native_Happy_Populace
				has_idea = Native_High_Cultural_Integrity
				has_idea = Native_Medium_Cultural_Integrity
				has_idea = Native_Low_Cultural_Integrity
				has_idea = Native_Assimilated_Populace
			}
		}
		custom_effect_tooltip = native_remove_cultural_integrity_tt
		hidden_effect = {
			remove_ideas = {
				Native_Happy_Populace
				Native_High_Cultural_Integrity
				Native_Medium_Cultural_Integrity
				Native_Low_Cultural_Integrity
				Native_Assimilated_Populace
			}
		}
	}

	# Add Cultural_integrity Idea
	if = { 
		limit = { 
			check_variable = { cultural_integrity_var > 95 }
		}
		add_ideas = Native_Happy_Populace
	}
	else_if = {
		limit = {
			check_variable = { cultural_integrity_var < 96 }
			check_variable = { cultural_integrity_var > 65 }
		}
		add_ideas = Native_High_Cultural_Integrity
	}
	else_if = {
		limit = {
			check_variable = { cultural_integrity_var < 66 }
			check_variable = { cultural_integrity_var > 35 }
		}
		add_ideas = Native_Medium_Cultural_Integrity
	}
	else_if = {
		limit = {
			check_variable = { cultural_integrity_var < 36 }
			check_variable = { cultural_integrity_var > 5 }
		}
		add_ideas = Native_Low_Cultural_Integrity
	}
	else = {
		add_ideas = Native_Assimilated_Populace
	}

	clamp_variable = { var = cultural_integrity_var min = -100 max = 100 }
}

native_modify_cultural_integrity = {
	add_to_variable = { cultural_integrity_var = modify_cultural_integrity }
	custom_effect_tooltip = native_modify_cultural_integrity_tt
	native_update_cultural_integrity = yes
}