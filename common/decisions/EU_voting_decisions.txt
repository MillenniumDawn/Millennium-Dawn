EU_voting_category = {
	
	Test_focus01 = {
	
		available = {
			NOT = { has_country_flag = focus01 }
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		complete_effect = {   						
			set_country_flag = focus01
		}				
	}
	Test_focus01_QMV = {
	
		available = {
			NOT = { has_country_flag = focus01_QMV }
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		complete_effect = {   						
			set_country_flag = focus01_QMV
		}				
	}
	Test_influence = {
	
		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		complete_effect = {   						
			 set_temp_variable = { 
				influence_gain = 5 
			}
			for_loop_effect = { 
				end = influence_array^num value = v 
					if = { 
						limit = { 
							check_variable = { influence_array^v = TUR } 
						} 
						add_to_variable = { influence_array_val^v = influence_gain }
						set_country_flag = found 
					} 
			} 
			if = { 
				limit = { 
					NOT = { has_country_flag = found } 
				} 
				add_to_array = { influence_array = TUR.id }
				add_to_array = { influence_array_val = influence_gain } 
			} 
			clr_country_flag = found
			recalculate_influence = yes
		}				
	}

	EU_voting_decision_focus01 = {
	
		icon = GFX_decision_generic_european_union
	
		available = {
			custom_trigger_tooltip = {
				tooltip = test123
				AND = {
					has_country_flag = focus01
					NOT = { 
							has_global_flag = focus01voted
							has_country_flag = focus01yes
					}
					all_country = {	
						OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.03 }						
							}	
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}					
				}	
			}
		}
		
		visible = { 
			has_country_flag = focus01
			NOT = { 
				has_global_flag = focus01voted
				has_country_flag = focus01yes
			}
		}
		
		complete_effect = {
			set_global_flag = focus01voted
			set_variable = {	
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {	
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {	
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {	
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {	
				var = global.var_EUpopNo
				value = 0
			}
			set_variable = {	
				var = global.var_EUpopTotal
				value = 0
			}				
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
	}
	
}
EU_SOTEU_category = {
	
	State_of_the_European_Union = {

		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_country_flag = EU_potential 
		} 
		
		complete_effect = {
			set_variable = {	
				var = global.var_EUmemberstatesTemp
				value = 0
			}				
			every_country = {
				limit = { has_idea = EU_member }
					add_to_variable = {
					var = global.var_EUmemberstatesTemp
					value = 1
					}
			}
			if = {
				limit = {
					check_variable = {
						var = global.var_EUmemberstatesTotal
						value = global.var_EUmemberstatesTemp
						compare = not_equals
					}
				}
	AUS = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	BEL = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	DEN = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	ENG = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	FIN = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	FRA = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	GER = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	GRE = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	HOL = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	IRE = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	ITA = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	LUX = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	POR = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	SPR = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	SWE = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	BUL = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	CRO = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	CYP = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	CZE = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	EST = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	HUN = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	LAT = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	LIT = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	MLT = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	POL = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	ROM = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	SLO = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	SLV = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	ALB = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	ARM = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	AZE = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	BLR = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	BOS = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	CAT = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	CRE = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	FYR = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	GEO = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	ICE = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	KOS = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	MLV = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	MNT = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	NOR = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	SCL = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	SCO = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	SER = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	SWI = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	TUR = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	UKR = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
	WAS = {
		if = {
			limit = { has_idea = EU_member }
			set_variable = {
			var = var_EUpopRatio
			value = 0
			}
			add_to_variable = {
				var = var_EUpopRatio
				value = max_manpower_k
			}
			divide_variable = {
				 var = var_EUpopRatio
				value = global.var_EUpopTotal
			 }
		}
	 }
			
			}
			news_event = {
				id = EU_news.1
			}
		}				
	}
}