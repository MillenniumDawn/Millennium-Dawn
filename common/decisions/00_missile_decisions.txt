00_missile_decisions = {

### old testing ###	#
    missile_test_1 = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			ships_in_area = {
				area = 16
				size > 0
				#type = artillery
			}
		}
		visible = {
			#has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_1"
 
		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_target = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			##has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_target"
			###
			set_variable = { var_accuracy = 0.7 }
			set_variable = { var_salvo = 100 }
			set_variable = { var_intercept_chance = 0.1 }
			set_variable = { var_intercept_capacity = 10 }
			###
			set_variable = { var_missile_trajectory = 1 }
			set_variable = { var_missile_target_hit = 0 }
			set_variable = { var_missile_interception = 0 }
			while_loop_effect = {
				limit = {
					check_variable = { var_salvo > 0 }
				}
				randomize_variable = {  
					var = var_missile_trajectory
					distribution = uniform
					min = 0
					max = 1
				}				
				if = {
					limit = {						
						check_variable = { var_intercept_capacity > 0 }
						check_variable = { var_missile_trajectory < var_intercept_chance }
					}
					add_to_variable = { var_missile_interception = 1 }
				}
				if = {
					limit = {						
						check_variable = { var_intercept_capacity > 0 }
					}	
					subtract_from_variable = { var_intercept_capacity = 1 }	
				}
				else = {
					add_to_variable = { var_missile_trajectory = var_accuracy }					
					if = {
						limit = { check_variable = { var_missile_trajectory > 1 } }
						add_to_variable = { var_missile_target_hit = 1 }

					}					
				}
				subtract_from_variable = { var_salvo = 1 }
			}	
		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_launch_point = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			sea_launch_point_38 = yes
		}
		visible = {
			has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_launch_point"
			38 = {
				set_state_flag = missile_launch_point
			}
		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_strike = {
    	icon = GFX_decision_generic_ignite_civil_war
		state_target = yes
		target_trigger = {
			FROM = {
				has_state_flag = missile_launch_point
			}

			
		}
		available = {
			642 = {				
				distance_to = {
					value < 3000
					target = FROM
				}	
			}
		}
		visible = {
			has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_strike"

		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_set_vars = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			##has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_set_vars"
			### test effects ###
			set_missile_trajectory_test_vars = yes	
		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_set_state_ID = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			#meta_trigger = {
				#text = {
					38 = {				
						distance_to = {					
							value < 1000
							target = 42
						}	
					}
				#}
				#SAM_range = "[?var_SAM_range]"
			#}		
		}
		visible = {
			#has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_set_state_ID"
			### test effects ###
			set_variable = { var_intercept_capacity_boost = 0 }
			set_variable = { var_intercept_capacity_midcourse = 0 }
			set_variable = { var_intercept_capacity_terminal = 0 }
			38 = {
				ROOT = {
					set_variable = { var_launch_point_ID = PREV.id }
				}	
			}
			42 = {
				ROOT = {
					set_variable = { var_target_point_ID = PREV.id }
				}	
			}		
		}
		ai_will_do = {
			factor = 0

		}
	}	

	missile_test_set_missile_defense_vars = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			#has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_set_vars"
			set_variable = { var_SAM_range = 10 }
			set_variable = { var_ABM_range = 10 }			
			set_variable = { var_SAM_launcher_tech = 1 }
			set_variable = { var_ABM_launcher_tech = 1 }
			
			set_missile_defense_vars = yes
			
			#meta_effect = {
			#	text = {	
			#		add_to_variable = { var_intercept_capacity_boost = [stateID].building_level@anti_air_building }
			#	}
			#	stateID = "[?var_launch_point_ID|0]"	
			#}

			### test effects ###

		}
		ai_will_do = {
			factor = 0

		}
	}

	missile_test_phases = {
    	icon = GFX_decision_generic_ignite_civil_war
 		available = {
			
		}
		visible = {
			##has_country_flag = invisible
		}


        complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision missile_test_phases"
			### boost phase vs defense ###
			boost_phase_defense = yes
			### midcourse phase vs defense ###
			midcourse_phase_defense = yes
			### terminal phase vs defense ###
			terminal_phase_defense = yes	
		}
		ai_will_do = {
			factor = 0

		}
	}

### end of testing ###

missile_launch_point = {
	icon = GFX_decision_generic_ignite_civil_war
	state_target = yes
	target_trigger = {
		FROM = {
			has_state_flag = missile_launch_point
		}
	}	
	available = {
		OR = {
			meta_trigger = {
				text = {
					sea_launch_point_[LPID] = yes
				}
				LPID = "[FROM.GetID]"
			}
			FROM = {
				is_controlled_by = ROOT
				missile_silo > 0
			}
		}			
	}
	visible = {
		
	}


	complete_effect = {
		log = "[GetDateText]: [Root.GetName]: Decision missile_test_launch_point"
		#FROM = {
		#	set_state_flag = missile_launch_point
		#}
	}
	ai_will_do = {
		factor = 0

	}
}



}
