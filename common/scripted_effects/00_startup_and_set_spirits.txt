low_stability_init = {
	every_neighbor_country = {
		log = "[GetDateText]: [From.GetName]: triggered low_stability.1 for [This.GetName]: "
		set_country_flag = { flag = LS_neighbor_count value = 0 }
		every_neighbor_country = { #Unstable neighbors
			limit = {
				OR = {
					has_stability < 0.36
					is_target_of_coup = yes
					has_civil_war = yes
				}
				any_owned_state = {
					is_core_of = THIS
					any_neighbor_state = {
						is_core_of = PREV
					}
				}
			}
			PREV = { modify_country_flag = { flag = LS_neighbor_count value = 1 } }
		}
		update_unstable_neighbors = yes
		clr_country_flag = LS_neighbor_count
	}
}

init_neighbor_drift_1 = {
	#clear_neighbor_count_ideas = yes
	set_country_flag = { flag = neighbor_count value = 0 }

		every_neighbor_country = {
			limit = {
				has_government = fascism
				is_major = no
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	salafist_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

		every_neighbor_country = {
			limit = {
				has_government = fascism
				is_major = yes
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	salafist_major_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

		every_neighbor_country = {
			limit = {
				has_government = democratic
				is_major = no
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	western_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

		every_neighbor_country = {
			limit = {
				has_government = democratic
				is_major = yes
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	western_major_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

	every_neighbor_country = {
			limit = {
				has_government = communism
				is_major = no
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	emerging_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

		every_neighbor_country = {
			limit = {
				has_government = communism
				is_major = yes
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	emerging_major_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

	every_neighbor_country = {
			limit = {
				has_government = neutrality
				is_major = no
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	non_alligned_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

		every_neighbor_country = {
			limit = {
				has_government = neutrality
				is_major = yes
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	non_alligned_major_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

	every_neighbor_country = {
			limit = {
				has_government = nationalist
				is_major = no
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	nationalist_count = yes
	clr_country_flag = neighbor_count
	set_country_flag = { flag = neighbor_count value = 0 }

		every_neighbor_country = {
			limit = {
				has_government = nationalist
				is_major = yes
			}
			PREV = { modify_country_flag = { flag = neighbor_count value = 1 } }
		}

	nationalist_major_count = yes
	clr_country_flag = neighbor_count

	### Boost to ruling parties ###
	if = {
		limit = {
			has_government = fascism
			is_major = no
		}
		add_ideas = ruling_party_salafist
	}
	else_if = {
		limit = {
			has_government = fascism
			is_major = yes
		}
		add_ideas = major_ruling_party_salafist
	}

	if = {
		limit = {
			has_government = democratic
			is_major = no
		}
		add_ideas = ruling_party_western
	}
	else_if = {
		limit = {
			has_government = democratic
			is_major = yes
		}
		add_ideas = major_ruling_party_western
	}

	if = {
		limit = {
			has_government = communism
			is_major = no
		}
		add_ideas = ruling_party_emerging
	}
	else_if = {
		limit = {
			has_government = communism
			is_major = yes
		}
		add_ideas = major_ruling_party_emerging
	}

	if = {
		limit = {
			has_government = neutrality
			is_major = no
		}
		add_ideas = ruling_party_non_alligned
	}
	else_if = {
		limit = {
			has_government = neutrality
			is_major = yes
		}
		add_ideas = major_ruling_party_non_alligned
	}

	if = {
		limit = {
			has_government = nationalist
			is_major = no
		}
		add_ideas = ruling_party_nationalist
	}
	else_if = {
		limit = {
			has_government = nationalist
			is_major = yes
		}
		add_ideas = major_ruling_party_nationalist
	}
}

init_neighbor_drift_2 = {
	clear_previous_economic_drift = yes
	if = {
		limit = {
			has_idea = economic_boom
		}
		update_drift_economic_boom = yes
	}
	else_if = {
		limit = {
			has_idea = fast_growth
		}
		update_drift_fast_growth = yes
	}
	else_if = {
		limit = {
			has_idea = stagnation
		}
		update_drift_stagnation = yes
	}
	else_if = {
		limit = {
			has_idea = recession
		}
		update_drift_recession = yes
	}
	else_if = {
		limit = {
			has_idea = depression
		}
		update_drift_depression = yes
	}
}