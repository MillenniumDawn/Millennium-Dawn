##########################
##########################
### EU_voting_category ###
##########################
##########################

EU_USoE_category = {

 ### USoE Decisions ###

	EU_USoE_westernize_decision = {
		target_trigger = {
			FROM = {
				has_country_flag = USoE_westernize_THIS
			}
		}	
		available = {			
			has_country_flag = USoE
		}
		
		visible = { 
			has_country_flag = USoE  
		} 
		
		complete_effect = {
			if = {
				limit = {
					has_government = democratic
					NOT = {
						FROM = {
							has_government = democratic
						}
					}	
				}	
				create_wargoal = {
					type = puppet_wargoal_focus
					target = FROM
				}				
			}						
			else_if = {
				limit = {
					has_government = democratic
					FROM = { has_government = democratic }	
				}	
				FROM = {
					country_event = {
						id = USoEevent.4
					}
				}					
			}	
			else = {
				create_wargoal = {
					type = annex_everything
					target = FROM
				}	
			}
		}
		ai_will_do = {
			factor = 1
		}			
	}

	EU_USoE_create_eurosphere_decision = {
		cost = 200
		available = {			
			has_country_flag = USoE
			has_country_flag = eurosphere
		}
		
		visible = { 
			has_country_flag = USoE
			has_country_flag = eurosphere  
		} 
		days_remove = 7
		complete_effect = {
			create_eurosphere = yes
		}
		ai_will_do = {
			factor = 1
		}
	}	

### Environmental Imperialism

	EU_USoE_environmental_imperialism_show_europe = {		
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism
			has_global_flag = environmental_imperialism_europe
			NOT = { has_country_flag = environmental_imperialism_europe }  
		} 
		complete_effect = {
			custom_effect_tooltip = "Show Environmental Imperialism in Europe"
			set_country_flag = environmental_imperialism_europe
		}
		ai_will_do = {
			factor = 1
		}
	}	
	EU_USoE_environmental_imperialism_hide_europe = {		
		available = {			
			has_country_flag = environmental_imperialism_europe
		}
		
		visible = { 
			has_country_flag = environmental_imperialism_europe  
		} 
		complete_effect = {
			custom_effect_tooltip = "Hide Environmental Imperialism in Europe"
			clr_country_flag = environmental_imperialism_europe
		}
		ai_will_do = {
			factor = 0
		}
	}

	EU_USoE_environmental_imperialism_show_north_america = {		
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism
			has_global_flag = environmental_imperialism_north_america
			NOT = { has_country_flag = environmental_imperialism_north_america }  
		} 
		complete_effect = {
			custom_effect_tooltip = "Show Environmental Imperialism in North America"
			set_country_flag = environmental_imperialism_north_america
		}
		ai_will_do = {
			factor = 1
		}
	}	
	EU_USoE_environmental_imperialism_hide_north_america = {		
		available = {			
			has_country_flag = environmental_imperialism_north_america
		}
		
		visible = { 
			has_country_flag = environmental_imperialism_north_america 
		} 
		complete_effect = {
			custom_effect_tooltip = "Hide Environmental Imperialism in North America"
			clr_country_flag = environmental_imperialism_north_america
		}
		ai_will_do = {
			factor = 0
		}
	}

	EU_USoE_environmental_imperialism_show_south_america = {		
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism
			has_global_flag = environmental_imperialism_south_america  
			NOT = { has_country_flag = environmental_imperialism_south_america }  
		} 
		complete_effect = {
			custom_effect_tooltip = "Show Environmental Imperialism in South America"
			set_country_flag = environmental_imperialism_south_america
		}
		ai_will_do = {
			factor = 1
		}
	}	
	EU_USoE_environmental_imperialism_hide_south_america = {		
		available = {			
			has_country_flag = environmental_imperialism_south_america
		}
		
		visible = { 
			has_country_flag = environmental_imperialism_south_america 
		} 
		complete_effect = {
			custom_effect_tooltip = "Hide Environmental Imperialism in South America"
			clr_country_flag = environmental_imperialism_south_america
		}
		ai_will_do = {
			factor = 0
		}
	}	

	EU_USoE_environmental_imperialism_show_africa = {		
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism
			has_global_flag = environmental_imperialism_africa
			NOT = { has_country_flag = environmental_imperialism_africa }   
		} 
		complete_effect = {
			custom_effect_tooltip = "Show Environmental Imperialism in Africa"
			set_country_flag = environmental_imperialism_africa
		}
		ai_will_do = {
			factor = 1
		}
	}	
	EU_USoE_environmental_imperialism_hide_africa = {		
		available = {			
			has_country_flag = environmental_imperialism_africa
		}
		
		visible = { 
			has_country_flag = environmental_imperialism_africa 
		} 
		complete_effect = {
			custom_effect_tooltip = "Hide Environmental Imperialism in Africa"
			clr_country_flag = environmental_imperialism_africa
		}
		ai_will_do = {
			factor = 0
		}
	}	

	EU_USoE_environmental_imperialism_show_asia = {		
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism
			has_global_flag = environmental_imperialism_asia 
			NOT = { has_country_flag = environmental_imperialism_asia } 
		} 
		complete_effect = {
			custom_effect_tooltip = "Show Environmental Imperialism in Asia"
			set_country_flag = environmental_imperialism_asia
		}
		ai_will_do = {
			factor = 1
		}
	}	
	EU_USoE_environmental_imperialism_hide_asia = {		
		available = {			
			has_country_flag = environmental_imperialism_asia
		}
		
		visible = { 
			has_country_flag = environmental_imperialism_asia 
		} 
		complete_effect = {
			custom_effect_tooltip = "Hide Environmental Imperialism in Asia"
			clr_country_flag = environmental_imperialism_asia
		}
		ai_will_do = {
			factor = 0
		}
	}

	EU_USoE_environmental_imperialism_show_middle_east = {		
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism
			has_global_flag = environmental_imperialism_middle_east
			NOT = { has_country_flag = environmental_imperialism_middle_east }  
		} 
		complete_effect = {
			custom_effect_tooltip = "Show Environmental Imperialism in Middle East"
			set_country_flag = environmental_imperialism_middle_east
		}
		ai_will_do = {
			factor = 1
		}
	}	
	EU_USoE_environmental_imperialism_hide_middle_east = {		
		available = {			
			has_country_flag = environmental_imperialism_middle_east
		}
		
		visible = { 
			has_country_flag = environmental_imperialism_middle_east 
		} 
		complete_effect = {
			custom_effect_tooltip = "Hide Environmental Imperialism in Middle East"
			clr_country_flag = environmental_imperialism_middle_east
		}
		ai_will_do = {
			factor = 0
		}
	}

	EU_USoE_environmental_imperialism_show_pacific = {		
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism
			has_global_flag = environmental_imperialism_pacific
			NOT = { has_country_flag = environmental_imperialism_pacific  }  
		} 
		complete_effect = {
			custom_effect_tooltip = "Show Environmental Imperialism in Pacific"
			set_country_flag = environmental_imperialism_pacific
		}
		ai_will_do = {
			factor = 1
		}
	}	
	EU_USoE_environmental_imperialism_hide_pacific = {		
		available = {			
			has_country_flag = environmental_imperialism_pacific
		}
		
		visible = { 
			has_country_flag = environmental_imperialism_pacific			
		} 
		complete_effect = {
			custom_effect_tooltip = "Hide Environmental Imperialism in Pacific"
			clr_country_flag = environmental_imperialism_pacific
		}
		ai_will_do = {
			factor = 0
		}
	}	

	EU_USoE_environmental_imperialism_show_oceania = {		
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism
			has_global_flag = environmental_imperialism_oceania
			NOT = { has_country_flag = environmental_imperialism_oceania  }  
		} 
		complete_effect = {
			custom_effect_tooltip = "Show Environmental Imperialism in Oceania"
			set_country_flag = environmental_imperialism_oceania
		}
		ai_will_do = {
			factor = 1
		}
	}	
	EU_USoE_environmental_imperialism_hide_oceania = {		
		available = {			
			has_country_flag = environmental_imperialism_oceania
		}
		
		visible = { 
			has_country_flag = environmental_imperialism_oceania 
		} 
		complete_effect = {
			custom_effect_tooltip = "Hide Environmental Imperialism in Oceania"
			clr_country_flag = environmental_imperialism_oceania
		}
		ai_will_do = {
			factor = 0
		}
	}

	EU_USoE_environmental_imperialism_decision = {
		cost = 100
		target_trigger = {
			FROM = {
				NOT = { has_country_flag = EU_USoE_environmental_imperialism_target }
				ic_ratio = {
					tag = ROOT
					ratio > 0.05
				}		
				synthetic_refinery < num_owned_states
				OR = {
					AND = {
						ROOT = {
							has_country_flag = environmental_imperialism_europe
						}
						capital_scope = {
							is_on_continent = europe
						}	
					}
					AND = {
						ROOT = {
							has_country_flag = environmental_imperialism_north_america
						}
						capital_scope = {
							is_on_continent = north_america
						}	
					}
					AND = {
						ROOT = {
							has_country_flag = environmental_imperialism_south_america
						}
						capital_scope = {
							is_on_continent = south_america
						}	
					}
					AND = {
						ROOT = {
							has_country_flag = environmental_imperialism_africa
						}
						capital_scope = {
							is_on_continent = africa
						}	
					}
					AND = {
						ROOT = {
							has_country_flag = environmental_imperialism_asia
						}
						capital_scope = {
							is_on_continent = asia
						}	
					}
					AND = {
						ROOT = {
							has_country_flag = environmental_imperialism_middle_east
						}
						capital_scope = {
							is_on_continent = middle_east
						}	
					}
					AND = {
						ROOT = {
							has_country_flag = environmental_imperialism_pacific
						}
						capital_scope = {
							is_on_continent = pacific
						}	
					}
					AND = {
						ROOT = {
							has_country_flag = environmental_imperialism_oceania
						}
						capital_scope = {
							is_on_continent = oceania
						}	
					}																														
				}
			}
		}	
		available = {			
			has_country_flag = environmental_imperialism
		}
		
		visible = { 
			has_country_flag = environmental_imperialism  
		} 
		
		complete_effect = {
			FROM = {
				activate_mission = EU_USoE_environmental_imperialism_mission
				set_country_flag = EU_USoE_environmental_imperialism_target
				custom_effect_tooltip = "If they don't complete the mission the get:"
				show_ideas_tooltip = USoE_environmental_sanctions
			}
		}
		ai_will_do = {
			factor = 1
		}			
	}
}

##################################
### Category economy_decisions ###
##################################

economy_decisions = {

	EU_USoE_environmental_imperialism_mission = {		
		allowed = {
			always = yes
		}
		available = {
			synthetic_refinery > num_owned_states	
		}	
		activation = {
			always = no
		}

		days_mission_timeout = 365
		is_good = no
		selectable_mission = yes
		
		fire_only_once = yes
	
		complete_effect = {
			add_popularity = {
				ideology = neutrality
				popularity = 0.20
			}			
			custom_effect_tooltip = tooltip_USoE_Neutral_green_rise_20
			add_to_variable = { party_pop_array^17 = 0.20 }
			recalculate_party = yes
			FROM = {
				country_event = {
					id = USoEevent.5
				}
			}
			clr_country_flag = EU_USoE_environmental_imperialism_target	
		}
		timeout_effect = {
			add_ideas = USoE_environmental_sanctions
			#show_ideas_tooltip = USoE_environmental_sanctions
			clr_country_flag = EU_USoE_environmental_imperialism_target
			FROM = {
				country_event = {
					id = USoEevent.6
				}
			}
		}	
		ai_will_do = {
			factor = 0
		}
	}
	
	#Green Energy Reconstruction
	EU_USoE_environmental_imperialism_restructure_industry_decision = {	
		cost = 100			
		available = {						
			has_country_flag = EU_USoE_environmental_imperialism_target
		}
		
		visible = { 
			has_country_flag = EU_USoE_environmental_imperialism_target
			any_owned_state = {
				synthetic_refinery < 2
				industrial_complex > 0
			}
		} 
		complete_effect = {			
			random_owned_state = {
				limit = {
					synthetic_refinery < 2
					industrial_complex > 0
				}
				remove_building = {
					type = industrial_complex
					level = 1
				}
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
			subtract_from_variable = { treasury = 1 }
			custom_effect_tooltip = tooltip_green_energy_reconstruction
			if = {
				limit = {
					check_variable = { party_pop_array^17 < 0.50 }
				}						
				add_popularity = {
					ideology = neutrality
					popularity = 0.05
				}			
				custom_effect_tooltip = tooltip_USoE_Neutral_green_rise_5
				add_to_variable = { party_pop_array^17 = 0.05 }
				recalculate_party = yes
			}
		}
		ai_will_do = {
			factor = 1
		}
	}	

}
