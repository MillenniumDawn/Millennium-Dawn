#By Zei33 MoreDPS
on_actions = {
	on_startup = { 
    effect = {
    	CAN = { set_country_flag = CANZUK_candidate_flag } #used for condition_CANZUK scripted diplomatic actions.
    	NZL = { set_country_flag = CANZUK_candidate_flag }
        ENG = { set_country_flag = CANZUK_candidate_flag }
        AST = { set_country_flag = CANZUK_candidate_flag }      	
        USA = { set_country_flag = CANZUK_candidate_flag } #they arent canzuk  but are in ANZUS so it will be localised to save having 2 conditions.

        AST = {
        add_ai_strategy = {
					type = befriend
					id = JAP
					value = 15
				}
		}
		JAP = {
        add_ai_strategy = {
					type = befriend
					id = AST
					value = 15
				}
		}
		AST = {
        add_ai_strategy = {
					type = befriend
					id = ENG
					value = 15
				}
		}
		ENG = {
        add_ai_strategy = {
					type = befriend
					id = AST
					value = 15
				}
		}
		ENG = {
        add_ai_strategy = {
					type = protect
					id = AST
					value = 15
				}
		}
		USA = {
        add_ai_strategy = {
					type = protect
					id = AST
					value = 20
				}
		}
		AST = {
        add_ai_strategy = {
					type = befriend
					id = IND
					value = 15
				}
		}
		IND = {
        add_ai_strategy = {
					type = befriend
					id = AST
					value = 15
				}
		}

		AST = {
        add_ai_strategy = {
					type = befriend
					id = NZL
					value = 20
				}
		}
		NZL = {
        add_ai_strategy = {
					type = befriend
					id = AST
					value = 20
				}
		}

		AST = {
        add_ai_strategy = {
					type = befriend
					id = KOR
					value = 15
				}
		}
		KOR = {
        add_ai_strategy = {
					type = befriend
					id = AST
					value = 15
				}
		}

		#below are double referenced for PREV
		AST = {		
        	JAP = {
        	set_country_flag = long_term_trading_partner_flag@PREV
        	add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = AST
						}
					}
				}

		JAP = {
			AST = {
				set_country_flag = long_term_trading_partner_flag@PREV
        		add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = JAP
						}
					}
				}

		AST = {
			ENG = {
        		set_country_flag = long_term_trading_partner_flag@PREV
        		set_country_flag = shared_colonial_history_flag
        		add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = AST
						}
				add_opinion_modifier = {				
						modifier = shared_colonial_history_mod
						target = AST
						}
				}
			}

		ENG = {
			AST = {
				set_country_flag = long_term_trading_partner_flag@PREV
				set_country_flag = shared_colonial_history_flag
        		add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = ENG
						}
				add_opinion_modifier = {
						modifier = shared_colonial_history_mod
						target = ENG
						}				
					}
				}

		AST = {
			NZL = {
			set_country_flag = shared_colonial_history_flag@PREV
			add_opinion_modifier = {
						modifier = shared_colonial_history_mod
						target = AST
						}				
					}
				}

		NZL = {
			AST = {
			set_country_flag = shared_colonial_history_flag@PREV
			add_opinion_modifier = {
						modifier = shared_colonial_history_mod
						target = NZL
						}				
					}
				}

		AST = {
			PAP = {
			set_country_flag = shared_colonial_history_flag@PREV
			add_opinion_modifier = {
						modifier = shared_colonial_history_mod
						target = AST
						}				
					}
				}

		PAP = {
			AST = {
			set_country_flag = shared_colonial_history_flag@PREV
			add_opinion_modifier = {
						modifier = shared_colonial_history_mod
						target = PAP
						}				
					}
				}


		AST = {		
			IND = {
			set_country_flag = long_term_trading_partner_flag@PREV
        	add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = AST
						}
					}
				}

		IND = {
			AST = {
			set_country_flag = long_term_trading_partner_flag@PREV
        	add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = IND
						}
				}
		}

		AST = {
			KOR = {
			set_country_flag = long_term_trading_partner_flag@PREV
        	add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = AST
						}
					}
				}

		KOR = {		
			AST = {
			set_country_flag = long_term_trading_partner_flag@PREV
        	add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = KOR
						}
					}
				}

		AST = {
			USA = {
			set_country_flag = long_term_trading_partner_flag@PREV
        	add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = AST
						}
					}
				}
		
		USA = {
		AST = {
			set_country_flag = long_term_trading_partner_flag@PREV
        	add_opinion_modifier = {
						modifier = long_term_trading_partner_mod
						target = USA
						}
		}
		}

		every_country = {
        		limit = {
        		has_idea = commonwealth_of_nations_member
        		}
        		set_country_flag = commonwealth_of_nations_member_flag
        }
    }
}

	on_state_control_changed = {
		effect = {
			if = { # MH17 crash triggers soon after LPR/DPR breaks away from Ukraine.
				limit = {
					FROM = { original_tag = UKR }
					ROOT = { has_war_with = FROM }
					OR = {
						FROM = { original_tag = DPR }
						FROM = { original_tag = LPR }
					}
				}
				country_event = { id = australia_md.25 days = 30 random_days = 90 }
			}
		}
	}

	on_monthly_AST = {}
	on_yearly_AST = {
		effect = {
			random_list = {
				30 = { } #30% chance no bushfires this year
				40 = { #40% chance of a minor bushfire event
					country_event = { id = australia_md.29 days = 285 random_days = 100 }
				}
				25 = { #25% chance of a major bushfire event
					country_event = { id = australia_md.28 days = 285 random_days = 100 }
				}
				5 = { #5% chance of a catastrophic bushfire event
					if {
						limit = { NOT = { has_idea = AST_idea_national_bushfire_strategy } }
						country_event = { id = australia_md.27 days = 285 random_days = 100 }
					}
				}
			}
		}
	}
	on_monthly_SOL = { # Solomon Islands Competition
		effect = {
			if = {
				limit = { NOT = { has_country_flag = finished_solomon_competition } }
				for_each_loop = {
					array = influence_array
					value = v
					break = break
					if = {
						limit = { check_variable = { v = CHI } }
						set_country_flag = solomon_competition_CHI_influence
						clr_country_flag = solomon_competition_AST_influence
						log = "[GetDateText]: [This.GetName] executed on_monthly_sol and current competition winner is China."
						set_temp_variable = { break = 1 }
					}
					else_if = {
						limit = { check_variable = { v = AST } }
						set_country_flag = solomon_competition_AST_influence
						clr_country_flag = solomon_competition_CHI_influence
						log = "[GetDateText]: [This.GetName] executed on_monthly_sol and current competition winner is Australia."
						set_temp_variable = { break = 1 }
					}
				}
			}
		}
	}
}