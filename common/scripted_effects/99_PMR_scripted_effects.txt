modify_kolbasna_support = {
	add_to_variable = { kolbasna = modify_kolbasna }
	custom_effect_tooltip = PMR_kolbasna_tt
	clamp_variable = {
		var = kolbasna
		min = 0
		max = 90000
	}
}
modify_sheriffs_support = {
	add_to_variable = { sheriffs = modify_sheriffs }
	custom_effect_tooltip = PMR_sheriffs_tt
	clamp_variable = {
		var = sheriffs
		min = 0
		max = 100
	}
}

PMR_script_random_ai = {
	if = {
		limit = {
			has_global_flag = PMR_COMMUNISM_PATH
		}
		if = {
			limit = { NOT = { is_in_array = { ruling_party = 4 } } }
			set_temp_variable = { rul_party_temp = 4 }
			set_temp_variable = { enable_elections = 0 }
			change_ruling_party_effect = yes

			set_temp_variable = { party_index = 4 }
			set_temp_variable = { party_popularity_increase = 0.25 }
			set_temp_variable = { temp_outlook_increase = 0.25 }
			add_relative_party_popularity = yes
		}
	}
	if = {
		limit = {
			has_global_flag = PMR_PATRIOTIC_PATH
		}
		if = {
			limit = { NOT = { is_in_array = { ruling_party = 5 } } }
			set_temp_variable = { rul_party_temp = 5 }
			set_temp_variable = { enable_elections = 0 }
			change_ruling_party_effect = yes

			set_temp_variable = { party_index = 5 }
			set_temp_variable = { party_popularity_increase = 0.25 }
			set_temp_variable = { temp_outlook_increase = 0.25 }
			add_relative_party_popularity = yes
		}
	}
	if = {
		limit = {
			has_global_flag = PMR_LIBERAL_PATH
		}
		if = {
			limit = { NOT = { is_in_array = { ruling_party = 2 } } }
			set_temp_variable = { rul_party_temp = 2 }
			set_temp_variable = { enable_elections = 0 }
			change_ruling_party_effect = yes

			set_temp_variable = { party_index = 2 }
			set_temp_variable = { party_popularity_increase = 0.25 }
			set_temp_variable = { temp_outlook_increase = 0.25 }
			add_relative_party_popularity = yes
		}
	}
	if = {
		limit = {
			has_global_flag = PMR_LEBED_PATH
		}
		if = {
			limit = { NOT = { is_in_array = { ruling_party = 22 } } }
			set_temp_variable = { rul_party_temp = 22 }
			set_temp_variable = { enable_elections = 0 }
			change_ruling_party_effect = yes

			set_temp_variable = { party_index = 22 }
			set_temp_variable = { party_popularity_increase = 0.45 }
			set_temp_variable = { temp_outlook_increase = 0.45 }
			add_relative_party_popularity = yes
		}
	}
	if = {
		limit = {
			NOT = {
				OR = {
					has_global_flag = PMR_LIBERAL_PATH
					has_global_flag = PMR_PATRIOTIC_PATH
					has_global_flag = PMR_COMMUNISM_PATH
					has_global_flag = PMR_LEBED_PATH
				}
			}
		}
		random_list = {
			60 = {
				add_popularity = {
					ideology = communism
					popularity = 0.15
				}
			}
			10 = {
				if = {
					limit = { NOT = { is_in_array = { ruling_party = 2 } } }

					set_temp_variable = { rul_party_temp = 2 }
					set_temp_variable = { enable_elections = 0 }
					change_ruling_party_effect = yes

					set_temp_variable = { party_index = 2 }
					set_temp_variable = { party_popularity_increase = 0.25 }
					set_temp_variable = { temp_outlook_increase = 0.25 }
					add_relative_party_popularity = yes
				}
			}
			10 = {
				if = {
					limit = { NOT = { is_in_array = { ruling_party = 5 } } }
					set_temp_variable = { rul_party_temp = 5 }
					set_temp_variable = { enable_elections = 0 }
					change_ruling_party_effect = yes

					set_temp_variable = { party_index = 5 }
					set_temp_variable = { party_popularity_increase = 0.25 }
					set_temp_variable = { temp_outlook_increase = 0.25 }
					add_relative_party_popularity = yes
				}
			}
			10 = {
				if = {
					limit = { NOT = { is_in_array = { ruling_party = 4 } } }
					set_temp_variable = { rul_party_temp = 4 }
					set_temp_variable = { enable_elections = 0 }
					change_ruling_party_effect = yes

					set_temp_variable = { party_index = 4 }
					set_temp_variable = { party_popularity_increase = 0.25 }
					set_temp_variable = { temp_outlook_increase = 0.25 }
					add_relative_party_popularity = yes
				}
			}
			10 = {
				if = {
					limit = { NOT = { is_in_array = { ruling_party = 22 } } }
					set_temp_variable = { rul_party_temp = 22 }
					set_temp_variable = { enable_elections = 0 }
					change_ruling_party_effect = yes
		
					set_temp_variable = { party_index = 22 }
					set_temp_variable = { party_popularity_increase = 0.45 }
					set_temp_variable = { temp_outlook_increase = 0.45 }
					add_relative_party_popularity = yes
				}
			}
		}
	}
}
###########SHERIFF UP - CHANGE EFFECT###########
sheriff_holding_change_positive = {
	if = {
		limit = {
			has_idea = PMR_sheriff7
			NOT = { has_country_flag = PMR_sheriff_finish }
		}
		add_popularity = {
			ideology = neutrality
			popularity = 0.07
		}
		set_temp_variable = { party_index = 15 }
		set_temp_variable = { party_popularity_increase = 0.07 }
		add_relative_party_popularity = yes
		add_political_power = 150
	}
	else_if = {
		limit = {
			has_idea = PMR_sheriff6
			NOT = { has_country_flag = PMR_sheriff_finish }
		}
		swap_ideas = {
			remove_idea = PMR_sheriff6
			add_idea = PMR_sheriff7
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_sheriff5
			NOT = { has_country_flag = PMR_sheriff_finish }
		}
		swap_ideas = {
			remove_idea = PMR_sheriff5
			add_idea = PMR_sheriff6
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_sheriff4
			NOT = { has_country_flag = PMR_sheriff_finish }
		}
		swap_ideas = {
			remove_idea = PMR_sheriff4
			add_idea = PMR_sheriff5
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_sheriff3
			NOT = { has_country_flag = PMR_sheriff_finish }
		}
		swap_ideas = {
			remove_idea = PMR_sheriff3
			add_idea = PMR_sheriff4
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_sheriff2
			NOT = { has_country_flag = PMR_sheriff_finish }
		}
		swap_ideas = {
			remove_idea = PMR_sheriff2
			add_idea = PMR_sheriff3
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_sheriff1
			NOT = { has_country_flag = PMR_sheriff_finish }
		}
		swap_ideas = {
			remove_idea = PMR_sheriff1
			add_idea = PMR_sheriff2
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_sheriff
			NOT = { has_country_flag = PMR_sheriff_finish }
		}
		swap_ideas = {
			remove_idea = PMR_sheriff
			add_idea = PMR_sheriff1
		}
	}
}
###########ARMY TREE - CHANGE EFFECT###########
pmr_army_change_positive = {
	if = {
		limit = {
			has_idea = PMR_disorganized_army_6
		}
		remove_ideas = PMR_disorganized_army_6
	}
	else_if = {
		limit = {
			has_idea = PMR_disorganized_army_5
		}
		swap_ideas = {
			remove_idea = PMR_disorganized_army_5
			add_idea = PMR_disorganized_army_6
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_disorganized_army_4
		}
		swap_ideas = {
			remove_idea = PMR_disorganized_army_4
			add_idea = PMR_disorganized_army_5
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_disorganized_army_3
		}
		swap_ideas = {
			remove_idea = PMR_disorganized_army_3
			add_idea = PMR_disorganized_army_4
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_disorganized_army_2
		}
		swap_ideas = {
			remove_idea = PMR_disorganized_army_2
			add_idea = PMR_disorganized_army_3
		}
	}
	else_if = {
		limit = {
			has_idea = PMR_disorganized_army
		}
		swap_ideas = {
			remove_idea = PMR_disorganized_army
			add_idea = PMR_disorganized_army_2
		}
	}
}
PMR_russian_join_script = {
	if = {
		limit = {
			SOV = {
				emerging_communist_state_are_in_power = yes
			}
		}
		if = {
			limit = { NOT = { is_in_array = { ruling_party = 4 } } }
			set_temp_variable = { rul_party_temp = 4 }
			set_temp_variable = { enable_elections = 0 }
			change_ruling_party_effect = yes

			set_temp_variable = { party_index = 4 }
			set_temp_variable = { party_popularity_increase = 0.35 }
			set_temp_variable = { temp_outlook_increase = 0.35 }
			add_relative_party_popularity = yes
		}
	}
}