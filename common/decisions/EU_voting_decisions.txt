##########################
##########################
### EU_voting_category ###
##########################
##########################

EU_voting_category = {

	EU_Voting_cheat = {
	
		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		complete_effect = {   						
			ROOT = {
				country_event = {
					id = EUcheat.1
				}
			}
		}				
	}

	EU_Clear_Voting_cheat = {
	
		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		complete_effect = {   						
			every_country = {
				clr_country_flag = EU_voted
				clr_country_flag = EU_voted_yes
				clr_country_flag = EU_voted_no
				clear_variable	= global.var_EUvoteYes
				clear_variable	= global.var_EUpopYes
				clear_variable	= global.var_EUvoteNo
				clear_variable	= global.var_EUpopNo
				clear_variable	= global.var_EUvoteTotal
				clr_global_flag = focus_EU001_voted
				clr_global_flag = focus_EU001_QMV_voted
				clr_global_flag = focus_EU001_maj_voted
				clr_global_flag = focus_EU002_voted
				clr_global_flag = focus_EU002_QMV_voted
				clr_global_flag = focus_EU002_maj_voted
				clr_global_flag = focus_EU100_voted
				clr_global_flag = focus_EU100_QMV_voted
				clr_global_flag = focus_EU100_maj_voted
				clr_global_flag = focus_EU101_voted
				clr_global_flag = focus_EU101_QMV_voted
				clr_global_flag = focus_EU101_maj_voted
				clr_global_flag = focus_EU102_voted
				clr_global_flag = focus_EU102_QMV_voted
				clr_global_flag = focus_EU102_maj_voted
				clr_global_flag = focus_EU103_voted
				clr_global_flag = focus_EU103_QMV_voted
				clr_global_flag = focus_EU103_maj_voted
				clr_global_flag = focus_EU104_voted
				clr_global_flag = focus_EU104_QMV_voted
				clr_global_flag = focus_EU104_maj_voted
				clr_global_flag = focus_EU105_voted
				clr_global_flag = focus_EU105_QMV_voted
				clr_global_flag = focus_EU105_maj_voted
				clr_global_flag = focus_EU200_voted
				clr_global_flag = focus_EU200_QMV_voted
				clr_global_flag = focus_EU200_maj_voted
				clr_global_flag = focus_EU201_voted
				clr_global_flag = focus_EU201_QMV_voted
				clr_global_flag = focus_EU201_maj_voted
				clr_global_flag = focus_EU202_voted
				clr_global_flag = focus_EU202_QMV_voted
				clr_global_flag = focus_EU202_maj_voted
				clr_global_flag = focus_EU203_voted
				clr_global_flag = focus_EU203_QMV_voted
				clr_global_flag = focus_EU203_maj_voted
				clr_global_flag = focus_EU204_voted
				clr_global_flag = focus_EU204_QMV_voted
				clr_global_flag = focus_EU204_maj_voted
				clr_global_flag = focus_EU205_voted
				clr_global_flag = focus_EU205_QMV_voted
				clr_global_flag = focus_EU205_maj_voted
				clr_global_flag = focus_EU206_voted
				clr_global_flag = focus_EU206_QMV_voted
				clr_global_flag = focus_EU206_maj_voted
				clr_global_flag = focus_EU207_voted
				clr_global_flag = focus_EU207_QMV_voted
				clr_global_flag = focus_EU207_maj_voted
				clr_global_flag = focus_EU208_voted
				clr_global_flag = focus_EU208_QMV_voted
				clr_global_flag = focus_EU208_maj_voted
				clr_global_flag = focus_EU300_voted
				clr_global_flag = focus_EU300_QMV_voted
				clr_global_flag = focus_EU300_maj_voted
				clr_global_flag = focus_EU301_voted
				clr_global_flag = focus_EU301_QMV_voted
				clr_global_flag = focus_EU301_maj_voted
				clr_global_flag = focus_EU302_voted
				clr_global_flag = focus_EU302_QMV_voted
				clr_global_flag = focus_EU302_maj_voted
				clr_global_flag = focus_EU303_voted
				clr_global_flag = focus_EU303_QMV_voted
				clr_global_flag = focus_EU303_maj_voted
				clr_global_flag = focus_EU304_voted
				clr_global_flag = focus_EU304_QMV_voted
				clr_global_flag = focus_EU304_maj_voted
				clr_global_flag = focus_EU305_voted
				clr_global_flag = focus_EU305_QMV_voted
				clr_global_flag = focus_EU305_maj_voted
				clr_global_flag = focus_EU306_voted
				clr_global_flag = focus_EU306_QMV_voted
				clr_global_flag = focus_EU306_maj_voted
				clr_global_flag = focus_EU307_voted
				clr_global_flag = focus_EU307_QMV_voted
				clr_global_flag = focus_EU307_maj_voted
				clr_global_flag = focus_EU308_voted
				clr_global_flag = focus_EU308_QMV_voted
				clr_global_flag = focus_EU308_maj_voted
				clr_global_flag = focus_EU400_voted
				clr_global_flag = focus_EU400_QMV_voted
				clr_global_flag = focus_EU400_maj_voted
				clr_global_flag = focus_EU401_voted
				clr_global_flag = focus_EU401_QMV_voted
				clr_global_flag = focus_EU401_maj_voted
				clr_global_flag = focus_EU402_voted
				clr_global_flag = focus_EU402_QMV_voted
				clr_global_flag = focus_EU402_maj_voted
				clr_global_flag = focus_EU403_voted
				clr_global_flag = focus_EU403_QMV_voted
				clr_global_flag = focus_EU403_maj_voted
				clr_global_flag = focus_EU404_voted
				clr_global_flag = focus_EU404_QMV_voted
				clr_global_flag = focus_EU404_maj_voted
				clr_global_flag = focus_EU405_voted
				clr_global_flag = focus_EU405_QMV_voted
				clr_global_flag = focus_EU405_maj_voted
				clr_global_flag = focus_EU406_voted
				clr_global_flag = focus_EU406_QMV_voted
				clr_global_flag = focus_EU406_maj_voted
				clr_global_flag = focus_EU407_voted
				clr_global_flag = focus_EU407_QMV_voted
				clr_global_flag = focus_EU407_maj_voted
				clr_global_flag = focus_EU408_voted
				clr_global_flag = focus_EU408_QMV_voted
				clr_global_flag = focus_EU408_maj_voted
				clr_global_flag = focus_EU500_voted
				clr_global_flag = focus_EU500_QMV_voted
				clr_global_flag = focus_EU500_maj_voted
				clr_global_flag = focus_EU600_voted
				clr_global_flag = focus_EU600_QMV_voted
				clr_global_flag = focus_EU600_maj_voted
				clr_global_flag = focus_EU601_voted
				clr_global_flag = focus_EU601_QMV_voted
				clr_global_flag = focus_EU601_maj_voted
				clr_global_flag = focus_EU602_voted
				clr_global_flag = focus_EU602_QMV_voted
				clr_global_flag = focus_EU602_maj_voted
				clr_global_flag = focus_EU603_voted
				clr_global_flag = focus_EU603_QMV_voted
				clr_global_flag = focus_EU603_maj_voted
				clr_global_flag = focus_EU700_voted
				clr_global_flag = focus_EU700_QMV_voted
				clr_global_flag = focus_EU700_maj_voted
				clr_global_flag = focus_EU701_voted
				clr_global_flag = focus_EU701_QMV_voted
				clr_global_flag = focus_EU701_maj_voted
				clr_global_flag = focus_EU702_voted
				clr_global_flag = focus_EU702_QMV_voted
				clr_global_flag = focus_EU702_maj_voted
				clr_global_flag = focus_EU703_voted
				clr_global_flag = focus_EU703_QMV_voted
				clr_global_flag = focus_EU703_maj_voted
				clr_global_flag = focus_EU110_voted
				clr_global_flag = focus_EU110_QMV_voted
				clr_global_flag = focus_EU110_maj_voted
				clr_global_flag = focus_EU111_voted
				clr_global_flag = focus_EU111_QMV_voted
				clr_global_flag = focus_EU111_maj_voted
				clr_global_flag = focus_EU112_voted
				clr_global_flag = focus_EU112_QMV_voted
				clr_global_flag = focus_EU112_maj_voted
				clr_global_flag = focus_EU113_voted
				clr_global_flag = focus_EU113_QMV_voted
				clr_global_flag = focus_EU113_maj_voted	
				###result flags
				clr_global_flag = focus_EU001_result
				clr_global_flag = focus_EU001_QMV_result
				clr_global_flag = focus_EU001_maj_result
				clr_global_flag = focus_EU002_result
				clr_global_flag = focus_EU002_QMV_result
				clr_global_flag = focus_EU002_maj_result
				clr_global_flag = focus_EU100_result
				clr_global_flag = focus_EU100_QMV_result
				clr_global_flag = focus_EU100_maj_result
				clr_global_flag = focus_EU101_result
				clr_global_flag = focus_EU101_QMV_result
				clr_global_flag = focus_EU101_maj_result
				clr_global_flag = focus_EU102_result
				clr_global_flag = focus_EU102_QMV_result
				clr_global_flag = focus_EU102_maj_result
				clr_global_flag = focus_EU103_result
				clr_global_flag = focus_EU103_QMV_result
				clr_global_flag = focus_EU103_maj_result
				clr_global_flag = focus_EU104_result
				clr_global_flag = focus_EU104_QMV_result
				clr_global_flag = focus_EU104_maj_result
				clr_global_flag = focus_EU105_result
				clr_global_flag = focus_EU105_QMV_result
				clr_global_flag = focus_EU105_maj_result
				clr_global_flag = focus_EU200_result
				clr_global_flag = focus_EU200_QMV_result
				clr_global_flag = focus_EU200_maj_result
				clr_global_flag = focus_EU201_result
				clr_global_flag = focus_EU201_QMV_result
				clr_global_flag = focus_EU201_maj_result
				clr_global_flag = focus_EU202_result
				clr_global_flag = focus_EU202_QMV_result
				clr_global_flag = focus_EU202_maj_result
				clr_global_flag = focus_EU203_result
				clr_global_flag = focus_EU203_QMV_result
				clr_global_flag = focus_EU203_maj_result
				clr_global_flag = focus_EU204_result
				clr_global_flag = focus_EU204_QMV_result
				clr_global_flag = focus_EU204_maj_result
				clr_global_flag = focus_EU205_result
				clr_global_flag = focus_EU205_QMV_result
				clr_global_flag = focus_EU205_maj_result
				clr_global_flag = focus_EU206_result
				clr_global_flag = focus_EU206_QMV_result
				clr_global_flag = focus_EU206_maj_result
				clr_global_flag = focus_EU207_result
				clr_global_flag = focus_EU207_QMV_result
				clr_global_flag = focus_EU207_maj_result
				clr_global_flag = focus_EU208_result
				clr_global_flag = focus_EU208_QMV_result
				clr_global_flag = focus_EU208_maj_result
				clr_global_flag = focus_EU300_result
				clr_global_flag = focus_EU300_QMV_result
				clr_global_flag = focus_EU300_maj_result
				clr_global_flag = focus_EU301_result
				clr_global_flag = focus_EU301_QMV_result
				clr_global_flag = focus_EU301_maj_result
				clr_global_flag = focus_EU302_result
				clr_global_flag = focus_EU302_QMV_result
				clr_global_flag = focus_EU302_maj_result
				clr_global_flag = focus_EU303_result
				clr_global_flag = focus_EU303_QMV_result
				clr_global_flag = focus_EU303_maj_result
				clr_global_flag = focus_EU304_result
				clr_global_flag = focus_EU304_QMV_result
				clr_global_flag = focus_EU304_maj_result
				clr_global_flag = focus_EU305_result
				clr_global_flag = focus_EU305_QMV_result
				clr_global_flag = focus_EU305_maj_result
				clr_global_flag = focus_EU306_result
				clr_global_flag = focus_EU306_QMV_result
				clr_global_flag = focus_EU306_maj_result
				clr_global_flag = focus_EU307_result
				clr_global_flag = focus_EU307_QMV_result
				clr_global_flag = focus_EU307_maj_result
				clr_global_flag = focus_EU308_result
				clr_global_flag = focus_EU308_QMV_result
				clr_global_flag = focus_EU308_maj_result
				clr_global_flag = focus_EU400_result
				clr_global_flag = focus_EU400_QMV_result
				clr_global_flag = focus_EU400_maj_result
				clr_global_flag = focus_EU401_result
				clr_global_flag = focus_EU401_QMV_result
				clr_global_flag = focus_EU401_maj_result
				clr_global_flag = focus_EU402_result
				clr_global_flag = focus_EU402_QMV_result
				clr_global_flag = focus_EU402_maj_result
				clr_global_flag = focus_EU403_result
				clr_global_flag = focus_EU403_QMV_result
				clr_global_flag = focus_EU403_maj_result
				clr_global_flag = focus_EU404_result
				clr_global_flag = focus_EU404_QMV_result
				clr_global_flag = focus_EU404_maj_result
				clr_global_flag = focus_EU405_result
				clr_global_flag = focus_EU405_QMV_result
				clr_global_flag = focus_EU405_maj_result
				clr_global_flag = focus_EU406_result
				clr_global_flag = focus_EU406_QMV_result
				clr_global_flag = focus_EU406_maj_result
				clr_global_flag = focus_EU407_result
				clr_global_flag = focus_EU407_QMV_result
				clr_global_flag = focus_EU407_maj_result
				clr_global_flag = focus_EU408_result
				clr_global_flag = focus_EU408_QMV_result
				clr_global_flag = focus_EU408_maj_result
				clr_global_flag = focus_EU500_result
				clr_global_flag = focus_EU500_QMV_result
				clr_global_flag = focus_EU500_maj_result
				clr_global_flag = focus_EU600_result
				clr_global_flag = focus_EU600_QMV_result
				clr_global_flag = focus_EU600_maj_result
				clr_global_flag = focus_EU601_result
				clr_global_flag = focus_EU601_QMV_result
				clr_global_flag = focus_EU601_maj_result
				clr_global_flag = focus_EU602_result
				clr_global_flag = focus_EU602_QMV_result
				clr_global_flag = focus_EU602_maj_result
				clr_global_flag = focus_EU603_result
				clr_global_flag = focus_EU603_QMV_result
				clr_global_flag = focus_EU603_maj_result
				clr_global_flag = focus_EU700_result
				clr_global_flag = focus_EU700_QMV_result
				clr_global_flag = focus_EU700_maj_result
				clr_global_flag = focus_EU701_result
				clr_global_flag = focus_EU701_QMV_result
				clr_global_flag = focus_EU701_maj_result
				clr_global_flag = focus_EU702_result
				clr_global_flag = focus_EU702_QMV_result
				clr_global_flag = focus_EU702_maj_result
				clr_global_flag = focus_EU703_result
				clr_global_flag = focus_EU703_QMV_result
				clr_global_flag = focus_EU703_maj_result
				clr_global_flag = focus_EU110_result
				clr_global_flag = focus_EU110_QMV_result
				clr_global_flag = focus_EU110_maj_result
				clr_global_flag = focus_EU111_result
				clr_global_flag = focus_EU111_QMV_result
				clr_global_flag = focus_EU111_maj_result
				clr_global_flag = focus_EU112_result
				clr_global_flag = focus_EU112_QMV_result
				clr_global_flag = focus_EU112_maj_result
				clr_global_flag = focus_EU113_result
				clr_global_flag = focus_EU113_QMV_result
				clr_global_flag = focus_EU113_maj_result
				
			}
		}				
	}

	EU_Voting_tutorial = {
	
		available = {
			has_country_flag = EU_potential
		}
		
		visible = { 
			has_country_flag = EU_potential 
		} 
		
		complete_effect = {   						
			ROOT = {
				country_event = {
					id = EU_tutorial.1
				}
			}
		}				
	}

#######################
### Testing Section ###
#######################







##############################
### End of Testing Section ###
##############################

######################################
### EU Focus Tree Voting Decisions ###
######################################


	### EU Policies # NO Unanimity ###


	### EU Policies # NO QMV ###


	### EU Policies # NO maj ###


	### EU Policies # Result Decision # NO Unanimity ###

	### EU Policies # Result Decision QMV # NO QMV ###

	### EU Policies # Result Decision maj # NO maj ###




	### Member State Policies # NO Unanimity ###


	### Member State Policies # NO QMV ###


	### Member State Policies # NO maj ###


	### Member State Policies # Result Decision # NO Unanimity ###

	### Member State Policies # Result Decision QMV # NO QMV ###

	### Member State Policies # Result Decision maj # NO maj ###




	### EU Reforms # NO Unanimity ###


	### EU Reforms # NO QMV ###


	### EU Reforms # NO maj ###


	### EU Reforms # Result Decision # NO Unanimity ###

	### EU Reforms # Result Decision QMV # NO QMV ###

	### EU Reforms # Result Decision maj # NO maj ###




	### Charter of Fundamental Rights of the European Union ###
	EU_voting_decision_focus_EU101 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Charter of Fundamental Rights of the European Union"
					AND = {
						has_country_flag = focus_EU101
						NOT = {
							has_global_flag = focus_EU101_voted
							has_country_flag = focus_EU101_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU101
			NOT = {
				has_country_flag = focus_EU101_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU101_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Charter of Fundamental Rights of the European Union # NO QMV ###


	### Charter of Fundamental Rights of the European Union # NO maj ###


	### Charter of Fundamental Rights of the European Union # Result Decision ###
	EU_voting_decision_focus_EU101_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU101_result }
			has_global_flag = focus_EU101_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU101
			NOT = { has_global_flag = focus_EU101_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU101_result
			every_country = {
				limit = { has_country_flag = focus_EU101 }
				country_event = {
					id = EUvote.2101
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU101
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU101
					}
				}
		}
	}

	### Charter of Fundamental Rights of the European Union # Result Decision QMV # NO QMV ###

	### Charter of Fundamental Rights of the European Union # Result Decision maj # NO maj ###

	### Charter of Fundamental Rights of the European Union retry ###

	EU_voting_decision_EU101_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU101_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU101_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU101
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU101_retry
			every_country = {
				clr_country_flag = focus_EU101_no
				clr_country_flag = focus_EU101_QMV_no
				clr_country_flag = focus_EU101_maj_no
			}
				set_country_flag = focus_EU101
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Convention # NO Unanimity ###


	### European Convention # NO QMV ###


	### European Convention ###
	EU_voting_decision_focus_EU102_maj = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Convention"
					AND = {
						has_country_flag = focus_EU102_maj
						NOT = {
							has_global_flag = focus_EU102_maj_voted
							has_country_flag = focus_EU102_maj_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU102_maj
			NOT = {
				has_country_flag = focus_EU102_maj_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU102_maj_voted
			set_global_flag = EU_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Convention # Result Decision # NO Unanimity ###

	### European Convention # Result Decision QMV # NO QMV ###

	### European Convention # Result Decision maj ###
	EU_voting_decision_focus_EU102_maj_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU102_maj_result }
			has_global_flag = focus_EU102_maj_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU102_maj
			NOT = { has_global_flag = focus_EU102_maj_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU102_maj_result
			every_country = {
				limit = { has_country_flag = focus_EU102_maj }
				country_event = {
					id = EUvote.2102
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU102_maj
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU102_maj
					}
				}
		}
	}

	### European Convention retry ###

	EU_voting_decision_EU102_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU102_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU102_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU102_maj
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU102_retry
			every_country = {
				clr_country_flag = focus_EU102_no
				clr_country_flag = focus_EU102_QMV_no
				clr_country_flag = focus_EU102_maj_no
			}
					set_country_flag = focus_EU102_maj
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Constitution ###
	EU_voting_decision_focus_EU103 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Constitution"
					AND = {
						has_country_flag = focus_EU103
						NOT = {
							has_global_flag = focus_EU103_voted
							has_country_flag = focus_EU103_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
				NOT = {
					OR = {
						has_country_flag = focus_EU104_yes
						has_country_flag = focus_EU104_QMV_yes
						has_country_flag = focus_EU104_maj_yes
					}
				}
			has_country_flag = focus_EU103
			NOT = {
				has_country_flag = focus_EU103_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU103_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Constitution # NO QMV ###


	### European Constitution # NO maj ###


	### European Constitution # Result Decision ###
	EU_voting_decision_focus_EU103_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU103_result }
			has_global_flag = focus_EU103_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU103
			NOT = { has_global_flag = focus_EU103_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU103_result
			every_country = {
				limit = { has_country_flag = focus_EU103 }
				country_event = {
					id = EUvote.2103
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU103
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU103
					}
				}
		}
	}

	### European Constitution # Result Decision QMV # NO QMV ###

	### European Constitution # Result Decision maj # NO maj ###

	### European Constitution retry ###

	EU_voting_decision_EU103_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU103_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU103_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU103
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU103_retry
			every_country = {
				clr_country_flag = focus_EU103_no
				clr_country_flag = focus_EU103_QMV_no
				clr_country_flag = focus_EU103_maj_no
			}
				set_country_flag = focus_EU103
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Treaty of Lisbon ###
	EU_voting_decision_focus_EU104 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Treaty of Lisbon"
					AND = {
						has_country_flag = focus_EU104
						NOT = {
							has_global_flag = focus_EU104_voted
							has_country_flag = focus_EU104_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
				NOT = {
					OR = {
						has_country_flag = focus_EU103_yes
						has_country_flag = focus_EU103_QMV_yes
						has_country_flag = focus_EU103_maj_yes
					}
				}
			has_country_flag = focus_EU104
			NOT = {
				has_country_flag = focus_EU104_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU104_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Treaty of Lisbon # NO QMV ###


	### Treaty of Lisbon # NO maj ###


	### Treaty of Lisbon # Result Decision ###
	EU_voting_decision_focus_EU104_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU104_result }
			has_global_flag = focus_EU104_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU104
			NOT = { has_global_flag = focus_EU104_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU104_result
			every_country = {
				limit = { has_country_flag = focus_EU104 }
				country_event = {
					id = EUvote.2104
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU104
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU104
					}
				}
		}
	}

	### Treaty of Lisbon # Result Decision QMV # NO QMV ###

	### Treaty of Lisbon # Result Decision maj # NO maj ###

	### Treaty of Lisbon retry ###

	EU_voting_decision_EU104_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU104_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU104_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU104
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU104_retry
			every_country = {
				clr_country_flag = focus_EU104_no
				clr_country_flag = focus_EU104_QMV_no
				clr_country_flag = focus_EU104_maj_no
			}
				set_country_flag = focus_EU104
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European External Action Service ###
	EU_voting_decision_focus_EU105 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European External Action Service"
					AND = {
						has_country_flag = focus_EU105
						NOT = {
							has_global_flag = focus_EU105_voted
							has_country_flag = focus_EU105_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU105
			NOT = {
				has_country_flag = focus_EU105_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU105_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European External Action Service # NO QMV ###


	### European External Action Service # NO maj ###


	### European External Action Service # Result Decision ###
	EU_voting_decision_focus_EU105_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU105_result }
			has_global_flag = focus_EU105_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU105
			NOT = { has_global_flag = focus_EU105_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU105_result
			every_country = {
				limit = { has_country_flag = focus_EU105 }
				country_event = {
					id = EUvote.2105
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU105
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU105
					}
				}
		}
	}

	### European External Action Service # Result Decision QMV # NO QMV ###

	### European External Action Service # Result Decision maj # NO maj ###

	### European External Action Service retry ###

	EU_voting_decision_EU105_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU105_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU105_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU105
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU105_retry
			every_country = {
				clr_country_flag = focus_EU105_no
				clr_country_flag = focus_EU105_QMV_no
				clr_country_flag = focus_EU105_maj_no
			}
				set_country_flag = focus_EU105
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### EU Fiscal Policies # NO Unanimity ###


	### EU Fiscal Policies # NO QMV ###


	### EU Fiscal Policies # NO maj ###


	### EU Fiscal Policies # Result Decision # NO Unanimity ###

	### EU Fiscal Policies # Result Decision QMV # NO QMV ###

	### EU Fiscal Policies # Result Decision maj # NO maj ###




	### ECB Intervention # NO Unanimity ###


	### ECB Intervention # NO QMV ###


	### ECB Intervention ###
	EU_voting_decision_focus_EU201_maj = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus ECB Intervention"
					AND = {
						has_country_flag = focus_EU201_maj
						NOT = {
							has_global_flag = focus_EU201_maj_voted
							has_country_flag = focus_EU201_maj_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU201_maj
			NOT = {
				has_country_flag = focus_EU201_maj_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU201_maj_voted
			set_global_flag = EU_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### ECB Intervention # Result Decision # NO Unanimity ###

	### ECB Intervention # Result Decision QMV # NO QMV ###

	### ECB Intervention # Result Decision maj ###
	EU_voting_decision_focus_EU201_maj_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU201_maj_result }
			has_global_flag = focus_EU201_maj_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU201_maj
			NOT = { has_global_flag = focus_EU201_maj_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU201_maj_result
			every_country = {
				limit = { has_country_flag = focus_EU201_maj }
				country_event = {
					id = EUvote.2201
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU201_maj
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU201_maj
					}
				}
		}
	}

	### ECB Intervention retry ###

	EU_voting_decision_EU201_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU201_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU201_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU201_maj
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU201_retry
			every_country = {
				clr_country_flag = focus_EU201_no
				clr_country_flag = focus_EU201_QMV_no
				clr_country_flag = focus_EU201_maj_no
			}
					set_country_flag = focus_EU201_maj
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Banking Union ###
	EU_voting_decision_focus_EU202 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Banking Union"
					AND = {
						has_country_flag = focus_EU202
						NOT = {
							has_global_flag = focus_EU202_voted
							has_country_flag = focus_EU202_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU202
			NOT = {
				has_country_flag = focus_EU202_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU202_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Banking Union ###
	EU_voting_decision_focus_EU202_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Banking Union"
					AND = {
						has_country_flag = focus_EU202_QMV
						NOT = {
							has_global_flag = focus_EU202_QMV_voted
							has_country_flag = focus_EU202_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU202_QMV
			NOT = {
				has_country_flag = focus_EU202_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU202_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Banking Union # NO maj ###


	### European Banking Union # Result Decision ###
	EU_voting_decision_focus_EU202_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU202_result }
			has_global_flag = focus_EU202_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU202
			NOT = { has_global_flag = focus_EU202_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU202_result
			every_country = {
				limit = { has_country_flag = focus_EU202 }
				country_event = {
					id = EUvote.2202
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU202
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU202
					}
				}
		}
	}

	### European Banking Union # Result Decision QMV ###
	EU_voting_decision_focus_EU202_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU202_QMV_result }
			has_global_flag = focus_EU202_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU202_QMV
			NOT = { has_global_flag = focus_EU202_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU202_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU202_QMV }
				country_event = {
					id = EUvote.2202
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU202_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU202_QMV
					}
				}
		}
	}

	### European Banking Union # Result Decision maj # NO maj ###

	### European Banking Union retry ###

	EU_voting_decision_EU202_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU202_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU202_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU202
						has_country_flag = focus_EU202_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU202_retry
			every_country = {
				clr_country_flag = focus_EU202_no
				clr_country_flag = focus_EU202_QMV_no
				clr_country_flag = focus_EU202_maj_no
			}
			if = {
				limit = {
					OR = {
					has_global_flag = european_constitution
					has_global_flag = treaty_of_lisbon
					}
				}
				set_country_flag = focus_EU202_QMV
			}
			else = {
				set_country_flag = focus_EU202
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Eurobonds ###
	EU_voting_decision_focus_EU203 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Eurobonds"
					AND = {
						has_country_flag = focus_EU203
						NOT = {
							has_global_flag = focus_EU203_voted
							has_country_flag = focus_EU203_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU203
			NOT = {
				has_country_flag = focus_EU203_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU203_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Eurobonds # NO QMV ###


	### Eurobonds # NO maj ###


	### Eurobonds # Result Decision ###
	EU_voting_decision_focus_EU203_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU203_result }
			has_global_flag = focus_EU203_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU203
			NOT = { has_global_flag = focus_EU203_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU203_result
			every_country = {
				limit = { has_country_flag = focus_EU203 }
				country_event = {
					id = EUvote.2203
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU203
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU203
					}
				}
		}
	}

	### Eurobonds # Result Decision QMV # NO QMV ###

	### Eurobonds # Result Decision maj # NO maj ###

	### Eurobonds retry ###

	EU_voting_decision_EU203_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU203_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU203_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU203
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU203_retry
			every_country = {
				clr_country_flag = focus_EU203_no
				clr_country_flag = focus_EU203_QMV_no
				clr_country_flag = focus_EU203_maj_no
			}
				set_country_flag = focus_EU203
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Financial Stability Facility (EFSF) ###
	EU_voting_decision_focus_EU204 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Financial Stability Facility (EFSF)"
					AND = {
						has_country_flag = focus_EU204
						NOT = {
							has_global_flag = focus_EU204_voted
							has_country_flag = focus_EU204_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU204
			NOT = {
				has_country_flag = focus_EU204_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU204_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Financial Stability Facility (EFSF) # NO QMV ###


	### European Financial Stability Facility (EFSF) # NO maj ###


	### European Financial Stability Facility (EFSF) # Result Decision ###
	EU_voting_decision_focus_EU204_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU204_result }
			has_global_flag = focus_EU204_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU204
			NOT = { has_global_flag = focus_EU204_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU204_result
			every_country = {
				limit = { has_country_flag = focus_EU204 }
				country_event = {
					id = EUvote.2204
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU204
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU204
					}
				}
		}
	}

	### European Financial Stability Facility (EFSF) # Result Decision QMV # NO QMV ###

	### European Financial Stability Facility (EFSF) # Result Decision maj # NO maj ###

	### European Financial Stability Facility (EFSF) retry ###

	EU_voting_decision_EU204_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU204_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU204_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU204
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU204_retry
			every_country = {
				clr_country_flag = focus_EU204_no
				clr_country_flag = focus_EU204_QMV_no
				clr_country_flag = focus_EU204_maj_no
			}
				set_country_flag = focus_EU204
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Stability Mechanism (ESM) ###
	EU_voting_decision_focus_EU205 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Stability Mechanism (ESM)"
					AND = {
						has_country_flag = focus_EU205
						NOT = {
							has_global_flag = focus_EU205_voted
							has_country_flag = focus_EU205_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU205
			NOT = {
				has_country_flag = focus_EU205_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU205_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Stability Mechanism (ESM) # NO QMV ###


	### European Stability Mechanism (ESM) # NO maj ###


	### European Stability Mechanism (ESM) # Result Decision ###
	EU_voting_decision_focus_EU205_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU205_result }
			has_global_flag = focus_EU205_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU205
			NOT = { has_global_flag = focus_EU205_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU205_result
			every_country = {
				limit = { has_country_flag = focus_EU205 }
				country_event = {
					id = EUvote.2205
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU205
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU205
					}
				}
		}
	}

	### European Stability Mechanism (ESM) # Result Decision QMV # NO QMV ###

	### European Stability Mechanism (ESM) # Result Decision maj # NO maj ###

	### European Stability Mechanism (ESM) retry ###

	EU_voting_decision_EU205_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU205_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU205_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU205
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU205_retry
			every_country = {
				clr_country_flag = focus_EU205_no
				clr_country_flag = focus_EU205_QMV_no
				clr_country_flag = focus_EU205_maj_no
			}
				set_country_flag = focus_EU205
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Fiscal Union ###
	EU_voting_decision_focus_EU206 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Fiscal Union"
					AND = {
						has_country_flag = focus_EU206
						NOT = {
							has_global_flag = focus_EU206_voted
							has_country_flag = focus_EU206_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU206
			NOT = {
				has_country_flag = focus_EU206_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU206_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Fiscal Union # NO QMV ###


	### Fiscal Union # NO maj ###


	### Fiscal Union # Result Decision ###
	EU_voting_decision_focus_EU206_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU206_result }
			has_global_flag = focus_EU206_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU206
			NOT = { has_global_flag = focus_EU206_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU206_result
			every_country = {
				limit = { has_country_flag = focus_EU206 }
				country_event = {
					id = EUvote.2206
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU206
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU206
					}
				}
		}
	}

	### Fiscal Union # Result Decision QMV # NO QMV ###

	### Fiscal Union # Result Decision maj # NO maj ###

	### Fiscal Union retry ###

	EU_voting_decision_EU206_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU206_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU206_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU206
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU206_retry
			every_country = {
				clr_country_flag = focus_EU206_no
				clr_country_flag = focus_EU206_QMV_no
				clr_country_flag = focus_EU206_maj_no
			}
				set_country_flag = focus_EU206
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Economic Government ###
	EU_voting_decision_focus_EU207 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Economic Government"
					AND = {
						has_country_flag = focus_EU207
						NOT = {
							has_global_flag = focus_EU207_voted
							has_country_flag = focus_EU207_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU207
			NOT = {
				has_country_flag = focus_EU207_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU207_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Economic Government # NO QMV ###


	### European Economic Government # NO maj ###


	### European Economic Government # Result Decision ###
	EU_voting_decision_focus_EU207_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU207_result }
			has_global_flag = focus_EU207_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU207
			NOT = { has_global_flag = focus_EU207_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU207_result
			every_country = {
				limit = { has_country_flag = focus_EU207 }
				country_event = {
					id = EUvote.2207
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU207
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU207
					}
				}
		}
	}

	### European Economic Government # Result Decision QMV # NO QMV ###

	### European Economic Government # Result Decision maj # NO maj ###

	### European Economic Government retry ###

	EU_voting_decision_EU207_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU207_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU207_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU207
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU207_retry
			every_country = {
				clr_country_flag = focus_EU207_no
				clr_country_flag = focus_EU207_QMV_no
				clr_country_flag = focus_EU207_maj_no
			}
				set_country_flag = focus_EU207
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Minister of Economy and Finance ###
	EU_voting_decision_focus_EU208 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Minister of Economy and Finance"
					AND = {
						has_country_flag = focus_EU208
						NOT = {
							has_global_flag = focus_EU208_voted
							has_country_flag = focus_EU208_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU208
			NOT = {
				has_country_flag = focus_EU208_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU208_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Minister of Economy and Finance # NO QMV ###


	### European Minister of Economy and Finance # NO maj ###


	### European Minister of Economy and Finance # Result Decision ###
	EU_voting_decision_focus_EU208_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU208_result }
			has_global_flag = focus_EU208_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU208
			NOT = { has_global_flag = focus_EU208_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU208_result
			every_country = {
				limit = { has_country_flag = focus_EU208 }
				country_event = {
					id = EUvote.2208
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU208
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU208
					}
				}
		}
	}

	### European Minister of Economy and Finance # Result Decision QMV # NO QMV ###

	### European Minister of Economy and Finance # Result Decision maj # NO maj ###

	### European Minister of Economy and Finance retry ###

	EU_voting_decision_EU208_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU208_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU208_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU208
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU208_retry
			every_country = {
				clr_country_flag = focus_EU208_no
				clr_country_flag = focus_EU208_QMV_no
				clr_country_flag = focus_EU208_maj_no
			}
				set_country_flag = focus_EU208
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### EU Defense Policies # NO Unanimity ###


	### EU Defense Policies # NO QMV ###


	### EU Defense Policies # NO maj ###


	### EU Defense Policies # Result Decision # NO Unanimity ###

	### EU Defense Policies # Result Decision QMV # NO QMV ###

	### EU Defense Policies # Result Decision maj # NO maj ###




	### European Defence Agency (EDA) ###
	EU_voting_decision_focus_EU301 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Defence Agency (EDA)"
					AND = {
						has_country_flag = focus_EU301
						NOT = {
							has_global_flag = focus_EU301_voted
							has_country_flag = focus_EU301_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU301
			NOT = {
				has_country_flag = focus_EU301_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU301_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Defence Agency (EDA) ###
	EU_voting_decision_focus_EU301_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Defence Agency (EDA)"
					AND = {
						has_country_flag = focus_EU301_QMV
						NOT = {
							has_global_flag = focus_EU301_QMV_voted
							has_country_flag = focus_EU301_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU301_QMV
			NOT = {
				has_country_flag = focus_EU301_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU301_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Defence Agency (EDA) # NO maj ###


	### European Defence Agency (EDA) # Result Decision ###
	EU_voting_decision_focus_EU301_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU301_result }
			has_global_flag = focus_EU301_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU301
			NOT = { has_global_flag = focus_EU301_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU301_result
			every_country = {
				limit = { has_country_flag = focus_EU301 }
				country_event = {
					id = EUvote.2301
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU301
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU301
					}
				}
		}
	}

	### European Defence Agency (EDA) # Result Decision QMV ###
	EU_voting_decision_focus_EU301_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU301_QMV_result }
			has_global_flag = focus_EU301_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU301_QMV
			NOT = { has_global_flag = focus_EU301_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU301_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU301_QMV }
				country_event = {
					id = EUvote.2301
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU301_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU301_QMV
					}
				}
		}
	}

	### European Defence Agency (EDA) # Result Decision maj # NO maj ###

	### European Defence Agency (EDA) retry ###

	EU_voting_decision_EU301_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU301_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU301_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU301
						has_country_flag = focus_EU301_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU301_retry
			every_country = {
				clr_country_flag = focus_EU301_no
				clr_country_flag = focus_EU301_QMV_no
				clr_country_flag = focus_EU301_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU301_QMV
			}
			else = {
				set_country_flag = focus_EU301
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Permanent Structured Cooperation (PESCO) ###
	EU_voting_decision_focus_EU302 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Permanent Structured Cooperation (PESCO)"
					AND = {
						has_country_flag = focus_EU302
						NOT = {
							has_global_flag = focus_EU302_voted
							has_country_flag = focus_EU302_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU302
			NOT = {
				has_country_flag = focus_EU302_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU302_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Permanent Structured Cooperation (PESCO) ###
	EU_voting_decision_focus_EU302_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Permanent Structured Cooperation (PESCO)"
					AND = {
						has_country_flag = focus_EU302_QMV
						NOT = {
							has_global_flag = focus_EU302_QMV_voted
							has_country_flag = focus_EU302_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU302_QMV
			NOT = {
				has_country_flag = focus_EU302_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU302_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Permanent Structured Cooperation (PESCO) # NO maj ###


	### Permanent Structured Cooperation (PESCO) # Result Decision ###
	EU_voting_decision_focus_EU302_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU302_result }
			has_global_flag = focus_EU302_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU302
			NOT = { has_global_flag = focus_EU302_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU302_result
			every_country = {
				limit = { has_country_flag = focus_EU302 }
				country_event = {
					id = EUvote.2302
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU302
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU302
					}
				}
		}
	}

	### Permanent Structured Cooperation (PESCO) # Result Decision QMV ###
	EU_voting_decision_focus_EU302_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU302_QMV_result }
			has_global_flag = focus_EU302_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU302_QMV
			NOT = { has_global_flag = focus_EU302_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU302_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU302_QMV }
				country_event = {
					id = EUvote.2302
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU302_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU302_QMV
					}
				}
		}
	}

	### Permanent Structured Cooperation (PESCO) # Result Decision maj # NO maj ###

	### Permanent Structured Cooperation (PESCO) retry ###

	EU_voting_decision_EU302_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU302_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU302_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU302
						has_country_flag = focus_EU302_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU302_retry
			every_country = {
				clr_country_flag = focus_EU302_no
				clr_country_flag = focus_EU302_QMV_no
				clr_country_flag = focus_EU302_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU302_QMV
			}
			else = {
				set_country_flag = focus_EU302
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Defence Fund ###
	EU_voting_decision_focus_EU303 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Defence Fund"
					AND = {
						has_country_flag = focus_EU303
						NOT = {
							has_global_flag = focus_EU303_voted
							has_country_flag = focus_EU303_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU303
			NOT = {
				has_country_flag = focus_EU303_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU303_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Defence Fund ###
	EU_voting_decision_focus_EU303_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Defence Fund"
					AND = {
						has_country_flag = focus_EU303_QMV
						NOT = {
							has_global_flag = focus_EU303_QMV_voted
							has_country_flag = focus_EU303_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU303_QMV
			NOT = {
				has_country_flag = focus_EU303_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU303_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Defence Fund # NO maj ###


	### European Defence Fund # Result Decision ###
	EU_voting_decision_focus_EU303_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU303_result }
			has_global_flag = focus_EU303_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU303
			NOT = { has_global_flag = focus_EU303_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU303_result
			every_country = {
				limit = { has_country_flag = focus_EU303 }
				country_event = {
					id = EUvote.2303
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU303
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU303
					}
				}
		}
	}

	### European Defence Fund # Result Decision QMV ###
	EU_voting_decision_focus_EU303_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU303_QMV_result }
			has_global_flag = focus_EU303_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU303_QMV
			NOT = { has_global_flag = focus_EU303_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU303_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU303_QMV }
				country_event = {
					id = EUvote.2303
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU303_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU303_QMV
					}
				}
		}
	}

	### European Defence Fund # Result Decision maj # NO maj ###

	### European Defence Fund retry ###

	EU_voting_decision_EU303_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU303_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU303_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU303
						has_country_flag = focus_EU303_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU303_retry
			every_country = {
				clr_country_flag = focus_EU303_no
				clr_country_flag = focus_EU303_QMV_no
				clr_country_flag = focus_EU303_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU303_QMV
			}
			else = {
				set_country_flag = focus_EU303
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Security Council ###
	EU_voting_decision_focus_EU304 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Security Council"
					AND = {
						has_country_flag = focus_EU304
						NOT = {
							has_global_flag = focus_EU304_voted
							has_country_flag = focus_EU304_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU304
			NOT = {
				has_country_flag = focus_EU304_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU304_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Security Council ###
	EU_voting_decision_focus_EU304_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Security Council"
					AND = {
						has_country_flag = focus_EU304_QMV
						NOT = {
							has_global_flag = focus_EU304_QMV_voted
							has_country_flag = focus_EU304_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU304_QMV
			NOT = {
				has_country_flag = focus_EU304_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU304_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Security Council # NO maj ###


	### European Security Council # Result Decision ###
	EU_voting_decision_focus_EU304_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU304_result }
			has_global_flag = focus_EU304_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU304
			NOT = { has_global_flag = focus_EU304_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU304_result
			every_country = {
				limit = { has_country_flag = focus_EU304 }
				country_event = {
					id = EUvote.2304
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU304
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU304
					}
				}
		}
	}

	### European Security Council # Result Decision QMV ###
	EU_voting_decision_focus_EU304_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU304_QMV_result }
			has_global_flag = focus_EU304_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU304_QMV
			NOT = { has_global_flag = focus_EU304_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU304_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU304_QMV }
				country_event = {
					id = EUvote.2304
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU304_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU304_QMV
					}
				}
		}
	}

	### European Security Council # Result Decision maj # NO maj ###

	### European Security Council retry ###

	EU_voting_decision_EU304_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU304_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU304_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU304
						has_country_flag = focus_EU304_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU304_retry
			every_country = {
				clr_country_flag = focus_EU304_no
				clr_country_flag = focus_EU304_QMV_no
				clr_country_flag = focus_EU304_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU304_QMV
			}
			else = {
				set_country_flag = focus_EU304
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### EuroArmy ###
	EU_voting_decision_focus_EU305 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EuroArmy"
					AND = {
						has_country_flag = focus_EU305
						NOT = {
							has_global_flag = focus_EU305_voted
							has_country_flag = focus_EU305_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU305
			NOT = {
				has_country_flag = focus_EU305_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU305_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EuroArmy ###
	EU_voting_decision_focus_EU305_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EuroArmy"
					AND = {
						has_country_flag = focus_EU305_QMV
						NOT = {
							has_global_flag = focus_EU305_QMV_voted
							has_country_flag = focus_EU305_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU305_QMV
			NOT = {
				has_country_flag = focus_EU305_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU305_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EuroArmy # NO maj ###


	### EuroArmy # Result Decision ###
	EU_voting_decision_focus_EU305_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU305_result }
			has_global_flag = focus_EU305_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU305
			NOT = { has_global_flag = focus_EU305_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU305_result
			every_country = {
				limit = { has_country_flag = focus_EU305 }
				country_event = {
					id = EUvote.2305
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU305
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU305
					}
				}
		}
	}

	### EuroArmy # Result Decision QMV ###
	EU_voting_decision_focus_EU305_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU305_QMV_result }
			has_global_flag = focus_EU305_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU305_QMV
			NOT = { has_global_flag = focus_EU305_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU305_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU305_QMV }
				country_event = {
					id = EUvote.2305
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU305_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU305_QMV
					}
				}
		}
	}

	### EuroArmy # Result Decision maj # NO maj ###

	### EuroArmy retry ###

	EU_voting_decision_EU305_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU305_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU305_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU305
						has_country_flag = focus_EU305_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU305_retry
			every_country = {
				clr_country_flag = focus_EU305_no
				clr_country_flag = focus_EU305_QMV_no
				clr_country_flag = focus_EU305_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU305_QMV
			}
			else = {
				set_country_flag = focus_EU305
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### EuroNavy ###
	EU_voting_decision_focus_EU306 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EuroNavy"
					AND = {
						has_country_flag = focus_EU306
						NOT = {
							has_global_flag = focus_EU306_voted
							has_country_flag = focus_EU306_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU306
			NOT = {
				has_country_flag = focus_EU306_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU306_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EuroNavy ###
	EU_voting_decision_focus_EU306_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EuroNavy"
					AND = {
						has_country_flag = focus_EU306_QMV
						NOT = {
							has_global_flag = focus_EU306_QMV_voted
							has_country_flag = focus_EU306_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU306_QMV
			NOT = {
				has_country_flag = focus_EU306_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU306_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EuroNavy # NO maj ###


	### EuroNavy # Result Decision ###
	EU_voting_decision_focus_EU306_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU306_result }
			has_global_flag = focus_EU306_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU306
			NOT = { has_global_flag = focus_EU306_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU306_result
			every_country = {
				limit = { has_country_flag = focus_EU306 }
				country_event = {
					id = EUvote.2306
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU306
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU306
					}
				}
		}
	}

	### EuroNavy # Result Decision QMV ###
	EU_voting_decision_focus_EU306_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU306_QMV_result }
			has_global_flag = focus_EU306_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU306_QMV
			NOT = { has_global_flag = focus_EU306_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU306_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU306_QMV }
				country_event = {
					id = EUvote.2306
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU306_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU306_QMV
					}
				}
		}
	}

	### EuroNavy # Result Decision maj # NO maj ###

	### EuroNavy retry ###

	EU_voting_decision_EU306_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU306_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU306_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU306
						has_country_flag = focus_EU306_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU306_retry
			every_country = {
				clr_country_flag = focus_EU306_no
				clr_country_flag = focus_EU306_QMV_no
				clr_country_flag = focus_EU306_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU306_QMV
			}
			else = {
				set_country_flag = focus_EU306
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### EU Permanent Member of the UNSC ###
	EU_voting_decision_focus_EU307 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EU Permanent Member of the UNSC"
					AND = {
						has_country_flag = focus_EU307
						NOT = {
							has_global_flag = focus_EU307_voted
							has_country_flag = focus_EU307_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU307
			NOT = {
				has_country_flag = focus_EU307_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU307_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EU Permanent Member of the UNSC ###
	EU_voting_decision_focus_EU307_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EU Permanent Member of the UNSC"
					AND = {
						has_country_flag = focus_EU307_QMV
						NOT = {
							has_global_flag = focus_EU307_QMV_voted
							has_country_flag = focus_EU307_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU307_QMV
			NOT = {
				has_country_flag = focus_EU307_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU307_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EU Permanent Member of the UNSC # NO maj ###


	### EU Permanent Member of the UNSC # Result Decision ###
	EU_voting_decision_focus_EU307_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU307_result }
			has_global_flag = focus_EU307_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU307
			NOT = { has_global_flag = focus_EU307_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU307_result
			every_country = {
				limit = { has_country_flag = focus_EU307 }
				country_event = {
					id = EUvote.2307
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU307
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU307
					}
				}
		}
	}

	### EU Permanent Member of the UNSC # Result Decision QMV ###
	EU_voting_decision_focus_EU307_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU307_QMV_result }
			has_global_flag = focus_EU307_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU307_QMV
			NOT = { has_global_flag = focus_EU307_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU307_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU307_QMV }
				country_event = {
					id = EUvote.2307
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU307_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU307_QMV
					}
				}
		}
	}

	### EU Permanent Member of the UNSC # Result Decision maj # NO maj ###

	### EU Permanent Member of the UNSC retry ###

	EU_voting_decision_EU307_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU307_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU307_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU307
						has_country_flag = focus_EU307_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU307_retry
			every_country = {
				clr_country_flag = focus_EU307_no
				clr_country_flag = focus_EU307_QMV_no
				clr_country_flag = focus_EU307_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU307_QMV
			}
			else = {
				set_country_flag = focus_EU307
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### EU Nuclear Power ###
	EU_voting_decision_focus_EU308 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EU Nuclear Power"
					AND = {
						has_country_flag = focus_EU308
						NOT = {
							has_global_flag = focus_EU308_voted
							has_country_flag = focus_EU308_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU308
			NOT = {
				has_country_flag = focus_EU308_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU308_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EU Nuclear Power ###
	EU_voting_decision_focus_EU308_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EU Nuclear Power"
					AND = {
						has_country_flag = focus_EU308_QMV
						NOT = {
							has_global_flag = focus_EU308_QMV_voted
							has_country_flag = focus_EU308_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU308_QMV
			NOT = {
				has_country_flag = focus_EU308_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU308_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EU Nuclear Power # NO maj ###


	### EU Nuclear Power # Result Decision ###
	EU_voting_decision_focus_EU308_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU308_result }
			has_global_flag = focus_EU308_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU308
			NOT = { has_global_flag = focus_EU308_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU308_result
			every_country = {
				limit = { has_country_flag = focus_EU308 }
				country_event = {
					id = EUvote.2308
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU308
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU308
					}
				}
		}
	}

	### EU Nuclear Power # Result Decision QMV ###
	EU_voting_decision_focus_EU308_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU308_QMV_result }
			has_global_flag = focus_EU308_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU308_QMV
			NOT = { has_global_flag = focus_EU308_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU308_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU308_QMV }
				country_event = {
					id = EUvote.2308
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU308_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU308_QMV
					}
				}
		}
	}

	### EU Nuclear Power # Result Decision maj # NO maj ###

	### EU Nuclear Power retry ###

	EU_voting_decision_EU308_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU308_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU308_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU308
						has_country_flag = focus_EU308_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU308_retry
			every_country = {
				clr_country_flag = focus_EU308_no
				clr_country_flag = focus_EU308_QMV_no
				clr_country_flag = focus_EU308_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU308_QMV
			}
			else = {
				set_country_flag = focus_EU308
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### EU Secondary Legislation # NO Unanimity ###


	### EU Secondary Legislation # NO QMV ###


	### EU Secondary Legislation # NO maj ###


	### EU Secondary Legislation # Result Decision # NO Unanimity ###

	### EU Secondary Legislation # Result Decision QMV # NO QMV ###

	### EU Secondary Legislation # Result Decision maj # NO maj ###




	### General Data Protection Regulation ###
	EU_voting_decision_focus_EU401 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus General Data Protection Regulation"
					AND = {
						has_country_flag = focus_EU401
						NOT = {
							has_global_flag = focus_EU401_voted
							has_country_flag = focus_EU401_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU401
			NOT = {
				has_country_flag = focus_EU401_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU401_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### General Data Protection Regulation ###
	EU_voting_decision_focus_EU401_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus General Data Protection Regulation"
					AND = {
						has_country_flag = focus_EU401_QMV
						NOT = {
							has_global_flag = focus_EU401_QMV_voted
							has_country_flag = focus_EU401_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU401_QMV
			NOT = {
				has_country_flag = focus_EU401_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU401_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### General Data Protection Regulation # NO maj ###


	### General Data Protection Regulation # Result Decision ###
	EU_voting_decision_focus_EU401_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU401_result }
			has_global_flag = focus_EU401_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU401
			NOT = { has_global_flag = focus_EU401_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU401_result
			every_country = {
				limit = { has_country_flag = focus_EU401 }
				country_event = {
					id = EUvote.2401
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU401
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU401
					}
				}
		}
	}

	### General Data Protection Regulation # Result Decision QMV ###
	EU_voting_decision_focus_EU401_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU401_QMV_result }
			has_global_flag = focus_EU401_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU401_QMV
			NOT = { has_global_flag = focus_EU401_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU401_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU401_QMV }
				country_event = {
					id = EUvote.2401
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU401_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU401_QMV
					}
				}
		}
	}

	### General Data Protection Regulation # Result Decision maj # NO maj ###

	### General Data Protection Regulation retry ###

	EU_voting_decision_EU401_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU401_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU401_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU401
						has_country_flag = focus_EU401_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU401_retry
			every_country = {
				clr_country_flag = focus_EU401_no
				clr_country_flag = focus_EU401_QMV_no
				clr_country_flag = focus_EU401_maj_no
			}
			if = {
				limit = {
					OR = {
					has_global_flag = european_constitution
					has_global_flag = treaty_of_lisbon
					}
				}
				set_country_flag = focus_EU401_QMV
			}
			else = {
				set_country_flag = focus_EU401
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Directive on Copyright in the Digital Single Market ###
	EU_voting_decision_focus_EU402 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Directive on Copyright in the Digital Single Market"
					AND = {
						has_country_flag = focus_EU402
						NOT = {
							has_global_flag = focus_EU402_voted
							has_country_flag = focus_EU402_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU402
			NOT = {
				has_country_flag = focus_EU402_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU402_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Directive on Copyright in the Digital Single Market ###
	EU_voting_decision_focus_EU402_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Directive on Copyright in the Digital Single Market"
					AND = {
						has_country_flag = focus_EU402_QMV
						NOT = {
							has_global_flag = focus_EU402_QMV_voted
							has_country_flag = focus_EU402_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU402_QMV
			NOT = {
				has_country_flag = focus_EU402_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU402_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Directive on Copyright in the Digital Single Market # NO maj ###


	### Directive on Copyright in the Digital Single Market # Result Decision ###
	EU_voting_decision_focus_EU402_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU402_result }
			has_global_flag = focus_EU402_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU402
			NOT = { has_global_flag = focus_EU402_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU402_result
			every_country = {
				limit = { has_country_flag = focus_EU402 }
				country_event = {
					id = EUvote.2402
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU402
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU402
					}
				}
		}
	}

	### Directive on Copyright in the Digital Single Market # Result Decision QMV ###
	EU_voting_decision_focus_EU402_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU402_QMV_result }
			has_global_flag = focus_EU402_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU402_QMV
			NOT = { has_global_flag = focus_EU402_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU402_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU402_QMV }
				country_event = {
					id = EUvote.2402
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU402_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU402_QMV
					}
				}
		}
	}

	### Directive on Copyright in the Digital Single Market # Result Decision maj # NO maj ###

	### Directive on Copyright in the Digital Single Market retry ###

	EU_voting_decision_EU402_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU402_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU402_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU402
						has_country_flag = focus_EU402_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU402_retry
			every_country = {
				clr_country_flag = focus_EU402_no
				clr_country_flag = focus_EU402_QMV_no
				clr_country_flag = focus_EU402_maj_no
			}
			if = {
				limit = {
					OR = {
					has_global_flag = european_constitution
					has_global_flag = treaty_of_lisbon
					}
				}
				set_country_flag = focus_EU402_QMV
			}
			else = {
				set_country_flag = focus_EU402
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Dublin II Regulation ###
	EU_voting_decision_focus_EU403 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Dublin II Regulation"
					AND = {
						has_country_flag = focus_EU403
						NOT = {
							has_global_flag = focus_EU403_voted
							has_country_flag = focus_EU403_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU403
			NOT = {
				has_country_flag = focus_EU403_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU403_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Dublin II Regulation ###
	EU_voting_decision_focus_EU403_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Dublin II Regulation"
					AND = {
						has_country_flag = focus_EU403_QMV
						NOT = {
							has_global_flag = focus_EU403_QMV_voted
							has_country_flag = focus_EU403_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU403_QMV
			NOT = {
				has_country_flag = focus_EU403_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU403_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Dublin II Regulation # NO maj ###


	### Dublin II Regulation # Result Decision ###
	EU_voting_decision_focus_EU403_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU403_result }
			has_global_flag = focus_EU403_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU403
			NOT = { has_global_flag = focus_EU403_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU403_result
			every_country = {
				limit = { has_country_flag = focus_EU403 }
				country_event = {
					id = EUvote.2403
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU403
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU403
					}
				}
		}
	}

	### Dublin II Regulation # Result Decision QMV ###
	EU_voting_decision_focus_EU403_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU403_QMV_result }
			has_global_flag = focus_EU403_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU403_QMV
			NOT = { has_global_flag = focus_EU403_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU403_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU403_QMV }
				country_event = {
					id = EUvote.2403
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU403_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU403_QMV
					}
				}
		}
	}

	### Dublin II Regulation # Result Decision maj # NO maj ###

	### Dublin II Regulation retry ###

	EU_voting_decision_EU403_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU403_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU403_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU403
						has_country_flag = focus_EU403_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU403_retry
			every_country = {
				clr_country_flag = focus_EU403_no
				clr_country_flag = focus_EU403_QMV_no
				clr_country_flag = focus_EU403_maj_no
			}
			if = {
				limit = {
					OR = {
					has_global_flag = european_constitution
					has_global_flag = treaty_of_lisbon
					}
				}
				set_country_flag = focus_EU403_QMV
			}
			else = {
				set_country_flag = focus_EU403
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Relocation and Resettlement of Asylum Seekers ###
	EU_voting_decision_focus_EU404 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Relocation and Resettlement of Asylum Seekers"
					AND = {
						has_country_flag = focus_EU404
						NOT = {
							has_global_flag = focus_EU404_voted
							has_country_flag = focus_EU404_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
				NOT = {
					OR = {
						has_country_flag = focus_EU405_yes
						has_country_flag = focus_EU405_QMV_yes
						has_country_flag = focus_EU405_maj_yes
					}
				}
			has_country_flag = focus_EU404
			NOT = {
				has_country_flag = focus_EU404_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU404_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Relocation and Resettlement of Asylum Seekers ###
	EU_voting_decision_focus_EU404_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Relocation and Resettlement of Asylum Seekers"
					AND = {
						has_country_flag = focus_EU404_QMV
						NOT = {
							has_global_flag = focus_EU404_QMV_voted
							has_country_flag = focus_EU404_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU404_QMV
			NOT = {
				has_country_flag = focus_EU404_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU404_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Relocation and Resettlement of Asylum Seekers # NO maj ###


	### Relocation and Resettlement of Asylum Seekers # Result Decision ###
	EU_voting_decision_focus_EU404_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU404_result }
			has_global_flag = focus_EU404_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU404
			NOT = { has_global_flag = focus_EU404_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU404_result
			every_country = {
				limit = { has_country_flag = focus_EU404 }
				country_event = {
					id = EUvote.2404
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU404
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU404
					}
				}
		}
	}

	### Relocation and Resettlement of Asylum Seekers # Result Decision QMV ###
	EU_voting_decision_focus_EU404_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU404_QMV_result }
			has_global_flag = focus_EU404_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU404_QMV
			NOT = { has_global_flag = focus_EU404_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU404_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU404_QMV }
				country_event = {
					id = EUvote.2404
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU404_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU404_QMV
					}
				}
		}
	}

	### Relocation and Resettlement of Asylum Seekers # Result Decision maj # NO maj ###

	### Relocation and Resettlement of Asylum Seekers retry ###

	EU_voting_decision_EU404_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU404_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU404_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU404
						has_country_flag = focus_EU404_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU404_retry
			every_country = {
				clr_country_flag = focus_EU404_no
				clr_country_flag = focus_EU404_QMV_no
				clr_country_flag = focus_EU404_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU404_QMV
			}
			else = {
				set_country_flag = focus_EU404
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### EU–Turkey deal ###
	EU_voting_decision_focus_EU405 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EU–Turkey deal"
					AND = {
						has_country_flag = focus_EU405
						NOT = {
							has_global_flag = focus_EU405_voted
							has_country_flag = focus_EU405_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
				NOT = {
					OR = {
						has_country_flag = focus_EU404_yes
						has_country_flag = focus_EU404_QMV_yes
						has_country_flag = focus_EU404_maj_yes
					}
				}
			has_country_flag = focus_EU405
			NOT = {
				has_country_flag = focus_EU405_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU405_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EU–Turkey deal ###
	EU_voting_decision_focus_EU405_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus EU–Turkey deal"
					AND = {
						has_country_flag = focus_EU405_QMV
						NOT = {
							has_global_flag = focus_EU405_QMV_voted
							has_country_flag = focus_EU405_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU405_QMV
			NOT = {
				has_country_flag = focus_EU405_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU405_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### EU–Turkey deal # NO maj ###


	### EU–Turkey deal # Result Decision ###
	EU_voting_decision_focus_EU405_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU405_result }
			has_global_flag = focus_EU405_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU405
			NOT = { has_global_flag = focus_EU405_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU405_result
			every_country = {
				limit = { has_country_flag = focus_EU405 }
				country_event = {
					id = EUvote.2405
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU405
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU405
					}
				}
		}
	}

	### EU–Turkey deal # Result Decision QMV ###
	EU_voting_decision_focus_EU405_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU405_QMV_result }
			has_global_flag = focus_EU405_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU405_QMV
			NOT = { has_global_flag = focus_EU405_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU405_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU405_QMV }
				country_event = {
					id = EUvote.2405
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU405_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU405_QMV
					}
				}
		}
	}

	### EU–Turkey deal # Result Decision maj # NO maj ###

	### EU–Turkey deal retry ###

	EU_voting_decision_EU405_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU405_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU405_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU405
						has_country_flag = focus_EU405_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU405_retry
			every_country = {
				clr_country_flag = focus_EU405_no
				clr_country_flag = focus_EU405_QMV_no
				clr_country_flag = focus_EU405_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU405_QMV
			}
			else = {
				set_country_flag = focus_EU405
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Asylum Agency ###
	EU_voting_decision_focus_EU406 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Asylum Agency"
					AND = {
						has_country_flag = focus_EU406
						NOT = {
							has_global_flag = focus_EU406_voted
							has_country_flag = focus_EU406_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU406
			NOT = {
				has_country_flag = focus_EU406_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU406_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Asylum Agency ###
	EU_voting_decision_focus_EU406_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Asylum Agency"
					AND = {
						has_country_flag = focus_EU406_QMV
						NOT = {
							has_global_flag = focus_EU406_QMV_voted
							has_country_flag = focus_EU406_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU406_QMV
			NOT = {
				has_country_flag = focus_EU406_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU406_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Asylum Agency # NO maj ###


	### European Asylum Agency # Result Decision ###
	EU_voting_decision_focus_EU406_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU406_result }
			has_global_flag = focus_EU406_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU406
			NOT = { has_global_flag = focus_EU406_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU406_result
			every_country = {
				limit = { has_country_flag = focus_EU406 }
				country_event = {
					id = EUvote.2406
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU406
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU406
					}
				}
		}
	}

	### European Asylum Agency # Result Decision QMV ###
	EU_voting_decision_focus_EU406_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU406_QMV_result }
			has_global_flag = focus_EU406_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU406_QMV
			NOT = { has_global_flag = focus_EU406_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU406_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU406_QMV }
				country_event = {
					id = EUvote.2406
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU406_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU406_QMV
					}
				}
		}
	}

	### European Asylum Agency # Result Decision maj # NO maj ###

	### European Asylum Agency retry ###

	EU_voting_decision_EU406_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU406_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU406_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU406
						has_country_flag = focus_EU406_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU406_retry
			every_country = {
				clr_country_flag = focus_EU406_no
				clr_country_flag = focus_EU406_QMV_no
				clr_country_flag = focus_EU406_maj_no
			}
			if = {
				limit = {
					OR = {
					has_global_flag = european_constitution
					has_global_flag = treaty_of_lisbon
					}
				}
				set_country_flag = focus_EU406_QMV
			}
			else = {
				set_country_flag = focus_EU406
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Frontex ###
	EU_voting_decision_focus_EU407 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Frontex"
					AND = {
						has_country_flag = focus_EU407
						NOT = {
							has_global_flag = focus_EU407_voted
							has_country_flag = focus_EU407_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU407
			NOT = {
				has_country_flag = focus_EU407_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU407_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Frontex ###
	EU_voting_decision_focus_EU407_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Frontex"
					AND = {
						has_country_flag = focus_EU407_QMV
						NOT = {
							has_global_flag = focus_EU407_QMV_voted
							has_country_flag = focus_EU407_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU407_QMV
			NOT = {
				has_country_flag = focus_EU407_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU407_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Frontex # NO maj ###


	### Frontex # Result Decision ###
	EU_voting_decision_focus_EU407_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU407_result }
			has_global_flag = focus_EU407_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU407
			NOT = { has_global_flag = focus_EU407_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU407_result
			every_country = {
				limit = { has_country_flag = focus_EU407 }
				country_event = {
					id = EUvote.2407
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU407
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU407
					}
				}
		}
	}

	### Frontex # Result Decision QMV ###
	EU_voting_decision_focus_EU407_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU407_QMV_result }
			has_global_flag = focus_EU407_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU407_QMV
			NOT = { has_global_flag = focus_EU407_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU407_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU407_QMV }
				country_event = {
					id = EUvote.2407
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU407_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU407_QMV
					}
				}
		}
	}

	### Frontex # Result Decision maj # NO maj ###

	### Frontex retry ###

	EU_voting_decision_EU407_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU407_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU407_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU407
						has_country_flag = focus_EU407_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU407_retry
			every_country = {
				clr_country_flag = focus_EU407_no
				clr_country_flag = focus_EU407_QMV_no
				clr_country_flag = focus_EU407_maj_no
			}
			if = {
				limit = {
					OR = {
					has_global_flag = european_constitution
					has_global_flag = treaty_of_lisbon
					}
				}
				set_country_flag = focus_EU407_QMV
			}
			else = {
				set_country_flag = focus_EU407
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Border and Coast Guard Agency ###
	EU_voting_decision_focus_EU408 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Border and Coast Guard Agency"
					AND = {
						has_country_flag = focus_EU408
						NOT = {
							has_global_flag = focus_EU408_voted
							has_country_flag = focus_EU408_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU408
			NOT = {
				has_country_flag = focus_EU408_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU408_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Border and Coast Guard Agency ###
	EU_voting_decision_focus_EU408_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Border and Coast Guard Agency"
					AND = {
						has_country_flag = focus_EU408_QMV
						NOT = {
							has_global_flag = focus_EU408_QMV_voted
							has_country_flag = focus_EU408_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU408_QMV
			NOT = {
				has_country_flag = focus_EU408_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU408_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Border and Coast Guard Agency # NO maj ###


	### European Border and Coast Guard Agency # Result Decision ###
	EU_voting_decision_focus_EU408_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU408_result }
			has_global_flag = focus_EU408_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU408
			NOT = { has_global_flag = focus_EU408_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU408_result
			every_country = {
				limit = { has_country_flag = focus_EU408 }
				country_event = {
					id = EUvote.2408
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU408
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU408
					}
				}
		}
	}

	### European Border and Coast Guard Agency # Result Decision QMV ###
	EU_voting_decision_focus_EU408_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU408_QMV_result }
			has_global_flag = focus_EU408_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU408_QMV
			NOT = { has_global_flag = focus_EU408_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU408_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU408_QMV }
				country_event = {
					id = EUvote.2408
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU408_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU408_QMV
					}
				}
		}
	}

	### European Border and Coast Guard Agency # Result Decision maj # NO maj ###

	### European Border and Coast Guard Agency retry ###

	EU_voting_decision_EU408_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU408_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU408_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU408
						has_country_flag = focus_EU408_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU408_retry
			every_country = {
				clr_country_flag = focus_EU408_no
				clr_country_flag = focus_EU408_QMV_no
				clr_country_flag = focus_EU408_maj_no
			}
			if = {
				limit = {
					OR = {
					has_global_flag = european_constitution
					has_global_flag = treaty_of_lisbon
					}
				}
				set_country_flag = focus_EU408_QMV
			}
			else = {
				set_country_flag = focus_EU408
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Commission Policies  # NO Unanimity ###


	### European Commission Policies  # NO QMV ###


	### European Commission Policies  # NO maj ###


	### European Commission Policies  # Result Decision # NO Unanimity ###

	### European Commission Policies  # Result Decision QMV # NO QMV ###

	### European Commission Policies  # Result Decision maj # NO maj ###




	### EU Enlargement # NO Unanimity ###


	### EU Enlargement # NO QMV ###


	### EU Enlargement # NO maj ###


	### EU Enlargement # Result Decision # NO Unanimity ###

	### EU Enlargement # Result Decision QMV # NO QMV ###

	### EU Enlargement # Result Decision maj # NO maj ###




	### 2004 enlargement of the European Union ###
	EU_voting_decision_focus_EU601 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus 2004 enlargement of the European Union"
					AND = {
						has_country_flag = focus_EU601
						NOT = {
							has_global_flag = focus_EU601_voted
							has_country_flag = focus_EU601_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU601
			NOT = {
				has_country_flag = focus_EU601_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU601_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### 2004 enlargement of the European Union ###
	EU_voting_decision_focus_EU601_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus 2004 enlargement of the European Union"
					AND = {
						has_country_flag = focus_EU601_QMV
						NOT = {
							has_global_flag = focus_EU601_QMV_voted
							has_country_flag = focus_EU601_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU601_QMV
			NOT = {
				has_country_flag = focus_EU601_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU601_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### 2004 enlargement of the European Union # NO maj ###


	### 2004 enlargement of the European Union # Result Decision ###
	EU_voting_decision_focus_EU601_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU601_result }
			has_global_flag = focus_EU601_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU601
			NOT = { has_global_flag = focus_EU601_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU601_result
			every_country = {
				limit = { has_country_flag = focus_EU601 }
				country_event = {
					id = EUvote.2601
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU601
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU601
					}
				}
		}
	}

	### 2004 enlargement of the European Union # Result Decision QMV ###
	EU_voting_decision_focus_EU601_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU601_QMV_result }
			has_global_flag = focus_EU601_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU601_QMV
			NOT = { has_global_flag = focus_EU601_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU601_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU601_QMV }
				country_event = {
					id = EUvote.2601
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU601_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU601_QMV
					}
				}
		}
	}

	### 2004 enlargement of the European Union # Result Decision maj # NO maj ###

	### 2004 enlargement of the European Union retry ###

	EU_voting_decision_EU601_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU601_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU601_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU601
						has_country_flag = focus_EU601_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU601_retry
			every_country = {
				clr_country_flag = focus_EU601_no
				clr_country_flag = focus_EU601_QMV_no
				clr_country_flag = focus_EU601_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU601_QMV
			}
			else = {
				set_country_flag = focus_EU601
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 100 #was 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 100 #was 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### 2007 enlargement of the European Union ###
	EU_voting_decision_focus_EU602 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus 2007 enlargement of the European Union"
					AND = {
						has_country_flag = focus_EU602
						NOT = {
							has_global_flag = focus_EU602_voted
							has_country_flag = focus_EU602_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU602
			NOT = {
				has_country_flag = focus_EU602_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU602_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### 2007 enlargement of the European Union ###
	EU_voting_decision_focus_EU602_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus 2007 enlargement of the European Union"
					AND = {
						has_country_flag = focus_EU602_QMV
						NOT = {
							has_global_flag = focus_EU602_QMV_voted
							has_country_flag = focus_EU602_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU602_QMV
			NOT = {
				has_country_flag = focus_EU602_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU602_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### 2007 enlargement of the European Union # NO maj ###


	### 2007 enlargement of the European Union # Result Decision ###
	EU_voting_decision_focus_EU602_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU602_result }
			has_global_flag = focus_EU602_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU602
			NOT = { has_global_flag = focus_EU602_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU602_result
			every_country = {
				limit = { has_country_flag = focus_EU602 }
				country_event = {
					id = EUvote.2602
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU602
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU602
					}
				}
		}
	}

	### 2007 enlargement of the European Union # Result Decision QMV ###
	EU_voting_decision_focus_EU602_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU602_QMV_result }
			has_global_flag = focus_EU602_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU602_QMV
			NOT = { has_global_flag = focus_EU602_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU602_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU602_QMV }
				country_event = {
					id = EUvote.2602
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU602_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU602_QMV
					}
				}
		}
	}

	### 2007 enlargement of the European Union # Result Decision maj # NO maj ###

	### 2007 enlargement of the European Union retry ###

	EU_voting_decision_EU602_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU602_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU602_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU602
						has_country_flag = focus_EU602_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU602_retry
			every_country = {
				clr_country_flag = focus_EU602_no
				clr_country_flag = focus_EU602_QMV_no
				clr_country_flag = focus_EU602_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU602_QMV
			}
			else = {
				set_country_flag = focus_EU602
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### 2013 enlargement of the European Union ###
	EU_voting_decision_focus_EU603 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus 2013 enlargement of the European Union"
					AND = {
						has_country_flag = focus_EU603
						NOT = {
							has_global_flag = focus_EU603_voted
							has_country_flag = focus_EU603_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU603
			NOT = {
				has_country_flag = focus_EU603_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU603_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### 2013 enlargement of the European Union ###
	EU_voting_decision_focus_EU603_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus 2013 enlargement of the European Union"
					AND = {
						has_country_flag = focus_EU603_QMV
						NOT = {
							has_global_flag = focus_EU603_QMV_voted
							has_country_flag = focus_EU603_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU603_QMV
			NOT = {
				has_country_flag = focus_EU603_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU603_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### 2013 enlargement of the European Union # NO maj ###


	### 2013 enlargement of the European Union # Result Decision ###
	EU_voting_decision_focus_EU603_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU603_result }
			has_global_flag = focus_EU603_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU603
			NOT = { has_global_flag = focus_EU603_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU603_result
			every_country = {
				limit = { has_country_flag = focus_EU603 }
				country_event = {
					id = EUvote.2603
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU603
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU603
					}
				}
		}
	}

	### 2013 enlargement of the European Union # Result Decision QMV ###
	EU_voting_decision_focus_EU603_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU603_QMV_result }
			has_global_flag = focus_EU603_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU603_QMV
			NOT = { has_global_flag = focus_EU603_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU603_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU603_QMV }
				country_event = {
					id = EUvote.2603
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU603_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU603_QMV
					}
				}
		}
	}

	### 2013 enlargement of the European Union # Result Decision maj # NO maj ###

	### 2013 enlargement of the European Union retry ###

	EU_voting_decision_EU603_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU603_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU603_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU603
						has_country_flag = focus_EU603_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU603_retry
			every_country = {
				clr_country_flag = focus_EU603_no
				clr_country_flag = focus_EU603_QMV_no
				clr_country_flag = focus_EU603_maj_no
			}
			if = {
				limit = {
					has_global_flag = european_federation
				}
				set_country_flag = focus_EU603_QMV
			}
			else = {
				set_country_flag = focus_EU603
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Withdrawal Policies # NO Unanimity ###


	### Withdrawal Policies # NO QMV ###


	### Withdrawal Policies # NO maj ###


	### Withdrawal Policies # Result Decision # NO Unanimity ###

	### Withdrawal Policies # Result Decision QMV # NO QMV ###

	### Withdrawal Policies # Result Decision maj # NO maj ###




	### Article 50 # NO Unanimity ###


	### Article 50 # NO QMV ###


	### Article 50 # NO maj ###


	### Article 50 # Result Decision # NO Unanimity ###

	### Article 50 # Result Decision QMV # NO QMV ###

	### Article 50 # Result Decision maj # NO maj ###




	### Withdrawal Treaty # NO Unanimity ###


	### Withdrawal Treaty # NO QMV ###


	### Withdrawal Treaty # NO maj ###


	### Withdrawal Treaty # Result Decision # NO Unanimity ###

	### Withdrawal Treaty # Result Decision QMV # NO QMV ###

	### Withdrawal Treaty # Result Decision maj # NO maj ###




	### No Deal Exit # NO Unanimity ###


	### No Deal Exit # NO QMV ###


	### No Deal Exit # NO maj ###


	### No Deal Exit # Result Decision # NO Unanimity ###

	### No Deal Exit # Result Decision QMV # NO QMV ###

	### No Deal Exit # Result Decision maj # NO maj ###




	### Federalisation of the European Union # NO Unanimity ###


	### Federalisation of the European Union # NO QMV ###


	### Federalisation of the European Union ###
	EU_voting_decision_focus_EU110_maj = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Federalisation of the European Union"
					AND = {
						has_country_flag = focus_EU110_maj
						NOT = {
							has_global_flag = focus_EU110_maj_voted
							has_country_flag = focus_EU110_maj_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU110_maj
			NOT = {
				has_country_flag = focus_EU110_maj_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU110_maj_voted
			set_global_flag = EU_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Federalisation of the European Union # Result Decision # NO Unanimity ###

	### Federalisation of the European Union # Result Decision QMV # NO QMV ###

	### Federalisation of the European Union # Result Decision maj ###
	EU_voting_decision_focus_EU110_maj_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU110_maj_result }
			has_global_flag = focus_EU110_maj_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU110_maj
			NOT = { has_global_flag = focus_EU110_maj_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU110_maj_result
			every_country = {
				limit = { has_country_flag = focus_EU110_maj }
				country_event = {
					id = EUvote.2110
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU110_maj
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU110_maj
					}
				}
		}
	}

	### Federalisation of the European Union retry ###

	EU_voting_decision_EU110_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU110_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU110_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU110_maj
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU110_retry
			every_country = {
				clr_country_flag = focus_EU110_no
				clr_country_flag = focus_EU110_QMV_no
				clr_country_flag = focus_EU110_maj_no
			}
					set_country_flag = focus_EU110_maj
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### United States of Europe ###
	EU_voting_decision_focus_EU111 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus United States of Europe"
					AND = {
						has_country_flag = focus_EU111
						NOT = {
							has_global_flag = focus_EU111_voted
							has_country_flag = focus_EU111_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
				NOT = {
					OR = {
						has_country_flag = focus_EU112_yes
						has_country_flag = focus_EU112_QMV_yes
						has_country_flag = focus_EU112_maj_yes
						has_country_flag = focus_EU113_yes
						has_country_flag = focus_EU113_QMV_yes
						has_country_flag = focus_EU113_maj_yes
					}
				}
			has_country_flag = focus_EU111
			NOT = {
				has_country_flag = focus_EU111_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU111_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### United States of Europe # NO QMV ###


	### United States of Europe # NO maj ###


	### United States of Europe # Result Decision ###
	EU_voting_decision_focus_EU111_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU111_result }
			has_global_flag = focus_EU111_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU111
			NOT = { has_global_flag = focus_EU111_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU111_result
			every_country = {
				limit = { has_country_flag = focus_EU111 }
				country_event = {
					id = EUvote.2111
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU111
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU111
					}
				}
		}
	}

	### United States of Europe # Result Decision QMV # NO QMV ###

	### United States of Europe # Result Decision maj # NO maj ###

	### United States of Europe retry ###

	EU_voting_decision_EU111_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU111_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU111_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU111
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU111_retry
			every_country = {
				clr_country_flag = focus_EU111_no
				clr_country_flag = focus_EU111_QMV_no
				clr_country_flag = focus_EU111_maj_no
			}
				set_country_flag = focus_EU111
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### European Federation ###
	EU_voting_decision_focus_EU112 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus European Federation"
					AND = {
						has_country_flag = focus_EU112
						NOT = {
							has_global_flag = focus_EU112_voted
							has_country_flag = focus_EU112_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
				NOT = {
					OR = {
						has_country_flag = focus_EU111_yes
						has_country_flag = focus_EU111_QMV_yes
						has_country_flag = focus_EU111_maj_yes
						has_country_flag = focus_EU113_yes
						has_country_flag = focus_EU113_QMV_yes
						has_country_flag = focus_EU113_maj_yes
					}
				}
			has_country_flag = focus_EU112
			NOT = {
				has_country_flag = focus_EU112_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU112_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### European Federation # NO QMV ###


	### European Federation # NO maj ###


	### European Federation # Result Decision ###
	EU_voting_decision_focus_EU112_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU112_result }
			has_global_flag = focus_EU112_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU112
			NOT = { has_global_flag = focus_EU112_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU112_result
			every_country = {
				limit = { has_country_flag = focus_EU112 }
				country_event = {
					id = EUvote.2112
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU112
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU112
					}
				}
		}
	}

	### European Federation # Result Decision QMV # NO QMV ###

	### European Federation # Result Decision maj # NO maj ###

	### European Federation retry ###

	EU_voting_decision_EU112_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU112_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU112_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU112
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU112_retry
			every_country = {
				clr_country_flag = focus_EU112_no
				clr_country_flag = focus_EU112_QMV_no
				clr_country_flag = focus_EU112_maj_no
			}
				set_country_flag = focus_EU112
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}

	### Europe of Fatherlands ###
	EU_voting_decision_focus_EU113 = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Europe of Fatherlands"
					AND = {
						has_country_flag = focus_EU113
						NOT = {
							has_global_flag = focus_EU113_voted
							has_country_flag = focus_EU113_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
				NOT = {
					OR = {
						has_country_flag = focus_EU111_yes
						has_country_flag = focus_EU111_QMV_yes
						has_country_flag = focus_EU111_maj_yes
						has_country_flag = focus_EU112_yes
						has_country_flag = focus_EU112_QMV_yes
						has_country_flag = focus_EU112_maj_yes
					}
				}
			has_country_flag = focus_EU113
			NOT = {
				has_country_flag = focus_EU113_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU113_voted
			set_global_flag = EU_unanimity_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Europe of Fatherlands ###
	EU_voting_decision_focus_EU113_QMV = {
		#icon = EU_voting_decision

		available = {
			AND = {
				custom_trigger_tooltip = {
					tooltip = "[ROOT.GetNameWithFlag] has completed National Focus Europe of Fatherlands"
					AND = {
						has_country_flag = focus_EU113_QMV
						NOT = {
							has_global_flag = focus_EU113_QMV_voted
							has_country_flag = focus_EU113_QMV_yes
							any_country = {
								has_country_flag = EU_voted
							}
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = "[ROOT.GetNameWithFlag] must have > 3% influence on all member states"
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
					}
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
		}
		visible = {
			has_country_flag = focus_EU113_QMV
			NOT = {
				has_country_flag = focus_EU113_QMV_yes
			}
		}
		complete_effect = {
			set_global_flag = focus_EU113_QMV_voted
			set_global_flag = EU_qualified_majority_voting
			set_variable = {
				var = global.var_EUvoteYes
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteNo
				value = 0
			}
			set_variable = {
				var = global.var_EUvoteTotal
				value = 0
			}
			set_variable = {
				var = global.var_EUpopYes
				value = 0
			}
			set_variable = {
				var = global.var_EUpopNo
				value = 0
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
				set_country_flag = gov_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					is_in_array = { ruling_party = 17 } ### Neutral_green
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
				set_country_flag = gov_strong_resist
			}
			every_country = {
				limit = {
					has_idea = EU_member
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
				set_country_flag = gov_strong_support
			}
			every_country = {
				limit = { has_idea = EU_member }
				country_event = {
					id = EUvote.1
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	### Europe of Fatherlands # NO maj ###


	### Europe of Fatherlands # Result Decision ###
	EU_voting_decision_focus_EU113_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU113_result }
			has_global_flag = focus_EU113_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU113
			NOT = { has_global_flag = focus_EU113_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU113_result
			every_country = {
				limit = { has_country_flag = focus_EU113 }
				country_event = {
					id = EUvote.2113
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU113
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU113
					}
				}
		}
	}

	### Europe of Fatherlands # Result Decision QMV ###
	EU_voting_decision_focus_EU113_QMV_result = {
		#icon = EU_voting_decision
		available = {
			NOT = { has_global_flag = focus_EU113_QMV_result }
			has_global_flag = focus_EU113_QMV_voted
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		visible = {
			has_country_flag = focus_EU113_QMV
			NOT = { has_global_flag = focus_EU113_QMV_result }
			check_variable = {
				var = global.var_EUvoteTotal
				value = global.var_EUmemberstatesTotal
				compare = equals
			}
		}
		complete_effect = {
			set_global_flag = focus_EU113_QMV_result
			every_country = {
				limit = { has_country_flag = focus_EU113_QMV }
				country_event = {
					id = EUvote.2113
				}
			}
		}
		ai_will_do = {
			factor = 100
				modifier = {
					factor = 0
					NOT = {
						has_country_flag = focus_EU113_QMV
					}
					any_country = {
						has_idea = EU_member
						has_country_flag = focus_EU113_QMV
					}
				}
		}
	}

	### Europe of Fatherlands # Result Decision maj # NO maj ###

	### Europe of Fatherlands retry ###

	EU_voting_decision_EU113_retry = {
		#icon = EU_voting_decision

		available = {
			has_global_flag = focus_EU113_retry
			has_idea = EU_member 
		}
		visible = {
			has_global_flag = focus_EU113_retry
			has_idea = EU_member 
				NOT = {
					any_country = {
					OR = {
						has_country_flag = focus_EU113
						has_country_flag = focus_EU113_QMV
					}
					}
				}
		}
		complete_effect = {
			clr_global_flag = focus_EU113_retry
			every_country = {
				clr_country_flag = focus_EU113_no
				clr_country_flag = focus_EU113_QMV_no
				clr_country_flag = focus_EU113_maj_no
			}
			if = {
				limit = {
					OR = {
					has_global_flag = european_constitution
					has_global_flag = treaty_of_lisbon
					}
				}
				set_country_flag = focus_EU113_QMV
			}
			else = {
				set_country_flag = focus_EU113
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				add = 80
				OR = {
					has_idea = EU_commission_president
					has_idea = EU_council_president
					has_idea = EU_parliament_president
				}
			}
			modifier = {
				add = 80
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}
			}
			modifier = {
				add = -10
				has_idea = EU_member
			}
		}
	}


#############################################
### End of EU Focus Tree Voting Decisions ###
#############################################

########################################
### AI Influence Help/Cheat Decision ### temp workaround till ai strategy for AI influencing EU member states, when focus is completed
########################################

	EU_AI_influence_cheat = {
	
		available = {
			OR = { ### add new focus flag here so that AI can activate the voting decision
				has_country_flag = focus_EU101
				has_country_flag = focus_EU102_maj
				has_country_flag = focus_EU103
				has_country_flag = focus_EU104
				has_country_flag = focus_EU105
				has_country_flag = focus_EU201_maj
				has_country_flag = focus_EU202
				has_country_flag = focus_EU202_QMV
				has_country_flag = focus_EU203
				has_country_flag = focus_EU204
				has_country_flag = focus_EU205
				has_country_flag = focus_EU206
				has_country_flag = focus_EU207
				has_country_flag = focus_EU208
				has_country_flag = focus_EU301
				has_country_flag = focus_EU301_QMV
				has_country_flag = focus_EU302
				has_country_flag = focus_EU302_QMV
				has_country_flag = focus_EU303
				has_country_flag = focus_EU303_QMV
				has_country_flag = focus_EU304
				has_country_flag = focus_EU304_QMV
				has_country_flag = focus_EU305
				has_country_flag = focus_EU305_QMV
				has_country_flag = focus_EU306
				has_country_flag = focus_EU306_QMV
				has_country_flag = focus_EU307
				has_country_flag = focus_EU307_QMV
				has_country_flag = focus_EU308
				has_country_flag = focus_EU308_QMV
				has_country_flag = focus_EU401
				has_country_flag = focus_EU401_QMV
				has_country_flag = focus_EU402
				has_country_flag = focus_EU402_QMV
				has_country_flag = focus_EU403
				has_country_flag = focus_EU403_QMV
				has_country_flag = focus_EU404
				has_country_flag = focus_EU404_QMV
				has_country_flag = focus_EU405
				has_country_flag = focus_EU405_QMV
				has_country_flag = focus_EU406
				has_country_flag = focus_EU406_QMV
				has_country_flag = focus_EU407
				has_country_flag = focus_EU407_QMV
				has_country_flag = focus_EU408
				has_country_flag = focus_EU408_QMV
				has_country_flag = focus_EU601
				has_country_flag = focus_EU601_QMV
				has_country_flag = focus_EU602
				has_country_flag = focus_EU602_QMV
				has_country_flag = focus_EU603
				has_country_flag = focus_EU603_QMV
				has_country_flag = focus_EU702
				has_country_flag = focus_EU702_QMV
				has_country_flag = focus_EU110_maj
				has_country_flag = focus_EU111
				has_country_flag = focus_EU112
				has_country_flag = focus_EU113
				has_country_flag = focus_EU113_QMV			
			}
			has_idea = EU_member
			is_ai = yes
				NOT = {
					OR = {	
						all_country = {
							OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.03 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
							}
						}
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_parliament_president	
					}
				}
		}
		
		visible = { 
			has_idea = EU_member
			is_ai = yes
		} 
		
		complete_effect = {   						
			every_country = {
				limit = {
					has_idea = EU_member
					NOT = { original_tag = ROOT }
				}
				for_loop_effect = { 
					end = influence_array^num value = v 
						if = { 
							limit = { 
								check_variable = { influence_array^v = ROOT } 
							} 
							add_to_variable = { influence_array_val^v = 5 }
							set_country_flag = found 
						} 
				} 
				if = { 
					limit = { 
						NOT = { has_country_flag = found } 
					} 
					add_to_array = { influence_array = ROOT.id }
					add_to_array = { influence_array_val = 5 } 
				} 
				clr_country_flag = found
				recalculate_influence = yes				
			}
		}
		ai_will_do = {
			factor = 100
		}		
	}

###############################################
### End of AI Influence Help/Cheat Decision ###
###############################################

}


#################################
#################################
### END of EU_voting_category ###
#################################
#################################

##########################
########################## 
### EU_SOTEU_category ####
##########################
##########################

EU_SOTEU_category = {
		
	State_of_the_European_Union = {

		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_country_flag = EU_potential 
		} 
			
		complete_effect = {
			country_event = {
				id = EUevent.1
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	
	pro_european_campaign = {
		icon = eng_propaganda_campaigns
		#cost = 100
		days_remove = 90
		#days_re_enable = 30

		custom_cost_trigger = {
			check_variable = { treasury > 0.1 }
		}
		custom_cost_text = cost_0_1


		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		fixed_random_seed = no	
		complete_effect = {
			log = "[GetDateText]: [ROOT.GetName]: decision pro_european_campaign"
			hidden_effect = {
				subtract_from_variable = { treasury = 0.1 }
			}		
			random_list = {
				
				40 = {
					modifier = {
						add = 10
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.11 ### eurosceptic -3%
					}
					every_country = {
						limit = {
							has_idea = EU_member
						}
						news_event = {
							id = EU_news.28 ### eurosceptic -3%
						}
					}					
				}
				30 = {
					modifier = {
						add = 10
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.12 ### eurosceptic -5%
					}
					every_country = {
						limit = {
							has_idea = EU_member
						}
						news_event = {
							id = EU_news.29 ### eurosceptic -5%
						}
					}					
				}
				30 = {
					modifier = {
						add = -20
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.13 ### eurosceptic 3%
					}
					every_country = {
						limit = {
							has_idea = EU_member
						}
						news_event = {
							id = EU_news.30 ### eurosceptic 3%
						}
					}					
				}				
			}
		}
		ai_will_do = {
			factor = 40
				### Euroscepticism and Government factor
				modifier = {
					add = 40
					AND = {
						ROOT = {
							OR = {
								is_in_array = { ruling_party = 1 } ### conservatism
								is_in_array = { ruling_party = 6 } ### Conservative
								is_in_array = { ruling_party = 14 } ### Neutral_conservatism
							}
						}
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.4								
								compare = greater_than_or_equals
							}
						}
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.6								
								compare = less_than
							}
						}
						check_variable = {
							var = global.var_europeanism
							value = 0.6								
							compare = less_than
						}
					}
				}
				modifier = {
					add = -40
					AND = {
						ROOT = {
							OR = {
								is_in_array = { ruling_party = 1 } ### conservatism
								is_in_array = { ruling_party = 6 } ### Conservative
								is_in_array = { ruling_party = 14 } ### Neutral_conservatism
							}
						}
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.6								
								compare = greater_than_or_equals
							}
						}				
					}
				}	
				modifier = {
					add = 20
					AND = {
						ROOT = {
							OR = {
								is_in_array = { ruling_party = 2 } ### liberalism
								is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
								is_in_array = { ruling_party = 3 } ### socialism
								is_in_array = { ruling_party = 18 } ### neutral_Social
								is_in_array = { ruling_party = 17 } ### Neutral_green
								is_in_array = { ruling_party = 4 } ### Communist-State
								is_in_array = { ruling_party = 5 } ### anarchist_communism
								is_in_array = { ruling_party = 19 } ### Neutral_Communism	
							}
						}	
						check_variable = {
							var = global.var_europeanism
							value = 0.8								
							compare = less_than
						}
					}
				
				}				
				modifier = {
					add = 40
					AND = {
						ROOT = {
							OR = {
								is_in_array = { ruling_party = 2 } ### liberalism
								is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
								is_in_array = { ruling_party = 3 } ### socialism
								is_in_array = { ruling_party = 18 } ### neutral_Social
								is_in_array = { ruling_party = 17 } ### Neutral_green
								is_in_array = { ruling_party = 4 } ### Communist-State
								is_in_array = { ruling_party = 5 } ### anarchist_communism
								is_in_array = { ruling_party = 19 } ### Neutral_Communism	
							}
						}	
						check_variable = {
							var = global.var_europeanism
							value = 0.6								
							compare = less_than
						}
					}				
				}
				modifier = {
					add = -60
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}
		}
	}	
	
	euroscepticism_campaign = {
		icon = eng_propaganda_campaigns
		#cost = 100
		days_remove = 90
		#days_re_enable = 30

		custom_cost_trigger = {
			check_variable = { treasury > 0.1 }
		}
		custom_cost_text = cost_0_1

		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		fixed_random_seed = no	
		complete_effect = {
			log = "[GetDateText]: [ROOT.GetName]: decision euroscepticism_campaign"
			hidden_effect = {
				subtract_from_variable = { treasury = 0.1 }
			}		
			random_list = {
				
				40 = {
					modifier = {
						add = 10
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.13 ### eurosceptic 3%
					}
					every_country = {
						limit = {
							has_idea = EU_member
						}
						news_event = {
							id = EU_news.30 ### eurosceptic 3%
						}
					}					
				}
				30 = {
					modifier = {
						add = 10
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.14 ### eurosceptic 5%
					}
					every_country = {
						limit = {
							has_idea = EU_member
						}
						news_event = {
							id = EU_news.31 ### eurosceptic 5%
						}
					}					
				}
				30 = {
					modifier = {
						add = -20
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.11 ### eurosceptic -3%
					}
					every_country = {
						limit = {
							has_idea = EU_member
						}
						news_event = {
							id = EU_news.28 ### eurosceptic -3%
						}
					}					
				}				
			}
		}
		ai_will_do = {
			factor = 40
				### Euroscepticism
				modifier = {
					add = 10
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.5
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 10
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.6
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 10
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.7
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 20
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.8
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 20
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.9
								compare = greater_than_or_equals
							}
						}
				}
				### Government factor
				modifier = {
					add = 10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 1 } ### conservatism
							is_in_array = { ruling_party = 6 } ### Conservative
							is_in_array = { ruling_party = 14 } ### Neutral_conservatism
						}
					}
				}
				modifier = {
					add = -60
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 2 } ### liberalism
							is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
							is_in_array = { ruling_party = 3 } ### socialism
							is_in_array = { ruling_party = 18 } ### neutral_Social
							is_in_array = { ruling_party = 17 } ### Neutral_green
							is_in_array = { ruling_party = 4 } ### Communist-State
							is_in_array = { ruling_party = 5 } ### anarchist_communism
							is_in_array = { ruling_party = 19 } ### Neutral_Communism							
						}
					}				
				}
				modifier = {
					add = 60
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}
		}
	}	
	
	root_pro_european_campaign = {
		icon = eng_propaganda_campaigns
		#cost = 100
		days_remove = 90
		#days_re_enable = 30

		custom_cost_trigger = {
			check_variable = { treasury > 0.1 }
		}
		custom_cost_text = cost_0_1

		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		fixed_random_seed = no	
		complete_effect = {
			log = "[GetDateText]: [ROOT.GetName]: decision root_pro_european_campaign"
			hidden_effect = {
				subtract_from_variable = { treasury = 0.1 }
			}		
			random_list = {
				
				70 = {
					modifier = {
						add = 10
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.15 ### eurosceptic -5%
					}					
				}
				30 = {
					modifier = {
						add = -10
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.16 ### eurosceptic 5%
					}					
				}				
			}
		}
		ai_will_do = {
			factor = 40
				### Euroscepticism and Government factor
				modifier = {
					add = 40
					AND = {
						ROOT = {
							OR = {
								is_in_array = { ruling_party = 1 } ### conservatism
								is_in_array = { ruling_party = 6 } ### Conservative
								is_in_array = { ruling_party = 14 } ### Neutral_conservatism
							}
						}
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.4								
								compare = greater_than_or_equals
							}
						}
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.6								
								compare = less_than
							}
						}
					}
				}
				modifier = {
					add = -20
					AND = {
						ROOT = {
							OR = {
								is_in_array = { ruling_party = 1 } ### conservatism
								is_in_array = { ruling_party = 6 } ### Conservative
								is_in_array = { ruling_party = 14 } ### Neutral_conservatism
							}
						}
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.6								
								compare = greater_than_or_equals
							}
						}
					}				
				}
				modifier = {
					add = 40
					AND = {
						ROOT = {
							OR = {
								is_in_array = { ruling_party = 2 } ### liberalism
								is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
								is_in_array = { ruling_party = 3 } ### socialism
								is_in_array = { ruling_party = 18 } ### neutral_Social
								is_in_array = { ruling_party = 17 } ### Neutral_green
								is_in_array = { ruling_party = 4 } ### Communist-State
								is_in_array = { ruling_party = 5 } ### anarchist_communism
								is_in_array = { ruling_party = 19 } ### Neutral_Communism	
							}
						}
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.4								
								compare = less_than
							}
						}
					}				
				}				
				modifier = {
					add = 40
					AND = {
						ROOT = {
							OR = {
								is_in_array = { ruling_party = 2 } ### liberalism
								is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
								is_in_array = { ruling_party = 3 } ### socialism
								is_in_array = { ruling_party = 18 } ### neutral_Social
								is_in_array = { ruling_party = 17 } ### Neutral_green
								is_in_array = { ruling_party = 4 } ### Communist-State
								is_in_array = { ruling_party = 5 } ### anarchist_communism
								is_in_array = { ruling_party = 19 } ### Neutral_Communism	
							}
						}
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.4								
								compare = greater_than_or_equals
							}
						}
					}				
				}
				modifier = {
					add = -40
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}
		}
	}	
	
	root_euroscepticism_campaign = {
		icon = eng_propaganda_campaigns
		#cost = 100
		days_remove = 90
		#days_re_enable = 30

		custom_cost_trigger = {
			check_variable = { treasury > 0.1 }
		}
		custom_cost_text = cost_0_1

		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		fixed_random_seed = no	
		complete_effect = {
			log = "[GetDateText]: [ROOT.GetName]: decision root_pro_european_campaign"
			hidden_effect = {
				subtract_from_variable = { treasury = 0.1 }
			}		
			random_list = {
				
				70 = {
					modifier = {
						add = 10
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.16 ### eurosceptic 5%
					}					
				}
				30 = {
					modifier = {
						add = -10
						OR = {
							has_idea = EU_commission_president
							has_idea = EU_council_president
							has_idea = EU_parliament_president
							has_idea = EU_president
						}
					}
					country_event = {
						id = EUevent.15 ### eurosceptic -5%
					}					
				}				
			}
		}
		ai_will_do = {
			factor = 10
				### Euroscepticism
				modifier = {
					add = 30
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.5
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 10
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.6
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 10
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.7
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 20
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.8
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 20
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.9
								compare = greater_than_or_equals
							}
						}
				}
				### Government factor
				modifier = {
					add = 10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 1 } ### conservatism
							is_in_array = { ruling_party = 6 } ### Conservative
							is_in_array = { ruling_party = 14 } ### Neutral_conservatism
						}
					}
				}
				modifier = {
					add = -60
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 2 } ### liberalism
							is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
							is_in_array = { ruling_party = 3 } ### socialism
							is_in_array = { ruling_party = 18 } ### neutral_Social
							is_in_array = { ruling_party = 17 } ### Neutral_green
							is_in_array = { ruling_party = 4 } ### Communist-State
							is_in_array = { ruling_party = 5 } ### anarchist_communism
							is_in_array = { ruling_party = 19 } ### Neutral_Communism							
						}
					}				
				}
				modifier = {
					add = 60
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}
		}
	}
	
	
}


#################################
### END of EU_SOTEU_category ####
#################################


##########################
##########################
### EU_office_category ###
##########################
##########################

EU_office_category = {

### President of the European Commission ###
	claim_office_EU_commission_president = {
		available = {
			has_idea = EU_member
			OR = { has_global_flag = european_constitution has_global_flag = treaty_of_lisbon }
			NOT = {
				any_country = {
					has_idea = EU_commission_president
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			OR = { has_global_flag = european_constitution has_global_flag = treaty_of_lisbon }
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EU_commission_president
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.2
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### President of the European Council ###
	claim_office_EU_council_president = {
		available = {
			has_idea = EU_member
			OR = { has_global_flag = european_constitution has_global_flag = treaty_of_lisbon }
			NOT = {
				any_country = {
					has_idea = EU_council_president
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			OR = { has_global_flag = european_constitution has_global_flag = treaty_of_lisbon }
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EU_council_president
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.3
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### High Representative of the Union for Foreign Affairs and Security Policy ###
	claim_office_EU_foreign_minister = {
		available = {
			has_idea = EU_member
			has_global_flag = EU_foreign_minister
			NOT = {
				any_country = {
					has_idea = EU_foreign_minister
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			has_global_flag = EU_foreign_minister
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EU_foreign_minister
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.4
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### President of the European Parliament ###
	claim_office_EU_parliament_president = {
		available = {
			has_idea = EU_member
			OR = { has_global_flag = european_constitution has_global_flag = treaty_of_lisbon }
			NOT = {
				any_country = {
					has_idea = EU_parliament_president
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			OR = { has_global_flag = european_constitution has_global_flag = treaty_of_lisbon }
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EU_parliament_president
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.5
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### President of the European Central Bank ###
	claim_office_ECB_president = {
		available = {
			has_idea = EU_member
			has_idea = the_euro
			NOT = {
				any_country = {
					has_idea = ECB_president
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			has_idea = the_euro
		}
		complete_effect = {
			add_timed_idea =  {
				idea = ECB_president
				days = 2920
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.6
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### European Minister of Economy and Finance ###
	claim_office_EU_finance_minister = {
		available = {
			has_idea = EU_member
			has_global_flag = EU_finance_minister
			NOT = {
				any_country = {
					has_idea = EU_finance_minister
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			has_global_flag = EU_finance_minister
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EU_finance_minister
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.7
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### Frontex Executive Director ###
	claim_office_frontex_ExDir = {
		available = {
			has_idea = EU_member
			has_global_flag = frontex_ExDir
			NOT = {
				any_country = {
					has_idea = frontex_ExDir
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			has_global_flag = frontex_ExDir
		}
		complete_effect = {
			add_timed_idea =  {
				idea = frontex_ExDir
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.8
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### Secretary General of EuroArmy ###
	claim_office_EuroArmy_SC = {
		available = {
			has_idea = EU_member
			has_global_flag = EuroArmy
			NOT = {
				any_country = {
					has_idea = EuroArmy_SC
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			has_global_flag = EuroArmy
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EuroArmy_SC
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.9
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### Secretary General of EuroNavy ###
	claim_office_EuroNavy_SC = {
		available = {
			has_idea = EU_member
			has_global_flag = EuroNavy
			NOT = {
				any_country = {
					has_idea = EuroNavy_SC
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			has_global_flag = EuroNavy
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EuroNavy_SC
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.10
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### Ambassador of the Union to the United Nations ###
	claim_office_EU_ambassador_UNSC = {
		available = {
			has_idea = EU_member
			has_global_flag = EU_UNSC
			NOT = {
				any_country = {
					has_idea = EU_ambassador_UNSC
				}
			}
			OR = {
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				has_idea = EU_president
			}
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			has_global_flag = EU_UNSC
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EU_ambassador_UNSC
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.11
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}
### President of the European Federation ###
	claim_office_EU_president = {
		available = {
			has_idea = EU_member
			has_global_flag = european_federation
			NOT = {
				any_country = {
					has_idea = EU_president
				}
			}
			
				NOT = {
					OR = {
						has_idea = EU_commission_president
						has_idea = EU_council_president
						has_idea = EU_foreign_minister
						has_idea = EU_parliament_president
						has_idea = ECB_president
						has_idea = EU_finance_minister
						has_idea = frontex_ExDir
						has_idea = EuroArmy_SC
						has_idea = EuroNavy_SC
						has_idea = EU_ambassador_UNSC
					}
				}
				
			
			custom_trigger_tooltip = {
				tooltip = "[ROOT.GetNameWithFlag] must have > 5% influence on all member states OR a Population greater than 5% of the Total EU Population."
				OR = {
					all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
						}
					}
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
			}
		}
		visible = {
			has_idea = EU_member
			has_global_flag = european_federation
		}
		complete_effect = {
			add_timed_idea =  {
				idea = EU_president
				days = 1825
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.12
				}
			}
		}
		ai_will_do = {
			factor = 40
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.05 }
				}
				modifier = {
					add = 30
					check_variable = { THIS.var_EUpopRatio > 0.1 }
				}
		}
	}


} 

#################################
### END of EU_office_category ###
#################################


##########################
##########################
### EU_fiscal_category ###
##########################
##########################

EU_fiscal_category = {

	eurozone_reforms = {
		
		allowed = { always = no }
		
		available = {
			OR = {
				### European Banking Union
				has_country_flag = focus_EU202_yes
				has_country_flag = focus_EU202_QMV_yes
				has_country_flag = focus_EU202_maj_yes
			}
			OR = {
				OR = {
					### Eurobonds
					has_country_flag = focus_EU203_yes
					has_country_flag = focus_EU203_QMV_yes
					has_country_flag = focus_EU203_maj_yes
				}
				OR = {
					### European Stability Mechanism (ESM)
					has_country_flag = focus_EU205_yes
					has_country_flag = focus_EU205_QMV_yes
					has_country_flag = focus_EU205_maj_yes
				}			
			}
		}
		
		activation = {
			always = no
		}
		
		visible = { 
			has_idea = EU_member			
		} 
		
		days_mission_timeout = 730
		
		selectable_mission = yes
		
		ai_will_do = {
			factor = 50
			modifier = {
				add = 10
				ROOT = {
					OR = {
						is_in_array = { ruling_party = 1 } ### conservatism
						is_in_array = { ruling_party = 6 } ### Conservative
						is_in_array = { ruling_party = 14 } ### Neutral_conservatism
					}
				}
			}
			modifier = {
				add = 20
				ROOT = {
					OR = {
						is_in_array = { ruling_party = 2 } ### liberalism
						is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
					}
				}				
			}
			modifier = {
				add = 30
				ROOT = {
					OR = {
						is_in_array = { ruling_party = 3 } ### socialism
						is_in_array = { ruling_party = 18 } ### neutral_Social
						is_in_array = { ruling_party = 17 } ### Neutral_green
						is_in_array = { ruling_party = 4 } ### Communist-State
						is_in_array = { ruling_party = 5 } ### anarchist_communism
						is_in_array = { ruling_party = 19 } ### Neutral_Communism
					}
				}
			}
			modifier = {
				add = -40
				ROOT = {
					OR = {
						is_in_array = { ruling_party = 20 } ### Nat_Populism
						is_in_array = { ruling_party = 21 } ### Nat_Fascism
						is_in_array = { ruling_party = 22 } ### Nat_Autocracy
						is_in_array = { ruling_party = 23 } ### Monarchist
					}
				}
			}			
		}
		
		fire_only_once = yes
		
		timeout_effect = {
			every_country = {
				limit = {
					has_idea = EU_member
				}
				country_event = {
					id = EUevent.5 ### European debt crisis
				}
			}
		}
		
		cancel_trigger = {
			any_country = {
				has_global_flag = eurozone_reforms
			}
		}
		
		complete_effect = {   						
			every_country = {
				limit = {
					has_idea = EU_member
				}
				country_event = {
					id = EUevent.6 ### eurozone reforms
				}
			}
		}				
	}

	troika_reforms = { ### WIP
		
		allowed = { always = no }
		
		available = { ### add raising tax rate later
			OR = {
				check_variable = {
					var = ROOT.interest_rate
					value = 3.5
					compare = less_than
				}
				OR = {				
					has_idea = widespread_corruption
					has_idea = medium_corruption
					has_idea = modest_corruption				
					has_idea = slight_corruption
					has_idea = negligible_corruption				
				}
				OR = {
					has_idea = stable_growth
					has_idea = fast_growth				
					has_idea = economic_boom
				}
				AND = {					
					OR = {
						has_idea = bureau_03
						has_idea = bureau_02
						has_idea = bureau_01
					}
					#OR = { ### seems as AI will not change police law
					#	has_idea = police_03
					#	has_idea = police_02
					#	has_idea = police_01
					#}
					OR = {
						has_idea = edu_03
						has_idea = edu_02
						has_idea = edu_01
					}
					OR = {
						has_idea = health_03
						has_idea = health_02
						has_idea = health_01
					}
					OR = {
						has_idea = social_03
						has_idea = social_02
						has_idea = social_01
					}
					OR = {
						has_idea = defence_02
						has_idea = defence_01
						has_idea = defence_00
					}	
				}
			}
		}
		
		activation = {
			always = no
		}
		
		visible = { 
			has_idea = EU_member
			has_idea = national_dept_crisis_EU			
		} 
		
		days_mission_timeout = 730
		
		selectable_mission = yes
		
		ai_will_do = {
			factor = 100
		}
		
		cancel_trigger = {
			ROOT = {
				NOT = {
					has_idea = national_dept_crisis_EU
				}
			}
		}
		timeout_effect = {
			ROOT = {
				country_event = {
					id = EUevent.9 
				}
			}
		}
		complete_effect = {   						
			ROOT = {
				country_event = {
					id = EUevent.8 
				}
			}
		}				
	}
	
	
} 

#################################
### END of EU_fiscal_category ###
#################################	

##########################
##########################
### EU_ECB_category    ###
##########################
##########################

EU_ECB_category = {

	ECB_Start_OMT = { ### whatever it takes
	
		available = {
			has_idea = EU_member
			has_idea = ECB_zero_interest_rate_policy
			has_idea = ECB_president
		}
		
		visible = { 
			has_idea = EU_member 
		}
		
		fire_only_once = yes # Will not re-enable after being removed
		
		complete_effect = {
			custom_effect_tooltip = tooltip_ECB_Start_OMT_effect
			hidden_effect = {
                    set_variable = {
                        var = global.OMT_size_limit
                        value = 400
                    }
                    set_variable = {
                        var = global.OMT_total_value
                        value = 0
                    }
			}

		}
		ai_will_do = {
			factor = 10
				modifier = {
					add = 40
					any_country = {
						AND = {
							has_idea = EU_member
							has_idea = the_euro
							check_variable = { THIS.interest_rate > 4.0 }
						}			
					}
				}	
				### Euroscepticism
				modifier = {
					add = -40
						any_country = {
							has_idea = EU_member
							check_variable = {
								var = eurosceptic
								value = 0.6
								compare = greater_than_or_equals
							}
						}
				}
		}		
	}

	ECB_expand_OMT_limit = {
	
		available = {
			has_idea = EU_member
			has_idea = ECB_president
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		complete_effect = {
			custom_effect_tooltip = tooltip_ECB_expand_OMT_limit_effect
			hidden_effect = {		
                    add_to_variable = {
                        var = global.OMT_size_limit
                        value = 200
                    }
			every_country = { ### contra OMT
				if = {
					limit = {
						has_idea = EU_member
						has_idea = the_euro
						check_variable = { THIS.interest_rate < 4.0 }
					}
					country_event = {
						id = EUevent.16 ### ROOT euroscepticism rise 5% ###
					}			
				}
			}
			every_country = { ### pro OMT
				if = {
					limit = {
						has_idea = EU_member
						has_idea = the_euro
						check_variable = { THIS.interest_rate > 4.0 }
					}				
					country_event = {
						id = EUevent.15 ### ROOT euroscepticism decline -5% ###
					}
				}
			}
			}
		}
		ai_will_do = {
			factor = 10
				modifier = {
					add = 40
					check_variable = { global.OMT_total_value > 0}
					any_country = {
						AND = {
							has_idea = EU_member
							has_idea = the_euro
							check_variable = { THIS.interest_rate > 4.0 }
						}			
					}
				}	
				### Euroscepticism
				modifier = {
					add = -50
						any_country = {							
							has_idea = EU_member							
							check_variable = {
								var = eurosceptic
								value = 0.6
								compare = greater_than_or_equals
							}
						}
				}
		}		
	}

	ECB_reduce_OMT_limit = {
	
		available = {
			has_idea = EU_member
			has_idea = ECB_president
			check_variable = { global.OMT_size_limit > 0 }
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		complete_effect = {
			custom_effect_tooltip = tooltip_ECB_reduce_OMT_limit_effect
			hidden_effect = {		
                    subtract_from_variable = {
                        var = global.OMT_size_limit
                        value = 200
                    }
					if = {
						limit = {
							check_variable = { global.OMT_size_limit < 0 }
						}
						set_variable = { global.OMT_size_limit = 0 }
					}
			every_country = { ### contra OMT
				if = {
					limit = {
						has_idea = EU_member
						has_idea = the_euro
						check_variable = { THIS.interest_rate < 4.0 }
					}
					country_event = {
						id = EUevent.15 ### ROOT euroscepticism decline -5% ###
					}			
				}
			}
			every_country = { ### pro OMT
				if = {
					limit = {
						has_idea = EU_member
						has_idea = the_euro
						check_variable = { THIS.interest_rate > 4.0 }
					}
					country_event = {
						id = EUevent.16 ### ROOT euroscepticism rise 5% ###
					}			
				}			
			}
		}
		}
	}

	ECB_Outright_Monetary_Transactions = {
		
		#cost = 100
		days_remove = 10
		available = {
			has_idea = EU_member
			has_idea = ECB_president
			custom_trigger_tooltip = {
				tooltip = tooltip_ECB_Outright_Monetary_Transactions_available			
				check_variable = { global.OMT_size_limit > 0 }
			}
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		complete_effect = {
			custom_effect_tooltip = tooltip_ECB_Outright_Monetary_Transactions_complete_effect
			hidden_effect = {		
				every_country = {
					if = {
						limit = {
							has_idea = EU_member
							has_idea = the_euro
						}					
						set_variable = {
							var = THIS.OMT_account
							value = 0
						}        
						while_loop_effect = {    
							limit = { 
								check_variable = { THIS.interest_rate > 4.0 }
								check_variable = { global.OMT_size_limit > global.OMT_total_value }							
							}
							if = {
								limit = { 
									check_variable = { THIS.interest_rate > 4.0 } 
								}						
								subtract_from_variable = { THIS.debt = 0.10 }
								add_to_variable = { THIS.OMT_account = 0.10 }
								add_to_variable = { global.OMT_total_value = 0.10 }
								calculate_interest_rate = yes
								calculate_debt_rate = yes
							}
						}                    
						ingame_calculate_size_modifier = yes
						update_military_rate = yes
						calculate_interest_rate = yes
						calculate_debt_rate = yes
					}
				}
				every_country = {
					if = {
						limit = {
							has_idea = EU_member
						}
					
						news_event = {
							id = EU_news.32 
						}
					}
                }
			}
		}
		remove_effect = {
			custom_effect_tooltip = tooltip_ECB_Outright_Monetary_Transactions_remove_effect
			hidden_effect = {		
				every_country = {
					if = {
						limit = {
							has_idea = EU_member
							has_idea = the_euro
						}
					
						add_to_variable = { 
							var = THIS.debt
							value = THIS.OMT_account
						}
						clear_variable = THIS.OMT_account
						clear_variable = global.OMT_total_value
						ingame_calculate_size_modifier = yes
						update_military_rate = yes
						calculate_interest_rate = yes
						calculate_debt_rate = yes
					}
				}
				every_country = {
					if = {
						limit = {
							has_idea = EU_member
						}					
						news_event = {
							id = EU_news.33 
						}
					}
                }
			}
        }
		ai_will_do = {
			factor = 10
				modifier = {
					add = 40
					any_country = {
						AND = {
							has_idea = EU_member
							has_idea = the_euro
							check_variable = { THIS.interest_rate > 4.0 }
						}			
					}
				}
		}
	}



	
} 

###############################
### End of EU_ECB_category	###
###############################


##########################
##########################
### EU_exit_category   ###
##########################
##########################

EU_exit_category = {

	EU_Article_50 = {
	
		available = {
			has_idea = EU_member
			custom_trigger_tooltip = {
				tooltip = tooltip_EU_Article_50_available
				ROOT = { has_country_flag = focus_EU701_completed }
				NOT = {
					has_country_flag = Article_50
				}
			}
		}
		
		visible = { 
			has_idea = EU_member
		} 
		
		complete_effect = {   						
			ROOT = {
				activate_mission =  EU_exit
				set_country_flag = Article_50
			}
		}
		### AI EU exit
		ai_will_do = {
			factor = 0
				### Euroscepticism
				modifier = {
					add = 40
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.5
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 40
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.6
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 20
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.7
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 20
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.8
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = 20
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.9
								compare = greater_than_or_equals
							}
						}
				}
				### Government factor
				modifier = {
					add = 20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 1 } ### conservatism
							is_in_array = { ruling_party = 6 } ### Conservative
							is_in_array = { ruling_party = 14 } ### Neutral_conservatism
						}
					}
				}
				modifier = {
					add = -20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 2 } ### liberalism
							is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
						}
					}				
				}
				modifier = {
					add = -20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 3 } ### socialism
							is_in_array = { ruling_party = 18 } ### neutral_Social
							is_in_array = { ruling_party = 17 } ### Neutral_green
						}
					}
				}
				modifier = {
					add = 0
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 4 } ### Communist-State
							is_in_array = { ruling_party = 5 } ### anarchist_communism
							is_in_array = { ruling_party = 19 } ### Neutral_Communism
						}
					}
				}			
				modifier = {
					add = 80
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}			
		}
	}

	EU_Revoke_Article_50 = {
	
		available = {
			has_idea = EU_member
			custom_trigger_tooltip = {
				tooltip = tooltip_EU_Revoke_Article_50_available
				has_country_flag = Article_50
				ROOT = { has_country_flag = focus_EU701_completed }				
			}
		}
		
		visible = { 
			has_idea = EU_member
			ROOT = { has_country_flag = focus_EU701_completed }
		} 
		
		complete_effect = {
			custom_effect_tooltip = tooltip_EU_Revoke_Article_50_effect
			hidden_effect = {
				ROOT = {
					clr_country_flag = Article_50
				}
			}
		}
		### AI EU exit
		ai_will_do = {
			factor = 40
				### Euroscepticism
				modifier = {
					add = -30
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.4
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = -10
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.5
								compare = greater_than_or_equals
							}
						}
				}
				modifier = {
					add = -10
						ROOT = {	
							check_variable = {
								var = eurosceptic
								value = 0.6
								compare = greater_than_or_equals
							}
						}
				}
				### Government factor
				modifier = {
					add = -10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 1 } ### conservatism
							is_in_array = { ruling_party = 6 } ### Conservative
							is_in_array = { ruling_party = 14 } ### Neutral_conservatism
						}
					}
				}
				modifier = {
					add = 10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 2 } ### liberalism
							is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
						}
					}				
				}
				modifier = {
					add = 10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 3 } ### socialism
							is_in_array = { ruling_party = 18 } ### neutral_Social
							is_in_array = { ruling_party = 17 } ### Neutral_green
						}
					}
				}
				modifier = {
					add = 0
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 4 } ### Communist-State
							is_in_array = { ruling_party = 5 } ### anarchist_communism
							is_in_array = { ruling_party = 19 } ### Neutral_Communism
						}
					}
				}			
				modifier = {
					add = -40
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}			
		}		
	}

	EU_exit = {
		
		allowed = { always = no }
		
		available = {
			custom_trigger_tooltip = {
				tooltip = tooltip_EU_exit_available
				### Withdrawal Treaty
				#has_country_flag = focus_EU702_yes
				#has_country_flag = focus_EU702_QMV_yes
				#has_country_flag = focus_EU702_maj_yes
				has_country_flag = withdrawal_treaty
			}
		}
		
		activation = {
			always = no
		}
		
		visible = { 
			has_idea = EU_member
			ROOT = { has_country_flag = focus_EU701_completed }			
		} 
		
		days_mission_timeout = 730
		
		selectable_mission = yes
		
		fire_only_once = yes
		
		timeout_effect = {
			ROOT = {
				if = { ### unprepared no deal exit
					limit = {
						NOT = { ROOT = { has_country_flag = focus_EU703_completed } }
					}
					add_timed_idea = {
						idea = no_deal_exit
						days = 1825 # five years # unprepared no deal exit # prepared no deal exit with two years with focus EU703
					}
					remove_ideas = EU_member
					remove_ideas = the_euro
					custom_effect_tooltip = tooltip_EU_remove_laws_and_offices
					hidden_effect = {
					### EU law and offices
					#EU laws
					remove_ideas = CFR_EU
					remove_ideas = ECB_zero_interest_rate_policy
					remove_ideas = euro_bonds
					remove_ideas = european_debt_crisis
					remove_ideas = euro_rescue_package
					remove_ideas = fiscal_union
					remove_ideas = European_Economic_Government
					remove_from_tech_sharing_group = EU_Tech_Share	
					remove_ideas = European_Defence_Fund
					remove_ideas = European_Security_Council
					remove_ideas = EU_nuke_power
					remove_ideas = GDPR
					remove_ideas = EU_copyright			
					remove_ideas = Migrant_Crisis_Europe
					remove_ideas = relocation_asylum_seekers
					remove_ideas = EU_Turkey_deal
					remove_ideas = European_Asylum_Agency	 
					remove_ideas = Frontex
					#EU offices	 
					remove_ideas = EU_commission_president
					remove_ideas = EU_council_president
					remove_ideas = EU_foreign_minister
					remove_ideas = EU_parliament_president
					remove_ideas = ECB_president
					remove_ideas = EU_finance_minister
					remove_ideas = frontex_ExDir
					remove_ideas = EuroArmy_SC
					remove_ideas = EuroNavy_SC
					remove_ideas = EU_ambassador_UNSC
					remove_ideas = EU_president					
					### EU law and offices
					###focus tree flags
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU101 }
						}
							ROOT = { clr_country_flag = focus_EU101 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU101_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU102_maj }
						}
							ROOT = { clr_country_flag = focus_EU102_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU102_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU103 }
						}
							ROOT = { clr_country_flag = focus_EU103 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU103_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU104 }
						}
							ROOT = { clr_country_flag = focus_EU104 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU104_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU105 }
						}
							ROOT = { clr_country_flag = focus_EU105 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU105_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU201_maj }
						}
							ROOT = { clr_country_flag = focus_EU201_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU201_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202 }
						}
							ROOT = { clr_country_flag = focus_EU202 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202_QMV }
						}
							ROOT = { clr_country_flag = focus_EU202_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU203 }
						}
							ROOT = { clr_country_flag = focus_EU203 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU203_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU204 }
						}
							ROOT = { clr_country_flag = focus_EU204 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU204_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU205 }
						}
							ROOT = { clr_country_flag = focus_EU205 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU205_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU206 }
						}
							ROOT = { clr_country_flag = focus_EU206 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU206_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU207 }
						}
							ROOT = { clr_country_flag = focus_EU207 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU207_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU208 }
						}
							ROOT = { clr_country_flag = focus_EU208 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU208_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301 }
						}
							ROOT = { clr_country_flag = focus_EU301 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301_QMV }
						}
							ROOT = { clr_country_flag = focus_EU301_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302 }
						}
							ROOT = { clr_country_flag = focus_EU302 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302_QMV }
						}
							ROOT = { clr_country_flag = focus_EU302_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303 }
						}
							ROOT = { clr_country_flag = focus_EU303 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303_QMV }
						}
							ROOT = { clr_country_flag = focus_EU303_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304 }
						}
							ROOT = { clr_country_flag = focus_EU304 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304_QMV }
						}
							ROOT = { clr_country_flag = focus_EU304_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305 }
						}
							ROOT = { clr_country_flag = focus_EU305 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305_QMV }
						}
							ROOT = { clr_country_flag = focus_EU305_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306 }
						}
							ROOT = { clr_country_flag = focus_EU306 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306_QMV }
						}
							ROOT = { clr_country_flag = focus_EU306_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307 }
						}
							ROOT = { clr_country_flag = focus_EU307 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307_QMV }
						}
							ROOT = { clr_country_flag = focus_EU307_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308 }
						}
							ROOT = { clr_country_flag = focus_EU308 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308_QMV }
						}
							ROOT = { clr_country_flag = focus_EU308_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401 }
						}
							ROOT = { clr_country_flag = focus_EU401 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401_QMV }
						}
							ROOT = { clr_country_flag = focus_EU401_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402 }
						}
							ROOT = { clr_country_flag = focus_EU402 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402_QMV }
						}
							ROOT = { clr_country_flag = focus_EU402_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403 }
						}
							ROOT = { clr_country_flag = focus_EU403 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403_QMV }
						}
							ROOT = { clr_country_flag = focus_EU403_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404 }
						}
							ROOT = { clr_country_flag = focus_EU404 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404_QMV }
						}
							ROOT = { clr_country_flag = focus_EU404_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405 }
						}
							ROOT = { clr_country_flag = focus_EU405 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405_QMV }
						}
							ROOT = { clr_country_flag = focus_EU405_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406 }
						}
							ROOT = { clr_country_flag = focus_EU406 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406_QMV }
						}
							ROOT = { clr_country_flag = focus_EU406_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407 }
						}
							ROOT = { clr_country_flag = focus_EU407 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407_QMV }
						}
							ROOT = { clr_country_flag = focus_EU407_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408 }
						}
							ROOT = { clr_country_flag = focus_EU408 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408_QMV }
						}
							ROOT = { clr_country_flag = focus_EU408_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601 }
						}
							ROOT = { clr_country_flag = focus_EU601 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601_QMV }
						}
							ROOT = { clr_country_flag = focus_EU601_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602 }
						}
							ROOT = { clr_country_flag = focus_EU602 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602_QMV }
						}
							ROOT = { clr_country_flag = focus_EU602_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603 }
						}
							ROOT = { clr_country_flag = focus_EU603 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603_QMV }
						}
							ROOT = { clr_country_flag = focus_EU603_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU110_maj }
						}
							ROOT = { clr_country_flag = focus_EU110_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU110_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU111 }
						}
							ROOT = { clr_country_flag = focus_EU111 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU111_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU112 }
						}
							ROOT = { clr_country_flag = focus_EU112 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU112_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113 }
						}
							ROOT = { clr_country_flag = focus_EU113 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113_QMV }
						}
							ROOT = { clr_country_flag = focus_EU113_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_QMV_retry
							}
					}					
					###focus tree flags					
					clr_country_flag = Article_50
					} ### end of hidden_effect
				}
				
				else_if = { ### prepared no deal exit
					limit = {
						ROOT = { has_country_flag = focus_EU703_completed }
					}
					add_timed_idea = {
						idea = no_deal_exit
						days = 730 # five years # unprepared no deal exit # prepared no deal exit with two years with focus EU703
					}
					remove_ideas = EU_member
					remove_ideas = the_euro
					custom_effect_tooltip = tooltip_EU_remove_laws_and_offices
					hidden_effect = {
					### EU law and offices
					#EU laws
					remove_ideas = CFR_EU
					remove_ideas = ECB_zero_interest_rate_policy
					remove_ideas = euro_bonds
					remove_ideas = european_debt_crisis
					remove_ideas = euro_rescue_package
					remove_ideas = fiscal_union
					remove_ideas = European_Economic_Government
					remove_from_tech_sharing_group = EU_Tech_Share	
					remove_ideas = European_Defence_Fund
					remove_ideas = European_Security_Council
					remove_ideas = EU_nuke_power
					remove_ideas = GDPR
					remove_ideas = EU_copyright			
					remove_ideas = Migrant_Crisis_Europe
					remove_ideas = relocation_asylum_seekers
					remove_ideas = EU_Turkey_deal
					remove_ideas = European_Asylum_Agency	 
					remove_ideas = Frontex
					#EU offices	 
					remove_ideas = EU_commission_president
					remove_ideas = EU_council_president
					remove_ideas = EU_foreign_minister
					remove_ideas = EU_parliament_president
					remove_ideas = ECB_president
					remove_ideas = EU_finance_minister
					remove_ideas = frontex_ExDir
					remove_ideas = EuroArmy_SC
					remove_ideas = EuroNavy_SC
					remove_ideas = EU_ambassador_UNSC
					remove_ideas = EU_president					
					### EU law and offices
					###focus tree flags
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU101 }
						}
							ROOT = { clr_country_flag = focus_EU101 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU101_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU102_maj }
						}
							ROOT = { clr_country_flag = focus_EU102_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU102_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU103 }
						}
							ROOT = { clr_country_flag = focus_EU103 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU103_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU104 }
						}
							ROOT = { clr_country_flag = focus_EU104 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU104_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU105 }
						}
							ROOT = { clr_country_flag = focus_EU105 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU105_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU201_maj }
						}
							ROOT = { clr_country_flag = focus_EU201_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU201_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202 }
						}
							ROOT = { clr_country_flag = focus_EU202 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202_QMV }
						}
							ROOT = { clr_country_flag = focus_EU202_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU203 }
						}
							ROOT = { clr_country_flag = focus_EU203 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU203_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU204 }
						}
							ROOT = { clr_country_flag = focus_EU204 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU204_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU205 }
						}
							ROOT = { clr_country_flag = focus_EU205 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU205_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU206 }
						}
							ROOT = { clr_country_flag = focus_EU206 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU206_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU207 }
						}
							ROOT = { clr_country_flag = focus_EU207 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU207_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU208 }
						}
							ROOT = { clr_country_flag = focus_EU208 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU208_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301 }
						}
							ROOT = { clr_country_flag = focus_EU301 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301_QMV }
						}
							ROOT = { clr_country_flag = focus_EU301_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302 }
						}
							ROOT = { clr_country_flag = focus_EU302 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302_QMV }
						}
							ROOT = { clr_country_flag = focus_EU302_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303 }
						}
							ROOT = { clr_country_flag = focus_EU303 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303_QMV }
						}
							ROOT = { clr_country_flag = focus_EU303_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304 }
						}
							ROOT = { clr_country_flag = focus_EU304 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304_QMV }
						}
							ROOT = { clr_country_flag = focus_EU304_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305 }
						}
							ROOT = { clr_country_flag = focus_EU305 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305_QMV }
						}
							ROOT = { clr_country_flag = focus_EU305_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306 }
						}
							ROOT = { clr_country_flag = focus_EU306 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306_QMV }
						}
							ROOT = { clr_country_flag = focus_EU306_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307 }
						}
							ROOT = { clr_country_flag = focus_EU307 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307_QMV }
						}
							ROOT = { clr_country_flag = focus_EU307_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308 }
						}
							ROOT = { clr_country_flag = focus_EU308 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308_QMV }
						}
							ROOT = { clr_country_flag = focus_EU308_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401 }
						}
							ROOT = { clr_country_flag = focus_EU401 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401_QMV }
						}
							ROOT = { clr_country_flag = focus_EU401_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402 }
						}
							ROOT = { clr_country_flag = focus_EU402 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402_QMV }
						}
							ROOT = { clr_country_flag = focus_EU402_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403 }
						}
							ROOT = { clr_country_flag = focus_EU403 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403_QMV }
						}
							ROOT = { clr_country_flag = focus_EU403_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404 }
						}
							ROOT = { clr_country_flag = focus_EU404 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404_QMV }
						}
							ROOT = { clr_country_flag = focus_EU404_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405 }
						}
							ROOT = { clr_country_flag = focus_EU405 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405_QMV }
						}
							ROOT = { clr_country_flag = focus_EU405_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406 }
						}
							ROOT = { clr_country_flag = focus_EU406 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406_QMV }
						}
							ROOT = { clr_country_flag = focus_EU406_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407 }
						}
							ROOT = { clr_country_flag = focus_EU407 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407_QMV }
						}
							ROOT = { clr_country_flag = focus_EU407_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408 }
						}
							ROOT = { clr_country_flag = focus_EU408 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408_QMV }
						}
							ROOT = { clr_country_flag = focus_EU408_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601 }
						}
							ROOT = { clr_country_flag = focus_EU601 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601_QMV }
						}
							ROOT = { clr_country_flag = focus_EU601_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602 }
						}
							ROOT = { clr_country_flag = focus_EU602 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602_QMV }
						}
							ROOT = { clr_country_flag = focus_EU602_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603 }
						}
							ROOT = { clr_country_flag = focus_EU603 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603_QMV }
						}
							ROOT = { clr_country_flag = focus_EU603_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU110_maj }
						}
							ROOT = { clr_country_flag = focus_EU110_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU110_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU111 }
						}
							ROOT = { clr_country_flag = focus_EU111 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU111_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU112 }
						}
							ROOT = { clr_country_flag = focus_EU112 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU112_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113 }
						}
							ROOT = { clr_country_flag = focus_EU113 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113_QMV }
						}
							ROOT = { clr_country_flag = focus_EU113_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_QMV_retry
							}
					}					
					###focus tree flags					
					clr_country_flag = Article_50
					} ### end of hidden_effect
				}				
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.21 ### one member state leaves
				}
			}
		}
		
		cancel_trigger = { ### by EU_Revoke_Article_50
			custom_trigger_tooltip = {
				tooltip = tooltip_EU_exit_cancel_trigger
				ROOT = {
					NOT = {
						has_country_flag = Article_50
					}
				}
			}
		}
		
		remove_effect = {   						
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.22 ### Article 50 is revoked
				}
			}
		}
		complete_effect = {   						
			ROOT = {	
				add_ideas = withdrawal_treaty
					remove_ideas = EU_member
					remove_ideas = the_euro
					custom_effect_tooltip = tooltip_EU_remove_laws_and_offices
					hidden_effect = {
					### EU law and offices
					#EU laws
					remove_ideas = CFR_EU
					remove_ideas = ECB_zero_interest_rate_policy
					remove_ideas = euro_bonds
					remove_ideas = european_debt_crisis
					remove_ideas = euro_rescue_package
					remove_ideas = fiscal_union
					remove_ideas = European_Economic_Government
					remove_from_tech_sharing_group = EU_Tech_Share	
					remove_ideas = European_Defence_Fund
					remove_ideas = European_Security_Council
					remove_ideas = EU_nuke_power
					remove_ideas = GDPR
					remove_ideas = EU_copyright			
					remove_ideas = Migrant_Crisis_Europe
					remove_ideas = relocation_asylum_seekers
					remove_ideas = EU_Turkey_deal
					remove_ideas = European_Asylum_Agency	 
					remove_ideas = Frontex
					#EU offices	 
					remove_ideas = EU_commission_president
					remove_ideas = EU_council_president
					remove_ideas = EU_foreign_minister
					remove_ideas = EU_parliament_president
					remove_ideas = ECB_president
					remove_ideas = EU_finance_minister
					remove_ideas = frontex_ExDir
					remove_ideas = EuroArmy_SC
					remove_ideas = EuroNavy_SC
					remove_ideas = EU_ambassador_UNSC
					remove_ideas = EU_president					
					### EU law and offices
					###focus tree flags
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU101 }
						}
							ROOT = { clr_country_flag = focus_EU101 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU101_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU102_maj }
						}
							ROOT = { clr_country_flag = focus_EU102_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU102_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU103 }
						}
							ROOT = { clr_country_flag = focus_EU103 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU103_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU104 }
						}
							ROOT = { clr_country_flag = focus_EU104 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU104_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU105 }
						}
							ROOT = { clr_country_flag = focus_EU105 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU105_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU201_maj }
						}
							ROOT = { clr_country_flag = focus_EU201_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU201_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202 }
						}
							ROOT = { clr_country_flag = focus_EU202 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202_QMV }
						}
							ROOT = { clr_country_flag = focus_EU202_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU203 }
						}
							ROOT = { clr_country_flag = focus_EU203 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU203_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU204 }
						}
							ROOT = { clr_country_flag = focus_EU204 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU204_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU205 }
						}
							ROOT = { clr_country_flag = focus_EU205 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU205_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU206 }
						}
							ROOT = { clr_country_flag = focus_EU206 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU206_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU207 }
						}
							ROOT = { clr_country_flag = focus_EU207 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU207_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU208 }
						}
							ROOT = { clr_country_flag = focus_EU208 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU208_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301 }
						}
							ROOT = { clr_country_flag = focus_EU301 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301_QMV }
						}
							ROOT = { clr_country_flag = focus_EU301_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302 }
						}
							ROOT = { clr_country_flag = focus_EU302 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302_QMV }
						}
							ROOT = { clr_country_flag = focus_EU302_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303 }
						}
							ROOT = { clr_country_flag = focus_EU303 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303_QMV }
						}
							ROOT = { clr_country_flag = focus_EU303_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304 }
						}
							ROOT = { clr_country_flag = focus_EU304 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304_QMV }
						}
							ROOT = { clr_country_flag = focus_EU304_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305 }
						}
							ROOT = { clr_country_flag = focus_EU305 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305_QMV }
						}
							ROOT = { clr_country_flag = focus_EU305_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306 }
						}
							ROOT = { clr_country_flag = focus_EU306 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306_QMV }
						}
							ROOT = { clr_country_flag = focus_EU306_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307 }
						}
							ROOT = { clr_country_flag = focus_EU307 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307_QMV }
						}
							ROOT = { clr_country_flag = focus_EU307_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308 }
						}
							ROOT = { clr_country_flag = focus_EU308 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308_QMV }
						}
							ROOT = { clr_country_flag = focus_EU308_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401 }
						}
							ROOT = { clr_country_flag = focus_EU401 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401_QMV }
						}
							ROOT = { clr_country_flag = focus_EU401_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402 }
						}
							ROOT = { clr_country_flag = focus_EU402 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402_QMV }
						}
							ROOT = { clr_country_flag = focus_EU402_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403 }
						}
							ROOT = { clr_country_flag = focus_EU403 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403_QMV }
						}
							ROOT = { clr_country_flag = focus_EU403_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404 }
						}
							ROOT = { clr_country_flag = focus_EU404 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404_QMV }
						}
							ROOT = { clr_country_flag = focus_EU404_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405 }
						}
							ROOT = { clr_country_flag = focus_EU405 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405_QMV }
						}
							ROOT = { clr_country_flag = focus_EU405_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406 }
						}
							ROOT = { clr_country_flag = focus_EU406 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406_QMV }
						}
							ROOT = { clr_country_flag = focus_EU406_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407 }
						}
							ROOT = { clr_country_flag = focus_EU407 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407_QMV }
						}
							ROOT = { clr_country_flag = focus_EU407_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408 }
						}
							ROOT = { clr_country_flag = focus_EU408 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408_QMV }
						}
							ROOT = { clr_country_flag = focus_EU408_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601 }
						}
							ROOT = { clr_country_flag = focus_EU601 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601_QMV }
						}
							ROOT = { clr_country_flag = focus_EU601_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602 }
						}
							ROOT = { clr_country_flag = focus_EU602 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602_QMV }
						}
							ROOT = { clr_country_flag = focus_EU602_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603 }
						}
							ROOT = { clr_country_flag = focus_EU603 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603_QMV }
						}
							ROOT = { clr_country_flag = focus_EU603_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU110_maj }
						}
							ROOT = { clr_country_flag = focus_EU110_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU110_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU111 }
						}
							ROOT = { clr_country_flag = focus_EU111 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU111_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU112 }
						}
							ROOT = { clr_country_flag = focus_EU112 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU112_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113 }
						}
							ROOT = { clr_country_flag = focus_EU113 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113_QMV }
						}
							ROOT = { clr_country_flag = focus_EU113_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_QMV_retry
							}
					}					
					###focus tree flags					
					clr_country_flag = Article_50
					} ### end of hidden_effect
				news_event = {
					id = EU_news.21 ### one member state leaves
				}
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.21 ### one member state leaves
				}
			}
		}
		### AI Withdrawal Treaty
		ai_will_do = {
			factor = 40
				### Government factor
				modifier = {
					add = -10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 1 } ### conservatism
							is_in_array = { ruling_party = 6 } ### Conservative
							is_in_array = { ruling_party = 14 } ### Neutral_conservatism
						}
					}
				}
				modifier = {
					add = 10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 2 } ### liberalism
							is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
						}
					}				
				}
				modifier = {
					add = 20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 3 } ### socialism
							is_in_array = { ruling_party = 18 } ### neutral_Social
							is_in_array = { ruling_party = 17 } ### Neutral_green
						}
					}
				}
				modifier = {
					add = 20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 4 } ### Communist-State
							is_in_array = { ruling_party = 5 } ### anarchist_communism
							is_in_array = { ruling_party = 19 } ### Neutral_Communism
						}
					}
				}			
				modifier = {
					add = -30
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}			
		}		
	}

	EU_extend_Article_50 = {
	
		available = {
			has_idea = EU_member
			custom_trigger_tooltip = {
				tooltip = tooltip_EU_extend_Article_50_available
				ROOT = { has_country_flag = focus_EU701_completed }
				has_country_flag = Article_50
					all_country = {
						OR = {
								AND = {
									set_temp_variable = { temp_idx = -1 }
									any_of = {
										array = influence_array
										value = v
										index = i
										if = {
											limit = { var:v = { tag = ROOT } }
											set_temp_variable = { temp_idx = i }
											always = yes
										}
										else = { always = no }
									}
									check_variable = { temp_idx > -1 }
									check_variable = { influence_array_calc^temp_idx > 0.05 }
								}
								tag = PREV
								NOT = { has_idea = EU_member }
						}
					}
			}	
		}
		
		visible = { 
			has_idea = EU_member
			ROOT = { has_country_flag = focus_EU701_completed }
		} 
		
		complete_effect = {   						
			ROOT = {
				remove_mission = EU_exit
				remove_mission = EU_exit_three_month
				activate_mission = EU_exit_three_month
				
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				country_event = {
					id = EU_news.24 ### Article 50 Extension
				}
			}
		}				
	}

	EU_exit_three_month = {
		
		allowed = { always = no }
		
		available = {
			custom_trigger_tooltip = {
				#same tooltip as EU_exit
				tooltip = tooltip_EU_exit_available
				### Withdrawal Treaty
				#has_country_flag = focus_EU702_yes
				#has_country_flag = focus_EU702_QMV_yes
				#has_country_flag = focus_EU702_maj_yes
				has_country_flag = withdrawal_treaty
			}
		}
		
		activation = {
			always = no
		}
		
		visible = { 
			has_idea = EU_member
			ROOT = { has_country_flag = focus_EU701_completed }			
		} 
		
		days_mission_timeout = 90
		
		selectable_mission = yes
		
		fire_only_once = yes
		
		timeout_effect = {
			ROOT = {
				if = { ### unprepared no deal exit
					limit = {
						NOT = { ROOT = { has_country_flag = focus_EU703_completed } }
					}
					add_timed_idea = {
						idea = no_deal_exit
						days = 1825 # five years # unprepared no deal exit # prepared no deal exit with two years with focus EU703
					}
					remove_ideas = EU_member
					remove_ideas = the_euro
					custom_effect_tooltip = tooltip_EU_remove_laws_and_offices
					hidden_effect = {
					### EU law and offices
					#EU laws
					remove_ideas = CFR_EU
					remove_ideas = ECB_zero_interest_rate_policy
					remove_ideas = euro_bonds
					remove_ideas = european_debt_crisis
					remove_ideas = euro_rescue_package
					remove_ideas = fiscal_union
					remove_ideas = European_Economic_Government
					remove_from_tech_sharing_group = EU_Tech_Share	
					remove_ideas = European_Defence_Fund
					remove_ideas = European_Security_Council
					remove_ideas = EU_nuke_power
					remove_ideas = GDPR
					remove_ideas = EU_copyright			
					remove_ideas = Migrant_Crisis_Europe
					remove_ideas = relocation_asylum_seekers
					remove_ideas = EU_Turkey_deal
					remove_ideas = European_Asylum_Agency	 
					remove_ideas = Frontex
					#EU offices	 
					remove_ideas = EU_commission_president
					remove_ideas = EU_council_president
					remove_ideas = EU_foreign_minister
					remove_ideas = EU_parliament_president
					remove_ideas = ECB_president
					remove_ideas = EU_finance_minister
					remove_ideas = frontex_ExDir
					remove_ideas = EuroArmy_SC
					remove_ideas = EuroNavy_SC
					remove_ideas = EU_ambassador_UNSC
					remove_ideas = EU_president					
					### EU law and offices
					###focus tree flags
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU101 }
						}
							ROOT = { clr_country_flag = focus_EU101 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU101_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU102_maj }
						}
							ROOT = { clr_country_flag = focus_EU102_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU102_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU103 }
						}
							ROOT = { clr_country_flag = focus_EU103 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU103_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU104 }
						}
							ROOT = { clr_country_flag = focus_EU104 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU104_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU105 }
						}
							ROOT = { clr_country_flag = focus_EU105 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU105_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU201_maj }
						}
							ROOT = { clr_country_flag = focus_EU201_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU201_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202 }
						}
							ROOT = { clr_country_flag = focus_EU202 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202_QMV }
						}
							ROOT = { clr_country_flag = focus_EU202_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU203 }
						}
							ROOT = { clr_country_flag = focus_EU203 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU203_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU204 }
						}
							ROOT = { clr_country_flag = focus_EU204 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU204_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU205 }
						}
							ROOT = { clr_country_flag = focus_EU205 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU205_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU206 }
						}
							ROOT = { clr_country_flag = focus_EU206 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU206_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU207 }
						}
							ROOT = { clr_country_flag = focus_EU207 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU207_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU208 }
						}
							ROOT = { clr_country_flag = focus_EU208 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU208_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301 }
						}
							ROOT = { clr_country_flag = focus_EU301 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301_QMV }
						}
							ROOT = { clr_country_flag = focus_EU301_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302 }
						}
							ROOT = { clr_country_flag = focus_EU302 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302_QMV }
						}
							ROOT = { clr_country_flag = focus_EU302_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303 }
						}
							ROOT = { clr_country_flag = focus_EU303 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303_QMV }
						}
							ROOT = { clr_country_flag = focus_EU303_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304 }
						}
							ROOT = { clr_country_flag = focus_EU304 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304_QMV }
						}
							ROOT = { clr_country_flag = focus_EU304_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305 }
						}
							ROOT = { clr_country_flag = focus_EU305 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305_QMV }
						}
							ROOT = { clr_country_flag = focus_EU305_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306 }
						}
							ROOT = { clr_country_flag = focus_EU306 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306_QMV }
						}
							ROOT = { clr_country_flag = focus_EU306_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307 }
						}
							ROOT = { clr_country_flag = focus_EU307 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307_QMV }
						}
							ROOT = { clr_country_flag = focus_EU307_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308 }
						}
							ROOT = { clr_country_flag = focus_EU308 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308_QMV }
						}
							ROOT = { clr_country_flag = focus_EU308_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401 }
						}
							ROOT = { clr_country_flag = focus_EU401 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401_QMV }
						}
							ROOT = { clr_country_flag = focus_EU401_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402 }
						}
							ROOT = { clr_country_flag = focus_EU402 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402_QMV }
						}
							ROOT = { clr_country_flag = focus_EU402_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403 }
						}
							ROOT = { clr_country_flag = focus_EU403 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403_QMV }
						}
							ROOT = { clr_country_flag = focus_EU403_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404 }
						}
							ROOT = { clr_country_flag = focus_EU404 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404_QMV }
						}
							ROOT = { clr_country_flag = focus_EU404_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405 }
						}
							ROOT = { clr_country_flag = focus_EU405 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405_QMV }
						}
							ROOT = { clr_country_flag = focus_EU405_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406 }
						}
							ROOT = { clr_country_flag = focus_EU406 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406_QMV }
						}
							ROOT = { clr_country_flag = focus_EU406_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407 }
						}
							ROOT = { clr_country_flag = focus_EU407 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407_QMV }
						}
							ROOT = { clr_country_flag = focus_EU407_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408 }
						}
							ROOT = { clr_country_flag = focus_EU408 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408_QMV }
						}
							ROOT = { clr_country_flag = focus_EU408_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601 }
						}
							ROOT = { clr_country_flag = focus_EU601 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601_QMV }
						}
							ROOT = { clr_country_flag = focus_EU601_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602 }
						}
							ROOT = { clr_country_flag = focus_EU602 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602_QMV }
						}
							ROOT = { clr_country_flag = focus_EU602_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603 }
						}
							ROOT = { clr_country_flag = focus_EU603 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603_QMV }
						}
							ROOT = { clr_country_flag = focus_EU603_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU110_maj }
						}
							ROOT = { clr_country_flag = focus_EU110_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU110_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU111 }
						}
							ROOT = { clr_country_flag = focus_EU111 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU111_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU112 }
						}
							ROOT = { clr_country_flag = focus_EU112 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU112_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113 }
						}
							ROOT = { clr_country_flag = focus_EU113 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113_QMV }
						}
							ROOT = { clr_country_flag = focus_EU113_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_QMV_retry
							}
					}					
					###focus tree flags					
					clr_country_flag = Article_50
					} ### end of hidden_effect
				}
				else_if = { ### prepared no deal exit
					limit = {
						ROOT = { has_country_flag = focus_EU703_completed }
					}
					add_timed_idea = {
						idea = no_deal_exit
						days = 730 # five years # unprepared no deal exit # prepared no deal exit with two years with focus EU703
					}
					remove_ideas = EU_member
					remove_ideas = the_euro
					custom_effect_tooltip = tooltip_EU_remove_laws_and_offices
					hidden_effect = {
					### EU law and offices
					#EU laws
					remove_ideas = CFR_EU
					remove_ideas = ECB_zero_interest_rate_policy
					remove_ideas = euro_bonds
					remove_ideas = european_debt_crisis
					remove_ideas = euro_rescue_package
					remove_ideas = fiscal_union
					remove_ideas = European_Economic_Government
					remove_from_tech_sharing_group = EU_Tech_Share	
					remove_ideas = European_Defence_Fund
					remove_ideas = European_Security_Council
					remove_ideas = EU_nuke_power
					remove_ideas = GDPR
					remove_ideas = EU_copyright			
					remove_ideas = Migrant_Crisis_Europe
					remove_ideas = relocation_asylum_seekers
					remove_ideas = EU_Turkey_deal
					remove_ideas = European_Asylum_Agency	 
					remove_ideas = Frontex
					#EU offices	 
					remove_ideas = EU_commission_president
					remove_ideas = EU_council_president
					remove_ideas = EU_foreign_minister
					remove_ideas = EU_parliament_president
					remove_ideas = ECB_president
					remove_ideas = EU_finance_minister
					remove_ideas = frontex_ExDir
					remove_ideas = EuroArmy_SC
					remove_ideas = EuroNavy_SC
					remove_ideas = EU_ambassador_UNSC
					remove_ideas = EU_president					
					### EU law and offices
					###focus tree flags
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU101 }
						}
							ROOT = { clr_country_flag = focus_EU101 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU101_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU102_maj }
						}
							ROOT = { clr_country_flag = focus_EU102_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU102_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU103 }
						}
							ROOT = { clr_country_flag = focus_EU103 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU103_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU104 }
						}
							ROOT = { clr_country_flag = focus_EU104 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU104_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU105 }
						}
							ROOT = { clr_country_flag = focus_EU105 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU105_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU201_maj }
						}
							ROOT = { clr_country_flag = focus_EU201_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU201_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202 }
						}
							ROOT = { clr_country_flag = focus_EU202 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202_QMV }
						}
							ROOT = { clr_country_flag = focus_EU202_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU203 }
						}
							ROOT = { clr_country_flag = focus_EU203 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU203_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU204 }
						}
							ROOT = { clr_country_flag = focus_EU204 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU204_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU205 }
						}
							ROOT = { clr_country_flag = focus_EU205 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU205_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU206 }
						}
							ROOT = { clr_country_flag = focus_EU206 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU206_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU207 }
						}
							ROOT = { clr_country_flag = focus_EU207 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU207_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU208 }
						}
							ROOT = { clr_country_flag = focus_EU208 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU208_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301 }
						}
							ROOT = { clr_country_flag = focus_EU301 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301_QMV }
						}
							ROOT = { clr_country_flag = focus_EU301_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302 }
						}
							ROOT = { clr_country_flag = focus_EU302 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302_QMV }
						}
							ROOT = { clr_country_flag = focus_EU302_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303 }
						}
							ROOT = { clr_country_flag = focus_EU303 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303_QMV }
						}
							ROOT = { clr_country_flag = focus_EU303_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304 }
						}
							ROOT = { clr_country_flag = focus_EU304 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304_QMV }
						}
							ROOT = { clr_country_flag = focus_EU304_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305 }
						}
							ROOT = { clr_country_flag = focus_EU305 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305_QMV }
						}
							ROOT = { clr_country_flag = focus_EU305_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306 }
						}
							ROOT = { clr_country_flag = focus_EU306 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306_QMV }
						}
							ROOT = { clr_country_flag = focus_EU306_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307 }
						}
							ROOT = { clr_country_flag = focus_EU307 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307_QMV }
						}
							ROOT = { clr_country_flag = focus_EU307_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308 }
						}
							ROOT = { clr_country_flag = focus_EU308 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308_QMV }
						}
							ROOT = { clr_country_flag = focus_EU308_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401 }
						}
							ROOT = { clr_country_flag = focus_EU401 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401_QMV }
						}
							ROOT = { clr_country_flag = focus_EU401_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402 }
						}
							ROOT = { clr_country_flag = focus_EU402 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402_QMV }
						}
							ROOT = { clr_country_flag = focus_EU402_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403 }
						}
							ROOT = { clr_country_flag = focus_EU403 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403_QMV }
						}
							ROOT = { clr_country_flag = focus_EU403_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404 }
						}
							ROOT = { clr_country_flag = focus_EU404 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404_QMV }
						}
							ROOT = { clr_country_flag = focus_EU404_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405 }
						}
							ROOT = { clr_country_flag = focus_EU405 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405_QMV }
						}
							ROOT = { clr_country_flag = focus_EU405_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406 }
						}
							ROOT = { clr_country_flag = focus_EU406 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406_QMV }
						}
							ROOT = { clr_country_flag = focus_EU406_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407 }
						}
							ROOT = { clr_country_flag = focus_EU407 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407_QMV }
						}
							ROOT = { clr_country_flag = focus_EU407_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408 }
						}
							ROOT = { clr_country_flag = focus_EU408 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408_QMV }
						}
							ROOT = { clr_country_flag = focus_EU408_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601 }
						}
							ROOT = { clr_country_flag = focus_EU601 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601_QMV }
						}
							ROOT = { clr_country_flag = focus_EU601_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602 }
						}
							ROOT = { clr_country_flag = focus_EU602 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602_QMV }
						}
							ROOT = { clr_country_flag = focus_EU602_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603 }
						}
							ROOT = { clr_country_flag = focus_EU603 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603_QMV }
						}
							ROOT = { clr_country_flag = focus_EU603_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU110_maj }
						}
							ROOT = { clr_country_flag = focus_EU110_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU110_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU111 }
						}
							ROOT = { clr_country_flag = focus_EU111 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU111_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU112 }
						}
							ROOT = { clr_country_flag = focus_EU112 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU112_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113 }
						}
							ROOT = { clr_country_flag = focus_EU113 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113_QMV }
						}
							ROOT = { clr_country_flag = focus_EU113_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_QMV_retry
							}
					}					
					###focus tree flags					
					clr_country_flag = Article_50
					} ### end of hidden_effect
				}				
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.21 ### one member state leaves
				}
			}
		}
		
		cancel_trigger = { ### by EU_Revoke_Article_50
			custom_trigger_tooltip = {
				#same tooltip as EU_exit
				tooltip = tooltip_EU_exit_cancel_trigger
				ROOT = {
					NOT = {
						has_country_flag = Article_50
					}
				}
			}
		}
		
		remove_effect = {   						
			every_country = {
				limit = {
					has_idea = EU_member
				}
				country_event = {
					id = EU_news.22 ### Article 50 is revoked
				}
			}
		}
		complete_effect = {   						
			ROOT = {	
				add_ideas = withdrawal_treaty
					remove_ideas = EU_member
					remove_ideas = the_euro
					custom_effect_tooltip = tooltip_EU_remove_laws_and_offices
					hidden_effect = {
					### EU law and offices
					#EU laws
					remove_ideas = CFR_EU
					remove_ideas = ECB_zero_interest_rate_policy
					remove_ideas = euro_bonds
					remove_ideas = european_debt_crisis
					remove_ideas = euro_rescue_package
					remove_ideas = fiscal_union
					remove_ideas = European_Economic_Government
					remove_from_tech_sharing_group = EU_Tech_Share	
					remove_ideas = European_Defence_Fund
					remove_ideas = European_Security_Council
					remove_ideas = EU_nuke_power
					remove_ideas = GDPR
					remove_ideas = EU_copyright			
					remove_ideas = Migrant_Crisis_Europe
					remove_ideas = relocation_asylum_seekers
					remove_ideas = EU_Turkey_deal
					remove_ideas = European_Asylum_Agency	 
					remove_ideas = Frontex
					#EU offices	 
					remove_ideas = EU_commission_president
					remove_ideas = EU_council_president
					remove_ideas = EU_foreign_minister
					remove_ideas = EU_parliament_president
					remove_ideas = ECB_president
					remove_ideas = EU_finance_minister
					remove_ideas = frontex_ExDir
					remove_ideas = EuroArmy_SC
					remove_ideas = EuroNavy_SC
					remove_ideas = EU_ambassador_UNSC
					remove_ideas = EU_president					
					### EU law and offices
					###focus tree flags
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU101 }
						}
							ROOT = { clr_country_flag = focus_EU101 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU101_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU102_maj }
						}
							ROOT = { clr_country_flag = focus_EU102_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU102_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU103 }
						}
							ROOT = { clr_country_flag = focus_EU103 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU103_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU104 }
						}
							ROOT = { clr_country_flag = focus_EU104 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU104_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU105 }
						}
							ROOT = { clr_country_flag = focus_EU105 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU105_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU201_maj }
						}
							ROOT = { clr_country_flag = focus_EU201_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU201_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202 }
						}
							ROOT = { clr_country_flag = focus_EU202 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU202_QMV }
						}
							ROOT = { clr_country_flag = focus_EU202_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU202_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU203 }
						}
							ROOT = { clr_country_flag = focus_EU203 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU203_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU204 }
						}
							ROOT = { clr_country_flag = focus_EU204 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU204_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU205 }
						}
							ROOT = { clr_country_flag = focus_EU205 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU205_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU206 }
						}
							ROOT = { clr_country_flag = focus_EU206 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU206_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU207 }
						}
							ROOT = { clr_country_flag = focus_EU207 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU207_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU208 }
						}
							ROOT = { clr_country_flag = focus_EU208 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU208_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301 }
						}
							ROOT = { clr_country_flag = focus_EU301 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU301_QMV }
						}
							ROOT = { clr_country_flag = focus_EU301_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU301_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302 }
						}
							ROOT = { clr_country_flag = focus_EU302 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU302_QMV }
						}
							ROOT = { clr_country_flag = focus_EU302_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU302_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303 }
						}
							ROOT = { clr_country_flag = focus_EU303 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU303_QMV }
						}
							ROOT = { clr_country_flag = focus_EU303_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU303_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304 }
						}
							ROOT = { clr_country_flag = focus_EU304 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU304_QMV }
						}
							ROOT = { clr_country_flag = focus_EU304_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU304_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305 }
						}
							ROOT = { clr_country_flag = focus_EU305 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU305_QMV }
						}
							ROOT = { clr_country_flag = focus_EU305_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU305_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306 }
						}
							ROOT = { clr_country_flag = focus_EU306 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU306_QMV }
						}
							ROOT = { clr_country_flag = focus_EU306_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU306_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307 }
						}
							ROOT = { clr_country_flag = focus_EU307 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU307_QMV }
						}
							ROOT = { clr_country_flag = focus_EU307_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU307_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308 }
						}
							ROOT = { clr_country_flag = focus_EU308 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU308_QMV }
						}
							ROOT = { clr_country_flag = focus_EU308_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU308_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401 }
						}
							ROOT = { clr_country_flag = focus_EU401 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU401_QMV }
						}
							ROOT = { clr_country_flag = focus_EU401_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU401_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402 }
						}
							ROOT = { clr_country_flag = focus_EU402 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU402_QMV }
						}
							ROOT = { clr_country_flag = focus_EU402_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU402_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403 }
						}
							ROOT = { clr_country_flag = focus_EU403 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU403_QMV }
						}
							ROOT = { clr_country_flag = focus_EU403_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU403_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404 }
						}
							ROOT = { clr_country_flag = focus_EU404 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU404_QMV }
						}
							ROOT = { clr_country_flag = focus_EU404_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU404_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405 }
						}
							ROOT = { clr_country_flag = focus_EU405 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU405_QMV }
						}
							ROOT = { clr_country_flag = focus_EU405_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU405_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406 }
						}
							ROOT = { clr_country_flag = focus_EU406 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU406_QMV }
						}
							ROOT = { clr_country_flag = focus_EU406_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU406_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407 }
						}
							ROOT = { clr_country_flag = focus_EU407 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU407_QMV }
						}
							ROOT = { clr_country_flag = focus_EU407_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU407_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408 }
						}
							ROOT = { clr_country_flag = focus_EU408 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU408_QMV }
						}
							ROOT = { clr_country_flag = focus_EU408_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU408_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601 }
						}
							ROOT = { clr_country_flag = focus_EU601 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU601_QMV }
						}
							ROOT = { clr_country_flag = focus_EU601_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU601_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602 }
						}
							ROOT = { clr_country_flag = focus_EU602 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU602_QMV }
						}
							ROOT = { clr_country_flag = focus_EU602_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU602_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603 }
						}
							ROOT = { clr_country_flag = focus_EU603 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU603_QMV }
						}
							ROOT = { clr_country_flag = focus_EU603_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU603_QMV_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU110_maj }
						}
							ROOT = { clr_country_flag = focus_EU110_maj }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU110_maj_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU111 }
						}
							ROOT = { clr_country_flag = focus_EU111 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU111_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU112 }
						}
							ROOT = { clr_country_flag = focus_EU112 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU112_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113 }
						}
							ROOT = { clr_country_flag = focus_EU113 }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_retry
							}
					}
					if = {
						limit = {
							ROOT = { has_country_flag = focus_EU113_QMV }
						}
							ROOT = { clr_country_flag = focus_EU113_QMV }
							every_country = {
								limit = { has_idea = EU_member }
									set_global_flag = focus_EU113_QMV_retry
							}
					}					
					###focus tree flags					
					clr_country_flag = Article_50
					} ### end of hidden_effect
				
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				country_event = {
					id = EU_news.23 ### withdrawal_treaty
				}
			}
		}
		### AI Withdrawal Treaty
		ai_will_do = {
			factor = 40
				### Government factor
				modifier = {
					add = -10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 1 } ### conservatism
							is_in_array = { ruling_party = 6 } ### Conservative
							is_in_array = { ruling_party = 14 } ### Neutral_conservatism
						}
					}
				}
				modifier = {
					add = 10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 2 } ### liberalism
							is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
						}
					}				
				}
				modifier = {
					add = 20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 3 } ### socialism
							is_in_array = { ruling_party = 18 } ### neutral_Social
							is_in_array = { ruling_party = 17 } ### Neutral_green
						}
					}
				}
				modifier = {
					add = 20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 4 } ### Communist-State
							is_in_array = { ruling_party = 5 } ### anarchist_communism
							is_in_array = { ruling_party = 19 } ### Neutral_Communism
						}
					}
				}			
				modifier = {
					add = -30
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}			
		}		
	}

	EU_withdrawal_treaty = {
	
		available = {
			has_idea = EU_member
			ROOT = { has_country_flag = focus_EU702_completed }
			has_country_flag = Article_50
				all_country = {
					OR = {
							AND = {
								set_temp_variable = { temp_idx = -1 }
								any_of = {
									array = influence_array
									value = v
									index = i
									if = {
										limit = { var:v = { tag = ROOT } }
										set_temp_variable = { temp_idx = i }
										always = yes
									}
									else = { always = no }
								}
								check_variable = { temp_idx > -1 }
								check_variable = { influence_array_calc^temp_idx > 0.05 }
							}
							tag = PREV
							NOT = { has_idea = EU_member }
					}
				}			
		}
		
		visible = { 
			has_idea = EU_member
			ROOT = { has_country_flag = focus_EU702_completed }
		} 
		
		complete_effect = {   						
			ROOT = {
				set_country_flag = withdrawal_treaty				
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				country_event = {
					id = EU_news.23 ### withdrawal_treaty
				}
			}
		}
		ai_will_do = {
			factor = 40
				### Government factor
				modifier = {
					add = -10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 1 } ### conservatism
							is_in_array = { ruling_party = 6 } ### Conservative
							is_in_array = { ruling_party = 14 } ### Neutral_conservatism
						}
					}
				}
				modifier = {
					add = 10
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 2 } ### liberalism
							is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
						}
					}				
				}
				modifier = {
					add = 20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 3 } ### socialism
							is_in_array = { ruling_party = 18 } ### neutral_Social
							is_in_array = { ruling_party = 17 } ### Neutral_green
						}
					}
				}
				modifier = {
					add = 20
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 4 } ### Communist-State
							is_in_array = { ruling_party = 5 } ### anarchist_communism
							is_in_array = { ruling_party = 19 } ### Neutral_Communism
						}
					}
				}			
				modifier = {
					add = -30
					ROOT = {
						OR = {
							is_in_array = { ruling_party = 20 } ### Nat_Populism
							is_in_array = { ruling_party = 21 } ### Nat_Fascism
							is_in_array = { ruling_party = 22 } ### Nat_Autocracy
							is_in_array = { ruling_party = 23 } ### Monarchist
						}
					}
				}			
		}		
	}


} 

###############################
### END of EU_exit_category ###
###############################

###########################
###########################
### EU_defense_category ### 
###########################
###########################

EU_defense_category = {

	EU_Frontex_take_control = {
	
		available = {
			has_idea = EU_member
			has_idea = frontex_ExDir
		}
		
		visible = { 
			has_idea = EU_member
			has_idea = frontex_ExDir
		} 
		
		complete_effect = {
			every_country = {
				limit = {
					has_idea = EU_member
				}
				if = {
					limit = {
						any_country = { 
							NOT = { has_template = "European Border Guard Team" }
						}
					}
					add_manpower = -500
					subtract_from_variable = { treasury = 0.05 }
				}				
				delete_unit_template_and_units = {
					division_template = "European Border Guard Team" 
				}				
				give_military_access = ROOT
			}				
			if = {
				limit = {
					HUN = { has_idea = EU_member }
				}
				load_oob = "EU_frontex_basic_2017"
			}		
			else = {
				load_oob = "EU_frontex_basic_2000"
			}
		}				
	}

	EU_EuroNavy_take_control = {
	
		available = {
			has_idea = EU_member
			has_idea = EuroNavy_SC
		}
		
		visible = { 
			has_idea = EU_member
			has_idea = EuroNavy_SC
		} 
		
		complete_effect = {   						
			every_country = {
				limit = {
					has_idea = EU_member
				}
				country_event = {
					id = EUevent.10
				}
			}
		}				
	}
	
	EU_EuroArmy_take_control = {
	
		available = {
			has_idea = EU_member
			has_idea = EuroArmy_SC
		}
		
		visible = { 
			has_idea = EU_member
			has_idea = EuroArmy_SC
		} 
		
		complete_effect = {
			every_country = {
				limit = {
					has_idea = EU_member
				}
				if = {
					limit = {
						any_country = { 
							NOT = { has_template = "EuroArmy Brigade" }
						}
					}
					add_manpower = -1000
					subtract_from_variable = { treasury = 0.1 }
				}				
				delete_unit_template_and_units = {
					division_template = "EuroArmy Brigade" 
				}				
				give_military_access = ROOT
			}				
			load_oob = "EU_EuroArmy_basic_2000"
		}				
	}	

} 

##################################
### End of EU_defense_category ###
##################################

########################################
########################################
### EU_apply_for_membership_category ###
########################################
########################################

EU_apply_for_membership_category = {



	EU_apply_for_membership = {
		cost = 50
		available = {
				has_country_flag = EU_candidate
				NOT = { has_idea = EU_member }
		}
		
		visible = {
				has_country_flag = EU_potential
				NOT = { has_idea = EU_member }
		} 
		
		complete_effect = {
			ROOT = {
				add_ideas = EU_member
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				news_event = {
					id = EU_news.27 ### one country joins
				}
			}			

		}
		ai_will_do = {
			factor = 40
				### Europeanism
				modifier = {
					add = -40
					check_variable = { global.var_europeanism < 0.50 }
				}
		}
	}

	EU_adopt_EU_law = {
		
		
		available = {
			has_idea = EU_member
		}
		
		visible = { 
			has_idea = EU_member 
		} 
		
		fire_only_once = yes # Will not re-enable after being removed
		
		complete_effect = {   						
					### focus_EU001 effect
					### focus_EU002 effect
					### focus_EU100 effect
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU101_yes
						has_country_flag = focus_EU101_QMV_yes
						has_country_flag = focus_EU101_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU101 effect
					add_ideas = CFR_EU
				}
			}
					### focus_EU102 effect
					### focus_EU103 effect
					### focus_EU104 effect
					### focus_EU105 effect
					### focus_EU200 effect
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU201_yes
						has_country_flag = focus_EU201_QMV_yes
						has_country_flag = focus_EU201_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU201 effect
					add_ideas = ECB_zero_interest_rate_policy
					set_global_flag = ECB_intervention
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU202_yes
						has_country_flag = focus_EU202_QMV_yes
						has_country_flag = focus_EU202_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU202 effect
					add_stability = 0.05
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU203_yes
						has_country_flag = focus_EU203_QMV_yes
						has_country_flag = focus_EU203_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU203 effect
					add_ideas = euro_bonds
					remove_ideas = european_debt_crisis
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU204_yes
						has_country_flag = focus_EU204_QMV_yes
						has_country_flag = focus_EU204_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU204 effect
					add_stability = 0.10
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU205_yes
						has_country_flag = focus_EU205_QMV_yes
						has_country_flag = focus_EU205_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU205 effect
					add_ideas = euro_rescue_package
					remove_ideas = european_debt_crisis
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU206_yes
						has_country_flag = focus_EU206_QMV_yes
						has_country_flag = focus_EU206_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU206 effect
					add_ideas = fiscal_union
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU207_yes
						has_country_flag = focus_EU207_QMV_yes
						has_country_flag = focus_EU207_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU207 effect
					add_ideas = European_Economic_Government
				}
			}
					### focus_EU208 effect
					### focus_EU300 effect
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU301_yes
						has_country_flag = focus_EU301_QMV_yes
						has_country_flag = focus_EU301_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU301 effect
					add_to_tech_sharing_group = EU_Tech_Share
				}
			}
					### focus_EU302 effect
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU303_yes
						has_country_flag = focus_EU303_QMV_yes
						has_country_flag = focus_EU303_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU303 effect
					add_ideas = European_Defence_Fund
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU304_yes
						has_country_flag = focus_EU304_QMV_yes
						has_country_flag = focus_EU304_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU304 effect
					add_ideas = European_Security_Council
				}
			}
					### focus_EU305 effect
					### focus_EU306 effect
					### focus_EU307 effect
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU308_yes
						has_country_flag = focus_EU308_QMV_yes
						has_country_flag = focus_EU308_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU308 effect
					add_ideas = EU_nuke_power
				}
			}
					### focus_EU400 effect
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU401_yes
						has_country_flag = focus_EU401_QMV_yes
						has_country_flag = focus_EU401_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU401 effect
					add_ideas = GDPR
					remove_ideas = foreign_data_kraken
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU402_yes
						has_country_flag = focus_EU402_QMV_yes
						has_country_flag = focus_EU402_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU402 effect
					add_ideas = EU_copyright
					#add_popularity #^1conservatism = -0.03 #^6Conservative = -0.03 #^14Neutral_conservatism = -0.03
					add_to_variable = { party_pop_array^1 = -0.03 }
					add_popularity = { ideology = democratic popularity = -0.03 }
					add_to_variable = { party_pop_array^6 = -0.03 }
					add_popularity = { ideology = communism popularity = -0.03 }
					add_to_variable = { party_pop_array^14 = -0.03 }
					add_popularity = { ideology = neutrality popularity = -0.03 }
					recalculate_party = yes
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU403_yes
						has_country_flag = focus_EU403_QMV_yes
						has_country_flag = focus_EU403_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU403 effect
					remove_ideas = asylum_shopping
					#add_popularity #^20Nationalist popularity = 0.03
					add_to_variable = { party_pop_array^20 = 0.03 }
					add_popularity = { ideology = nationalist popularity = 0.03 }
					recalculate_party = yes
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU404_yes
						has_country_flag = focus_EU404_QMV_yes
						has_country_flag = focus_EU404_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU404 effect
					remove_ideas = Migrant_Crisis_Europe
					#add_popularity #^20Nationalist popularity = 0.05
					add_to_variable = { party_pop_array^20 = 0.05 }
					add_popularity = { ideology = nationalist popularity = 0.05 }
					recalculate_party = yes
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU405_yes
						has_country_flag = focus_EU405_QMV_yes
						has_country_flag = focus_EU405_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU405 effect
					remove_ideas = Migrant_Crisis_Europe
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU406_yes
						has_country_flag = focus_EU406_QMV_yes
						has_country_flag = focus_EU406_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU406 effect
					remove_ideas = relocation_asylum_seekers
					 remove_ideas = EU_Turkey_deal
					 add_ideas = European_Asylum_Agency
				}
			}
			if = {
				limit = {
				any_country = {
					OR = {
						has_country_flag = focus_EU407_yes
						has_country_flag = focus_EU407_QMV_yes
						has_country_flag = focus_EU407_maj_yes
					}
				}
				}
				ROOT = {
					### focus_EU407 effect
					add_ideas = Frontex
				}
			}
					### focus_EU408 effect
					### focus_EU500 effect
					### focus_EU600 effect
					### focus_EU601 effect
					### focus_EU602 effect
					### focus_EU603 effect
					### focus_EU700 effect
					### focus_EU701 effect
					### focus_EU702 effect
					### focus_EU703 effect
					### focus_EU110 effect
					### focus_EU111 effect
					### focus_EU112 effect
					### focus_EU113 effect

		}
		ai_will_do = {
			factor = 100
		}
	}

	EU_join_the_Euro = {
	
		cost = 100
		available = {
			has_idea = EU_member
			NOT = { has_idea = the_euro }
				check_variable = {
					var = ROOT.interest_rate
					value = 3.5
					compare = less_than
				}
				OR = {				
					has_idea = widespread_corruption
					has_idea = medium_corruption
					has_idea = modest_corruption				
					has_idea = slight_corruption
					has_idea = negligible_corruption				
				}
				OR = {
					has_idea = stable_growth
					has_idea = fast_growth				
					has_idea = economic_boom
				}
				OR = {
					has_idea = gdp_5
					has_idea = gdp_6				
					has_idea = gdp_7
					has_idea = gdp_8
					has_idea = gdp_9
					has_idea = gdp_10
					has_idea = gdp_11				
					has_idea = gdp_12						
				}			
		}
		
		visible = { 
			has_idea = EU_member 
			NOT = { has_idea = the_euro }			
		} 
		
		fire_only_once = yes # Will not re-enable after being removed
		
		complete_effect = {   						
			add_ideas = the_euro
		}				
	
		ai_will_do = {
			factor = 100
				modifier = {
					add = -100
					check_variable = { global.var_europeanism < 0.50 }
				}
				modifier = {
					add = -100
					check_variable = { global.var_europeanism < 0.95 }				
					OR = {
						original_tag = DEN
						original_tag = ENG
						original_tag = SWE					
					}
				}
		}
			
	}
}

###############################################
### End of EU_apply_for_membership_category ###
###############################################