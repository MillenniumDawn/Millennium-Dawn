add_namespace = radicalization

#hidden event that increases radicalization/salafi jihadist/shia revolutionary/islamist popularity
country_event = {
	id = radicalization.1

	hidden = yes

	trigger = {
		check_variable = { social_conservatism_government < social_conservatism_society }
	}

	mean_time_to_happen = {
		days = 200
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 10 }
			check_variable = { social_conservatism_society > 10 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 20 }
			check_variable = { social_conservatism_society > 20 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 30 }
			check_variable = { social_conservatism_society > 30 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 40 }
			check_variable = { social_conservatism_society > 40 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 50 }
			check_variable = { social_conservatism_society > 50 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 60 }
			check_variable = { social_conservatism_society > 60 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 70 }
			check_variable = { social_conservatism_society > 70 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 80 }
			check_variable = { social_conservatism_society > 80 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 90 }
			check_variable = { social_conservatism_society > 90 }
		}
	}

	option = {
		name = radicalization.1.a
		log = "[GetDateText]: [This.GetName]: radicalization.1.a executed"
		add_to_variable = { radicalization = 5 }
		clamp_radicalization = yes
		if = {
			limit = {
				OR = {
					has_idea = large_shia_population
					has_idea = substantial_shia_population
					AND = {
						original_tag = SAU
						controls_state = 174 #Haasa
					}
				}
				NOT = { has_government = communism }
			}
			add_popularity = {
				ideology = communism
				popularity = 0.02
			}
			recalculate_party = yes
		}
		if = {
			limit = {
				NOT = { has_government = neutrality }
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.02
			}
			recalculate_party = yes
		}
		if = {
			limit = { NOT = { has_government = fascism } }
			add_popularity = {
				ideology = fascism
				popularity = 0.02
			}
			recalculate_party = yes
		}
		if = {
			limit = {
				has_government = fascism
				no_jihadist_government = yes
			}
			add_to_variable = { party_pop_array^11 = 0.01 }
			recalculate_party = yes
		}
	}
}

#hidden event that decreases militant support/salafi jihadist/shia revolutionary/islamist popularity
country_event = {
	id = radicalization.2

	hidden = yes

	trigger = {
		check_variable = { social_conservatism_government > social_conservatism_society }
	}

	mean_time_to_happen = {
		days = 200
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 10 }
			check_variable = { social_conservatism_society < 10 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 20 }
			check_variable = { social_conservatism_society < 20 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 30 }
			check_variable = { social_conservatism_society < 30 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 40 }
			check_variable = { social_conservatism_society < 40 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 50 }
			check_variable = { social_conservatism_society < 50 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 60 }
			check_variable = { social_conservatism_society < 60 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 70 }
			check_variable = { social_conservatism_society < 70 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 80 }
			check_variable = { social_conservatism_society < 80 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 90 }
			check_variable = { social_conservatism_society < 90 }
		}
	}

	option = {
		name = radicalization.2.a
		log = "[GetDateText]: [This.GetName]: radicalization.2.a executed"
		if = {
			limit = {
				OR = {
					has_idea = large_shia_population
					has_idea = substantial_shia_population
					AND = {
						original_tag = SAU
						controls_state = 174 #Haasa
					}
				}
				NOT = { has_government = communism }
			}
			add_popularity = {
				ideology = communism
				popularity = -0.02
			}
			recalculate_party = yes
		}
		if = {
			limit = {
				NOT = { has_government = neutrality }
			}
			add_popularity = {
				ideology = neutrality
				popularity = -0.02
			}
			recalculate_party = yes
		}
		if = {
			limit = { NOT = { has_government = fascism } }
			add_popularity = {
				ideology = fascism
				popularity = -0.02
			}
			recalculate_party = yes
		}
		if = {
			limit = {
				has_government = fascism
				no_jihadist_government = yes
			}
			subtract_from_variable = { party_pop_array^11 = 0.01 }
			recalculate_party = yes
		}
	}
}

#hidden event that decreases SC-C to match SC-G
country_event = {
	id = radicalization.3

	hidden = yes

	trigger = {
		check_variable = { social_conservatism_government < social_conservatism_society }
	}

	mean_time_to_happen = {
		days = 100
	}

	option = {
		name = radicalization.3.a
		log = "[GetDateText]: [This.GetName]: radicalization.3.a executed"
		subtract_from_variable = { social_conservatism_society = 1 }
		clamp_variable = {
			var = social_conservatism_society
			min = social_conservatism_government
			max = 100
		}
	}
}

#hidden event that increases SC-C to match SC-G
country_event = {
	id = radicalization.4

	hidden = yes

	trigger = {
		check_variable = { social_conservatism_government > social_conservatism_society }
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = radicalization.4.a
		log = "[GetDateText]: [This.GetName]: radicalization.4.a executed"
		add_to_variable = { social_conservatism_society = 1 }
		clamp_variable = {
			var = social_conservatism_society
			min = 0
			max = social_conservatism_government
		}
	}
}

#event that increases social conservatism ideas
country_event = {
	id = radicalization.5
	title = radicalization.5.t
	desc = radicalization.5.d

	picture = GFX_report_event_generic_islamic_rally

	trigger = {
		OR = {
			AND = {
				has_idea = conservative_society
				check_variable = { social_conservatism_society > 90 }
			}
			AND = {
				has_idea = moderately_conservative_society
				check_variable = { social_conservatism_society > 64 }
			}
			AND = {
				has_idea = moderately_liberal_society
				check_variable = { social_conservatism_society > 49 }
			}
			AND = {
				has_idea = liberal_society
				check_variable = { social_conservatism_society > 29 }
			}
			AND = {
				has_idea = extremely_liberal_society
				check_variable = { social_conservatism_society > 9 }
			}
			AND = {
				has_idea = shia_conservative_society
				check_variable = { social_conservatism_society > 90 }
			}
			AND = {
				has_idea = shia_moderately_conservative_society
				check_variable = { social_conservatism_society > 64 }
			}
			AND = {
				has_idea = shia_moderately_liberal_society
				check_variable = { social_conservatism_society > 49 }
			}
			AND = {
				has_idea = shia_liberal_society
				check_variable = { social_conservatism_society > 29 }
			}
			AND = {
				has_idea = shia_extremely_liberal_society
				check_variable = { social_conservatism_society > 9 }
			}
		}
	}

	mean_time_to_happen = {
		days = 2
	}

	option = {
		name = radicalization.5.a
		log = "[GetDateText]: [This.GetName]: radicalization.5.a executed"
		if = {
			limit = {
				has_idea = conservative_society
			}
			remove_ideas = conservative_society
			add_ideas = extremely_conservative_society
		}
		else_if = {
			limit = {
				has_idea = moderately_conservative_society
			}
			remove_ideas = moderately_conservative_society
			add_ideas = conservative_society
		}
		else_if = {
			limit = {
				has_idea = moderately_liberal_society
			}
			remove_ideas = moderately_liberal_society
			add_ideas = moderately_conservative_society
		}
		else_if = {
			limit = {
				has_idea = liberal_society
			}
			remove_ideas = liberal_society
			add_ideas = moderately_liberal_society
		}
		else_if = {
			limit = {
				has_idea = extremely_liberal_society
			}
			remove_ideas = extremely_liberal_society
			add_ideas = liberal_society
		}
		else_if = {
			limit = {
				has_idea = shia_conservative_society
			}
			remove_ideas = shia_conservative_society
			add_ideas = shia_extremely_conservative_society
		}
		else_if = {
			limit = {
				has_idea = shia_moderately_conservative_society
			}
			remove_ideas = shia_moderately_conservative_society
			add_ideas = shia_conservative_society
		}
		else_if = {
			limit = {
				has_idea = shia_moderately_liberal_society
			}
			remove_ideas = shia_moderately_liberal_society
			add_ideas = shia_moderately_conservative_society
		}
		else_if = {
			limit = {
				has_idea = shia_liberal_society
			}
			remove_ideas = shia_liberal_society
			add_ideas = shia_moderately_liberal_society
		}
		else_if = {
			limit = {
				has_idea = shia_extremely_liberal_society
			}
			remove_ideas = shia_extremely_liberal_society
			add_ideas = shia_liberal_society
		}
	}
}

#event that decreases social conservatism ideas
country_event = {
	id = radicalization.6
	title = radicalization.6.t
	desc = radicalization.6.d

	picture = GFX_election_rally

	trigger = {
		OR = {
			AND = {
				has_idea = extremely_conservative_society
				check_variable = { social_conservatism_society < 91 }
			}
			AND = {
				has_idea = conservative_society
				check_variable = { social_conservatism_society < 65 }
			}
			AND = {
				has_idea = moderately_conservative_society
				check_variable = { social_conservatism_society < 50 }
			}
			AND = {
				has_idea = moderately_liberal_society
				check_variable = { social_conservatism_society < 30 }
			}
			AND = {
				has_idea = liberal_society
				check_variable = { social_conservatism_society < 10 }
			}
			AND = {
				has_idea = shia_extremely_conservative_society
				check_variable = { social_conservatism_society < 91 }
			}
			AND = {
				has_idea = shia_conservative_society
				check_variable = { social_conservatism_society < 65 }
			}
			AND = {
				has_idea = shia_moderately_conservative_society
				check_variable = { social_conservatism_society < 50 }
			}
			AND = {
				has_idea = shia_moderately_liberal_society
				check_variable = { social_conservatism_society < 30 }
			}
			AND = {
				has_idea = shia_liberal_society
				check_variable = { social_conservatism_society < 10 }
			}
		}
	}

	mean_time_to_happen = {
		days = 2
	}

	option = {
		name = radicalization.6.a
		log = "[GetDateText]: [This.GetName]: radicalization.6.a executed"
		if = {
			limit = {
				has_idea = extremely_conservative_society
			}
			remove_ideas = extremely_conservative_society
			add_ideas = conservative_society
		}
		else_if = {
			limit = {
				has_idea = conservative_society
			}
			remove_ideas = conservative_society
			add_ideas = moderately_conservative_society
		}
		else_if = {
			limit = {
				has_idea = moderately_conservative_society
			}
			remove_ideas = moderately_conservative_society
			add_ideas = moderately_liberal_society
		}
		else_if = {
			limit = {
				has_idea = moderately_liberal_society
			}
			remove_ideas = moderately_liberal_society
			add_ideas = liberal_society
		}
		else_if = {
			limit = {
				has_idea = liberal_society
			}
			remove_ideas = liberal_society
			add_ideas = extremely_liberal_society
		}
		if = {
			limit = {
				has_idea = shia_extremely_conservative_society
			}
			remove_ideas = shia_extremely_conservative_society
			add_ideas = shia_conservative_society
		}
		else_if = {
			limit = {
				has_idea = shia_conservative_society
			}
			remove_ideas = shia_conservative_society
			add_ideas = shia_moderately_conservative_society
		}
		else_if = {
			limit = {
				has_idea = shia_moderately_conservative_society
			}
			remove_ideas = shia_moderately_conservative_society
			add_ideas = shia_moderately_liberal_society
		}
		else_if = {
			limit = {
				has_idea = shia_moderately_liberal_society
			}
			remove_ideas = shia_moderately_liberal_society
			add_ideas = shia_liberal_society
		}
		else_if = {
			limit = {
				has_idea = shia_liberal_society
			}
			remove_ideas = shia_liberal_society
			add_ideas = shia_extremely_liberal_society
		}
	}
}

#terror threat increase due to radicalization
country_event = {
	id = radicalization.7
	title = radicalization.7.t
	desc = radicalization.7.d

	picture = GFX_politics_salafism

	trigger = {
		has_idea = youth_radicalization
		no_jihadist_government = yes
	}

	mean_time_to_happen = {
		days = 1000
		modifier = {
			factor = 0.75
			check_variable = { radicalization > 20 }
		}
		modifier = {
			factor = 0.75
			check_variable = { radicalization > 40 }
		}
		modifier = {
			factor = 0.75
			check_variable = { radicalization > 60 }
		}
		modifier = {
			factor = 0.75
			check_variable = { radicalization > 80 }
		}
	}

	option = {
		name = radicalization.7.a #The terrorists are growing stronger...
		log = "[GetDateText]: [This.GetName]: radicalization.7.a executed"
		custom_effect_tooltip = terror_threat_increase_tt
		if = {
			limit = { check_variable = { radicalization < 51 }check_variable = { radicalization > 20 } }
			add_to_variable = { threat_level = 2 }
		}
		else_if = {
			limit = { check_variable = { radicalization < 76 } check_variable = { radicalization > 50 } }
			add_to_variable = { threat_level = 5 }
		}
		else_if = {
			limit = { check_variable = { radicalization > 75 } }
			add_to_variable = { threat_level = 10 }
		}
		clamp_threat = yes
		add_popularity = {
			ideology = fascism
			popularity = 0.01
		}
		add_to_variable = { party_pop_array^11 = 0.01 }
		recalculate_party = yes
	}
}

#hidden effect that increases radicalization by the amount of salafi popularity
country_event = {
	id = radicalization.8

	hidden = yes

	is_triggered_only = yes

	option = {
		name = radicalization.8.a
		log = "[GetDateText]: [This.GetName]: radicalization.8.a executed"
		set_temp_variable = { temp_pop = party_pop_array^11 }
		multiply_temp_variable = { temp_pop = 100 }
		add_to_variable = { radicalization = temp_pop }
		clamp_radicalization = yes
	}
}

#terror threat decreases due to low radicalization
country_event = {
	id = radicalization.9
	title = radicalization.9.t
	desc = radicalization.9.d

	picture = GFX_politics_salafism

	trigger = {
		NOT = { has_idea = youth_radicalization }
		no_jihadist_government = yes
		check_variable = { threat_level > 10 }
	}

	mean_time_to_happen = {
		days = 500
	}

	option = {
		name = radicalization.9.a #The terrorists are growing weaker...
		log = "[GetDateText]: [This.GetName]: radicalization.9.a executed"
		custom_effect_tooltip = terror_threat_decrease_small_tt
		subtract_from_variable = { threat_level = 2 }
		clamp_threat = yes
		add_popularity = {
			ideology = fascism
			popularity = -0.01
		}
		subtract_from_variable = { party_pop_array^11 = 0.01 }
		recalculate_party = yes
	}
}