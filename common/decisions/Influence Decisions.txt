influence_desicions = {
	# Custom Decisions
	rebellion_in_azerbaijan = {
		icon = GFX_decision_generic_civil_support
		fire_only_once = yes

		visible = {
			OR = {
				original_tag = SOV
				original_tag = TUR
				original_tag = AZE
			}
			407 = {
				is_owned_and_controlled_by = PER
				has_dynamic_modifier = {
					modifier = PER_azeri_separatism
				}
			}
			NOT = {
				country_exists = SAZ
			}
		}

		available = {
			has_equipment = { Inf_equipment > 9999 }
			has_equipment = { util_vehicle_equipment > 4999 }
			PER = {
				influence_higher_20 = yes
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision rebellion_in_azerbaijan"
			custom_effect_tooltip = PER_SAZ_rebel_TT
			PER_SAZ_independence = yes
		}
	}
	rebellion_in_balochistan = {
		icon = GFX_decision_generic_civil_support
		fire_only_once = yes

		visible = {
			OR = {
				original_tag = SAU
				original_tag = PAK
			}
			401 = {
				is_owned_and_controlled_by = PER
				has_dynamic_modifier = {
					modifier = PER_baloch_separatism
				}
			}
			NOT = {
				country_exists = BLC
			}
		}

		available = {
			has_equipment = { Inf_equipment > 9999 }
			has_equipment = { util_vehicle_equipment > 4999 }
			PER = {
				influence_higher_20 = yes
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision rebellion_in_balochistan"
			custom_effect_tooltip = PER_BLC_rebel_TT
			PER_BLC_independence = yes
		}
	}
	rebellion_in_kurdistan = {
		icon = GFX_decision_generic_civil_support
		fire_only_once = yes

		visible = {
			OR = {
				original_tag = ISR
				original_tag = USA
			}
			OR = {
				408 = {
					is_owned_and_controlled_by = PER
					has_dynamic_modifier = {
						modifier = PER_kurd_separatism
					}
				}
				979 = {
					is_owned_and_controlled_by = PER
					has_dynamic_modifier = {
						modifier = PER_kurd_separatism
					}
				}
				1139 = {
					is_owned_and_controlled_by = PER
					has_dynamic_modifier = {
						modifier = PER_kurd_separatism
					}
				}
			}
			NOT = {
				country_exists = BLC
			}
		}

		available = {
			has_equipment = { Inf_equipment > 9999 }
			has_equipment = { util_vehicle_equipment > 4999 }
			PER = {
				influence_higher_20 = yes
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision rebellion_in_kurdistan"
			custom_effect_tooltip = PER_IKR_rebel_TT
			PER_IKR_independence = yes
		}
	}
	# Generic (Global) Decisions
	disable_raid_notification_decision = {
		icon = GFX_decision_reportdis_button
		visible = {
			is_ai = no
			NOT = { has_country_flag = disable_raid_notification }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision disable_raid_notification_decision"
			set_country_flag = disable_raid_notification
		}
	}
	enable_raid_notification_decision = {
		icon = GFX_decision_reportagr_button
		visible = {
			is_ai = no
			has_country_flag = disable_raid_notification
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision enable_raid_notification_decision"
			clr_country_flag = disable_raid_notification
		}
	}
	disable_auto_influence_notification_decision = {
		icon = GFX_decision_reportdis_button
		visible = {
			is_ai = no
			NOT = { has_country_flag = disable_auto_influence_notification }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision disable_auto_influence_notification_decision"
			set_country_flag = disable_auto_influence_notification
		}
	}
	enable_auto_influence_notification_decision = {
		icon = GFX_decision_reportagr_button
		visible = {
			is_ai = no
			has_country_flag = disable_auto_influence_notification
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision disable_auto_influence_notification_decision"
			clr_country_flag = disable_auto_influence_notification
		}
	}
	hide_foreign_influencer_modifier_decision = {
		icon = GFX_decision_reportdis_button
		visible = {
			is_ai = no
			NOT = { has_country_flag = hide_foreign_influence_modifiers }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision hide_foreign_influencer_modifier_decision"
			set_country_flag = hide_foreign_influence_modifiers
		}
	}
	show_foreign_influencer_modifier_decision = {
		icon = GFX_decision_reportagr_button
		visible = {
			is_ai = no
			has_country_flag = hide_foreign_influence_modifiers
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision show_foreign_influencer_modifier_decision"
			clr_country_flag = hide_foreign_influence_modifiers
		}
	}

	combat_foreign_influence = {
		icon = GFX_decision_combatinfl_button

		cost = 100

		days_remove = 50
		days_re_enable = 50

		visible = {
			NOT = { check_variable = { influence_array^0 = 0 } }
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = has_foreign_influence
				check_variable = { influence_array^0 > 0 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision combat_foreign_influence"
			set_temp_variable = { percent_change = 3.5 }
			change_domestic_influence_percentage = yes
		}

		ai_will_do = {
			base = 5
			modifier = {
				factor = 4
				check_variable = { domestic_influence_amount < 80 }
			}
			modifier = {
				factor = 3
				check_variable = { domestic_influence_amount < 60 }
			}
			modifier = {
				factor = 2
				check_variable = { domestic_influence_amount < 40 }
			}
			modifier = {
				factor = 2
				check_variable = { domestic_influence_amount < 20 }
			}
			modifier = {
				factor = 2
				check_variable = { domestic_influence_amount < 10 }
			}
			modifier = {
				factor = 0.75
				has_idea = NATO_member
				OR = {
					var:influence_array^0 = {
						has_idea = NATO_member
					}
					var:influence_array^1 = {
						has_idea = NATO_member
					}
					var:influence_array^2 = {
						has_idea = NATO_member
					}
				}
				NOT = {
					var:influence_array^0 = {
						OR = {
							original_tag = SOV
							original_tag = CHI
						}
					}
					var:influence_array^1 = {
						OR = {
							original_tag = SOV
							original_tag = CHI
						}
					}
					var:influence_array^2 = {
						OR = {
							original_tag = SOV
							original_tag = CHI
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				has_idea = EU_member
				OR = {
					var:influence_array^0 = {
						has_idea = EU_member
					}
					var:influence_array^1 = {
						has_idea = EU_member
					}
					var:influence_array^2 = {
						has_idea = EU_member
					}
				}
				NOT = {
					var:influence_array^0 = {
						OR = {
							original_tag = SOV
							original_tag = CHI
						}
					}
					var:influence_array^1 = {
						OR = {
							original_tag = SOV
							original_tag = CHI
						}
					}
					var:influence_array^2 = {
						OR = {
							original_tag = SOV
							original_tag = CHI
						}
					}
				}
			}
			modifier = {
				factor = 0
				check_variable = { domestic_influence_amount > 90 }
			}
		}
	}

	propaganda_campaign_decision = {
		icon = GFX_decision_inlfpropaganda_button
		cost = 100
		days_remove = 100
		days_re_enable = 30

		available = {
			custom_trigger_tooltip = {
				tooltip = has_foreign_influence
				check_variable = { influence_array^0 > 0 }
			}
			NOT = {
				has_decision = combat_biggest_influencer_decision
				has_decision = combat_second_influencer_decision
				has_decision = combat_third_influencer_decision
			}
		}
		modifier = {
			political_power_factor = -0.25
			nationalist_drift = 0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision propaganda_campaign_decision"
			custom_effect_tooltip = propaganda_campaign_costs_tt
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision propaganda_campaign_decision"
			add_stability = -0.05
			set_temp_variable = { percent_change = 10 }
			change_domestic_influence_percentage = yes
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { domestic_influence_amount < 30 }
			}
			modifier = {
				factor = 2
				check_variable = { domestic_influence_amount < 15 }
			}
			modifier = {
				factor = 0
				NOT = {
					has_government = communism
					has_government = nationalist
					has_government = fascism
				}
			}
			modifier = {
				factor = 1.25
				has_government = communism
			}
			modifier = {
				factor = 1.75
				OR = {
					has_government = nationalist
					has_government = fascism
				}
			}
			modifier = {
				factor = 0.5
				is_ai = yes
			}
			modifier = {
				factor = 0
				check_variable = { domestic_influence_amount > 59.999 }
			}
		}
	}

	combat_biggest_influencer_decision = {
		icon = GFX_decision_antiinfl_button
		cost = 125
		days_remove = 60
		days_re_enable = 30

		visible = {
			check_variable = { influence_array^0 > 0 }
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = has_foreign_influence
				check_variable = { influence_array^0 > 0 }
			}
			NOT = {
				has_decision = propaganda_campaign_decision
				has_decision = combat_second_influencer_decision
				has_decision = combat_third_influencer_decision
			}
		}
		complete_effect = {
			set_variable = { combat_big_influencer = influence_array^0 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision combat_biggest_influencer_decision"
			if = { limit = { check_variable = { combat_big_influencer = 0 } }
				set_temp_variable = { percent_change = -5 }
				set_temp_variable = { tag_index = influence_array^0 }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes
			}
			else = {
				set_temp_variable = { percent_change = -5 }
				set_temp_variable = { tag_index = var:combat_big_influencer }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes
			}

			clear_variable = combat_big_influencer
		}

		ai_will_do = {
			factor = 1
			modifier = { #Reduce down to nothing if you have high relations.
				factor = 0.15
				var:FROM.influence_array^0 = {
					ROOT = {
						has_opinion = { target = PREV value > 49 }
					}
				}
			}
			modifier = {
				factor = 1.0
				var:FROM.influence_array^0 = {
					ROOT = {
						has_opinion = { target = PREV value < 50 }
					}
				}
			}
			modifier = {
				factor = 1.25
				var:FROM.influence_array^0 = {
					ROOT = {
						has_opinion = { target = PREV value < 25 }
					}
				}
			}
			modifier = {
				factor = 1.50
				var:FROM.influence_array^0 = {
					ROOT = {
						has_opinion = { target = PREV value < 15 }
					}
				}
			}
			modifier = {
				factor = 1.75
				var:FROM.influence_array^0 = {
					ROOT = {
						has_opinion = { target = PREV value < 0 }
					}
				}
			}
			modifier = {
				factor = 2.0
				var:FROM.influence_array^0 = {
					ROOT = {
						has_opinion = { target = PREV value < -20 }
					}
				}
			}
			modifier = {
				factor = 2.5
				var:FROM.influence_array^0 = {
					ROOT = {
						has_opinion = { target = PREV value < -50 }
					}
				}
			}
			#Domestic Influence Calculation
			modifier = {
				set_temp_variable = { domestic_influence_amount_tmp = domestic_influence_amount }
				divide_temp_variable = { domestic_influence_amount_tmp = 10 }
				factor = domestic_influence_amount_tmp
			}
			#Should be more worthwhile if they have a high rate
			modifier = {
				factor = 2
				check_variable = { influence_array_val^0 > 19.999 }
			}
			modifier = {
				factor = 4
				check_variable = { influence_array_val^0 > 29.999 }
			}
			modifier = {
				factor = 5
				check_variable = { influence_array_val^0 > 49.999 }
			}
		}
	}

	combat_second_influencer_decision = {
		icon = GFX_decision_antiinfl_button
		cost = 125
		days_remove = 60
		days_re_enable = 30

		visible = {
			check_variable = { influence_array^1 > 0 }
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = has_foreign_influence
				check_variable = { influence_array^0 > 0 }
			}
			NOT = {
				has_decision = combat_biggest_influencer_decision
				has_decision = propaganda_campaign_decision
				has_decision = combat_third_influencer_decision
			}
		}
		complete_effect = {
			set_variable = { combat_second_big_influencer = influence_array^1 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision combat_second_influencer_decision"
			if = { limit = { check_variable = { combat_second_big_influencer = 0 } }
				set_temp_variable = { percent_change = -5 }
				set_temp_variable = { tag_index = influence_array^1 }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes
			}
			else = {
				set_temp_variable = { percent_change = -5 }
				set_temp_variable = { tag_index = var:combat_second_big_influencer }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes
			}

			clear_variable = combat_second_big_influencer
		}


		ai_will_do = {
			factor = 1
			modifier = { #Reduce down to nothing if you have high relations.
				factor = 0.15
				var:FROM.influence_array^1 = {
					ROOT = {
						has_opinion = { target = PREV value > 49 }
					}
				}
			}
			modifier = {
				factor = 1.0
				var:FROM.influence_array^1 = {
					ROOT = {
						has_opinion = { target = PREV value < 50 }
					}
				}
			}
			modifier = {
				factor = 1.25
				var:FROM.influence_array^1 = {
					ROOT = {
						has_opinion = { target = PREV value < 25 }
					}
				}
			}
			modifier = {
				factor = 1.50
				var:FROM.influence_array^1 = {
					ROOT = {
						has_opinion = { target = PREV value < 15 }
					}
				}
			}
			modifier = {
				factor = 1.75
				var:FROM.influence_array^1 = {
					ROOT = {
						has_opinion = { target = PREV value < 0 }
					}
				}
			}
			modifier = {
				factor = 2.0
				var:FROM.influence_array^1 = {
					ROOT = {
						has_opinion = { target = PREV value < -20 }
					}
				}
			}
			modifier = {
				factor = 2.5
				var:FROM.influence_array^1 = {
					ROOT = {
						has_opinion = { target = PREV value < -50 }
					}
				}
			}
			#Domestic Influence Calculation
			modifier = {
				set_temp_variable = { domestic_influence_amount_tmp = domestic_influence_amount }
				divide_temp_variable = { domestic_influence_amount_tmp = 10 }
				factor = domestic_influence_amount_tmp
			}
			#Should be more worthwhile if they have a high rate
			modifier = {
				factor = 2
				check_variable = { influence_array_val^1 > 19.999 }
			}
			modifier = {
				factor = 4
				check_variable = { influence_array_val^1 > 29.999 }
			}
			modifier = {
				factor = 5
				check_variable = { influence_array_val^1 > 39.999 }
			}
		}
	}

	combat_third_influencer_decision = {
		icon = GFX_decision_antiinfl_button
		cost = 125
		days_remove = 60
		days_re_enable = 30

		visible = {
			check_variable = { influence_array^2 > 0 }
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = has_foreign_influence
				check_variable = { influence_array^0 > 0 }
			}
			NOT = {
				has_decision = combat_biggest_influencer_decision
				has_decision = propaganda_campaign_decision
				has_decision = combat_second_influencer_decision
			}
		}
		complete_effect = {
			set_variable = { combat_third_big_influencer = influence_array^2 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision combat_third_influencer_decision"
			if = { limit = { check_variable = { combat_third_big_influencer = 0 } }
				set_temp_variable = { percent_change = -5 }
				set_temp_variable = { tag_index = influence_array^2 }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes
			}
			else = {
				set_temp_variable = { percent_change = -5 }
				set_temp_variable = { tag_index = var:combat_third_big_influencer }
				set_temp_variable = { influence_target = THIS.id }
				change_influence_percentage = yes
			}

			clear_variable = combat_third_big_influencer
		}

		ai_will_do = {
			factor = 1
			modifier = { #Reduce down to nothing if you have high relations.
				factor = 0.15
				var:FROM.influence_array^2 = { ROOT = { has_opinion = { target = PREV value > 49 } } }
			}
			modifier = {
				factor = 1.0
				var:FROM.influence_array^2 = { ROOT = { has_opinion = { target = PREV value < 50 } } }
			}
			modifier = {
				factor = 1.25
				var:FROM.influence_array^2 = { ROOT = { has_opinion = { target = PREV value < 25 } } }
			}
			modifier = {
				factor = 1.50
				var:FROM.influence_array^2 = { ROOT = { has_opinion = { target = PREV value < 15 } } }
			}
			modifier = {
				factor = 1.75
				var:FROM.influence_array^2 = { ROOT = { has_opinion = { target = PREV value < 0 } } }
			}
			modifier = {
				factor = 2.0
				var:FROM.influence_array^2 = { ROOT = { has_opinion = { target = PREV value < -20 } } }
			}
			modifier = {
				factor = 2.5
				var:FROM.influence_array^2 = { ROOT = { has_opinion = { target = PREV value < -50 } } }
			}
			#Domestic Influence Calculation
			modifier = {
				set_temp_variable = { domestic_influence_amount_tmp = domestic_influence_amount }
				divide_temp_variable = { domestic_influence_amount_tmp = 10 }
				factor = domestic_influence_amount_tmp
			}
			#Should be more worthwhile if they have a high rate
			modifier = {
				factor = 2
				check_variable = { influence_array_val^2 > 19.999 }
			}
			modifier = {
				factor = 4
				check_variable = { influence_array_val^2 > 29.999 }
			}
		}
	}

	influence_for_autonomy_decision = {
		icon = GFX_decision_puppetdown_button
		cost = 50
		days_remove = 30
		days_re_enable = 15

		target_root_trigger = {
			num_subjects > 0
		}

		visible = {
			FROM = {
				is_subject_of = ROOT
				NOT = { has_autonomy_state = autonomy_special_administrative_region_HKG
						has_autonomy_state = autonomy_special_administrative_region_MAC
						has_autonomy_state = autonomy_special_administrative_region_TAI
						has_autonomy_state = autonomy_special_administrative_region_TIB
						has_autonomy_state = autonomy_special_administrative_region_ETK
						has_autonomy_state = autonomy_special_administrative_region_MON	}
			}
		}

		available = {
			FROM = {
				influence_higher_5 = yes
			}
		}

		target_array = subjects

		remove_effect = {
			log = "[GetDateText]: [This.GetName]: decision influence_for_autonomy_decision executed"
			set_temp_variable = { percent_change = -5 }
			set_temp_variable = { tag_index = ROOT.id }
			set_temp_variable = { influence_target = FROM.id }
			change_influence_percentage = yes
			FROM = {
				add_autonomy_ratio = {
					value = -0.08
					localization = influence_for_autonomy_decision_autonomy
				}
			}
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 15
				FROM = {
					check_variable = { domestic_influence_amount > 20 }
				}
			}
		}
	}
}
