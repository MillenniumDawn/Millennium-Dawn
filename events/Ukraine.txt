add_namespace = ukraine_md
add_namespace = ukraine_news
add_namespace = ukraine_hidden
add_namespace = ukraine_debates
add_namespace = ukraine_revolution

### Constitutional referendum

news_event = {
	id = ukraine_news.1
	title = {
		text = ukraine_news.1.t1
		trigger = { has_country_flag = UKR_passed_referendum }
	}
	title = {
		text = ukraine_news.1.t2
		trigger = { has_country_flag = UKR_failed_referendum }
	}
	desc = {
		text = ukraine_news.1.d1
		trigger = { has_country_flag = UKR_passed_referendum }
	}
	desc = {
		text = ukraine_news.1.d2
		trigger = { has_country_flag = UKR_failed_referendum }
	}
	picture = GFX_ukrainian_referendum
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_news.1.a
		log = "[GetDateText]: [This.GetName]: ukraine_news.1.a executed"
	}
}

### Referendum results implementation (news)

news_event = {
	id = ukraine_news.2
	title = ukraine_news.2.t
	desc = ukraine_news.2.d
	picture = GFX_verkhovna_rada
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_news.2.a
		log = "[GetDateText]: [This.GetName]: ukraine_news.2.a executed"
		country_event = { id = ukraine_debates.1 days = 42 }
	}
}

####Ukraine Debates - Peoples Referendum

#(debates 1)
country_event = {
	id = ukraine_debates.1
	title = ukraine_debates.1.t
	desc = ukraine_debates.1.d
	picture = GFX_negotiations
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_debates.1.a
		log = "[GetDateText]: [This.GetName]: ukraine_debates.1.a executed"
		set_country_flag = debates.1.agree
		
		add_political_power = -25
		
		add_timed_idea = {
			idea = UKR_political_support
			days = 180
		}
		
		custom_effect_tooltip = debates_agree_tt
		
		country_event = { id = ukraine_debates.2 days = 23 }
		
		ai_chance = {
			factor = 15
		}
	}
	
	option = {
		name = ukraine_debates.1.b
		log = "[GetDateText]: [This.GetName]: ukraine_debates.1.b executed"
		set_country_flag = debates.1.disagree
		
		custom_effect_tooltip = debates_disagree_tt
		
		country_event = { id = ukraine_debates.2 days = 23 }
		ai_chance = {
			factor = 5
		}
	}
}

#(debates 2)
country_event = {
	id = ukraine_debates.2
	title = ukraine_debates.2.t
	desc = ukraine_debates.2.d
	picture = GFX_negotiations
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_debates.2.a
		log = "[GetDateText]: [This.GetName]: ukraine_debates.2.a executed"
		set_country_flag = debates.2.agree
		
		add_political_power = -50
		
		add_timed_idea = {
			idea = UKR_neglect_of_state_interests
			days = 180
		}
		
		custom_effect_tooltip = debates_agree_tt
		
		country_event = { id = ukraine_debates.3 days = 23 }
		ai_chance = {
			factor = 15
		}
	}
	
	option = {
		name = ukraine_debates.2.b
		log = "[GetDateText]: [This.GetName]: ukraine_debates.2.b executed"
		set_country_flag = debates.2.disagree
		
		custom_effect_tooltip = debates_disagree_tt
		
		country_event = { id = ukraine_debates.3 days = 23 }
		ai_chance = {
			factor = 5
		}
	}
}

#(debates 3)
country_event = {
	id = ukraine_debates.3
	title = ukraine_debates.3.t
	desc = ukraine_debates.3.d
	picture = GFX_negotiations
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_debates.3.a
		log = "[GetDateText]: [This.GetName]: ukraine_debates.3.a executed"
		set_country_flag = debates.3.agree
		
		add_political_power = -75
		
		add_timed_idea = {
			idea = UKR_eco_factories
			days = 180
		}
		news_event = ukraine_news.3
		custom_effect_tooltip = debates_agree_tt
		hidden_effect = {
			country_event = { id = ukraine_hidden.1 days = 1 }
		}
		ai_chance = {
			factor = 15
		}
	}
	
	option = {
		name = ukraine_debates.3.b
		log = "[GetDateText]: [This.GetName]: ukraine_debates.3.b executed"
		set_country_flag = debates.3.disagree
		news_event = ukraine_news.3
		custom_effect_tooltip = debates_disagree_tt
		hidden_effect = {
			country_event = { id = ukraine_hidden.1 days = 1 }
		}
		ai_chance = {
			factor = 5
		}
	}
}

### Votes
news_event = {
	id = ukraine_news.3
	title = ukraine_news.3.t
	desc = ukraine_news.3.d
	picture = GFX_verkhovna_rada
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_news.3.a
		log = "[GetDateText]: [This.GetName]: ukraine_news.3.a executed"
	}
}

#(debates 4) Final result (hidden)
country_event = {
	id = ukraine_hidden.1
	
	is_triggered_only = yes
	
	hidden = yes
	
	option = {
		name = ukraine_hidden.1.a # < 2/3 agree
		log = "[GetDateText]: [This.GetName]: ukraine_hidden.1.a executed"
		trigger = {
			if = {
				limit = {
					has_country_flag = ukraine_debates.1.agree
					has_country_flag = ukraine_debates.2.agree
				}
			}
			if = { 
				limit = {
					has_country_flag = ukraine_debates.1.agree
					has_country_flag = ukraine_debates.3.agree
				}
			}
			if = { 
				limit = {
					has_country_flag = ukraine_debates.2.agree
					has_country_flag = ukraine_debates.3.agree
				}
			}
		}
		
		UKR = { country_event = { id = ukraine_md.1 days = 3 } }
		
		clr_country_flag = ukraine_debates.1.agree
		clr_country_flag = ukraine_debates.2.agree
		clr_country_flag = ukraine_debates.3.agree
		
		clr_country_flag = ukraine_debates.1.disagree
		clr_country_flag = ukraine_debates.2.disagree
		clr_country_flag = ukraine_debates.3.disagree
	}
	
	option = {
		name = ukraine_hidden.1.b # < 2/3 disagree
		log = "[GetDateText]: [This.GetName]: ukraine_hidden.1.b executed"
		trigger = {
			if = {
				limit = {
					has_country_flag = ukraine_debates.1.disagree
					has_country_flag = ukraine_debates.2.disagree
				}
			}
			if = { 
				limit = {
					has_country_flag = ukraine_debates.1.disagree
					has_country_flag = ukraine_debates.3.disagree
				}
			}
			if = { 
				limit = {
					has_country_flag = ukraine_debates.2.disagree
					has_country_flag = ukraine_debates.3.disagree
				}
			}
		}
		
		UKR = { country_event = { id = ukraine_md.2 days = 3 } }
		
		clr_country_flag = ukraine_debates.1.agree
		clr_country_flag = ukraine_debates.2.agree
		clr_country_flag = ukraine_debates.3.agree
		
		clr_country_flag = ukraine_debates.1.disagree
		clr_country_flag = ukraine_debates.2.disagree
		clr_country_flag = ukraine_debates.3.disagree
	}
}

### Law pass
country_event = {
	id = ukraine_md.1
	title = ukraine_md.1.t
	desc = ukraine_md.1.d
	picture = GFX_verkhovna_rada_vote
	
	is_triggered_only = yes
		
	option = {
		name = ukraine_md.1.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.1.a executed"
		add_ideas = UKR_constitutional_changes
		set_country_flag = UKR_passed_referendum
		news_event = ukraine_news.1
	}
}

### Law failed
country_event = {
	id = ukraine_md.2
	title = ukraine_md.2.t
	desc = ukraine_md.2.d
	picture = GFX_treaty_rejected
	
	is_triggered_only = yes
	
	option = {
		name = ukraine_md.2.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.2.a executed"
		add_stability = -0.10
		add_ideas = UKR_constitutional_changes_failed
		set_country_flag = UKR_failed_referendum
		news_event = ukraine_news.1
	}
}

### Deal with Gongadze
country_event = {
	id = ukraine_md.3
	title = ukraine_md.3.t
	desc = ukraine_md.3.d
	picture = GFX_georgiy_gongadze
	
	fire_only_once = yes
	
	trigger = {
		AND = {	
			tag = UKR
			date < 2000.8.15
			date > 2000.9.15
		}
	}
	
	mean_time_to_happen = {
		days = 15
	}
		
	option = {
		name = ukraine_md.3.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.3.a executed"
		country_event = { id = ukraine_md.6 days = 90 }
		
		ai_chance = {
			factor = 15
			modifier = {
				is_historical_focus_on = yes 
				add = 10
			}
		}
	}
	
	option = {
		name = ukraine_md.3.b
		log = "[GetDateText]: [This.GetName]: ukraine_md.3.b executed"
		country_event = { id = ukraine_md.4 days = 90 }
		ai_chance = {
			factor = 15
			modifier = {
				is_historical_focus_on = no 
				add = 10
			}
		}
	}
}

### Cassette Scandal (lead to 2001's protests)
country_event = {
	id = ukraine_md.6
	title = ukraine_md.6.t
	desc = ukraine_md.6.d
	picture = GFX_treaty_rejected
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_md.6.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.6.a executed"
		add_ideas = UKR_ukraine_without_kuchma
		set_country_flag = UKR_cassette_scandal
		country_event = { id = ukraine_news.5 days = 28 }
	}
}

### Publishing of anti-gov news
country_event = {
	id = ukraine_md.4
	title = ukraine_md.4.t
	desc = ukraine_md.4.d
	picture = GFX_verkhovna_rada_vote
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_md.4.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.4.a executed"
		add_political_power = -25
		add_timed_idea = { idea = UKR_anti_gov_news days = 365 }
	}
}

### Ukraine without Kuchma (2001's protests)
news_event = {
	id = ukraine_news.5
	title = ukraine_news.5.t
	desc = ukraine_news.5.d
	picture = GFX_news_ukraine_without_kuchma
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
		
	option = {
		name = ukraine_news.5.a
		log = "[GetDateText]: [This.GetName]: ukraine_news.5.a executed"
	}
}

###Supporters in the Government
country_event = {
	id = ukraine_md.5
	title = ukraine_md.5.t
	desc = ukraine_md.5.d
	picture = GFX_verkhovna_rada_vote
	
	is_triggered_only = yes
	
	option = {
		name = ukraine_md.5.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.5.a executed"
		set_country_flag = UKR_supported_patriotic_parties
		
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = ukraine_md.5.b
		log = "[GetDateText]: [This.GetName]: ukraine_md.5.b executed"
		set_country_flag = UKR_supported_russian_parties
		ai_chance = {
			factor = 5
			modifier = {
				is_historical_focus_on = no
				add = 10
			}
		}
	}
}

country_event = { ##Ukraine Trying to Join the CSTO!
	id = ukraine_md.7
	title = ukraine_md.7.t
	desc = ukraine_md.7.d
	picture = GFX_join_the_csto
	
	is_triggered_only = yes
	
	option = {
		name = ukraine_md.7.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.7.a executed"
		SOV = { add_to_faction = UKR }
		UKR = { country_event = diplomatic_response.1 }
		news_event = ukraine_news.6
		
		ai_chance = {
			factor = 15
		}
	}
	option = { 
		name = ukraine_md.7.b
		log = "[GetDateText]: [This.GetName]: ukraine_md.7.b executed"
		UKR = { country_event = diplomatic_response.2 }
		
		ai_chance = {
			factor = 5
		}
	}
}

news_event = { ##Ukraine Joins the CSTO
	id = ukraine_news.6
	title = ukraine_news.6.t
	desc = ukraine_news.6.d
	picture = GFX_news_csto
	
	is_triggered_only = yes 
	
	option = {
		name = ukraine_news.6.a
		log = "[GetDateText]: [This.GetName]: ukraine_news.6.a executed"
		trigger = {
			original_tag = UKR 
		}
	}
	option = {
		name = ukraine_news.6.b
		log = "[GetDateText]: [This.GetName]: ukraine_news.6.b executed"
		trigger = {
			original_tag = SOV 
		}
	}
	option = {
		name = ukraine_news.6.c
		log = "[GetDateText]: [This.GetName]: ukraine_news.6.c executed"
		trigger = {
			NOT = {
				original_tag = UKR
				original_tag = SOV
			}
		}
	}
}

country_event = { #Request European Investments from the Majors
	id = ukraine_md.8
	title = ukraine_md.8.t
	desc = ukraine_md.8.d
	picture = GFX_kiev_construction
	
	is_triggered_only = yes
	
	option = {
		name = ukraine_md.8.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.8.a executed"
		UKR = {
			hidden_effect = {
				set_temp_variable = { influence_gain = 10 }
				for_loop_effect = {
					end = influence_array^num
					value = v
					if = {
						limit = {
							check_variable = { influence_array^v = PREV }
						}
						add_to_variable = { influence_array_val^v = influence_gain }
						set_country_flag = found
					}
				}
				if = {
					limit = { NOT = { has_country_flag = found } }
					add_to_array = { influence_array = PREV.id }
					add_to_array = { influence_array_val = influence_gain }
				}
				clr_country_flag = found
				recalculate_influence = yes
			}
			random_list = {
				60 = {
					random_owned_state = {
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}
				}
				40 = {
					random_owned_state = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
				}
			}
		}
		UKR = { country_event = diplomatic_response.1 }
		ai_chance = {
			base = 25
		}
	}
	
	option = {
		name = ukraine_md.8.b
		log = "[GetDateText]: [This.GetName]: ukraine_md.8.b executed"
		UKR = { country_event = diplomatic_response.2 
			add_opinion_modifier = {
				target = ROOT
				modifier = loan_denied
			}
		}
		ai_chance = {
			base = 10
		}
	}
}

country_event = { ###Ukraine Aligns with the EU
	id = ukraine_md.9 
	title = ukraine_md.9.t
	desc = ukraine_md.9.d
	picture = GFX_eu
	
	is_triggered_only = yes
	
	option = {
		name = ukraine_md.9.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.9.a executed"
		add_opinion_modifier = { target = UKR modifier = diplomatic_support }
		UKR = { add_opinion_modifier = { target = PREV modifier = diplomatic_support } }
		ai_chance = {
			base = 10
			modifier = {
				add = 40
				has_government = democratic
			}
		}
	}
	option = {
		name = ukraine_md.9.b
		log = "[GetDateText]: [This.GetName]: ukraine_md.9.b executed"
		add_opinion_modifier = { target = UKR modifier = did_not_support_us }
		UKR = { add_opinion_modifier = { target = PREV modifier = did_not_support_us } }
		ai_chance = {
			base = 10
		}
	}
}

country_event = { #Open Conversation about a baltic black sea alliance
	id = ukraine_md.10
	title = ukraine_md.10.t
	desc = ukraine_md.10.d
	#picture = unkown #Try a picture of the old intermarium concept?
	
	is_triggered_only = yes 
	
	option = {
		name = ukraine_md.10
		log = "[GetDateText]: [This.GetName]: ukraine_md.10.a executed"
		set_country_flag = supported_the_baltic_black_sea_union
		UKR = { country_event = diplomatic_response.1 }
		ai_chance = {
			base = 40
			modifier = {
				add = 40
				has_government = communism
				UKR = { has_government = communism }
			}
			modifier = {
				add = 40
				has_government = democratic
				UKR = { has_government = democratic }
			}
			modifier = {
				add = 40
				has_government = neutrality
				UKR = { has_government = neutrality }
			}
			modifier = {
				add = 30
				has_government = democratic
				UKR = { has_government = neutrality }
			}
			modifier = {
				add = 30
				has_government = neutrality
				UKR = { has_government = democratic }
			}
		}
	}	
	
	option = {
		name = ukraine_md.10
		log = "[GetDateText]: [This.GetName]: ukraine_md.10.b executed"
		set_country_flag = did_not_support_the_balatic_black_sea_union
		UKR = { country_event = diplomatic_response.2 }
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_government = communism
				UKR = { has_government = democratic }
			}
			modifier = {
				add = 20
				has_government = neutrality
				UKR = { has_government = communism }
			}
			modifier = {
				add = 20
				has_government = democratic
				UKR = { has_government = communism }
			}
			modifier = {
				add = 20
				has_government = neutrality
				UKR = { has_government = communism }
			}
			modifier = {
				add = 60
				has_government = nationalist
			}
		}
	}
}

country_event = { #Invited Country to the Alliance
	id = ukraine_md.11 
	title = ukraine_md.11.t
	desc = ukraine_md.11.d
	#picture = unkown #use the same pic as _md.10
	
	is_triggered_only = yes 
	
	option = {
		name = ukraine_md.11.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.11.a executed"
		UKR = { add_to_faction = ROOT }
		UKR = { country_event = diplomatic_response.1 }
		if = {
			limit = { has_idea = NATO_member }
			remove_ideas = NATO_member
		}
		hidden_effect = {
			if = { 
				limit = { 
					OR = {
						has_country_flag = supported_the_baltic_black_sea_union
						has_country_flag = did_not_support_the_balatic_black_sea_union
					}
				}
				clr_country_flag = supported_the_baltic_black_sea_union
				clr_country_flag = did_not_support_the_balatic_black_sea_union
			}
		}
		ai_chance = {
			base = 80
		}
	}
	option = {
		name = ukraine_md.11.b
		log = "[GetDateText]: [This.GetName]: ukraine_md.11.b executed"
		UKR = { country_event = diplomatic_response.2 }
		hidden_effect = {
			if = { 
				limit = { 
					OR = {
						has_country_flag = supported_the_baltic_black_sea_union
						has_country_flag = did_not_support_the_balatic_black_sea_union
					}
				}
				clr_country_flag = supported_the_baltic_black_sea_union
				clr_country_flag = did_not_support_the_balatic_black_sea_union
			}
		}
		ai_chance = {
			base = 25
			modifier = {
				add = 25
				OR = {
					tag = BLR
					tag = MLV
				}
			}
		}
	}
}

country_event = { ###Kharkiv Pact
	id = ukraine_md.12
	title = ukraine_md.12
	desc = ukraine_md.12
	#Picture = unknown
	
	is_triggered_only = yes
	
	option = {
		name = ukraine_md.12.a
		log = "[GetDateText]: [This.GetName]: ukraine_md.12.a executed"
		UKR = {
			country_event = diplomatic_response.1 
			add_ideas = UKR_idea_kharkiv_pact 
		}
		SOV = {
			diplomatic_relation = {
				country = UKR
				relation = docking_rights
				active = yes
			}
		}
		ai_chance = {
			base = 75
		}
	}
	option = {
		name = ukraine_md.12.b 
		log = "[GetDateText]: [This.GetName]: ukraine_md.12.b executed"
		UKR = { country_event = diplomatic_response.2 }
		ai_chance = {
			base = 25 
		}
	}
}

############ Revolution Events/Tied to the UKR specific variables
country_event = { ##Random Event below 50 stability of the regime/Light
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture = unknown
	
	is_triggered_only = yes
}

country_event = { ##Random Event below 50 stability of the regime/Heavy
	id = ukraine_revolution.2
	title = ukraine_revolution.2.t
	desc = ukraine_revolution..d
	#picture = unknown
	
	is_triggered_only = yes
}

country_event = { ##Random Event above 50 stability of the regime/Good
	id = ukraine_revolution.3
	title = ukraine_revolution.3.t
	desc = ukraine_revolution.3.d
	#picture
	
	is_triggered_only = yes
}

country_event = { ##Random Event above 50 stability of the regime/Very Good
	id = ukraine_revolution.4
	title = ukraine_revolution.4.t
	desc = ukraine_revolution.4.d
	#picture
	
	is_triggered_only = yes
}

country_event = { #Fires when Pro Russia government is in power
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}

country_event = { ##Fires when Oligarchs/ProUkraine partes are in power
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}

country_event = { ##Random Event below 50 stability of the regime Time table event hidden
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}


country_event = { ##Euromaidan
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}

###New Event goes here/###Euromaidan revolution!

country_event = { ##Ukrainian Civil War
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}

country_event = { ##IF ted doesn t add the annexation of Ukraine by Russia
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}

country_event = { ##End of the Civil War 
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}

country_event = { ##Donbass Succeeds
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}

###Donbass - News 
country_event = {
	id = ukraine_revolution.1
	title = { trigger = { country_exists = NOV } text = ukraine_revolution.1.t1 }
	title = { trigger = { NOT = { country_exists = NOV } } text = ukraine_revolution.1.t2 }
	desc = { trigger = { country_exists = NOV } text = ukraine_revolution.1.d1 }
	desc = { trigger = { NOT = { country_exists = NOV } } text = ukraine_revolution.1.d2 }
	#picture = unknown
	
	is_triggered_only = yes
}
 
country_event = { ##Demand the Crimea's Return to Ukraine 
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}

country_event = { ##Return to Ukraine - NOV
	id = ukraine_revolution.1
	title = ukraine_revolution.1.t
	desc = ukraine_revolution.1.d
	#picture
	
	is_triggered_only = yes
}