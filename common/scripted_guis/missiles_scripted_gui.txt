scripted_gui = {
	MD_missiles_stateview_gui = {
		window_name = "missiles_stateview_window_container"

		context_type = selected_state_context
        parent_window_token = selected_state_view

        visible = {
            #has_dlc = "La Resistance"
            #has_country_flag = open_MD_countrymissilesview
            always = yes
        }
        effects = {
            MD_missiles_ground_launch_button_click = {
                ROOT = {
                    set_country_flag = search_target_point
                    add_to_array = {
                        array = missile_launch_point_array
                        value = PREV.id
                    }
                    add_to_variable = {
                        var_missile_trajectory_ID = 1
                    }
                }
            }
            MD_missiles_sea_launch_button_click = {
                ROOT = {
                    set_country_flag = search_target_point
                    add_to_array = {
                        array = missile_launch_point_array
                        value = PREV.id
                    }
                    add_to_variable = {
                        var_missile_trajectory_ID = 1
                    }
                }
            }
            MD_missiles_air_launch_button_click = {
                ROOT = {
                    set_country_flag = search_target_point
                    add_to_array = {
                        array = missile_launch_point_array
                        value = PREV.id
                    }
                    add_to_variable = {
                        var_missile_trajectory_ID = 1
                    }
                }
            }
            MD_missiles_target_button_click = {
                ROOT = {
                    clr_country_flag = search_target_point
                    add_to_array = {
                        array = missile_target_point_array
                        value = PREV.id
                        index = var_missile_trajectory_ID
                    }
                }
            }
        }

    }

    MD_missiles_gui = {
        window_name = MD_countrymissilesview
        context_type = player_context
        parent_window_token = topbar #after_intel_agency_button #country_menu_window ### idk if that is correct???
         
        visible = {
            #has_dlc = "La Resistance"
            has_country_flag = open_MD_countrymissilesview
        }
        
        effects = {
            close_button_click = {
                clr_country_flag = open_MD_countrymissilesview
            }
            missiles_gui_ledger_btn_1_click = {
                set_variable = { var_open_MD_missiles_gui_ledger_1 = 2 }
                clear_variable = var_open_MD_missiles_gui_ledger_2
                clear_variable = var_open_MD_missiles_gui_ledger_3
                clear_variable = var_open_MD_missiles_gui_ledger_4
                #set_country_flag = open_MD_missiles_gui_ledger_1
                #clr_country_flag = open_MD_missiles_gui_ledger_2
                #clr_country_flag = open_MD_missiles_gui_ledger_3
                #clr_country_flag = open_MD_missiles_gui_ledger_4
            }
            missiles_gui_ledger_btn_2_click = {
                set_variable = { var_open_MD_missiles_gui_ledger_2 = 2 }
                clear_variable = var_open_MD_missiles_gui_ledger_1
                clear_variable = var_open_MD_missiles_gui_ledger_3
                clear_variable = var_open_MD_missiles_gui_ledger_4
                #set_country_flag = open_MD_missiles_gui_ledger_2
                #clr_country_flag = open_MD_missiles_gui_ledger_1
                #clr_country_flag = open_MD_missiles_gui_ledger_3
                #clr_country_flag = open_MD_missiles_gui_ledger_4
            }
            missiles_gui_ledger_btn_3_click = {
                set_variable = { var_open_MD_missiles_gui_ledger_3 = 2 }
                clear_variable = var_open_MD_missiles_gui_ledger_1
                clear_variable = var_open_MD_missiles_gui_ledger_2
                clear_variable = var_open_MD_missiles_gui_ledger_4
                #set_country_flag = open_MD_missiles_gui_ledger_3
                #clr_country_flag = open_MD_missiles_gui_ledger_1
                #clr_country_flag = open_MD_missiles_gui_ledger_2
                #clr_country_flag = open_MD_missiles_gui_ledger_4
            }
            missiles_gui_ledger_btn_4_click = {
                set_variable = { var_open_MD_missiles_gui_ledger_4 = 2 }
                clear_variable = var_open_MD_missiles_gui_ledger_1
                clear_variable = var_open_MD_missiles_gui_ledger_2
                clear_variable = var_open_MD_missiles_gui_ledger_3
                #set_country_flag = open_MD_missiles_gui_ledger_4
                #clr_country_flag = open_MD_missiles_gui_ledger_1
                #clr_country_flag = open_MD_missiles_gui_ledger_2
                #clr_country_flag = open_MD_missiles_gui_ledger_3
            }
        }

        dynamic_lists = {
            trajectory_gridbox = {
                array = missile_launch_point_array
                entry_container = trajectory_list_entry
                change_scope = yes
            }
        }

        properties = {
            missiles_gui_ledger_btn_1 = {
                frame = var_open_MD_missiles_gui_ledger_1
            }
            missiles_gui_ledger_btn_2 = {
                frame = var_open_MD_missiles_gui_ledger_2
            }
            missiles_gui_ledger_btn_3 = {
                frame = var_open_MD_missiles_gui_ledger_3
            }
            missiles_gui_ledger_btn_4 = {
                frame = var_open_MD_missiles_gui_ledger_4
            }
        }
    }

    MD_countrymissilesview_production_gui = {
        window_name = MD_countrymissilesview_production
        context_type = player_context
        parent_window_name = MD_countrymissilesview
         
        visible = {
            check_variable = { var_open_MD_missiles_gui_ledger_1 = 2 }
            has_country_flag = open_MD_countrymissilesview
        }        
    }

    MD_countrymissilesview_launch_gui = {
        window_name = MD_countrymissilesview_launch
        context_type = player_context
        parent_window_name = MD_countrymissilesview
         
        visible = {
            check_variable = { var_open_MD_missiles_gui_ledger_2 = 2 }
            has_country_flag = open_MD_countrymissilesview
        }        
    }

    MD_countrymissilesview_defense_gui = {
        window_name = MD_countrymissilesview_defense
        context_type = player_context
        parent_window_name = MD_countrymissilesview
         
        visible = {
            check_variable = { var_open_MD_missiles_gui_ledger_3 = 2 }
            has_country_flag = open_MD_countrymissilesview
        }        
    }

    MD_countrymissilesview_satellites_gui = {
        window_name = MD_countrymissilesview_satellites
        context_type = player_context
        parent_window_name = MD_countrymissilesview
         
        visible = {
            check_variable = { var_open_MD_missiles_gui_ledger_4 = 2 }
            has_country_flag = open_MD_countrymissilesview
        }        
    }

}