ISR_startup = {
	set_variable = { ISR_palestine_situation_additional = 0 }
	set_variable = { hap_west_bank = 40 }
	set_variable = { hap_gaza = 20 }
	set_variable = { hap_isr = 60 }
	set_variable = { ter_west_bank = 30 }
	set_variable = { ter_gaza = 50 }
	set_variable = { ter_isr = 20 }
	set_variable = { defence_israel = 1 }
	set_variable = { is_attacking_gaza = 1 }
}
ISR_clamp_hap_west_bank = {
	clamp_variable = {
		var = hap_west_bank
		min = 0
		max = 100
	}
}
ISR_clamp_hap_gaza = {
	clamp_variable = {
		var = hap_gaza
		min = 0
		max = 100
	}
}
ISR_clamp_hap_isr = {
	clamp_variable = {
		var = hap_isr
		min = 0
		max = 100
	}
}
ISR_clamp_ter_west_bank = {
	clamp_variable = {
		var = hap_west_bank_ter_west_bank
		min = 0
		max = 100
	}
}
ISR_clamp_ter_gaza = {
	clamp_variable = {
		var = hap_west_bank_ter_gaza
		min = 0
		max = 100
	}
}
ISR_clamp_ter_isr = {
	clamp_variable = {
		var = hap_west_bank_ter_isr
		min = 0
		max = 100
	}
}
ISR_clamp_defence_israel = {
	clamp_variable = {
		var = defence_israel
		min = 0
		max = 100
	}
}
ISR_clamp_ter_isr = {
	clamp_variable = {
		var = is_attacking_gaza
		min = 0
		max = 100
	}
}
daneils_promis_decr = {
	if = {
		limit = { has_idea = daneils_final_prophecy_1 }
		swap_ideas = {
			remove_idea = daneils_final_prophecy_1
			add_idea = daneils_final_prophecy_2
		}
	}
	else_if = {
		limit = { has_idea = daneils_final_prophecy_2 }
		swap_ideas = {
			remove_idea = daneils_final_prophecy_2
			add_idea = daneils_final_prophecy_3
		}
	}
	else_if = {
		limit = { has_idea = daneils_final_prophecy_3 }
		swap_ideas = {
			remove_idea = daneils_final_prophecy_3
			add_idea = daneils_final_prophecy_4
		}
	}
	else_if = {
		limit = { has_idea = daneils_final_prophecy_4 }
		remove_ideas = daneils_final_prophecy_4
	}
}

ISR_decrease_peoples_army = {
	if = {
		limit = { has_idea = peoples_army_11 }
		swap_ideas = {
			remove_idea = peoples_army_11
			add_idea = peoples_army_10
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_10 }
		swap_ideas = {
			remove_idea = peoples_army_10
			add_idea = peoples_army_9
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_9 }
		swap_ideas = {
			remove_idea = peoples_army_9
			add_idea = peoples_army_8
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_8 }
		swap_ideas = {
			remove_idea = peoples_army_8
			add_idea = peoples_army_7
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_7 }
		swap_ideas = {
			remove_idea = peoples_army_7
			add_idea = peoples_army_6
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_6 }
		swap_ideas = {
			remove_idea = peoples_army_6
			add_idea = peoples_army_5
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_5 }
		swap_ideas = {
			remove_idea = peoples_army_5
			add_idea = peoples_army_4
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_4 }
		swap_ideas = {
			remove_idea = peoples_army_4
			add_idea = peoples_army_3
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_3 }
		swap_ideas = {
			remove_idea = peoples_army_3
			add_idea = peoples_army_2
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_2 }
		swap_ideas = {
			remove_idea = peoples_army_2
			add_idea = peoples_army_1
		}
	}
}

ISR_increase_peoples_army = {
	if = {
		limit = { has_idea = peoples_army_1 }
		swap_ideas = {
			remove_idea = peoples_army_1
			add_idea = peoples_army_2
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_2 }
		swap_ideas = {
			remove_idea = peoples_army_2
			add_idea = peoples_army_3
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_3 }
		swap_ideas = {
			remove_idea = peoples_army_3
			add_idea = peoples_army_4
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_4 }
		swap_ideas = {
			remove_idea = peoples_army_4
			add_idea = peoples_army_5
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_5 }
		swap_ideas = {
			remove_idea = peoples_army_5
			add_idea = peoples_army_6
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_6 }
		swap_ideas = {
			remove_idea = peoples_army_6
			add_idea = peoples_army_7
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_7 }
		swap_ideas = {
			remove_idea = peoples_army_7
			add_idea = peoples_army_8
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_8 }
		swap_ideas = {
			remove_idea = peoples_army_8
			add_idea = peoples_army_9
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_9 }
		swap_ideas = {
			remove_idea = peoples_army_9
			add_idea = peoples_army_10
		}
	}
	else_if = {
		limit = { has_idea = peoples_army_10 }
		swap_ideas = {
			remove_idea = peoples_army_10
			add_idea = peoples_army_11
		}
	}
}

ISR_decrease_unintegrated_ultraorthodox_community = {
	if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_1 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_1
			add_idea = unintegrated_ultraorthodox_community_2
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_2 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_2
			add_idea = unintegrated_ultraorthodox_community_3
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_3 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_3
			add_idea = unintegrated_ultraorthodox_community_4
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_4 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_4
			add_idea = unintegrated_ultraorthodox_community_5
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_5 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_5
			add_idea = unintegrated_ultraorthodox_community_6
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_6 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_6
			add_idea = unintegrated_ultraorthodox_community_7
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_7 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_7
			add_idea = unintegrated_ultraorthodox_community_8
		}
	}
}

ISR_increase_unintegrated_ultraorthodox_community = {
	if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_8 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_8
			add_idea = unintegrated_ultraorthodox_community_7
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_7 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_7
			add_idea = unintegrated_ultraorthodox_community_6
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_6 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_6
			add_idea = unintegrated_ultraorthodox_community_5
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_5 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_5
			add_idea = unintegrated_ultraorthodox_community_4
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_4 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_4
			add_idea = unintegrated_ultraorthodox_community_3
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_3 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_3
			add_idea = unintegrated_ultraorthodox_community_2
		}
	}
	else_if = {
		limit = { has_idea = unintegrated_ultraorthodox_community_2 }
		swap_ideas = {
			remove_idea = unintegrated_ultraorthodox_community_2
			add_idea = unintegrated_ultraorthodox_community_1
		}
	}
}

arab_mafia_decr = {
	if = {
		limit = { has_idea = arab_mafia_1 }
		swap_ideas = {
			remove_idea = arab_mafia_1
			add_idea = arab_mafia_2
		}
	}
	else_if = {
		limit = { has_idea = arab_mafia_2 }
		swap_ideas = {
			remove_idea = arab_mafia_2
			add_idea = arab_mafia_3
		}
	}
	else_if = {
		limit = { has_idea = arab_mafia_3 }
		swap_ideas = {
			remove_idea = arab_mafia_3
			add_idea = arab_mafia_4
		}
	}
	else_if = {
		limit = { has_idea = arab_mafia_4 }
		swap_ideas = {
			remove_idea = arab_mafia_4
			add_idea = arab_mafia_5
		}
	}
	else_if = {
		limit = { has_idea = arab_mafia_5 }
		remove_ideas = arab_mafia_5
	}
}

ghost_decr = {
	if = {
		limit = { has_idea = eddaic_ghost_1 }
		swap_ideas = {
			remove_idea = eddaic_ghost_1
			add_idea = eddaic_ghost_2
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_2 }
		swap_ideas = {
			remove_idea = eddaic_ghost_2
			add_idea = eddaic_ghost_3
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_3 }
		swap_ideas = {
			remove_idea = eddaic_ghost_3
			add_idea = eddaic_ghost_4
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_4 }
		swap_ideas = {
			remove_idea = eddaic_ghost_4
			add_idea = eddaic_ghost_5
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_5 }
		swap_ideas = {
			remove_idea = eddaic_ghost_5
			add_idea = eddaic_ghost_6
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_6 }
		remove_ideas = eddaic_ghost_6
	}
}

ghost_incr = {
	if = {
		limit = { has_idea = eddaic_ghost_6 }
		swap_ideas = {
			remove_idea = eddaic_ghost_6
			add_idea = eddaic_ghost_5
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_5 }
		swap_ideas = {
			remove_idea = eddaic_ghost_5
			add_idea = eddaic_ghost_4
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_4 }
		swap_ideas = {
			remove_idea = eddaic_ghost_4
			add_idea = eddaic_ghost_3
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_3 }
		swap_ideas = {
			remove_idea = eddaic_ghost_3
			add_idea = eddaic_ghost_2
		}
	}
	else_if = {
		limit = { has_idea = eddaic_ghost_2 }
		swap_ideas = {
			remove_idea = eddaic_ghost_2
			add_idea = eddaic_ghost_1
		}
	}
}

ISR_increase_kahanism = {
	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = ISR_ben_gvir_kahanism_1
					has_idea = ISR_ben_gvir_kahanism_2
					has_idea = ISR_ben_gvir_kahanism_3
					has_idea = ISR_ben_gvir_kahanism_4
				}
			}
		}
		add_ideas = ISR_ben_gvir_kahanism_1
	}
	else_if = {
		limit = { has_idea = ISR_ben_gvir_kahanism_1 }
		swap_ideas = {
			remove_idea = ISR_ben_gvir_kahanism_1
			add_idea = ISR_ben_gvir_kahanism_2
		}
	}
	else_if = {
		limit = { has_idea = ISR_ben_gvir_kahanism_2 }
		swap_ideas = {
			remove_idea = ISR_ben_gvir_kahanism_2
			add_idea = ISR_ben_gvir_kahanism_3
		}
	}
	else_if = {
		limit = { has_idea = ISR_ben_gvir_kahanism_3 }
		swap_ideas = {
			remove_idea = ISR_ben_gvir_kahanism_3
			add_idea = ISR_ben_gvir_kahanism_4
		}
	}
}
ISR_update_palestine = {
	set_variable = { ISR_palestine_situation = 0 }
	#Autonomy level
	if = {
		limit = { PAL = { has_autonomy_state = autonomy_authority_of_palestine } }
		add_to_variable = { ISR_palestine_situation = 30 }
	}
	else_if = {
		limit = { PAL = { has_autonomy_state = autonomy_authority_of_palestine_1 } }
		add_to_variable = { ISR_palestine_situation = 20 }
	}
	else_if = {
		limit = { PAL = { has_autonomy_state = autonomy_authority_of_palestine_2 } }
		add_to_variable = { ISR_palestine_situation = 10 }
	}
	#Arab Parties Popularity

	set_variable = { PAL_arab_popularity = 0 }
	if = {
		limit = {
			ISR = {
				OR = {
					check_variable = { party_pop_array^4 > 0.3 }
					check_variable = { party_pop_array^5 > 0.3 }
					check_variable = { party_pop_array^12 > 0.3 }
					check_variable = { party_pop_array^7 > 0.3 }
				}
			}
		}
		add_to_variable = { PAL_arab_popularity = -30 }
	}
	else_if = {
		limit = {
			ISR = {
				OR = {
					check_variable = { party_pop_array^4 > 0.15 }
					check_variable = { party_pop_array^5 > 0.15 }
					check_variable = { party_pop_array^12 > 0.15 }
					check_variable = { party_pop_array^7 > 0.15 }
				}
			}
		}
		add_to_variable = { PAL_arab_popularity = -15 }
	}
	else_if = {
		limit = {
			ISR = {
				OR = {
					check_variable = { party_pop_array^4 > 0.05 }
					check_variable = { party_pop_array^5 > 0.05 }
					check_variable = { party_pop_array^12 > 0.05 }
					check_variable = { party_pop_array^7 > 0.05 }
				}
			}
		}
		add_to_variable = { PAL_arab_popularity = -5 }
	}

	add_to_variable = { ISR_palestine_situation = PAL_arab_popularity }

	set_variable = { PAL_war_support_in_isr = 0 }
	if = {
		limit = { has_war_support > 0.69 }
		add_to_variable = { PAL_war_support_in_isr = 15 }
	}
	else_if = {
		limit = {
			has_war_support < 0.7
			has_war_support > 0.49
		}
		add_to_variable = { PAL_war_support_in_isr = 10 }
	}
	else_if = {
		limit = {
			has_war_support < 0.5
			has_war_support > 0.29
		}
		add_to_variable = { PAL_war_support_in_isr = 5 }
	}
	else_if = {
		limit = {
			has_war_support < 0.3
			has_war_support > 0.1
		}
		add_to_variable = { PAL_war_support_in_isr = 1 }
	}
	add_to_variable = { ISR_palestine_situation = PAL_war_support_in_isr }

	set_variable = { PAL_arab_parties_rulling = 0 }
	if = {
		limit = {
			ISR = {
				OR = {
					neutrality_neutral_muslim_brotherhood_are_in_coalition = yes
					neutrality_neutral_muslim_brotherhood_are_in_power = yes
					emerging_anarchist_communism_in_power_or_coalition = yes
					emerging_communist_state_in_power_or_coalition = yes
					emerging_autocracy_in_power_or_coalition = yes
				}
			}
		}
		add_to_variable = { PAL_arab_parties_rulling = -20 }
	}
	add_to_variable = { ISR_palestine_situation = PAL_arab_parties_rulling }

	add_to_variable = { ISR_palestine_situation = ISR_palestine_situation_additional }
	clamp_variable = {
		var = ISR_palestine_situation_additional
		min = 0
		max = 100
	}
	clamp_variable = {
		var = ISR_palestine_situation
		min = 0
		max = 100
	}
}

####PAL
PAL_increase_quartet = {
	if = {
		limit = { has_idea = PAL_quartet_very_high_sanctions }
		swap_ideas = {
			remove_idea = PAL_quartet_very_high_sanctions
			add_idea = PAL_quartet_high_sanctions
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_high_sanctions }
		swap_ideas = {
			remove_idea = PAL_quartet_high_sanctions
			add_idea = PAL_quartet_moderate_sanctions
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_moderate_sanctions }
		swap_ideas = {
			remove_idea = PAL_quartet_moderate_sanctions
			add_idea = PAL_quartet_neutral
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_neutral }
		swap_ideas = {
			remove_idea = PAL_quartet_neutral
			add_idea = PAL_quartet_moderate_packages
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_moderate_packages }
		swap_ideas = {
			remove_idea = PAL_quartet_moderate_packages
			add_idea = PAL_quartet_big_packages
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_big_packages }
		swap_ideas = {
			remove_idea = PAL_quartet_big_packages
			add_idea = PAL_quartet_large_packages
		}
	}
}

PAL_decrease_quartet = {
	if = {
		limit = {
			has_idea = PAL_quartet_very_high_sanctions
		}
		swap_ideas = {
			remove_idea = PAL_quartet_large_packages
			add_idea = PAL_quartet_big_packages
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_big_packages }
		swap_ideas = {
			remove_idea = PAL_quartet_big_packages
			add_idea = PAL_quartet_moderate_packages
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_moderate_packages }
		swap_ideas = {
			remove_idea = PAL_quartet_moderate_packages
			add_idea = PAL_quartet_neutral
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_neutral }
		swap_ideas = {
			remove_idea = PAL_quartet_neutral
			add_idea = PAL_quartet_moderate_sanctions
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_moderate_sanctions }
		swap_ideas = {
			remove_idea = PAL_quartet_moderate_sanctions
			add_idea = PAL_quartet_high_sanctions
		}
	}
	else_if = {
		limit = { has_idea = PAL_quartet_high_sanctions }
		swap_ideas = {
			remove_idea = PAL_quartet_high_sanctions
			add_idea = PAL_quartet_very_high_sanctions
		}
	}
}

PAL_increase_tax_clearance = {
	if = {
		limit = { has_idea = PAL_tax_clearance_1 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_1
			add_idea = PAL_tax_clearance_2
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_2 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_2
			add_idea = PAL_tax_clearance_3
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_3 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_3
			add_idea = PAL_tax_clearance_4
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_4 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_4
			add_idea = PAL_tax_clearance_5
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_5 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_5
			add_idea = PAL_tax_clearance_6
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_6 }
		add_stability = -0.02
	}
}

PAL_decrease_tax_clearance = {
	if = {
		limit = { has_idea = PAL_tax_clearance_6 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_6
			add_idea = PAL_tax_clearance_5
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_5 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_5
			add_idea = PAL_tax_clearance_4
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_4 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_4
			add_idea = PAL_tax_clearance_3
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_3 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_3
			add_idea = PAL_tax_clearance_2
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_2 }
		swap_ideas = {
			remove_idea = PAL_tax_clearance_2
			add_idea = PAL_tax_clearance_1
		}
	}
	else_if = {
		limit = { has_idea = PAL_tax_clearance_1 }
		add_stability = 0.02
	}
}

block_operations = {
	custom_effect_tooltip = BLOCK_OPERATIONS_TT
	clr_country_flag = operations_blocked
	set_country_flag = {
		flag = operations_blocked
		days = 365
		value = 1
	}
}

HAM_increase_blockade = {
	if = {
		limit = { has_idea = PAL_closing_gates_all_open }
		swap_ideas = {
			remove_idea = PAL_closing_gates_all_open
			add_idea = PAL_closing_gates_airport_closed
		}
	}
	else_if = {
		limit = { has_idea = PAL_closing_gates_airport_closed }
		swap_ideas = {
			remove_idea = PAL_closing_gates_airport_closed
			add_idea = PAL_closing_gates_ports_closed
		}
	}
	else_if = {
		limit = { has_idea = PAL_closing_gates_ports_closed }
		swap_ideas = {
			remove_idea = PAL_closing_gates_ports_closed
			add_idea = PAL_closing_gates_kerem_takeover_restrictions
		}
	}
	else_if = {
		limit = { has_idea = PAL_closing_gates_kerem_takeover_restrictions }
		swap_ideas = {
			remove_idea = PAL_closing_gates_kerem_takeover_restrictions
			add_idea = PAL_closing_gates_erez_closed
		}
	}
	else_if = {
		limit = { has_idea = PAL_closing_gates_erez_closed }
		swap_ideas = {
			remove_idea = PAL_closing_gates_erez_closed
			add_idea = PAL_closing_gates_kerem_shalom_closed
		}
	}
	else_if = {
		limit = { has_idea = PAL_closing_gates_kerem_shalom_closed }
		swap_ideas = {
			remove_idea = PAL_closing_gates_kerem_shalom_closed
			add_idea = PAL_closing_gates_rafah_closed
		}
	}
}