##########################
#  Islamic State Events  #
##########################

add_namespace = isis
add_namespace = isisNews

# Remove Idea Cybercaliphate
news_event = {
	id = isis.1
	title = isis.1.t
	desc = isis.1.d
	picture = GFX_Tahrir_Al_Sham
	
	major = yes
	fire_only_once = yes
	
	trigger = {
		NOT = { country_exists = ISI }
	}
	
	option = {
		name = isis.1.a
			if = { limit = { has_idea = cybercaliphate } remove_ideas = { cybercaliphate }
		}
	}
}
#Infiltrate Tahrir al-Sham
country_event = {
    id = isis.2
	title = isis.2.t
	desc = isis.2.d
	picture = GFX_Tahrir_Al_Sham
	
    fire_only_once = yes
	
	mean_time_to_happen = {
		days = 60
	}
	
	trigger = {
		tag = ISI
		date > 2017.2.1
		ISI = {
			is_neighbor_of = NUS
			NOT = { has_war_with = NUS }
			surrender_progress < 0.6
			}
		NUS = {
			surrender_progress < 0.5
			}
	}
	
	#Do it
    option = {
        name = isis.2.a
		ai_chance = { factor = 100 }
		random_list = {
			70 = {
				ISI = { country_event = { days = 28 id = isis.4 } }
				hidden_effect = { 
					NUS = { country_event = { days = 30 id = isis.3 } }
					}
				
			}
			30 = {
				custom_effect_tooltip = isis.2.a_tt
				
			}
		}
    }
	#avoid provokations
	option = {
        name = isis.2.b
		ai_chance = {
			factor = 0
			}
    }
}

#Defections from Tahrir al-Sham
country_event = {
    id = isis.3
	title = isis.3.t
	desc = isis.3.d
	picture = GFX_Tahrir_Al_Sham
	
    is_triggered_only = yes
	
	immediate = {
	    add_manpower = -6000
		add_national_unity = -0.05
	}
	
	#Fight back!
    option = {
        name = isis.3.a
		ai_chance = { factor = 50 }
		create_wargoal = { type = annex_everything target = ISI }
    }
	
	#Do nothing
	option = {
        name = isis.3.b
		ai_chance = { factor = 50 }
		hidden_effect = { 
					ISI = { country_event = { days = 7 id = isis.5 } }
					}
    }
}

#Add units to ISIS
country_event = {
    id = isis.4
	title = isis.4.t
	desc = isis.4.d
	picture = GFX_Tahrir_Al_Sham
	
    is_triggered_only = yes

    option = {
        name = isis.4.a
		ai_chance = { factor = 100 }
		custom_effect_tooltip = isis.4.a_tt
		hidden_effect = {
					ISI = {
						load_oob = ISI_Defection
						}
		}
    }
}

#ISIS senses weakness in Tahrir al-Sham
country_event = {
    id = isis.5
	title = isis.5.t
	desc = isis.5.d
	picture = GFX_Tahrir_Al_Sham
	
    is_triggered_only = yes
	
	#Attack
    option = {
        name = isis.5.a
		ai_chance = { factor = 70 }
		create_wargoal = { type = annex_everything target = NUS }
    }
	
	#Do nothing
	option = {
        name = isis.5.b
		ai_chance = { factor = 30 }
    }
}

#ISIS is alive, but Tahrir al Sham is close to defeat
#Makes Tahrir al Sham defect to ISIS
country_event = {
    id = isis.6
	title = isis.6.t
	desc = isis.6.d
	picture = GFX_Tahrir_Al_Sham
	
    mean_time_to_happen = {
		days = 3
	}
	
	trigger = {
		tag = ISI
		country_exists = ISI
		NUS = { is_ai = yes }
		ISI = {
			surrender_progress < 0.8
			}
		NUS = {
			surrender_progress > 0.9
			}
	}

    option = {
        name = isis.6.a
		ai_chance = { factor = 100 }
		annex_country = { target = NUS transfer_troops = yes }
		hidden_effect = { news_event = { id = isisNews.1 hours = 6 } }
    }
}

#ISIS annexes Tahrir al Sham
news_event = {
	id = isisNews.1
	title = isisNews.1.t
	desc = isisNews.1.d
	picture = GFX_news_rise_of_taliban
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = isisNews.1.a
	}
}

### US Airstrikes ###

#Hidden event for selection
#Kills random commander. If already killed, no effect
#Needs proofing for cases where ISIS is defeated but reappears

country_event = {
    id = isis.7
	title = isis.7.t
	desc = isis.7.d
	#picture = GFX_Tahrir_Al_Sham
	
	hidden = yes
	
    mean_time_to_happen = {
		days = 80
	}
	
	trigger = {
		tag = ISI
		country_exists = ISI
	}

    option = {
        name = isis.7.a
		ai_chance = { factor = 100 }
		random_list = {
				8 = {
					if = { limit = { has_unit_leader = 1301 }
						hidden_effect = {
							remove_unit_leader = 1301
							news_event = { id = isisNews.1301 hours = 6 }
									}
						 }
					}
				7 = {
					if = { limit = { has_unit_leader = 1302 }
						hidden_effect = {
							remove_unit_leader = 1302
							news_event = { id = isisNews.1302 hours = 6 }
									}
						 }
					}
				8 = {
					if = { limit = { has_unit_leader = 1303 }
						hidden_effect = {
							remove_unit_leader = 1303
							news_event = { id = isisNews.1303 hours = 6 }
									}
						 }
					}
				7 = {
					if = { limit = { has_unit_leader = 1304 }
						hidden_effect = {
							remove_unit_leader = 1304
							news_event = { id = isisNews.1304 hours = 6 }
									}
						 }
					}
				8 = {
					if = { limit = { has_unit_leader = 1305 }
						hidden_effect = {
							remove_unit_leader = 1305
							news_event = { id = isisNews.1305 hours = 6 }
									}
						 }
					}
				8 = {
					if = { limit = { has_unit_leader = 1306 }
						hidden_effect = {
							remove_unit_leader = 1306
							news_event = { id = isisNews.1306 hours = 6 }
									}
						 }
					}
				8 = {
					if = { limit = { has_unit_leader = 1307 }
						hidden_effect = {
							remove_unit_leader = 1307
							news_event = { id = isisNews.1307 hours = 6 }
									}
						 }
					}
				8 = {
					if = { limit = { has_unit_leader = 1308 }
						hidden_effect = {
							remove_unit_leader = 1308
							news_event = { id = isisNews.1308 hours = 6 }
									}
						 }
					}
				7 = {
					if = { limit = { has_unit_leader = 1309 }
						hidden_effect = {
							remove_unit_leader = 1309
							news_event = { id = isisNews.1309 hours = 6 }
									}
						 }
					}
				8 = {
					if = { limit = { has_unit_leader = 1310 }
						hidden_effect = {
							remove_unit_leader = 1310
							news_event = { id = isisNews.1310 hours = 6 }
									}
						 }
					}
				8 = {
					if = { limit = { has_unit_leader = 1311 }
						hidden_effect = {
							remove_unit_leader = 1311
							news_event = { id = isisNews.1311 hours = 6 }
									}
						 }
					}
				8 = {
					if = { limit = { has_unit_leader = 1312 }
						hidden_effect = {
							remove_unit_leader = 1312
							news_event = { id = isisNews.1312 hours = 6 }
									}
						 }
					}
				7 = {
					if = { limit = { has_unit_leader = 1313 }
						hidden_effect = {
							remove_unit_leader = 1313
							news_event = { id = isisNews.1313 hours = 6 }
									}
						 }
					}
		}
    }
}

### Newsevents ###

news_event = {
	id = isisNews.1301
	title = {
		text = isisNews.1301.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1301.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1301.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1301.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1301
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1302
	title = {
		text = isisNews.1302.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1302.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1302.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1302.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1302
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1303
	title = {
		text = isisNews.1303.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1303.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1303.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1303.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1303
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1304
	title = {
		text = isisNews.1304.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1304.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1304.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1304.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1304
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1305
	title = {
		text = isisNews.1305.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1305.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1305.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1305.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1305
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1306
	title = {
		text = isisNews.1306.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1306.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1306.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1306.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1306
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1307
	title = {
		text = isisNews.1307.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1307.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1307.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1307.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1307
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1308
	title = {
		text = isisNews.1308.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1308.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1308.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1308.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1308
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1309
	title = {
		text = isisNews.1309.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1309.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1309.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1309.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1309
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1310
	title = {
		text = isisNews.1310.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1310.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1310.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1310.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1310
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1311
	title = {
		text = isisNews.1311.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1311.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1311.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1311.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1311
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1312
	title = {
		text = isisNews.1312.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1312.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1312.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1312.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1312
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}
news_event = {
	id = isisNews.1313
	title = {
		text = isisNews.1313.t
		trigger = { not = { tag = ISI } }
	}
	title = {
		text = isis.1313.t
		trigger = { tag = ISI }
	}
	desc = {
		text = isisNews.1313.d
		trigger = { not = { tag = ISI } }
	}
	desc = { 
		text = isis.1313.d 
		trigger = { tag = ISI } 
	}
	picture = GFX_ISIS_airstrike_1313
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = isisNews.1301.a
		trigger = { NOT = { TAG = ISI }
		}
		if = { limit = { original_tag = USA } 
			air_experience = 5
			add_political_power = 25
		}
	}
	option = {
        name = isis.1301.a
    }
}

