###########################
# 	  Gulf Events	      #
###########################

add_namespace = gulf

#hidden event that increases radicalization/salafi jihadist/shia revolutionary/islamist popularity
country_event = {
	id = gulf.1
	
	hidden = yes
	
	trigger = {
		check_variable = { social_conservatism_government < social_conservatism_society }
	}
	
	mean_time_to_happen = {
		days = 200
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 10 }
			check_variable = { social_conservatism_society > 10 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 20 }
			check_variable = { social_conservatism_society > 20 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 30 }
			check_variable = { social_conservatism_society > 30 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 40 }
			check_variable = { social_conservatism_society > 40 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 50 }
			check_variable = { social_conservatism_society > 50 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 60 }
			check_variable = { social_conservatism_society > 60 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 70 }
			check_variable = { social_conservatism_society > 70 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 80 }
			check_variable = { social_conservatism_society > 80 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government < 90 }
			check_variable = { social_conservatism_society > 90 }
		}
	}
	
	option = {
		name = gulf.1.a
		log = "[GetDateText]: [This.GetName]: gulf.1.a executed"
		add_to_variable = { radicalization = 5 }
		if = {	
			limit = {
				OR = {
					original_tag = KUW
					original_tag = BAH
					AND = {
						original_tag = SAU
						controls_state = 174 #Haasa
					}
				}
				NOT = { has_government = communism }
			}
			add_popularity = {
				ideology = communism
				popularity = 0.02
			}
			recalculate_party = yes
		}
		if = {	
			limit = {
				NOT = { has_government = neutrality }
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.02
			}
			recalculate_party = yes
		}
		if = {
			limit = { NOT = { has_government = fascism } }
			add_popularity = {
				ideology = fascism
				popularity = 0.02
			}
			recalculate_party = yes
		}
		if = {	
			limit = {
				has_government = fascism
				no_jihadist_government = yes
			}
			add_to_variable = { party_pop_array^11 = 0.01 }
			recalculate_party = yes
		}
	}
}

#hidden event that decreases militant support/salafi jihadist/shia revolutionary/islamist popularity
country_event = {
	id = gulf.2
	
	hidden = yes
	
	trigger = {
		check_variable = { social_conservatism_government > social_conservatism_society }
	}
	
	mean_time_to_happen = {
		days = 200
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 10 }
			check_variable = { social_conservatism_society < 10 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 20 }
			check_variable = { social_conservatism_society < 20 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 30 }
			check_variable = { social_conservatism_society < 30 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 40 }
			check_variable = { social_conservatism_society < 40 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 50 }
			check_variable = { social_conservatism_society < 50 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 60 }
			check_variable = { social_conservatism_society < 60 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 70 }
			check_variable = { social_conservatism_society < 70 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 80 }
			check_variable = { social_conservatism_society < 80 }
		}
		modifier = {
			factor = 0.5
			check_variable = { social_conservatism_government > 90 }
			check_variable = { social_conservatism_society < 90 }
		}
	}
	
	option = {
		name = gulf.2.a
		log = "[GetDateText]: [This.GetName]: gulf.2.a executed"
		if = {	
			limit = {
				OR = {
					original_tag = KUW
					original_tag = BAH
					AND = {
						original_tag = SAU
						controls_state = 174 #Haasa
					}
				}
				NOT = { has_government = communism }
			}
			add_popularity = {
				ideology = communism
				popularity = -0.02
			}
			recalculate_party = yes
		}
		if = {	
			limit = {
				NOT = { has_government = neutrality }
			}
			add_popularity = {
				ideology = neutrality
				popularity = -0.02
			}
			recalculate_party = yes
		}
		if = {
			limit = { NOT = { has_government = fascism } }
			add_popularity = {
				ideology = fascism
				popularity = -0.02
			}
			recalculate_party = yes
		}
		if = {	
			limit = {
				has_government = fascism
				no_jihadist_government = yes
			}
			subtract_from_variable = { party_pop_array^11 = 0.01 }
			recalculate_party = yes
		}
	}
}

#hidden event that decreases SC-C to match SC-G
country_event = {
	id = gulf.3
	
	hidden = yes
	
	trigger = {
		check_variable = { social_conservatism_government < social_conservatism_society }
	}
	
	mean_time_to_happen = {
		days = 100
	}
	
	option = {
		name = gulf.3.a
		log = "[GetDateText]: [This.GetName]: gulf.3.a executed"
		subtract_from_variable = { social_conservatism_society = 1 }
		clamp_variable = {
			var = social_conservatism_society
			min = social_conservatism_government
			max = 100
		}
	}
}

#hidden event that increases SC-C to match SC-G
country_event = {
	id = gulf.4
	
	hidden = yes
	
	trigger = {
		check_variable = { social_conservatism_government > social_conservatism_society }
	}
	
	mean_time_to_happen = {
		days = 30
	}
	
	option = {
		name = gulf.4.a
		log = "[GetDateText]: [This.GetName]: gulf.4.a executed"
		add_to_variable = { social_conservatism_society = 1 }
		clamp_variable = {
			var = social_conservatism_society
			min = 0
			max = social_conservatism_government
		}
	}
}

#[@FROM_fossil_fuel_industry] IPO
news_event = {
	id = gulf.5
	title = gulf.5.t
	desc = gulf.5.d
	
	picture = GFX_market_crash
	
	is_triggered_only = yes
	
	option = {
		name = gulf.5.a #An exciting day for [FROM.GetNameDef]
		log = "[GetDateText]: [This.GetName]: gulf.5.a executed"
	}
}

#hidden event that determines the outcome of the IPO
country_event = {
	id = gulf.6
	title = gulf.6.t
	desc = gulf.6.d
	
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		name = gulf.6.a
		log = "[GetDateText]: [This.GetName]: gulf.6.a executed"
		if = {
			limit = { has_stability < 0.10 }
			country_event = { id = gulf.8 }
		}
		if = {
			limit = { has_stability > 0.09 has_stability < 0.25 }
			random_list = {
				25 = { country_event = { id = gulf.7 } }
				75 = { country_event = { id = gulf.8 } }
			}
		}
		else_if = {
			limit = { has_stability > 0.24 has_stability < 0.4 }
			random_list = {
				34 = { country_event = { id = gulf.7 } }
				66 = { country_event = { id = gulf.8 } }
			}
		}
		else_if = {
			limit = { has_stability > 0.39 has_stability < 0.6 }
			random_list = {
				50 = { country_event = { id = gulf.7 } }
				50 = { country_event = { id = gulf.8 } }
			}
		}
		else_if = {
			limit = { has_stability > 0.59 has_stability < 0.7 }
			random_list = {
				66 = { country_event = { id = gulf.7 } }
				34 = { country_event = { id = gulf.8 } }
			}
		}
		else_if = {
			limit = { has_stability > 0.69 has_stability < 0.9 }
			random_list = {
				75 = { country_event = { id = gulf.7 } }
				25 = { country_event = { id = gulf.8 } }
			}
		}
		else_if = {
			limit = { has_stability > 0.89 }
			country_event = { id = gulf.7 }
		}
	}
}

#The IPO has gone well
news_event = {
	id = gulf.7
	title = gulf.7.t
	desc = gulf.7.d
	
	picture = GFX_update_gdpc
		
	is_triggered_only = yes
	
	option = {
		name = gulf.7.a #Perfect!
		log = "[GetDateText]: [This.GetName]: gulf.7.a executed"
		add_political_power = 100
		set_country_flag = ipo_success
	}
}

#The IPO has flopped
news_event = {
	id = gulf.8
	title = gulf.8.t
	desc = gulf.8.d
	
	picture = GFX_market_crash
		
	is_triggered_only = yes
	
	option = {
		name = gulf.8.a #A sad day for our country...
		log = "[GetDateText]: [This.GetName]: gulf.8.a executed"
		add_political_power = -100
		set_country_flag = ipo_failure
	}
}

#A Unique Proposal from the New [FROM.GetAdjective] Leadership
country_event = {
	id = gulf.9
	title = gulf.9.t
	desc = gulf.9.d
	
	picture = GFX_politics_negotiations
		
	is_triggered_only = yes
	
	option = {
		name = gulf.9.a #Brothers in arms!
		log = "[GetDateText]: [This.GetName]: gulf.9.a executed"
		if = {
			limit = { is_faction_leader = yes }
			add_to_faction = FROM
		}
		else_if = {
			limit = { is_faction_leader = no }
			FROM = { add_to_faction = ROOT }
		}
		FROM = {
			country_event = { days = 1 id = gulf.10  }
		}
		ai_chance = {
			factor = 1
		}
	}
	
	option = {
		name = gulf.9.b #We have no need of an alliance.
		log = "[GetDateText]: [This.GetName]: gulf.9.a executed"
		FROM = {
			country_event = { days = 1 id = gulf.11 }
		}
		ai_chance = {
			factor = 0
			modifier = {
				add = 10
				FROM = { has_war = yes }
			}
		}
	}
}

#Alliance Established!
country_event = {
	id = gulf.10
	title = gulf.10.t
	desc = gulf.10.d
	
	picture = GFX_politics_negotiations
		
	is_triggered_only = yes
	
	option = {
		name = gulf.10.a #Truly a joyous occasion!
		log = "[GetDateText]: [This.GetName]: gulf.10.a executed"
		add_political_power = 10
	}
}

#Our offer has been rejected...
country_event = {
	id = gulf.11
	title = gulf.11.t
	desc = gulf.11.d
	
	picture = GFX_treaty_rejected
		
	is_triggered_only = yes
	
	option = {
		name = gulf.11.a #A dark day...
		log = "[GetDateText]: [This.GetName]: gulf.11.a executed"
		add_political_power = -10
	}
}

#[FROM.GetAdjective] Irredentism Threatens our Sovereignty
country_event = {
	id = gulf.12
	title = gulf.12.t
	desc = gulf.12.d
	
	picture = GFX_report_event_generic_islamic_rally
		
	is_triggered_only = yes
	
	option = {
		name = gulf.12.a #We should criticize this declaration!
		log = "[GetDateText]: [This.GetName]: gulf.12.a executed"
		add_political_power = 50
		add_opinion_modifier = {
			target = FROM
			modifier = territorial_violation
		}
		ai_chance = {
			factor = 1
		}
	}
	
	option = {
		name = gulf.12.b #We must strike first!
		log = "[GetDateText]: [This.GetName]: gulf.12.b executed"
		add_war_support = 0.05
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
		ai_chance = {
			factor = 0
			modifier = {
				add = 10
				strength_ratio = {
					tag = FROM
					ratio > 2
				}
			}
		}
	}
}

#The Establishment of [FROM.GetNameDef]
news_event = {
	id = gulf.13
	title = gulf.13.t
	desc = gulf.13.d
	
	picture = GFX_trade_agreement
		
	is_triggered_only = yes
	
	option = {
		name = gulf.13.a #A republican triumph.
		log = "[GetDateText]: [This.GetName]: gulf.13.a executed"
	}
}

#High Level Summit Held Between Turkey and [FROM.GetNameDef]
news_event = {
	id = gulf.14
	title = gulf.14.t
	desc = gulf.14.d
	
	picture = GFX_trade_agreement
		
	is_triggered_only = yes
	
	option = {
		name = gulf.14.a #Power dynamics are shifting.
		log = "[GetDateText]: [This.GetName]: gulf.14.a executed"
	}
}

#[FROM.GetLeader] Condemns Turkey's Involvement in Regional Politics
news_event = {
	id = gulf.15
	title = gulf.15.t
	desc = gulf.15.d
	
	picture = GFX_news_press_conference
		
	is_triggered_only = yes
	
	option = {
		name = gulf.15.a #Turkey's ambitions are being challenged.
		log = "[GetDateText]: [This.GetName]: gulf.15.a executed"
	}
}

#[FROM.GetLeader] Pushes for Coalition Against Assad
country_event = {
	id = gulf.16
	title = gulf.16.t
	desc = gulf.16.d
	
	picture = GFX_Assad_parade
		
	is_triggered_only = yes
	
	option = {
		name = gulf.16.a #Time to bring down the dictator.
		log = "[GetDateText]: [This.GetName]: gulf.16.a executed"
		if = {
			limit = { tag = USA }
			every_country = {
				limit = {
					OR = {
						has_idea = NATO_member
						if = {
							limit = { NOT = { SYR = { has_idea = LoAS_member } } }
							has_idea = LoAS_member
						}
					}
					NOT = { tag = SYR }
					NOT = { tag = FSA }
					NOT = { has_country_flag = proposed_coalition_against_assad }
				}
				country_event = { id = gulf.16 }
			}
			if = {
				limit = { threat < 0.1 }
				add_threat = 10
			}
			every_country = { news_event = { days = 2 id = gulf.18 } }
		}
		if = {
			limit = {
				OR = {
					has_idea = intervention_isolation
					has_idea = intervention_local_security
					has_idea = intervention_limited_interventionism
				}
			}
			add_ideas = intervention_regional_interventionism
		}
		add_ai_strategy = { type = send_volunteers_desire id = FSA value = 200 }
		add_ai_strategy = { type = support id = FSA value = 200 }
		add_war_support = 0.05
		add_political_power = -100
		ai_chance = {
			factor = 10
			modifier = {
				add = 20
				has_government = democratic
			}
			modifier = {
				add = 10
				has_idea = intervention_regional_interventionism
			}
			modifier = {
				add = 10
				has_idea = intervention_global_interventionism
			}
			modifier = {
				add = -10
				OR = {
					has_country_flag = Operation_iraqi_freedom
					has_start_date > 2016.01.01
				}
			}
			modifier = {
				add = 10
				if = {
					limit = { BHR = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = BHR
						value > 19
					}
				}
				else_if = {
					limit = { KUW = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = KUW
						value > 19
					}
				}
				else_if = {
					limit = { OMA = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = OMA
						value > 19
					}
				}
				else_if = {
					limit = { QAT = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = QAT
						value > 19
					}
				}
				else_if = {
					limit = { SAU = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = SAU
						value > 19
					}
				}
				else_if = {
					limit = { UAE = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = UAE
						value > 19
					}
				}
			}
			modifier = {
				add = 10
				if = {
					limit = { BHR = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = BHR
						value > 49
					}
				}
				else_if = {
					limit = { KUW = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = KUW
						value > 49
					}
				}
				else_if = {
					limit = { OMA = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = OMA
						value > 49
					}
				}
				else_if = {
					limit = { QAT = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = QAT
						value > 49
					}
				}
				else_if = {
					limit = { SAU = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = SAU
						value > 49
					}
				}
				else_if = {
					limit = { UAE = { has_country_flag = proposed_coalition_against_assad } }
					has_opinion = {
						target = UAE
						value > 49
					}
				}
			}
			modifier = {
				add = 20
				if = {
					limit = { BHR = { has_country_flag = proposed_coalition_against_assad } }
					check_variable = { influence_array^0 = BHR }
				}
				else_if = {
					limit = { KUW = { has_country_flag = proposed_coalition_against_assad } }
					check_variable = { influence_array^0 = KUW }
				}
				else_if = {
					limit = { OMA = { has_country_flag = proposed_coalition_against_assad } }
					check_variable = { influence_array^0 = OMA }
				}
				else_if = {
					limit = { QAT = { has_country_flag = proposed_coalition_against_assad } }
					check_variable = { influence_array^0 = QAT }
				}
				else_if = {
					limit = { SAU = { has_country_flag = proposed_coalition_against_assad } }
					check_variable = { influence_array^0 = SAU }
				}
				else_if = {
					limit = { UAE = { has_country_flag = proposed_coalition_against_assad } }
					check_variable = { influence_array^0 = UAE }
				}
			}
		}
	}
	
	option = {
		name = gulf.16.b #We cannot risk a clash with Russia and Iran.
		log = "[GetDateText]: [This.GetName]: gulf.16.b executed"
		ai_chance = {
			factor = 10
			modifier = {
				add = 20
				has_idea = intervention_local_security
			}
			modifier = {
				add = 50
				has_idea = intervention_isolation
			}
			modifier = {
				add = 50
				NOT = { has_government = democratic }
			}
		}
	}
}

#[USA.GetLeader] Has Refused to Support an Anti-Assad Coalition!
country_event = {
	id = gulf.17
	title = gulf.17.t
	desc = gulf.17.d
	
	picture = GFX_USA_generic
		
	is_triggered_only = yes
	
	option = {
		name = gulf.17.a #We must take matters into our own hands!
		log = "[GetDateText]: [This.GetName]: gulf.17.a executed"
		create_wargoal = {
			type = puppet_wargoal_focus
			target = SYR
		}
	}
	
	option = {
		name = gulf.17.b #We are not ready for an operation of this magnitude...
		log = "[GetDateText]: [This.GetName]: gulf.17.b executed"
	}
}

#International Coalition Begins Operations in Syria
news_event = {
	id = gulf.18
	title = gulf.18.t
	desc = {
		text = gulf.18.d
		trigger = { SYR = { NOT = { has_idea = LoAS_member } } }
	}
	desc = {
		text = gulf.18.d_NATO_only
		trigger = { SYR = { has_idea = LoAS_member } } 
	}
	
	picture = GFX_afghanistan_war4
		
	is_triggered_only = yes
	
	option = {
		trigger = { 
			OR = {	
				has_government = democratic 
				tag = SAU
			}
		}
		name = gulf.18.a #Human rights must be defended!
		log = "[GetDateText]: [This.GetName]: gulf.18.a executed"
	}
	
	option = {
		trigger = { NOT = { has_government = democratic tag = SAU } }
		name = gulf.18.b #This is an unacceptable violation of state sovereignty!
		log = "[GetDateText]: [This.GetName]: gulf.18.b executed"
	}
}
