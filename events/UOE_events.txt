###################
### USoE events ###
###################

add_namespace = USoEevent ### next free ID 2
add_namespace = UOEEvent

#Military Revolting due to military revolt mechanic, or new government timeout
country_event = {
	id = UOEEvent.1
	title = UOEEvent.1.t
	desc = UOEEvent.1.d

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = UOE
	}
	#peaceful coup
	option = {
		name = UOEEvent.1.a
		log = "[GetDateText]: [Root.GetName]: event UOEEvent.1.a"
		UOE = {
			set_temp_variable = { party_sel = ruling_party^0 }
			set_temp_variable = { party_amnt = party_pop_array^party_sel }

			add_to_temp_variable = { party_1 = party_amnt }
			add_to_temp_variable = { party_1 = party_pop_array^0 }

			set_variable = { party_pop_array^party_sel = 0 }
			set_variable = { party_pop_array^0 = party_1}

			clear_array = ruling_party
			add_to_array = { ruling_party = 0 }
			set_country_flag = military_takeover
			remove_mission = form_a_government
			remove_mission = military_coup_start
			remove_dynamic_modifier = { modifier = UOE_founding_a_new_nation_modifier }
		}

		ai_chance = {
			factor = 5
		}
	}
	#civil war
	option = {
		name = UOEEvent.1.b
		log = "[GetDateText]: [Root.GetName]: event UOEEvent.1.b"

		UOE = {
			#scale the ratio based on how much the military wants to revolt
			start_civil_war = {
				ideology = nationalist
				size = 0.6
				army_ratio = 0.6
				navy_ratio = 0.6
				air_ratio = 0.6
			}

			remove_mission = form_a_government
			remove_mission = military_coup_start
		}

		ai_chance = {
			factor = 2
		}
	}
}

#Low productivity states leaving due to unrest
country_event = {
	id = UOEEvent.2
	title = UOEEvent.2.t
	desc = UOEEvent.2.d

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = UOE
	}

	option = {
		name = UOEEvent.2.a
		log = "[GetDateText]: [Root.GetName]: event UOEEvent.2.a"
		UOE = {

		}

		ai_chance = {
			factor = 5
		}
	}
	option = {
		name = UOEEvent.2.b
		log = "[GetDateText]: [Root.GetName]: event UOEEvent.2.b"
		UOE = {
			start_civil_war = {
				ideology = neutrality
				states = all
				states_filter = {
					check_variable = { productivity_state_var < UOE.overall_productivity }
				}
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#high producitivty states leaving due to unrest
country_event = {
	id = UOEEvent.3
	title = UOEEvent.3.t
	desc = UOEEvent.3.d

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = UOE
	}

	option = {
		name = UOEEvent.3.a
		log = "[GetDateText]: [Root.GetName]: event UOEEvent.3.a"
		UOE = {

		}

		ai_chance = {
			factor = 5
		}
	}
	option = {
		name = UOEEvent.3.b
		log = "[GetDateText]: [Root.GetName]: event UOEEvent.3.b"
		UOE = {
			start_civil_war = {
				ideology = neutrality
				states = all
				states_filter = {
					check_variable = { productivity_state_var > UOE.overall_productivity }
				}
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}