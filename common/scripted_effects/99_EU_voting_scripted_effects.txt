# Author(s): AngriestBird, Doolittle
# General EU Voting AI

# Utils for the common sections
EU_update_AI_general_voting_modifiers = {
	### modifiers for influence of ROOT on all other EU members
	if = { limit = { influence_higher_5 = yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 5 }
	}
	if = { limit = { influence_higher_10 = yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 5 }
	}
	if = { limit = { influence_higher_20 = yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 10 }
	}
	if = { limit = { influence_higher_30 = yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 10 }
	}
	if = { limit = { influence_higher_50 = yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 15 }
	}
	# Modifiers for Eurosceptism
	if = { limit = { check_variable = { var = THIS.eurosceptic value = 0.1 compare = greater_than_or_equals } }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -5 }
	}
	if = { limit = { check_variable = { var = THIS.eurosceptic value = 0.2 compare = greater_than_or_equals } }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -5 }
	}
	if = { limit = { check_variable = { var = THIS.eurosceptic value = 0.3 compare = greater_than_or_equals } }
		add_to_temp_variable = { var = EU_AI_general_voting_modifier_YES value = -5 } ### ai chance yes -5 no +5
	}
	if = { limit = { check_variable = { var = THIS.eurosceptic value = 0.5 compare = greater_than_or_equals } }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -10 }
	}
	if = { limit = { check_variable = { var = THIS.eurosceptic value = 0.7 compare = greater_than_or_equals } }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -20 }
	}
	# if China or Russia have significant influence, AI will not support measures
	if = { limit = { EU_external_sov_chi_influence_15 = yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -100 }
	}
	if = { limit = { EU_external_sov_chi_influence_10 = yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -50 }
	}
	if = { limit = { EU_external_sov_chi_influence_5 = yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -25 }
	}

	if = {
		limit = { is_subject = yes }
		if = {
			limit = {
				OVERLORD = {
					is_in_array = { global.EU_active_vote_supporters = THIS.id }
				}
			}
			add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = 25 }
		}
		else = {
			add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = -25 }
		}
	}

	# AI Difficulty check
	if = { limit = { has_global_flag = EUU_player_proposed_law }
		if = { limit = { difficulty > 1 }
			add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -10 }
		}
		if = { limit = { difficulty > 2 }
			add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -10 }
		}
		if = { limit = { difficulty > 3 }
			add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = -10 }
		}
	}
	else = {
		if = { limit = { difficulty > 1 }
			add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 10 }
		}
		if = { limit = { difficulty > 2 }
			add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 10 }
		}
		if = { limit = { difficulty > 3 }
			add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 10 }
		}
	}

	if = {
		limit = { has_global_flag = EUU_all_nations_vote_yes }
		add_to_temp_variable = { var = EU_AI_focus_modifier_yes_vote value = 250 }
	}

	# Common Law Section, this is something that can and is repeated so we will be tucking it in here with the general modifiers since that goes at the end.
	if = {
		limit = { is_ai = yes }
		if = {
			limit = { check_variable = { EU_AI_focus_modifier_yes_vote > 0 } }
			add_to_variable = { global.EU_active_vote_yes = 1 }
			add_to_array = { global.EU_active_vote_supporters = THIS }
			set_temp_variable = { add_ratio_value = THIS.var_EUpopRatio }
			add_to_variable = { global.var_EUpopRatioYes = add_ratio_value }
		}
		else = {
			add_to_variable = { global.EU_active_vote_no = 1 }
			add_to_array = { global.EU_active_vote_rejecters = THIS }
			set_temp_variable = { add_ratio_value = THIS.var_EUpopRatio }
			add_to_variable = { global.var_EUpopRatioNo = add_ratio_value }
		}
	}
	if = { limit = { is_debug = yes }
		log = "[GetDateText]: [THIS.GetName]: AI Voting Weight on EU Law Index: [?v], AI Weight: [?EU_AI_focus_modifier_yes_vote]"
	}
	update_eu_dirty_variable = yes
}

EU_law_party_value_weight = {
	if = {
		limit = {
			OR = {
				is_in_array = { ruling_party = 1 } ### conservatism
				is_in_array = { ruling_party = 6 } ### Conservative
				is_in_array = { ruling_party = 14 } ### Neutral_conservatism
			}
		}
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = value1 }
	}
	else_if = {
		limit = {
			OR = {
				is_in_array = { ruling_party = 2 } ### liberalism
				is_in_array = { ruling_party = 16 } ### Neutral_Libertarian
			}
		}
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = value2 }
	}
	else_if = {
		limit = {
			OR = {
				is_in_array = { ruling_party = 3 } ### socialism
				is_in_array = { ruling_party = 18 } ### neutral_Social
			}
		}
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = value3 }
	}
	else_if = { limit = { is_in_array = { ruling_party = 17 } } ### Neutral_green
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = value4 }
	}
	else_if = {
		limit = {
				OR = {
					is_in_array = { ruling_party = 4 } ### Communist-State
					is_in_array = { ruling_party = 5 } ### anarchist_communism
					is_in_array = { ruling_party = 19 } ### Neutral_Communism
				}
		}
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = value5 }
	}
	else_if = {
		limit = {
			OR = {
				is_in_array = { ruling_party = 20 } ### Nat_Populism
				is_in_array = { ruling_party = 21 } ### Nat_Fascism
				is_in_array = { ruling_party = 22 } ### Nat_Autocracy
				is_in_array = { ruling_party = 23 } ### Monarchist
			}
		}
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = value6 }
	}
}

### modifier for gov_resist
EU_update_AI_focus_EU002_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 10 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU101_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 10 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU102_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 10 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU103_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -10 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU104_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU105_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU201_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -10 }
	set_temp_variable = { value2 = -25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU202_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 0 }
	set_temp_variable = { value2 = -10 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	if = { limit = { has_stability < 0.40 }
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = 10 }
	}

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU203_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -25 }
	set_temp_variable = { value2 = -25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	# Interest Rate Check
	if = { limit = { check_variable = { interest_rate > 10 } }
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = 10 }
	}
	if = { limit = { check_variable = { interest_rate > 12 } }
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = 10 }
	}
	if = { limit = { check_variable = { interest_rate > 14 } }
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = 10 }
	}
	if = { limit = { check_variable = { interest_rate > 16 } }
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = 10 }
	}
	if = { limit = { check_variable = { interest_rate > 18 } }
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = 10 }
	}
	if = { limit = { check_variable = { interest_rate > 20 } }
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = 10 }
	}

	if = {
		limit = {
			check_variable = { interest_rate > 5.5 }
			check_variable = { interest_rate < 7.6 }
		}
		add_to_temp_variable = { EU_AI_focus_modifier_yes_vote = -10 }
	}

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU204_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 0 }
	set_temp_variable = { value2 = -25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU205_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 0 }
	set_temp_variable = { value2 = -25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU206_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -25 }
	set_temp_variable = { value2 = -25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU207_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -10 }
	set_temp_variable = { value2 = 0 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU208_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -10 }
	set_temp_variable = { value2 = 0 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU301_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 10 }
	set_temp_variable = { value5 = -25 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU302_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 10 }
	set_temp_variable = { value5 = -25 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU303_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 10 }
	set_temp_variable = { value5 = -25 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU304_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = -25 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU305_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 10 }
	set_temp_variable = { value4 = -10 }
	set_temp_variable = { value5 = -25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU306_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 10 }
	set_temp_variable = { value4 = -10 }
	set_temp_variable = { value5 = -25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU307_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU308_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = -10 }
	set_temp_variable = { value3 = -10 }
	set_temp_variable = { value4 = -25 }
	set_temp_variable = { value5 = -25 }
	set_temp_variable = { value6 = 10 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU401_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 10 }
	set_temp_variable = { value2 = -10 }
	set_temp_variable = { value3 = 10 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 10 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU402_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = -25 }
	set_temp_variable = { value3 = -10 }
	set_temp_variable = { value4 = -25 }
	set_temp_variable = { value5 = -25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU403_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 10 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 10 }
	set_temp_variable = { value4 = 10 }
	set_temp_variable = { value5 = 10 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU404_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -10 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU405_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = -10 }
	set_temp_variable = { value3 = 10 }
	set_temp_variable = { value4 = -10 }
	set_temp_variable = { value5 = -10 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU406_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 0 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 10 }
	set_temp_variable = { value4 = 10 }
	set_temp_variable = { value5 = 0 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU407_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 10 }
	set_temp_variable = { value4 = -10 }
	set_temp_variable = { value5 = -10 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU408_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 10 }
	set_temp_variable = { value3 = 10 }
	set_temp_variable = { value4 = -10 }
	set_temp_variable = { value5 = -10 }
	set_temp_variable = { value6 = 25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}

EU_update_AI_focus_EU601_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU602_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU603_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU703_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 0 }
	set_temp_variable = { value2 = 0 }
	set_temp_variable = { value3 = 0 }
	set_temp_variable = { value4 = 0 }
	set_temp_variable = { value5 = 0 }
	set_temp_variable = { value6 = 0 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU110_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 10 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU111_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -10 }
	set_temp_variable = { value2 = -10 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU112_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 10 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU605_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU606_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU607_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU608_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU609_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU610_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = 25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}
EU_update_AI_focus_EU611_voting_modifier = {
	set_temp_variable = { EU_AI_focus_modifier_yes_vote = 0 }

	set_temp_variable = { value1 = -25 }
	set_temp_variable = { value2 = 25 }
	set_temp_variable = { value3 = 25 }
	set_temp_variable = { value4 = 25 }
	set_temp_variable = { value5 = 25 }
	set_temp_variable = { value6 = -25 }
	EU_law_party_value_weight = yes

	EU_update_AI_general_voting_modifiers = yes
}

# QMV Results Section
# EU002 - European Candidate
focus_EU002_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU002_QMV_yes

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU002_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU101 - Charter of Fundamental Rights of the European Union
focus_EU101_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU101_QMV_yes

		every_country = {
			limit = {
				has_idea = EU_member
			}
			add_ideas = EUU_cfr_eu
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU101_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU102 - European Convention
focus_EU102_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU102_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			if = { limit = { has_idea = european_spirit }
				modify_timed_idea = { idea = european_spirit days = 600 }
			}
			else = {
				add_timed_idea = { idea = european_spirit days = 600 }
			}
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU102_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU103 - European Constitution
focus_EU103_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU103_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			if = { limit = { has_idea = european_spirit }
				modify_timed_idea = { idea = european_spirit days = 600 }
			}
			else = {
				add_timed_idea = { idea = european_spirit days = 600 }
			}
		}
		set_global_flag = european_constitution

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU103_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU104 - Treaty of Lisbon
focus_EU104_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU104_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			if = { limit = { has_idea = european_spirit }
				modify_timed_idea = { idea = european_spirit days = 600 }
			}
			else = {
				add_timed_idea = { idea = european_spirit days = 600 }
			}
		}
		set_global_flag = treaty_of_lisbon

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU104_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU105 - European External Action Service
focus_EU105_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU105_QMV_yes
		set_global_flag = EU_foreign_minister

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU105_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU201 - ECB Intervention
focus_EU201_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU201_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_ideas = ECB_zero_interest_rate_policy
		}
		set_global_flag = ECB_intervention

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU201_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU202 - European Banking Union
focus_EU202_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU202_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_stability = 0.05
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU202_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU203 - Eurobonds
focus_EU203_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU203_QMV_yes

		if = {
			limit = {
				any_of_scopes = {
					array = global.EU_member
					has_idea = european_debt_crisis
				}
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				remove_ideas = european_debt_crisis
			}
		}
		every_country = {
			limit = {
				has_idea = EU_member
			}
			add_ideas = euro_bonds
		}

		set_temp_variable = { eurobonds_debt_total = 0 }
		clear_temp_array = debt_consumers
		set_temp_variable = { debt_consumer_counter = 0 }

		for_each_scope_loop = {
			array = global.EU_member

			if = {
				limit = {
					check_variable = { interest_rate > 7.5 }
					check_variable = { debt_ratio > 0.75 }
				}
				set_temp_variable = { current_debt = debt }
				multiply_temp_variable = { current_debt = 0.075 }
				add_to_temp_variable = { eurobonds_debt_total = current_debt }

				subtract_from_variable = { debt = current_debt }
			}
			if = {
				limit = {
					NOT = { check_variable = { interest_rate > 7.5 } }
					check_variable = { debt_ratio < 1.0 }
					check_variable = { EU_ratio_of_total_eu_gdp > 0.1 }
				}
				add_to_temp_array = { debt_consumers = THIS }
				add_to_temp_variable = { debt_consumer_counter = 1 }
			}
		}

		set_temp_variable = { debt_number = eurobonds_debt_total }
		multiply_temp_variable = { debt_number = 0.8 }
		divide_temp_variable = { debt_number = debt_consumer_counter }

		for_each_scope_loop = {
			array = debt_consumers

			add_to_variable = { debt = debt_number }
		}

		every_country = {
			limit = {
				has_idea = EUU_national_dept_crisis_eu
			}
			remove_ideas = EUU_national_dept_crisis_eu
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU203_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU204 - European Financial Stability Facility
focus_EU204_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU204_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_stability = 0.10
		}
		POR = { activate_mission = troika_reforms }
		ITA = { activate_mission = troika_reforms }
		IRE = { activate_mission = troika_reforms }
		GRE = { activate_mission = troika_reforms }
		SPR = { activate_mission = troika_reforms }
		CYP = { activate_mission = troika_reforms }

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU204_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU205 - European Stability Mechanism (ESM)
focus_EU205_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU205_QMV_yes

		if = {
			limit = {
				any_of_scopes = {
					array = global.EU_member
					has_idea = european_debt_crisis
				}
			}
			every_country = {
				limit = {
					has_idea = EU_member
				}
				remove_ideas = european_debt_crisis
			}
		}
		every_country = {
			limit = {
				has_idea = EU_member
			}
			add_ideas = euro_rescue_package
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU205_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU206 - Fiscal Union
focus_EU206_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU206_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_ideas = fiscal_union
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU206_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU207 - European Economic Government
focus_EU207_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU207_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }

			add_ideas = European_Economic_Government
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU207_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU208 - European Minister of Economy and Finance
focus_EU208_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU208_QMV_yes
		set_global_flag = EU_finance_minister

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU208_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU301 - European Defence Agency
focus_EU301_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU301_QMV_yes

		every_country = {
			limit = {
				has_idea = EU_member
			}
			add_to_tech_sharing_group = EU_Tech_Share
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU301_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU302 - Permanent Structured Cooperation (PESCO)
focus_EU302_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU302_QMV_yes

		modify_tech_sharing_bonus = { id = EU_Tech_Share bonus = 0.08 }

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU302_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU303 - European Defence Fund
focus_EU303_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU303_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_ideas = European_Defence_Fund
		}
		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU303_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU304 - European Security Council
focus_EU304_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU304_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_ideas = European_Security_Council
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU304_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU305 - EuroArmy
focus_EU305_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU305_QMV_yes
		set_global_flag = euro_army

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU305_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU306 - EuroNavy
focus_EU306_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU306_QMV_yes
		set_global_flag = euro_navy

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU306_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU307 - EU Permanent Member of the UNSC
focus_EU307_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU307_QMV_yes
		set_global_flag = EU_UNSC

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU307_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU308 - EU Nuclear Power
focus_EU308_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU308_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_ideas = nuclear_power_def
		}
		set_global_flag = EU_nuke_power

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU308_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU401 - General Data Protection Regulation
focus_EU401_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU401_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_ideas = EUU_idea_gdpr
			remove_ideas = foreign_data_kraken
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU401_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU402 - Directive on Copyright in the Digital Single Market
focus_EU402_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU402_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_ideas = EU_copyright
			set_temp_variable = { party_index = 1 }
			set_temp_variable = { party_popularity_increase = -0.03 }
			set_temp_variable = { temp_outlook_increase = -0.03 }
			add_relative_party_popularity = yes
			set_temp_variable = { party_index = 6 }
			add_relative_party_popularity = yes
			set_temp_variable = { party_index = 14 }
			add_relative_party_popularity = yes
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU402_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU403 - Dublin II Regulation
focus_EU403_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU403_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			remove_ideas = asylum_shopping
			set_temp_variable = { party_index = 20 }
			set_temp_variable = { party_popularity_increase = 0.03 }
			set_temp_variable = { temp_outlook_increase = 0.03 }
			add_relative_party_popularity = yes
		}
		set_global_flag = dublin_II

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU403_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU404 - Relocation and Resettlement of Asylum Seekers
focus_EU404_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU404_QMV_yes

		every_country = {
			limit = {
				has_idea = EU_member
			}
			if = {
				limit = { has_global_flag = EUU_migrant_crisis_triggered }
				remove_ideas = Migrant_Crisis_Europe
			}
			add_ideas = relocation_asylum_seekers
			set_temp_variable = { party_index = 20 }
			set_temp_variable = { party_popularity_increase = 0.05 }
			set_temp_variable = { temp_outlook_increase = 0.05 }
			add_relative_party_popularity = yes
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU404_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU405 - EU-Turkey Deal
focus_EU405_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU405_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			if = {
				limit = { has_global_flag = EUU_migrant_crisis_triggered }
				remove_ideas = Migrant_Crisis_Europe
			}
			add_ideas = EU_Turkey_deal
		}
		TUR = {
			set_temp_variable = { treasury_change = 3 }
			modify_treasury_effect = yes
		}
		for_each_scope_loop = {
			array = global.EU_member
			ROOT = {
				set_temp_variable = { temp1 = THIS.var_EUpopRatio }
				multiply_temp_variable = { temp1 = 3.0 }
				subtract_from_temp_variable = { temp1 = THIS.treasury }
				ingame_update_setup = yes
			}
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU405_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU406 - European Asylum Agency
focus_EU406_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU406_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			remove_ideas = relocation_asylum_seekers
			remove_ideas = EU_Turkey_deal
			add_ideas = European_Asylum_Agency
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU406_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU407 - Frontex
focus_EU407_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU407_QMV_yes

		every_country = {
			limit = { has_idea = EU_member }
			add_ideas = Frontex
		}

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU407_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU408 - European Border and Coast Guard Agency
focus_EU408_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU408_QMV_yes
		set_global_flag = frontex_ExDir

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU408_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU601 - 2003 EU Enlargement
focus_EU601_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU601_QMV_yes

		cleanup_european_union_voting_yes = yes

		CYP = { set_country_flag = EU_candidate }
		CZE = { set_country_flag = EU_candidate }
		EST = { set_country_flag = EU_candidate }
		HUN = { set_country_flag = EU_candidate }
		LAT = { set_country_flag = EU_candidate }
		LIT = { set_country_flag = EU_candidate }
		MLT = { set_country_flag = EU_candidate }
		POL = { set_country_flag = EU_candidate }
		SLO = { set_country_flag = EU_candidate }
		SLV = { set_country_flag = EU_candidate }
		add_to_array = { global.EU_candidates = CYP }
		add_to_array = { global.EU_candidates = CZE }
		add_to_array = { global.EU_candidates = EST }
		add_to_array = { global.EU_candidates = HUN }
		add_to_array = { global.EU_candidates = LAT }
		add_to_array = { global.EU_candidates = LIT }
		add_to_array = { global.EU_candidates = MLT }
		add_to_array = { global.EU_candidates = POL }
		add_to_array = { global.EU_candidates = SLO }
		add_to_array = { global.EU_candidates = SLV }
	}
	else = { # QMV - no
		set_country_flag = focus_EU601_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

# EU602 - 2007 EU Enlargement
focus_EU602_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU602_QMV_yes

		cleanup_european_union_voting_yes = yes
		BUL = { set_country_flag = EU_candidate }
		ROM = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = BUL }
		add_to_array = { global.EU_candidates = ROM }
	}
	else = { # QMV - no
		set_country_flag = focus_EU602_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU603 - 2013 EU Enlargement ###
focus_EU603_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU603_QMV_yes

		cleanup_european_union_voting_yes = yes

		CRO = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = CRO }
	}
	else = { # QMV - no
		set_country_flag = focus_EU603_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU703
focus_EU703_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU703_QMV_yes

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU703_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU110 - Federalisation of the European Union ###
focus_EU110_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU110_QMV_yes

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU110_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU111 - United States of Europe ###
focus_EU111_QMV_result = {
	if = { # QMV - yes
		limit = {
			OR = {
				is_debug = yes
				EU_voting_decision_result_trigger = yes
			}
			always = yes
		}
		set_country_flag = focus_EU111_QMV_yes

		#Removes all EU members who voted against the merge, and removes all candiates
		for_each_scope_loop = {
			array = global.EU_active_vote_rejecters
			remove_ideas = EU_member
		}
		every_country = {
			limit = { has_country_flag = EU_canidate }
			clr_country_flag = EU_canidate
		}

		#Initial state transfer, enables the missile sysetm on the UOE before adding missiles
		ROOT = {
			random_state = {
				transfer_state_to = UOE
			}
		}

		#Switches the initating player to the UOE, Initilizes the base variables properly
		#TODO: Add checks here for an MP game or players NOT the nation forming the UOE
		#They too should be swapped into the UOE if coop is enabled
		UOE = { change_tag_from = ROOT }

		add_to_temp_array = { eco_cycle_array = 0 } #Depression(0) Recession(1) Stagnation(2) Stable(3) Fast(4) Booming (5)
		resize_temp_array = { eco_cycle_array = 6 }

		add_to_temp_array = { corpt_array = 0 } #Paralyzing(0) -> Negligible (9)
		resize_temp_array = { corpt_array = 10 }

		add_to_temp_array = { beuarc_array = 0 } #Decentralized -> Extensive
		resize_temp_array = { beuarc_array = 5 }

		add_to_temp_array = { mil_array = 0 } #No -> Total
		resize_temp_array = { mil_array = 10 }

		add_to_temp_array = { sec_array = 0 } #Minimal -> Police State
		resize_temp_array = { sec_array = 5 }

		add_to_temp_array = { edu_array = 0 } #Basic -> Free Universal
		resize_temp_array = { edu_array = 5 }

		add_to_temp_array = { health_array = 0 } #Minimal -> Advansed Universal
		resize_temp_array = { health_array = 6 }

		add_to_temp_array = { soc_array = 0 } #Minimal -> Extensive Welfare
		resize_temp_array = { soc_array = 6 }

		add_to_temp_array = { eco_array = 0 } #Closed -> Globalized
		resize_temp_array = { eco_array = 6 }

		set_temp_variable = { merged_states = 0 } #how many states have been merged
		set_temp_variable = { stab_merge_tracker = 0 }
		resize_array = { UOE.eu_technologies = 0 }
		hidden_effect = {
			every_country = {
				limit = { has_idea = EU_member }
				#Pulls all techs into a single array to apply later
				for_each_loop = {
					array = researched_techs
					value = v
					if = {
						limit = {
							NOT = { is_in_array = { UOE.eu_technologies = v } }
						}
						add_to_array = { UOE.eu_technologies = v }
						log = "[THIS.GetTag] technology [?v.GetTokenKey] added to UOE"
					}
				}
				log = "Final Tech Array Verify [?UOE.eu_technologies^0.GetTokenKey]"
				#Sets all military assets to UOE, and cores all current states for UOE
				set_country_flag = USoE_member
				every_unit_leader = {
					set_unit_leader_flag = USoE_unit_leader
					set_nationality = UOE
					add_unit_leader_trait = military_reorganization
				}
				every_owned_state = {
					limit = {
						OR = {
							is_on_continent = europe
							is_core_of = GEO
							is_core_of = ARM
							is_core_of = AZE
							is_core_of = TUR
							is_core_of = POR
							is_core_of = SPR
						}
						NOT = { is_core_of = UOE }
					}
					add_core_of = UOE
				}

				#Dynamically pull and set all the idea variables, weeeeeee

				#Sets Starting Culture BOP Information
				if = { limit = { OR = { democratic > 0.2 neutrality > 0.2 } }
					add_to_variable = { UOE.cult_start_bias = -0.03 }
					add_to_variable = { UOE.west_start_track = 1 }
					add_to_array = { UOE.western_nation = THIS }
				}
				if = { limit = { OR = { nationalist > 0.2 communism > 0.2 } }
					add_to_variable = { UOE.cult_start_bias = 0.03 }
					add_to_variable = { UOE.east_start_track = 1 }
					add_to_array = { UOE.eastern_nation = THIS }
				}

				#Pulls and sets all info for internal faction selection
				if = { limit = { has_idea = small_medium_business_owners }
					add_to_variable = { UOE.small_medium_bus_op_track = small_medium_business_owners_opinion }
					add_to_temp_variable = { small_medium_bus_track = 1 }
				}
				if = { limit = { has_idea = international_bankers }
					add_to_variable = { UOE.international_bankers_op_track = international_bankers_opinion }
					add_to_temp_variable = { internatioanl_bankers_track = 1 }
				}
				if = { limit = { has_idea = fossil_fuel_industry }
					add_to_variable = { UOE.fossil_fuel_industry_op_track = fossil_fuel_industry_opinion }
					add_to_temp_variable = { fossil_fuel_industry_track = 1 }
				}
				if = { limit = { has_idea = industrial_conglomerates }
					add_to_variable = { UOE.industrial_conglomerates_op_track = industrial_conglomerates_opinion }
					add_to_temp_variable = { industrial_conglomerates_track = 1 }
				}
				if = { limit = { has_idea = oligarchs }
					add_to_variable = { UOE.oligarchs_op_track = oligarchs_opinion }
					add_to_temp_variable = { oligarchs_track = 1 }
				}
				if = { limit = { has_idea = maritime_industry }
					add_to_variable = { UOE.maritime_industry_op_track = maritime_industry_opinion }
					add_to_temp_variable = { maritime_industry_track = 1 }
				}
				if = { limit = { has_idea = defense_industry }
					add_to_variable = { UOE.defense_industry_op_track = defense_industry_opinion }
					add_to_temp_variable = { defense_industry_track = 1 }
				}
				if = { limit = { has_idea = the_military }
					add_to_variable = { UOE.the_military_op_track = the_military_opinion }
					add_to_temp_variable = { the_military_track = 1 }
				}
				if = { limit = { has_idea = intelligence_community }
					add_to_variable = { UOE.intelligence_community_op_track = intelligence_community_opinion }
					add_to_temp_variable = { intelligence_community_track = 1 }
				}
				if = { limit = { has_idea = labour_unions }
					add_to_variable = { UOE.labour_unions_op_track = labour_unions_opinion }
					add_to_temp_variable = { labour_unions_track = 1 }
				}
				if = { limit = { has_idea = landowners }
					add_to_variable = { UOE.landowners_op_track = landowners_opinion }
					add_to_temp_variable = { landowners_track = 1 }
				}
				if = { limit = { has_idea = farmers }
					add_to_variable = { UOE.farmers_op_track = farmers_opinion }
					add_to_temp_variable = { farmers_track = 1 }
				}
				if = { limit = { has_idea = communist_cadres }
					add_to_variable = { UOE.communist_cadres_op_track = communist_cadres_opinion }
					add_to_temp_variable = { communist_cadres_track = 1 }
				}
				if = { limit = { has_idea = the_priesthood }
					add_to_variable = { UOE.the_priesthood_op_track = the_priesthood_opinion }
					add_to_temp_variable = { the_priesthood_track = 1 }
				}
				if = { limit = { has_idea = the_ulema }
					add_to_variable = { UOE.the_ulema_op_track = the_ulema_opinion }
					add_to_temp_variable = { the_ulema_track = 1 }
				}
				if = { limit = { has_idea = the_clergy }
					add_to_variable = { UOE.the_clergy_op_track = the_clergy_opinion }
					add_to_temp_variable = { the_clergy_track = 1 }
				}
				if = { limit = { has_idea = wahabi_ulema }
					add_to_variable = { UOE.wahabi_ulema_op_track = wahabi_ulema_opinion }
					add_to_temp_variable = { wahabi_ulema_track = 1 }
				}

				#Pulls and sets all info for laws
				if = { limit = { has_idea = economic_boom }
					add_to_temp_variable = { eco_cycle_array^5 = 1 }
				}else_if = { limit = { has_idea = fast_growth }
					add_to_temp_variable = { eco_cycle_array^4 = 1 }
				}else_if = { limit = { has_idea = stable_growth }
					add_to_temp_variable = { eco_cycle_array^3 = 1 }
				}else_if = { limit = { has_idea = stagnation }
					add_to_temp_variable = { eco_cycle_array^2 = 1 }
				}else_if = { limit = { has_idea = recession }
					add_to_temp_variable = { eco_cycle_array^1 = 1 }
				}else = {
					add_to_temp_variable = { eco_cycle_array^0 = 1 }
				}

				if = { limit = { has_idea = paralyzing_corruption }
					add_to_temp_variable = { corpt_array^9 = 1 }
				}else_if = { limit = { has_idea = crippling_corruption }
					add_to_temp_variable = { corpt_array^8 = 1 }
				}else_if = { limit = { has_idea = rampant_corruption }
					add_to_temp_variable = { corpt_array^7 = 1 }
				}else_if = { limit = { has_idea = unrestrained_corruption }
					add_to_temp_variable = { corpt_array^6 = 1 }
				}else_if = { limit = { has_idea = systematic_corruption }
					add_to_temp_variable = { corpt_array^5 = 1 }
				}else_if = { limit = { has_idea = widespread_corruption }
					add_to_temp_variable = { corpt_array^4 = 1 }
				}else_if = { limit = { has_idea = medium_corruption }
					add_to_temp_variable = { corpt_array^3 = 1 }
				}else_if = { limit = { has_idea = modest_corruption }
					add_to_temp_variable = { corpt_array^2 = 1 }
				}else_if = { limit = { has_idea = slight_corruption }
					add_to_temp_variable = { corpt_array^1 = 1 }
				}else = {
					add_to_temp_variable = { corpt_array^0 = 1 }
				}

				if = { limit = { has_idea = md_closed_economy }
					add_to_temp_variable = { eco_array^0 = 1 }
				}else_if = { limit = { has_idea = consumption_economy }
					add_to_temp_variable = { eco_array^1 = 1 }
				}else_if = { limit = { has_idea = semi_consumption_economy }
					add_to_temp_variable = { eco_array^2 = 1 }
				}
				else_if = { limit = { has_idea = mixed_economy }
					add_to_temp_variable = { eco_array^3 = 1 }
				}
				else_if = { limit = { has_idea = export_economy }
					add_to_temp_variable = { eco_array^4 = 1 }
				}
				else = {
					add_to_temp_variable = { eco_array^5 = 1 }
				}

				if = { limit = { has_idea = bureau_01 }
					add_to_temp_variable = { beuarc_array^0 = 1 }
				}else_if = { limit = { has_idea = bureau_02 }
					add_to_temp_variable = { beuarc_array^1 = 1 }
				}else_if = { limit = { has_idea = bureau_03 }
					add_to_temp_variable = { beuarc_array^2 = 1 }
				}
				else_if = { limit = { has_idea = bureau_04 }
					add_to_temp_variable = { beuarc_array^3 = 1 }
				}
				else = {
					add_to_temp_variable = { beuarc_array^4 = 1 }
				}

				if = { limit = { has_idea = police_01 }
					add_to_temp_variable = { sec_array^0 = 1 }
				}else_if = { limit = { has_idea = police_02 }
					add_to_temp_variable = { sec_array^1 = 1 }
				}else_if = { limit = { has_idea = police_03 }
					add_to_temp_variable = { sec_array^2 = 1 }
				}
				else_if = { limit = { has_idea = police_04 }
					add_to_temp_variable = { sec_array^3 = 1 }
				}
				else = {
					add_to_temp_variable = { sec_array^4 = 1 }
				}

				if = { limit = { has_idea = edu_01 }
					add_to_temp_variable = { edu_array^0 = 1 }
				}else_if = { limit = { has_idea = edu_02 }
					add_to_temp_variable = { edu_array^1 = 1 }
				}else_if = { limit = { has_idea = edu_03 }
					add_to_temp_variable = { edu_array^2 = 1 }
				}
				else_if = { limit = { has_idea = edu_04 }
					add_to_temp_variable = { edu_array^3 = 1 }
				}
				else = {
					add_to_temp_variable = { edu_array^4 = 1 }
				}

				if = { limit = { has_idea = health_01 }
					add_to_temp_variable = { health_array^0 = 1 }
				}else_if = { limit = { has_idea = health_02 }
					add_to_temp_variable = { health_array^1 = 1 }
				}else_if = { limit = { has_idea = health_03 }
					add_to_temp_variable = { health_array^2 = 1 }
				}
				else_if = { limit = { has_idea = health_04 }
					add_to_temp_variable = { health_array^3 = 1 }
				}
				else_if = {	limit = { has_idea = health_05 }
					add_to_temp_variable = { health_array^4 = 1 }
				}else = {
					add_to_temp_variable = { health_array^5 = 1 }
				}

				if = { limit = { has_idea = social_01 }
					add_to_temp_variable = { soc_array^0 = 1 }
				}else_if = { limit = { has_idea = social_02 }
					add_to_temp_variable = { soc_array^1 = 1 }
				}else_if = { limit = { has_idea = social_03 }
					add_to_temp_variable = { soc_array^2 = 1 }
				}
				else_if = { limit = { has_idea = social_04 }
					add_to_temp_variable = { soc_array^3 = 1 }
				}
				else_if = {	limit = { has_idea = social_05 }
					add_to_temp_variable = { soc_array^4 = 1 }
				}else = {
					add_to_temp_variable = { soc_array^5 = 1 }
				}

				if = { limit = { has_idea = defence_00 }
					add_to_temp_variable = { mil_array^0 = 1 }
				}else_if = { limit = { has_idea = defence_01 }
					add_to_temp_variable = { mil_array^1 = 1 }
				}else_if = { limit = { has_idea = defence_02 }
					add_to_temp_variable = { mil_array^2 = 1 }
				}else_if = { limit = { has_idea = defence_03 }
					add_to_temp_variable = { mil_array^3 = 1 }
				}else_if = { limit = { has_idea = defence_04 }
					add_to_temp_variable = { mil_array^4 = 1 }
				}else_if = { limit = { has_idea = defence_05 }
					add_to_temp_variable = { mil_array^5 = 1 }
				}else_if = { limit = { has_idea = defence_06 }
					add_to_temp_variable = { mil_array^6 = 1 }
				}else_if = { limit = { has_idea = defence_07 }
					add_to_temp_variable = { mil_array^7 = 1 }
				}else_if = { limit = { has_idea = defence_08 }
					add_to_temp_variable = { mil_array^8 = 1 }
				}else = {
					add_to_temp_variable = { mil_array^9 = 1 }
				}

				#adds state to the total merged states counter
				add_to_temp_variable = { merged_states = 1 }
				#Pulls and sets info if nation has intel agency
				if = { limit = { has_intelligence_agency = yes } add_to_temp_variable = { has_agency_num = 1 } }

				#Sets tax rates, stability, influence, and political party numbers
				add_to_temp_variable = { corp_rate_hold = corporate_tax_rate }
				add_to_temp_variable = { pop_rate_hold = population_tax_rate }
				add_to_temp_variable = { stab_merge_tracker = stability }
				add_to_temp_variable = { dom_track = domestic_influence_amount }

				add_to_temp_variable = { democ_track = party_popularity@democratic }
				add_to_temp_variable = { fac_track = party_popularity@fascism }
				add_to_temp_variable = { com_track = party_popularity@communism }
				add_to_temp_variable = { neut_track = party_popularity@neutrality }
				add_to_temp_variable = { nat_track = party_popularity@nationalist }

				add_to_temp_variable = { party_1 = party_pop_array^0 } #Western_Autocracy
				add_to_temp_variable = { party_2 = party_pop_array^1 } #conservatism
				add_to_temp_variable = { party_3 = party_pop_array^2 } #liberalism
				add_to_temp_variable = { party_4 = party_pop_array^3 } #socialism
				add_to_temp_variable = { party_5 = party_pop_array^4 } #Communist-State
				add_to_temp_variable = { party_6 = party_pop_array^5 } #anarchist_communism
				add_to_temp_variable = { party_7 = party_pop_array^6 } #Conservative
				add_to_temp_variable = { party_8 = party_pop_array^7 } #Autocracy
				add_to_temp_variable = { party_9 = party_pop_array^8 } #Mod_Vilayat_e_Faqih
				add_to_temp_variable = { party_10 = party_pop_array^9 } #Vilayat_e_Faqih
				add_to_temp_variable = { party_11 = party_pop_array^10 } #Kingdom
				add_to_temp_variable = { party_12 = party_pop_array^11 } #Caliphate
				add_to_temp_variable = { party_13 = party_pop_array^12 } #Neutral_Muslim_Brotherhood
				add_to_temp_variable = { party_14 = party_pop_array^13 } #Neutral_Autocracy
				add_to_temp_variable = { party_15 = party_pop_array^14 } #Neutral_conservatism
				add_to_temp_variable = { party_16 = party_pop_array^15 } #oligarchism
				add_to_temp_variable = { party_17 = party_pop_array^16 } #Neutral_Libertarian
				add_to_temp_variable = { party_18 = party_pop_array^17 } #Neutral_green
				add_to_temp_variable = { party_19 = party_pop_array^18 } #neutral_Social
				add_to_temp_variable = { party_20 = party_pop_array^19 } #Neutral_Communism
				add_to_temp_variable = { party_21 = party_pop_array^20 } #Nat_Populism
				add_to_temp_variable = { party_22 = party_pop_array^21 } #Nat_Fascism
				add_to_temp_variable = { party_23 = party_pop_array^22 } #Nat_Autocracy
				add_to_temp_variable = { party_24 = party_pop_array^23 } #Monarchist

				log = "current breakdown is [?democ_track], [?fac_track], [?com_track], [?neut_track], [?nat_track]"

				#Adds all missile system stuff here
				if = { limit = { NOT = { tag = UOE } }
					# for_each_loop = {
					# 	array = missile_inventory_array
					# 	value = v
					# 	index = i
					# 	add_to_variable = { UOE.missile_inventory_array^i = missile_inventory_array^i }
					# }
					for_each_loop = {
						array = GNSS_satellite_array
						value = v
						index = i
						add_to_variable = { UOE.GNSS_satellite_array^i = GNSS_satellite_array^i }
					}
					for_each_loop = {
						array = COM_satellite_array
						value = v
						index = i
						add_to_variable = { UOE.COM_satellite_array^i = COM_satellite_array^i }
					}
					for_each_loop = {
						array = SPY_satellite_array
						value = v
						index = i
						add_to_variable = { UOE.SPY_satellite_array^i = SPY_satellite_array^i }
					}
					# for_each_loop = {
					# 	array = nuclear_warhead_inventory_array
					# 	value = v
					# 	index = i
					# 	add_to_variable = { UOE.nuclear_warhead_inventory_array^i = nuclear_warhead_inventory_array^i }
					# }
					UOE = {
						add_to_variable = { treasury = PREV.treasury }
						add_to_variable = { debt = PREV.debt }
						add_to_variable = { int_investments = PREV.int_investments }
						annex_country = {
							target = PREV
							transfer_troops = yes
						}
					}
				}
			}
			log = "Pre-Start Array Verification [?UOE.eu_technologies^0.GetTokenKey]"

			#locates the proper laws to select
			find_highest_in_array = {
				array = eco_cycle_array
				index = eco_cycle_sel
			}
			find_highest_in_array = {
				array = corpt_array
				index = corpt_sel
			}
			find_highest_in_array = {
				array = beuarc_array
				index = beau_sel
			}
			find_highest_in_array = {
				array = mil_array
				index = mil_sel
			}
			find_highest_in_array = {
				array = sec_array
				index = sec_sel
			}
			find_highest_in_array = {
				array = edu_array
				index = edu_sel
			}
			find_highest_in_array = {
				array = health_array
				index = health_sel
			}
			find_highest_in_array = {
				array = soc_array
				index = soc_sel
			}
			find_highest_in_array = {
				array = eco_array
				index = eoc_sel
			}

			#does the math for all stability, taxes, influence, politics, ect
			divide_temp_variable = { stab_merge_tracker = merged_states }
			divide_temp_variable = { corp_rate_hold = merged_states }
			divide_temp_variable = { pop_rate_hold = merged_states }
			divide_temp_variable = { dom_track = merged_states }
			round_temp_variable = dom_track
			round_temp_variable = corp_rate_hold
			round_temp_variable = pop_rate_hold

			divide_temp_variable = { democ_track = merged_states }
			divide_temp_variable = { fac_track = merged_states }
			divide_temp_variable = { com_track = merged_states }
			divide_temp_variable = { neut_track = merged_states }
			divide_temp_variable = { nat_track = merged_states }

			divide_temp_variable = { party_1 = merged_states }
			divide_temp_variable = { party_2 = merged_states }
			divide_temp_variable = { party_3 = merged_states }
			divide_temp_variable = { party_4 = merged_states }
			divide_temp_variable = { party_5 = merged_states }
			divide_temp_variable = { party_6 = merged_states }
			divide_temp_variable = { party_7 = merged_states }
			divide_temp_variable = { party_8 = merged_states }
			divide_temp_variable = { party_9 = merged_states }
			divide_temp_variable = { party_10 = merged_states }
			divide_temp_variable = { party_11 = merged_states }
			divide_temp_variable = { party_12 = merged_states }
			divide_temp_variable = { party_13 = merged_states }
			divide_temp_variable = { party_14 = merged_states }
			divide_temp_variable = { party_15 = merged_states }
			divide_temp_variable = { party_16 = merged_states }
			divide_temp_variable = { party_17 = merged_states }
			divide_temp_variable = { party_18 = merged_states }
			divide_temp_variable = { party_19 = merged_states }
			divide_temp_variable = { party_20 = merged_states }
			divide_temp_variable = { party_21 = merged_states }
			divide_temp_variable = { party_22 = merged_states }
			divide_temp_variable = { party_23 = merged_states }
			divide_temp_variable = { party_24 = merged_states }

			log = "initial breakdown is [?democ_track], [?fac_track], [?com_track], [?neut_track], [?nat_track]"

			multiply_temp_variable = { democ_track = 100 }
			multiply_temp_variable = { fac_track = 100 }
			multiply_temp_variable = { com_track = 100 }
			multiply_temp_variable = { neut_track = 100 }
			multiply_temp_variable = { nat_track = 100 }

			log = "final breakdown is [?democ_track], [?fac_track], [?com_track], [?neut_track], [?nat_track]"

			add_to_temp_array = { pol_bal_ary = democ_track }
			add_to_temp_array = { pol_bal_ary = fac_track }
			add_to_temp_array = { pol_bal_ary = com_track }
			add_to_temp_array = { pol_bal_ary = neut_track }
			add_to_temp_array = { pol_bal_ary = nat_track }

			add_to_temp_variable = { math_tracker = democ_track }
			add_to_temp_variable = { math_tracker = fac_track }
			add_to_temp_variable = { math_tracker = com_track }
			add_to_temp_variable = { math_tracker = neut_track }
			add_to_temp_variable = { math_tracker = nat_track }

			#Adjust the math to make sure it adds up right
			if = {
				limit = { NOT = { check_variable = { math_tracker = 100 } } }
				if = {	limit = { check_variable = { math_tracker > 100 } }
					find_highest_in_array = {
						array = pol_bal_ary
						value = temp_adjust
						index = temp_index
					}
					subtract_from_temp_variable = { math_tracker = 100 }
					subtract_from_temp_variable = { temp_adjust = math_tracker }
					set_temp_variable = { pol_bal_ary^temp_index = temp_adjust }
				}else = {
					find_highest_in_array = {
						array = pol_bal_ary
						value = temp_adjust
						index = temp_index
					}
					set_temp_variable = { move_track = 100 }
					subtract_from_temp_variable = { move_track = math_tracker }
					add_to_temp_variable = { temp_adjust = move_track }
					set_temp_variable = { pol_bal_ary^temp_index = temp_adjust }
				}
			}

			if = { limit = { check_variable = { small_medium_bus_track > 0 } }
				divide_variable = { UOE.small_medium_bus_op_track = small_medium_bus_track }
				round_variable = small_medium_bus_op_track
			}
			if = { limit = { check_variable = { international_bankers_track > 0 } }
				divide_variable = { UOE.international_bankers_op_track = international_bankers_track }
				round_variable = international_bankers_op_track
			}
			if = { limit = { check_variable = { fossil_fuel_industry_track > 0 } }
				divide_variable = { UOE.fossil_fuel_industry_op_track = fossil_fuel_industry_track }
				round_variable = fossil_fuel_industry_op_track
			}
			if = { limit = { check_variable = { industrial_conglomerates_track > 0 } }
				divide_variable = { UOE.industrial_conglomerates_op_track = industrial_conglomerates_track }
				round_variable = industrial_conglomerates_op_track
			}
			if = { limit = { check_variable = { oligarchs_track > 0 } }
				divide_variable = { UOE.oligarchs_op_track = oligarchs_track }
				round_variable = oligarchs_op_track
			}
			if = { limit = { check_variable = { maritime_industry_track > 0 } }
				divide_variable = { UOE.maritime_industry_op_track = maritime_industry_track }
				round_variable = maritime_industry_op_track
			}
			if = { limit = { check_variable = { defense_industry_track > 0 } }
				divide_variable = { UOE.defense_industry_op_track = defense_industry_track }
				round_variable = defense_industry_op_track
			}
			if = { limit = { check_variable = { the_military_track > 0 } }
				divide_variable = { UOE.the_military_op_track = the_military_track }
				round_variable = the_military_op_track
			}
			if = { limit = { check_variable = { intelligence_community_track > 0 } }
				divide_variable = { UOE.intelligence_community_op_track = intelligence_community_track }
				round_variable = intelligence_community_op_track
			}
			if = { limit = { check_variable = { labour_unions_track > 0 } }
				divide_variable = { UOE.labour_unions_op_track = labour_unions_track }
				round_variable = labour_unions_op_track
			}
			if = { limit = { check_variable = { landowners_track > 0 } }
				divide_variable = { UOE.landowners_op_track = landowners_track }
				round_variable = landowners_op_track
			}
			if = { limit = { check_variable = { farmers_track > 0 } }
				divide_variable = { UOE.farmers_op_track = farmers_track }
				round_variable = farmers_op_track
			}
			if = { limit = { check_variable = { communist_cadres_track > 0 } }
				divide_variable = { UOE.communist_cadres_op_track = communist_cadres_track }
				round_variable = communist_cadres_op_track
			}
			if = { limit = { check_variable = { the_priesthood_track > 0 } }
				divide_variable = { UOE.the_priesthood_op_track = the_priesthood_track }
				round_variable = the_priesthood_op_track
			}
			if = { limit = { check_variable = { the_ulema_track > 0 } }
				divide_variable = { UOE.the_ulema_op_track = the_ulema_track }
				round_variable = the_ulema_op_track
			}
			if = { limit = { check_variable = { the_clergy_track > 0 } }
				divide_variable = { UOE.the_clergy_op_track = the_clergy_track }
				round_variable = the_clergy_op_track
			}
			if = { limit = { check_variable = { wahabi_ulema_track > 0 } }
				divide_variable = { UOE.wahabi_ulema_op_track = wahabi_ulema_track }
				round_variable = wahabi_ulema_op_track
			}

			UOE = {
				#sets the base info
				clr_country_flag = dynamic_flag
				set_country_flag = USoE
				set_cosmetic_tag = USoE
				add_ideas = {
					multi_ethnic_state_idea
					the_euro
					g7_member
					nuclear_power
					heavily_regulated_immigration
				}
				#Sets stablity, internal factions, politics, ect
				set_stability = stab_merge_tracker

				set_variable = { small_medium_business_owners_opinion = small_medium_bus_op_track }
				add_to_temp_array = { int_fac_roll = small_medium_business_owner_opinion }
				set_variable = { international_bankers_opinion = international_bankers_op_track }
				add_to_temp_array = { int_fac_roll = international_bankers_opinion }
				set_variable = { fossil_fuel_industry_opinion = fossil_fuel_industry_op_track }
				add_to_temp_array = { int_fac_roll = fossil_fuel_industry_opinion }
				set_variable = { industrial_conglomerates_opinion = industrial_conglomerates_op_track }
				add_to_temp_array = { int_fac_roll = industrial_conglomerates_opinion }
				set_variable = { oligarchs_opinion = oligarchs_op_track }
				add_to_temp_array = { int_fac_roll = oligarchs_opinion }
				set_variable = { maritime_industry_opinion = maritime_industry_op_track }
				add_to_temp_array = { int_fac_roll = maritime_industry_opinion }
				set_variable = { defense_industry_opinion = defense_industry_op_track }
				add_to_temp_array = { int_fac_roll = defense_industry_opinion }
				set_variable = { the_military_opinion = the_military_op_track }
				add_to_temp_array = { int_fac_roll = the_military_opinion }
				set_variable = { intelligence_community_opinion = intelligence_community_op_track }
				add_to_temp_array = { int_fac_roll = intelligence_community_opinion }
				set_variable = { labour_unions_opinion = labour_unions_op_track }
				add_to_temp_array = { int_fac_roll = labour_unions_opinion }
				set_variable = { landowners_opinion = landowners_op_track }
				add_to_temp_array = { int_fac_roll = landowners_opinion }
				set_variable = { farmers_opinion = farmers_op_track }
				add_to_temp_array = { int_fac_roll = farmers_opinion }
				set_variable = { communist_cadres_opinion = communist_cadres_op_track }
				add_to_temp_array = { int_fac_roll = communist_cadres_opinion }
				set_variable = { the_priesthood_opinion = the_priesthood_op_track }
				add_to_temp_array = { int_fac_roll = the_priesthood_opinion }
				set_variable = { the_ulema_opinion = the_ulema_op_track }
				add_to_temp_array = { int_fac_roll = the_ulema_opinion }
				set_variable = { the_clergy_opinion = the_clergy_op_track }
				add_to_temp_array = { int_fac_roll = the_clergy_opinion }
				set_variable = { wahabi_ulema_opinion = wahabi_ulema_op_track }
				add_to_temp_array = { int_fac_roll = wahabi_ulema_opinion }


				for_loop_effect = {
					start = 0
					end = 3
					value = loop_track
					find_highest_in_array = {
						array = int_fac_roll
						index = temp_idea
						value = var_hold
					}

					if = { limit = { check_variable = { temp_idea = 0 } }
						add_ideas = small_medium_business_owners
					}else_if = { limit = { check_variable = { temp_idea = 1 } }
						add_ideas = international_bankers
					}else_if = { limit = { check_variable = { temp_idea = 2 } }
						add_ideas = fossil_fuel_industry
					}else_if = { limit = { check_variable = { temp_idea = 3 } }
						add_ideas = industrial_conglomerates
					}else_if = { limit = { check_variable = { temp_idea = 4 } }
						add_ideas = oligarchs
					}else_if = { limit = { check_variable = { temp_idea = 5 } }
						add_ideas = maritime_industry
					}else_if = { limit = { check_variable = { temp_idea = 6 } }
						add_ideas = defense_industry
					}else_if = { limit = { check_variable = { temp_idea = 7 } }
						add_ideas = the_military
					}else_if = { limit = { check_variable = { temp_idea = 8 } }
						add_ideas = intelligence_community
					}else_if = { limit = { check_variable = { temp_idea = 9 } }
						add_ideas = labour_unions
					}else_if = { limit = { check_variable = { temp_idea = 10 } }
						add_ideas = landowners
					}else_if = { limit = { check_variable = { temp_idea = 11 } }
						add_ideas = farmers
					}else_if = { limit = { check_variable = { temp_idea = 12 } }
						add_ideas = communist_cadres
					}else_if = { limit = { check_variable = { temp_idea = 13 } }
						add_ideas = the_priesthood
					}else_if = { limit = { check_variable = { temp_idea = 14 } }
						add_ideas = the_ulema
					}else_if = { limit = { check_variable = { temp_idea = 15 } }
						add_ideas = the_clergy
					}else = {
						add_ideas = wahabi_ulema
					}

					set_temp_variable = { int_fac_roll^temp_idea = 0 }
				}

				set_variable = { small_medium_business_owners_opinion = small_medium_bus_op_track }
				divide_variable = { small_medium_business_owners_opinion = 4 }
				round_variable = small_medium_business_owners_opinion
				set_variable = { international_bankers_opinion = international_bankers_op_track }
				divide_variable = { international_bankers_opinion = 4 }
				round_variable = international_bankers_opinion
				set_variable = { fossil_fuel_industry_opinion = fossil_fuel_industry_op_track }
				divide_variable = { fossil_fuel_industry_opinion = 4 }
				round_variable = fossil_fuel_industry_opinion
				set_variable = { industrial_conglomerates_opinion = industrial_conglomerates_op_track }
				divide_variable = { industrial_conglomerates_opinion = 4 }
				round_variable = industrial_conglomerates_opinion
				set_variable = { oligarchs_opinion = oligarchs_op_track }
				divide_variable = { oligarchs_opinion = 4 }
				round_variable = oligarchs_opinion
				set_variable = { maritime_industry_opinion = maritime_industry_op_track }
				divide_variable = { maritime_industry_opinion = 4 }
				round_variable = maritime_industry_opinion
				set_variable = { defense_industry_opinion = defense_industry_op_track }
				divide_variable = { defense_industry_opinion = 4 }
				round_variable = defense_industry_opinion
				set_variable = { the_military_opinion = the_military_op_track }
				divide_variable = { the_military_opinion = 4 }
				round_variable = the_military_opinion
				set_variable = { intelligence_community_opinion = intelligence_community_op_track }
				divide_variable = { intelligence_community_opinion = 4 }
				round_variable = intelligence_community_opinion
				set_variable = { labour_unions_opinion = labour_unions_op_track }
				divide_variable = { labour_unions_opinion = 4 }
				round_variable = labour_unions_opinion
				set_variable = { landowners_opinion = landowners_op_track }
				divide_variable = { landowners_opinion = 4 }
				round_variable = landowners_opinion
				set_variable = { farmers_opinion = farmers_op_track }
				divide_variable = { farmers_opinion = 4 }
				round_variable = farmers_opinion
				set_variable = { communist_cadres_opinion = communist_cadres_op_track }
				divide_variable = { communist_cadres_opinion = 4 }
				round_variable = communist_cadres_opinion
				set_variable = { the_priesthood_opinion = the_priesthood_op_track }
				divide_variable = { the_priesthood_opinion = 4 }
				round_variable = the_priesthood_opinion
				set_variable = { the_ulema_opinion = the_ulema_op_track }
				divide_variable = { the_ulema_opinion = 4 }
				round_variable = the_ulema_opinion
				set_variable = { the_clergy_opinion = the_clergy_op_track }
				divide_variable = { the_clergy_opinion = 4 }
				round_variable = the_clergy_opinion
				set_variable = { wahabi_ulema_opinion = wahabi_ulema_op_track }
				divide_variable = { wahabi_ulema_opinion = 4 }
				round_variable = wahabi_ulema_opinion

				#Slow the economy, given the mass merger
				#BALANCE & CHALLENGE, not realism
				add_to_temp_variable = { eco_cycle_sel = -1 }

				#clamp this one, since it goes to a min
				clamp_temp_variable  = {
					var = eco_cycle_sel
					min = 0
				}

				if = { limit = { check_variable = { eco_cycle_sel = 0 } }
					add_ideas = depression
				}else_if = { limit = { check_variable = { eco_cycle_sel = 1 } }
					add_ideas = recession
				}else_if = { limit = { check_variable = { eco_cycle_sel = 2 } }
					add_ideas = stagnation
				}else_if = { limit = { check_variable = { eco_cycle_sel = 3 } }
					add_ideas = stable_growth
				}else_if = { limit = { check_variable = { eco_cycle_sel = 4 } }
					add_ideas = fast_growth
				}else = {
					add_ideas = economic_boom
				}

				set_political_party = {
					ideology = democratic
					popularity = var:pol_bal_ary^0
				}

				set_political_party = {
					ideology = fascism
					popularity = var:pol_bal_ary^1
				}

				set_political_party = {
					ideology = communism
					popularity = var:pol_bal_ary^2
				}

				set_political_party = {
					ideology = neutrality
					popularity = var:pol_bal_ary^3
				}

				set_political_party = {
					ideology = nationalist
					popularity = var:pol_bal_ary^4
				}

				start_politics_input = yes
				set_variable = { party_pop_array^0 = party_1 } #Western_Autocracy
				set_variable = { party_pop_array^1 = party_2 } #conservatism
				set_variable = { party_pop_array^2 = party_3 } #liberalism
				set_variable = { party_pop_array^3 = party_4 } #socialism
				set_variable = { party_pop_array^4 = party_5 } #Communist-State
				set_variable = { party_pop_array^5 = party_6 } #anarchist_communism
				set_variable = { party_pop_array^6 = party_7 } #Conservative
				set_variable = { party_pop_array^7 = party_8 } #Autocracy
				set_variable = { party_pop_array^8 = party_9 } #Mod_Vilayat_e_Faqih
				set_variable = { party_pop_array^9 = party_10 } #Vilayat_e_Faqih
				set_variable = { party_pop_array^10 = party_11 } #Kingdom
				set_variable = { party_pop_array^11 = party_12 } #Caliphate
				set_variable = { party_pop_array^12 = party_13 } #Neutral_Muslim_Brotherhood
				set_variable = { party_pop_array^13 = party_14 } #Neutral_Autocracy
				set_variable = { party_pop_array^14 = party_15 } #Neutral_conservatism
				set_variable = { party_pop_array^15 = party_16 } #oligarchism
				set_variable = { party_pop_array^16 = party_17 } #Neutral_Libertarian
				set_variable = { party_pop_array^17 = party_18 } #Neutral_green
				set_variable = { party_pop_array^18 = party_19 } #neutral_Social
				set_variable = { party_pop_array^19 = party_20 } #Neutral_Communism
				set_variable = { party_pop_array^20 = party_21 } #Nat_Populism
				set_variable = { party_pop_array^21 = party_22 } #Nat_Fascism
				set_variable = { party_pop_array^22 = party_23 } #Nat_Autocracy
				set_variable = { party_pop_array^23 = party_24 } #Monarchist
				for_each_loop = {
					array = party_pop_array
					value = party_size

					add_to_temp_variable = { add_check = party_size }
				}

				log = "Current Total Party Size is [?add_check]"

				if = { limit =  { NOT = { check_variable = { add_check = 1 } } }
					if = { limit = { check_variable = { add_check < 1 } }
						find_highest_in_array = {
							array = party_pop_array
							value = add_pty_val
							index = spot_hold
						}
						set_temp_variable = { mod_hold = 1 }
						subtract_from_temp_variable = { mod_hold = add_check }
						add_to_temp_variable = { add_pty_val = mod_hold }
						set_variable = { party_pop_array^spot_hold = add_pty_val }
					}else = {
						find_highest_in_array = {
							array = party_pop_array
							value = add_pty_val
							index = spot_hold
						}
						subtract_from_temp_variable = { add_check = 1 }
						subtract_from_temp_variable = { add_pty_val = add_check }
						set_variable = { party_pop_array^spot_hold = add_pty_val }
					}
				}

				for_each_loop = {
					array = party_pop_array
					value = party_size

					add_to_temp_variable = { add_check = party_size }
				}

				log = "Current Final Total Party Size is [?add_check]"

				find_highest_in_array = {
					array = party_pop_array
					index = sel_party
				}
				add_to_array = { ruling_party = sel_party }
				startup_politics = yes

				#Influence system
				init_influence = yes
				set_variable = { domestic_influence_amount = dom_track }
				startup_influence = yes

				log = "values are: [?pol_bal_ary^0], [?pol_bal_ary^1], [?pol_bal_ary^2], [?pol_bal_ary^3], [?pol_bal_ary^4]"

				if = { limit = { check_variable = { eoc_sel = 0 } }
					add_ideas = md_closed_economy
				}else_if = { limit = { check_variable = { eoc_sel = 1 } }
					add_ideas = consumption_economy
				}else_if = { limit = { check_variable = { eoc_sel = 2 } }
					add_ideas = semi_consumption_economy
				}else_if = { limit = { check_variable = { eoc_sel = 3 } }
					add_ideas = mixed_economy
				}else_if = { limit = { check_variable = { eoc_sel = 4 } }
					add_ideas = export_economy
				}else = {
					add_ideas = globalized_trade_economy
				}

				if = { limit = { check_variable = { soc_sel = 0 } }
					add_ideas = social_01
				}else_if = { limit = { check_variable = { soc_sel = 1 } }
					add_ideas = social_02
				}else_if = { limit = { check_variable = { soc_sel = 2 } }
					add_ideas = social_03
				}else_if = { limit = { check_variable = { soc_sel = 3 } }
					add_ideas = social_04
				}else_if = { limit = { check_variable = { soc_sel = 4 } }
					add_ideas = social_05
				}else = {
					add_ideas = social_06
				}

				if = { limit = { check_variable = { health_sel = 0 } }
					add_ideas = health_01
				}else_if = { limit = { check_variable = { health_sel = 1 } }
					add_ideas = health_02
				}else_if = { limit = { check_variable = { health_sel = 2 } }
					add_ideas = health_03
				}else_if = { limit = { check_variable = { health_sel = 3 } }
					add_ideas = health_04
				}else_if = { limit = { check_variable = { health_sel = 4 } }
					add_ideas = health_05
				}else = {
					add_ideas = health_06
				}

				if = { limit = { check_variable = { beau_sel = 0 } }
					add_ideas = bureau_01
				}else_if = { limit = { check_variable = { beau_sel = 1 } }
					add_ideas = bureau_02
				}else_if = { limit = { check_variable = { beau_sel = 2 } }
					add_ideas = bureau_03
				}else_if = { limit = { check_variable = { beau_sel = 3 } }
					add_ideas = bureau_04
				}else = {
					add_ideas = bureau_05
				}

				if = { limit = { check_variable = { edu_sel = 0 } }
					add_ideas = edu_01
				}else_if = { limit = { check_variable = { edu_sel = 1 } }
					add_ideas = edu_02
				}else_if = { limit = { check_variable = { edu_sel = 2 } }
					add_ideas = edu_03
				}else_if = { limit = { check_variable = { edu_sel = 3 } }
					add_ideas = edu_04
				}else = {
					add_ideas = edu_05
				}

				if = { limit = { check_variable = { sec_sel = 0 } }
					add_ideas = police_01
				}else_if = { limit = { check_variable = { sec_sel = 1 } }
					add_ideas = police_02
				}else_if = { limit = { check_variable = { sec_sel = 2 } }
					add_ideas = police_03
				}else_if = { limit = { check_variable = { sec_sel = 3 } }
					add_ideas = police_04
				}else = {
					add_ideas = police_05
				}

				#Increase corruption by 1, to simulate the increasing corruption from a giant merge
				#Since the if just dumps, no need to clamp
				add_to_temp_variable = { corpt_sel = 1 }
				if = { limit = { check_variable = { corpt_sel = 0 } }
					add_ideas = negligible_corruption
				}else_if = { limit = { check_variable = { corpt_sel = 1 } }
					add_ideas = slight_corruption
				}else_if = { limit = { check_variable = { corpt_sel = 2 } }
					add_ideas = modest_corruption
				}else_if = { limit = { check_variable = { corpt_sel = 3 } }
					add_ideas = medium_corruption
				}else_if = { limit = { check_variable = { corpt_sel = 4 } }
					add_ideas = widespread_corruption
				}else_if = { limit = { check_variable = { corpt_sel = 5 } }
					add_ideas = systematic_corruption
				}else_if = { limit = { check_variable = { corpt_sel = 6 } }
					add_ideas = unrestrained_corruption
				}else_if = { limit = { check_variable = { corpt_sel = 7 } }
					add_ideas = rampant_corruption
				}else_if = { limit = { check_variable = { corpt_sel = 8 } }
					add_ideas = crippling_corruption
				}else = {
					add_ideas = paralyzing_corruption
				}

				if = { limit = { check_variable = { mil_sel = 0 } }
					add_ideas = defence_00
				}else_if = { limit = { check_variable = { mil_sel = 1 } }
					add_ideas = defence_01
				}else_if = { limit = { check_variable = { mil_sel = 2 } }
					add_ideas = defence_02
				}else_if = { limit = { check_variable = { mil_sel = 3 } }
					add_ideas = defence_03
				}else_if = { limit = { check_variable = { mil_sel = 4 } }
					add_ideas = defence_04
				}else_if = { limit = { check_variable = { mil_sel = 5 } }
					add_ideas = defence_05
				}else_if = { limit = { check_variable = { mil_sel = 6 } }
					add_ideas = defence_06
				}else_if = { limit = { check_variable = { mil_sel = 7 } }
					add_ideas = defence_07
				}else_if = { limit = { check_variable = { mil_sel = 8 } }
					add_ideas = defence_08
				}else = {
					add_ideas = defence_09
				}

				#Sets taxes and other economic values
				set_variable = { corporate_tax_rate = corp_rate_hold }
				set_variable = { population_tax_rate = pop_rate_hold }

				set_variable = { civilian_factory_employment_var = 1 }
				set_variable = { naval_factory_employment_var = 1 }
				set_variable = { military_factory_employment_var = 1 }
				set_variable = { office_employment_var = 1 }
				set_variable = { agriculture_district_employment_var = 1 }
				set_variable = { gdpc_converging_var = PREV.gdpc_converging_var }

				#Unlocks all proper techs for tag
				for_each_loop = {
					array = UOE.eu_technologies
					value = v
					index = i
					log = "Technology Applied [?UOE.eu_technologies^i.GetTokenKey]"
					meta_effect = {
						text = {
							set_technology = {
								[techName] = 1
								popup = no
							}
						}
						techName = "[?UOE.eu_technologies^i.GetTokenKey]"
					}
				}

				#creates an intel agency if enough nations had one at game start
				if = { limit = { check_variable = { has_agency_num > merged_states } }
					create_intelligence_agency = {
						name = "European Foreign Intelligence Service"
						icon = GFX_intelligence_agency_logo_agency
					}
					upgrade_intelligence_agency = upgrade_form_department
					upgrade_intelligence_agency = upgrade_decryption_boost
					upgrade_intelligence_agency = upgrade_crypto_strength
					upgrade_intelligence_agency = upgrade_training_centers
					upgrade_intelligence_agency = upgrade_interrogation_techniques
					upgrade_intelligence_agency = upgrade_passive_defense
					upgrade_intelligence_agency = upgrade_passive_defense
					upgrade_intelligence_agency = upgrade_passive_defense
				}

				#initilizes all the major systems for players / AI
				ingame_init_investment_system = yes
				init_auto_influence_array = yes
				research_slot_init_for_country = yes
				productivity_growth_effect = yes
				calculate_influence_percentage = yes
				ingame_update_setup = yes
				setup_init_factions = yes
				set_law_vars = yes
				update_neighbors_effects = yes
				economic_cycle_drift_popularity = yes
				ai_update_build_units = yes
				calculate_expected_spending = yes

				set_variable = { anti_bully_wars = 0 }
				set_variable = { market_sold_contracts = 0 }

				# La Resistance Variable Configuration
				if = { limit = { has_dlc = "La Resistance" has_variable = cyber_targets^0 }
					log = "[GetDateText]: [THIS.GetName]: Cleared Cyber Targets Array due to having the LAR DLC"
					clear_array = cyber_targets
				}

				# AGRICULTURE INIT
				AGRI_plant_the_seeds = yes
				# LITERACY RATES INIT
				EDU_learn_your_ABCs_with_dread = yes

				# AI Configuration
				if = { limit = { is_ai = yes }
					give_AI_templates = yes
					ai_update_build_units = yes
					if = { limit = { gifted_income_list = yes }
						set_variable = { population_tax_rate = 35 }
						set_variable = { corporate_tax_rate = 20 }
						add_ideas = MICROSTATE_fix
					}
				}

				# Sets the Screens to Open by Default
				if = { limit = { is_ai = no }
					set_country_flag = open_energy_screen
					set_country_flag = open_research_screen
				}

				# Calculate Utilities
				calculate_starting_utility_stockpile = yes

				# Regional Influencers
				set_counter_terror_influencer = yes

				#Sets the proper government and traits
				set_country_leader_name = {
					name = UOE_TRANSITIONAL_COUNCIL
				}
				set_country_leader_description = {
					desc = UOE_TRANSITIONAL_COUNCIL_DESC
				}
				set_country_leader_portrait = {
					portrait = GFX_UOE_TRANSITIONAL_COUNCIL
				}
				add_country_leader_trait = transitional_government
				add_country_leader_trait = unification_shock

				#Sets all starting dynamic modifiers and BOP information
				set_variable = { UOE_stab_var = -0.15 }
				set_variable = { UOE_foreign_inf_def_var = -0.4 }
				set_variable = { UOE_pol_power_var = -0.50 }
				set_variable = { UOE_tax_gain_var = -0.25 }
				set_variable = { UOE_prod_grow_var = -1 }
				set_variable = { UOE_const_speed_var = -0.5 }
				set_variable = { UOE_project_cost_var = 0.25 }
				set_variable = { UOE_goods_var = 0.3 }
				set_variable = { UOE_trade_op_var = -0.5 }
				set_variable = { UOE_energy_use_var = 0.15 }
				set_variable = { UOE_prod_recs_lack_var = 0.5 }
				set_variable = { UOE_loc_recs_var = -0.3 }
				set_variable = { UOE_army_var = -0.5 }
				set_variable = { UOE_navy_var = -0.5 }
				set_variable = { UOE_air_var = -0.5 }
				set_variable = { UOE_mil_cost_var = 0.5 }
				set_variable = { UOE_eco_mig_var = -0.35 }
				set_variable = { UOE_pol_mig_var = -0.35 }
				set_variable = { UOE_mil_train_time_var = 0.5 }
				set_variable = { UOE_mil_recruit_var = -0.75 }
				set_variable = { UOE_energy_gain_var = -0.10 }
				set_variable = { UOE_pop_energy_var = 0.15 }
				set_variable = { UOE_pop_fuel_var = 0.15 }
				set_variable = { UOE_market_income_var = -0.5 }
				set_variable = { UOE_equipment_cost_var = 0.1 }
				set_variable = { UOE_market_purchase_var = 0.5 }

				set_temp_variable = { world_tension_var = 1 }
				subtract_from_temp_variable = { world_tension_var = threat }
				if = { limit = { check_variable = { world_tension_var = 1 } } subtract_from_temp_variable = { world_tension_var = 0.01 } }

				multiply_temp_variable = { world_tension_var = -1 }
				set_variable = { UOE_tension_mil_prod_var = world_tension_var }

				set_variable = { UOE_bop_cult_dif = east_start_track }
				subtract_from_variable = { UOE_bop_cult_dif = west_start_track }

				add_dynamic_modifier = { modifier = UOE_founding_a_new_nation_modifier }
				add_dynamic_modifier = { modifier = UOE_economic_turmoil_modifier }
				add_dynamic_modifier = { modifier = UOE_restructuring_military_modifier }
				add_dynamic_modifier = { modifier = UOE_the_resource_crisis_modifier }
				add_dynamic_modifier = { modifier = UOE_the_military_industrial_complex_modifier }

				every_controlled_state = {
					set_compliance = 25
				}
			}
		}
		custom_effect_tooltip = form_USoE_tt
		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU111_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU112 ###
focus_EU112_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU112_QMV_yes

		set_global_flag = european_federation

		cleanup_european_union_voting_yes = yes
	}
	else = { # QMV - no
		set_country_flag = focus_EU112_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU605 ###
focus_EU605_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU605_QMV_yes

		cleanup_european_union_voting_yes = yes

		ALB = { set_country_flag = EU_candidate }
		SER = { set_country_flag = EU_candidate }
		MNT = { set_country_flag = EU_candidate }
		FYR = { set_country_flag = EU_candidate }
		BOS = { set_country_flag = EU_candidate }
		KOS = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = ALB }
		add_to_array = { global.EU_candidates = SER }
		add_to_array = { global.EU_candidates = MNT }
		add_to_array = { global.EU_candidates = FYR }
		add_to_array = { global.EU_candidates = BOS }
		add_to_array = { global.EU_candidates = KOS }
	}
	else = { # QMV - no
		set_country_flag = focus_EU605_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU606 ###
focus_EU606_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU606_QMV_yes

		cleanup_european_union_voting_yes = yes

		TUR = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = TUR }
	}
	else = { # QMV - no
		set_country_flag = focus_EU606_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU607 ###
focus_EU607_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU607_QMV_yes

		cleanup_european_union_voting_yes = yes

		MLV = { set_country_flag = EU_candidate }
		UKR = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = MLV }
		add_to_array = { global.EU_candidates = UKR }
	}
	else = { # QMV - no
		set_country_flag = focus_EU607_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU608 ###
focus_EU608_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU608_QMV_yes

		cleanup_european_union_voting_yes = yes

		ARM = { set_country_flag = EU_candidate }
		AZE = { set_country_flag = EU_candidate }
		GEO = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = ARM }
		add_to_array = { global.EU_candidates = AZE }
		add_to_array = { global.EU_candidates = GEO }
	}
	else = { # QMV - no
		set_country_flag = focus_EU608_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU609 ###
focus_EU609_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU609_QMV_yes

		cleanup_european_union_voting_yes = yes

		SWI = { set_country_flag = EU_candidate }
		NOR = { set_country_flag = EU_candidate }
		ICE = { set_country_flag = EU_candidate }
		# Microstates
		HLS = { set_country_flag = EU_candidate }
		SMA = { set_country_flag = EU_candidate }
		MNC = { set_country_flag = EU_candidate }
		ADO = { set_country_flag = EU_candidate }
		LIC = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = SWI }
		add_to_array = { global.EU_candidates = NOR }
		add_to_array = { global.EU_candidates = ICE }
		add_to_array = { global.EU_candidates = HLS }
		add_to_array = { global.EU_candidates = SMA }
		add_to_array = { global.EU_candidates = MNC }
		add_to_array = { global.EU_candidates = ADO }
		add_to_array = { global.EU_candidates = LIC }
	}
	else = { # QMV - no
		set_country_flag = focus_EU609_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU610 ###
focus_EU610_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU610_QMV_yes

		cleanup_european_union_voting_yes = yes

		BLR = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = BLR }
	}
	else = { # QMV - no
		set_country_flag = focus_EU610_QMV_no
		cleanup_european_union_voting_no = yes
	}
}

### EU611 ###
focus_EU611_QMV_result = {
	if = { # QMV - yes
		limit = {
			EU_voting_decision_result_trigger = yes
		}
		set_country_flag = focus_EU611_QMV_yes

		cleanup_european_union_voting_yes = yes

		CAT = { set_country_flag = EU_candidate }
		CRE = { set_country_flag = EU_candidate }
		SCL = { set_country_flag = EU_candidate }
		SCO = { set_country_flag = EU_candidate }
		WAS = { set_country_flag = EU_candidate }
		GAL = { set_country_flag = EU_candidate }
		SIL = { set_country_flag = EU_candidate }
		SPA = { set_country_flag = EU_candidate }
		CNR = { set_country_flag = EU_candidate }
		NAV = { set_country_flag = EU_candidate }
		BAY = { set_country_flag = EU_candidate }
		GRL = { set_country_flag = EU_candidate }

		add_to_array = { global.EU_candidates = CAT }
		add_to_array = { global.EU_candidates = CRE }
		add_to_array = { global.EU_candidates = SCL }
		add_to_array = { global.EU_candidates = SCO }
		add_to_array = { global.EU_candidates = WAS }
		add_to_array = { global.EU_candidates = GAL }
		add_to_array = { global.EU_candidates = SIL }
		add_to_array = { global.EU_candidates = SPA }
		add_to_array = { global.EU_candidates = CNR }
		add_to_array = { global.EU_candidates = NAV }
		add_to_array = { global.EU_candidates = BAY }
		add_to_array = { global.EU_candidates = GRL }
	}
	else = { # QMV - no
		set_country_flag = focus_EU611_QMV_no
		cleanup_european_union_voting_no = yes
	}
	update_eu_dirty_variable = yes
}

cleanup_european_union_voting_yes = {
	set_global_flag = EU_qualified_majority_voting_YES
	add_to_array = { array = global.EU_passed_votes value = global.current_active_vote_disp }
	remove_from_array = { array = global.EU_council_votes value = global.current_active_vote_disp }
	set_variable = { global.EUU_recently_failed_vote = -1 }
	set_variable = { global.current_active_vote_disp = 0 }
	set_variable = { global.EU_active_vote_yes = 0 }
	set_variable = { global.EU_active_Vote_no = 0 }
	set_variable = { global.var_EUpopRatioNo = 0 }
	set_variable = { global.var_EUpopRatioYes = 0 }
	clear_array = global.EU_active_vote_supporters
	clear_array = global.EU_active_vote_rejecters
	every_country = {
		limit = { has_idea = EU_member }
		set_the_eu_council_delay = yes
		if = {
			limit = { has_country_flag = current_vote_influenced }
			clr_country_flag = current_vote_influenced
		}
	}
}

emergency_vote_clear = {
	set_variable = { global.EUU_recently_failed_vote = global.current_active_vote_disp }
	set_variable = { global.current_active_vote_disp = 0 }
	set_variable = { global.EU_active_vote_yes = 0 }
	set_variable = { global.EU_active_Vote_no = 0 }
	set_variable = { global.var_EUpopRatioNo = 0 }
	set_variable = { global.var_EUpopRatioYes = 0 }
	clear_array = global.EU_active_vote_supporters
	clear_array = global.EU_active_vote_rejecters
}

cleanup_european_union_voting_no = {
	set_global_flag = EU_qualified_majority_voting_NO
	set_variable = { global.EUU_recently_failed_vote = global.current_active_vote_disp }
	set_variable = { global.current_active_vote_disp = 0 }
	set_variable = { global.EU_active_vote_yes = 0 }
	set_variable = { global.EU_active_Vote_no = 0 }
	set_variable = { global.var_EUpopRatioNo = 0 }
	set_variable = { global.var_EUpopRatioYes = 0 }
	clear_array = global.EU_active_vote_supporters
	clear_array = global.EU_active_vote_rejecters
	every_country = {
		limit = { has_idea = EU_member }
		set_the_eu_council_delay = yes
		if = {
			limit = { has_country_flag = current_vote_influenced }
			clr_country_flag = current_vote_influenced
		}
	}
}

EU_show_display_effects_for_law = {
	custom_effect_tooltip = EU_show_display_effects_for_law_tt
	effect_tooltip = {
		if = { limit = { check_variable = { v = 101 } }
			add_ideas = EUU_cfr_eu
		}
		else_if = { limit = { check_variable = { v = 102 } }
			if = { limit = { has_idea = european_spirit }
				modify_timed_idea = { idea = european_spirit days = 600 }
			}
			else = {
				add_timed_idea = { idea = european_spirit days = 600 }
			}
		}
		else_if = { limit = { check_variable = { v = 103 } }
			if = { limit = { has_idea = european_spirit }
				modify_timed_idea = { idea = european_spirit days = 600 }
			}
			else = {
				add_timed_idea = { idea = european_spirit days = 600 }
			}
		}
		else_if = { limit = { check_variable = { v = 104 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU104_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 105 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU105_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 201 } }
			add_ideas = ECB_zero_interest_rate_policy
		}
		else_if = { limit = { check_variable = { v = 202 } }
			add_stability = 0.05
		}
		else_if = { limit = { check_variable = { v = 203 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU203_EP_agenda_additional
			add_ideas = euro_bonds
			if = {
				limit = { has_global_flag = EUU_european_debt_crisis }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					if = {
						limit = { has_idea = european_debt_crisis }
						remove_ideas = european_debt_crisis
					}
					if = {
						limit = { has_idea = european_debt_crisis }
						remove_ideas = EUU_national_dept_crisis_eu
					}
				}
			}
		}
		else_if = { limit = { check_variable = { v = 204 } }
			add_stability = 0.10
			if = {
				limit = { has_global_flag = EUU_european_debt_crisis }
				remove_ideas = european_debt_crisis
				every_country = {
					limit = {
						has_idea = EUU_national_dept_crisis_eu
					}
					activate_mission = troika_reforms
				}
			}
		}
		else_if = { limit = { check_variable = { v = 205 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU205_EP_agenda_additional
			add_ideas = euro_rescue_package
			if = {
				limit = { has_global_flag = EUU_european_debt_crisis }
				remove_ideas = european_debt_crisis
			}
		}
		else_if = { limit = { check_variable = { v = 206 } }
			add_ideas = fiscal_union
		}
		else_if = { limit = { check_variable = { v = 207 } }
			add_ideas = European_Economic_Government
		}
		else_if = { limit = { check_variable = { v = 208 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU208_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 301 } }
			add_to_tech_sharing_group = EU_Tech_Share
		}
		else_if = { limit = { check_variable = { v = 302 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU302_EP_agenda_additional
			modify_tech_sharing_bonus = { id = EU_Tech_Share bonus = 0.08 }
		}
		else_if = { limit = { check_variable = { v = 303 } }
			add_ideas = European_Defence_Fund
		}
		else_if = { limit = { check_variable = { v = 304 } }
			add_ideas = European_Security_Council
		}
		else_if = { limit = { check_variable = { v = 305 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU305_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 306 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU306_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 307 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU307_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 308 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU308_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 401 } }
			add_ideas = EUU_idea_gdpr
			remove_ideas = foreign_data_kraken
		}
		else_if = { limit = { check_variable = { v = 402 } }
			add_ideas = EU_copyright
			set_temp_variable = { party_index = 1 }
			set_temp_variable = { party_popularity_increase = -0.03 }
			set_temp_variable = { temp_outlook_increase = -0.03 }
			add_relative_party_popularity = yes
			set_temp_variable = { party_index = 6 }
			add_relative_party_popularity = yes
			set_temp_variable = { party_index = 14 }
			add_relative_party_popularity = yes
		}
		else_if = { limit = { check_variable = { v = 403 } }
			remove_ideas = asylum_shopping
			set_temp_variable = { party_index = 20 }
			set_temp_variable = { party_popularity_increase = 0.03 }
			set_temp_variable = { temp_outlook_increase = 0.03 }
			add_relative_party_popularity = yes
		}
		else_if = { limit = { check_variable = { v = 404 } }
			if = {
				limit = { has_global_flag = EUU_migrant_crisis_triggered }
				remove_ideas = Migrant_Crisis_Europe
			}
			add_ideas = relocation_asylum_seekers
			set_temp_variable = { party_index = 20 }
			set_temp_variable = { party_popularity_increase = 0.05 }
			set_temp_variable = { temp_outlook_increase = 0.05 }
			add_relative_party_popularity = yes
		}
		else_if = { limit = { check_variable = { v = 405 } }
			if = {
				limit = { has_global_flag = EUU_migrant_crisis_triggered }
				remove_ideas = Migrant_Crisis_Europe
			}
			add_ideas = EU_Turkey_deal
		}
		else_if = { limit = { check_variable = { v = 406 } }
			remove_ideas = relocation_asylum_seekers
			remove_ideas = EU_Turkey_deal
			add_ideas = European_Asylum_Agency
		}
		else_if = { limit = { check_variable = { v = 407 } }
			add_ideas = Frontex
		}
		else_if = { limit = { check_variable = { v = 408 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU408_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 601 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU601_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 602 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU602_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 603 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU603_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 605 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU605_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 606 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU606_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 607 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU607_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 608 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU608_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 609 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU609_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 610 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU610_EP_agenda_additional
		}
		else_if = { limit = { check_variable = { v = 611 } }
			custom_effect_tooltip = tooltip_EU_parliament_focus_EU611_EP_agenda_additional
		}
		else = {
			custom_effect_tooltip = EU_show_display_effects_for_law_no_effect_tt
		}
	}
}
